<p>Welcome to Adventure Game Studio! This new Windows Help version of the manual should help you get even more out of AGS. Enjoy!</p>
<h1 id="copyright-and-terms-of-use">Copyright and terms of use</h1>
<p>Copyright (c) 1999-2011 Chris Jones and 2011-2017 various contributors.</p>
<p>The software is provided under Artistic License 2.0 (http://www.opensource.org/licenses/artistic-license-2.0.php). Adventure Game Studio is an open source software, its source code is available at https://github.com/adventuregamestudio/ags.</p>
<p>THE SOFTWARE IS PROVIDED &#8216;AS-IS&#8217; AND WITHOUT WARRANTY OF ANY KIND, EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.</p>
<p>IN NO EVENT SHALL CHRIS JONES OR ANY OF THE CONTRIBUTORS BE LIABLE FOR ANY SPECIAL, INCIDENTAL, INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.</p>
<p>NO MONEY WHATSOEVER MAY BE CHARGED FOR ADVENTURE GAME STUDIO UNLESS EXPRESS WRITTEN PERMISSION IS GIVEN BY THE AUTHORS. IF YOU PAID FOR THIS, THE SELLER IS BREACHING THE TERMS OF DISTRIBUTION OF THIS APPLICATION.</p>
<p>AGS is an adventure game creation system. As such, it is provided to you in good faith by its authors. Neither Chris Jones nor any of the contributors can be held responsible for the contents of any works created with AGS, including but not limited to any which infringe on copyright, are libellous or contain offensive material. Please use AGS responsibly.</p>
<p>AGS allows user-made &#8220;Plugins&#8221; to be incorporated into games created by the system. These Plugins can access all standard Windows functionality and are therefore not protected from system functions as the scripting language is. Neither Chris Jones nor any of the contributors can be held responsible for any Plugins for AGS which you use in your game. Any problems with the Plugin should be addressed to its author.</p>
<p>TrueType font display uses ALFont by Javier Gonzalez and the Freetype project. Distributed under the terms of the Freetype Project license.</p>
<p>OGG Vorbis player is alogg by Javier Gonzalez, using the Ogg Vorbis decoder, which is available from http://www.xiph.org/ . Copyright (c) 2002, Xiph.org Foundation</p>
<p>OGG Theora player is APEG by Chris Robinson, using the Ogg Theora decoder, which is Copyright (C) 2002-2008 Xiph.Org Foundation and contributors.</p>
<p>MP3 player is almp3 v2.0.4, by Javier Gonzalez and the MPG123 team. It uses the mpg123 MP3 decoder, and again is distributed under the terms of the GNU Lesser General Public License version 2.1.</p>
<p>Copyright information on the various other modules AGS uses can be found in the section.</p>
<p>Pentium is a trademark of Intel corporation. Windows is a trademark or registered trademark of Microsoft corp.</p>
<h1 id="introduction">Introduction</h1>
<hr />
<p>Welcome to AGS!</p>
<p>Adventure Game Studio allows you to create your own point-and-click adventure games like the old Sierra and Lucasarts classics, but with modern features such as digital music and alpha blending.</p>
<p>AGS is based around an easy-to-use IDE, where you can set up all the parts of your game, and then add some script to process game events. Making a game has never been so productive!</p>
<p>To get started, .</p>
<h2 id="system-requirements">System Requirements</h2>
<p>To work with the Editor, you need following:</p>
<ul>
<li><p>Windows XP or higher</p></li>
<li><p>At least 128 Mb RAM</p></li>
<li><p>.NET 2.0 Framework</p></li>
<li><p>Microsoft Visual C++ 2008 Service Pack 1 Redistributable</p></li>
</ul>
<p>Note that games you create do <strong>NOT require .NET nor Visual C++ redistributable.</strong></p>
<p>Any games you create have at least these system requirements:</p>
<ul>
<li><p>Pentium or higher processor</p></li>
<li><p>64 Mb RAM</p></li>
<li><p>Windows 98, ME, 2000, XP, Vista, Seven with DirectX 5 or above</p></li>
<li><p>Supports all DirectX-compatible sound and video cards</p></li>
</ul>
<p>Depending on your game&#8217;s resolution and colour depth, you may have higher requirements. The processor required is as follows:</p>
<ul>
<li><p>320x200, 256-colour: Any Pentium-class system</p></li>
<li><p>640x400, 256-colour: 266 Mhz or above</p></li>
<li><p>800x600, 256-colour: 500 Mhz or above recommended</p></li>
<li><p>320x200, 16-bit colour: 233 Mhz or above</p></li>
<li><p>640x400, 16-bit colour: 500 Mhz system minimum, may need faster if you use large objects</p></li>
<li><p>800x600, 16-bit colour: 600 Mhz system minimum, may need faster if you use large objects</p></li>
<li><p>320x200, 32-bit colour: 300 Mhz or above</p></li>
<li><p>640x400, 32-bit colour: 700 Mhz system minimum, may need faster if you use large objects</p></li>
<li><p>800x600, 32-bit colour: 900 Mhz system minimum, may need faster if you use large objects</p></li>
</ul>
<p>These requirements are not an exact science though - game speed is affected by many factors, including how many objects/characters are on the screen, whether background music is playing, the complexity of your scripts, and more. The best way to determine the requirements of your game are to test it on different computer configurations.</p>
<h1 id="the-run-time-engine">The run-time engine</h1>
<p>The engine (also called the &#8220;interpreter&#8221;) is what runs your game and is what the end player will use.</p>
<p>If you are using the default interface, then you use the right mouse button to cycle between the available &#8216;modes&#8217;, and the left button to use the current mode on the mouse position. You can also move the mouse to the top of the screen to bring up the icon bar where you can directly select a mode. To exit the engine, press Ctrl-Q. You can save your game position using F5 and restore with F7.</p>
<p>The controls described above work with the default setup; however, you can customize your game to use a different interface and shortcut keys.</p>
<h2 id="the-demo-game">The demo game</h2>
<p>The first thing you&#8217;ll probably want to do is to run the demo game. This game will try to show you some of what AGS can do.</p>
<p>To run the demo, choose the &#8220;Open the Demo Game&#8221; option from the AGS folder in your start menu. If you&#8217;re looking for the files, they&#8217;re located in the All Users Application Data folder (this is for compatibility with the security filters in Windows Vista and later versions).</p>
<p><strong>NOTE: The demo game is currently under development. It has various unfinished or unimplemented areas.</strong></p>
<h2 id="graphics-driver-selection">Graphics driver selection</h2>
<p>AGS has two different graphics drivers when run on Windows &#8211; DirectDraw and Direct3D.</p>
<p>DirectDraw is the &#8216;classic&#8217; software graphics driver, that AGS has used ever since the initial Windows version was released. It&#8217;s perfectly fine for simple games that don&#8217;t use many large sprites, tinting or alpha blending. It&#8217;s also quite fast at doing RawDrawing to the screen.</p>
<p>Direct3D is a new, hardware accelerated graphics driver. It uses the Direct3D 9.0 to render the game in a fully hardware-accelerated environment. This means that the game will run a lot faster if you use features such as alpha blending and tinting, which are quite slow to perform in software mode. However, with Direct3D doing RawDraw operations can be quite slow, and the driver won&#8217;t work on all graphics cards.</p>
<p>No matter which you choose as your default graphics driver, the player can always run the Setup program and switch to using the other driver if they are having problems on their PC.</p>
<p><strong>System Requirements</strong></p>
<p><strong>DirectDraw: any Windows-based PC with DirectX 5 or later installed ILBRK </strong>Direct3D: any Windows-based PC with DirectX 9.0 installed and a graphics card designed for DirectX 8.1 or later (most cards manufactured from 2003 onwards).****</p>
<p>If you get the error message &#8220;Graphics card does not support Pixel Shader 1.4&#8221; on startup, this indicates that your graphics card is too old to run with the Direct3D driver. You should choose the DirectDraw driver instead.</p>
<p>See Also:</p>
<h2 id="run-time-engine-setup">Run-time engine setup</h2>
<p>The engine Setup program allows the player to customize certain game settings.</p>
<p><strong>NOTE: currently setup program is featured only for Windows.</strong></p>
<p>The options in setup are divided into two parts: common and advanced. Advanced options could be accessed by pressing &#8220;Advanced&#8221; button.</p>
<p><strong>Graphics settings</strong></p>
<p>Lets player choose a graphics driver. Currently supported are DirectX 5 (old driver) and Direct3D 9 (newer and faster driver with hardware acceleration).</p>
<p>If checked, the game will be run in windowed mode, as opposed to fullscreen.</p>
<p>Lets choose a fullscreen display mode (otherwise shows the approximate size of window the game will be running in). The list of modes depends on graphic card and system capabilities.</p>
<p>Determines the method game will be scaled (when required):</p>
<p><strong>None. The game will be shown in its native resolution. Note that low-resolution games will be running in a tiniest window on modern monitors, so this choice is more suitable for high-resolution games.</strong></p>
<p><strong>Max round multiplier. The game will be scaled up using a maximal round integer (2, 3, 4, etc) multiplier with which it still fits inside the screen.</strong></p>
<p><strong>Stretch to fit screen. The game will be stretched to fill whole screen. Note that if the game&#8217;s native aspect ratio is different from screen one&#8217;s, the game image will appear deformed.</strong></p>
<p><strong>Stretch to fit screen (preserve aspect ratio). The game will be stretched to screen borders while respecting game&#8217;s native aspect ratio (width/height proportions). This ensures that game image will always look correct, but may cause black borders appear at the left &amp; right or top &amp; bottom sides of the screen.</strong></p>
<p>Here player may choose a graphics scaling filter. Filter type defines the method of scaling (nearest-neighbour is most simple one). Some of the filters (notably Hqx filter) are restricted to which scaling multiplier they may use; if the filter own scaling is not enough to resize the game, the most basic image scaling method will be applied additionally. The list of available filters depend on graphics driver selection.</p>
<p><strong>Gameplay settings</strong></p>
<dl>
<dt>Game language</dt>
<dd><p>Here player may choose one of the available game translations.</p>
</dd>
</dl>
<p><strong>Advanced graphics options</strong></p>
<dl>
<dt>Vertical sync</dt>
<dd><p>This option enables vertical synchronisation mode, which reduces &#8220;tearing&#8221; effect on game image, but may decrease the game running speed.</p>
</dd>
<dt>Use 85 Hz display</dt>
<dd><p>This option sets the monitor refresh rate to 85 Hz to run the game, which eliminates flicker. However, this does not work on all monitors, and not at all on flat panel displays, which is why it is disabled by default.</p>
</dd>
<dt>Smooth scaled sprites</dt>
<dd><p>This option will apply anti-aliasing to scaled characters, in order to give a smoother look to the resizing. This can slow down the game though, so it is off by default.</p>
</dd>
<dt>Downgrade 32-bit graphics to 16-bit</dt>
<dd><p>This option is only available for 32-bit games. It allows people with slower PCs to choose to play the game at 16-bit instead, in order to boost performance. If they use this, the graphical quality will reduce, but it should at least allow them to play the game at a decent speed.</p>
</dd>
</dl>
<p><strong>Sound options</strong></p>
<dl>
<dt>Digital sound</dt>
<dd><p>Here player may choose the digital audio driver, or disable digital sound completely.</p>
</dd>
<dt>MIDI music</dt>
<dd><p>Here player may choose the MIDI music playback method, or disable MIDI music completely.</p>
</dd>
<dt>Use voice pack is available</dt>
<dd><p>When checked, this option enables voice speech in game (where available).</p>
</dd>
</dl>
<p><strong>Mouse options</strong></p>
<dl>
<dt>Auto lock to window</dt>
<dd><p>If this option is enabled, the mouse will be locked inside game window whenever player clicks on it or switches into game. The locked mouse cannot leave game window, making it impossible to switch out from the game by mistake (by clicking on desktop, for example). Naturally, this option only has importance if game is run in windowed mode; when in fullscreen the mouse is always locked.</p>
</dd>
<dt>Mouse speed</dt>
<dd><p>This slider allows player to set up mouse cursor speed in game. It should be noted that this parameter is only applied if the game is run in fullscreen mode.</p>
</dd>
</dl>
<p><strong>Other advanced settings</strong></p>
<dl>
<dt>Sprite cache max size</dt>
<dd><p>This option limits the maximum amount of memory that the game will use for its sprite cache. Sprite cache is used to keep a partition of all the game sprites loaded to the memory, thus reducing loading times between rooms and preventing slowdowns during game play. Of course, higher values make the game use more memory. Usually only high-resolution games with long animations need to have this value increased.</p>
</dd>
<dt>Custom game saves path</dt>
<dd><p>When unchecked, the game will store its files - saved games, and custom runtime data - in the default Windows folders: &#8220;C:/Users/&lt;Username&gt;/Saved Games/&lt;Game Title&gt;&#8221; and &#8220;C:/Program Data/Adventure Game Studio/&lt;Game Title&gt;&#8221; respectively. Players may enable this option and define their own location to store game files.</p>
</dd>
</dl>
<h1 id="tutorial">Tutorial</h1>
<p>This section will introduce you to the AGS by leading you through how to create a simple game.</p>
<h2 id="starting-off">Starting off</h2>
<p>The tutorial has now been updated for AGS 3.0. Follow the links below to run through it.</p>
<p>For the latest version of the tutorials, always check the AGS website.</p>
<h2 id="setting-up-the-game">Setting up the game</h2>
<p>Now that you know how to create a room, it&#8217;s time to set up the game-wide settings. These include inventory items, sprite graphics, palette setup and other things which do not depend on individual rooms.</p>
<h3 id="palette-setup">Palette setup</h3>
<p>The first thing you need to do when you create a new game is to decide whether you want to use 8-bit (palette-based) colour or 16-bit (hi-colour). If you want to use 16-bit colour, you can still use 256-colour backgrounds and sprites if you want to, but the engine will only run in a 16-bit colour resolution, thus slowing it down.</p>
<p>If you want to use 8-bit (because it runs faster), you need to set up the palette. This is because all sprite and background scene imports rely on the palette setup to be the same. You <strong>CANNOT use hi-colour sprites or backgrounds in a 256-colour game.</strong></p>
<p>You set your chosen colour depth by opening the General Settings pane and adjusting the Colour Depth setting near the top of the list.</p>
<p>Now, choose the &#8220;Colours&#8221; pane. Here you will see the 256-colour palette displayed in a grid. Most of the slots are marked &#8220;X&#8221; - these are the slots reserved for the background pictures, and will be different in each room. The other colours will be as they look here for the entire game. These fixed colours allow things like the main character graphics, which must be displayed on more than one screen, to work.</p>
<p>If you want, you can assign more or less colours to the backgrounds. To toggle the background assignment on/off, click on the slot, then check the &#8220;This colour is room-dependant&#8221; box to swap the slot&#8217;s status.</p>
<p><strong>IMPORTANT NOTE: <em>You must set up the palette as you want it before you start making your game - if you change it later, you will have to re-import all the sprites and background scenes.</em></strong></p>
<p>You can select multiple colour slots by clicking on the first slot, then shift-clicking on the last slot in the range you want to select. You can then toggle the background status of all the selected slots at once.</p>
<p>You can right-click in the palette grid to export the entire palette to a .PAL or PCX file which you can then use to read back into the Editor in a different game. If you choose to export to a pcx file, then a screen shot of the Palette Editor will be saved as the picture. This way you can see all the game-wide colours in the file.</p>
<p>The &#8220;Replace palette&#8221; option replaces the palette entries with those entries from the PAL or PCX file you choose. It can read standard 768-byte PAL files, SCI palette resources (renamed to extension .pal) and JASC PSP palette files.</p>
<h3 id="inventory">Inventory</h3>
<p>Most adventure games allow the player to carry a set of objects, which he can then use to solve puzzles. Adventure Game Studio makes this inventory easy for you to manage.</p>
<p>Every inventory item which the player may carry during the game at one time or another is listed under the &#8220;Inventory items&#8221; node. Here, each item has a number and a script name which you use in scripts to identify the object. To create a new item, right-click on the &#8220;Inventory items&#8221; node.</p>
<p>Double-click on an inventory item to open it up. On the left you&#8217;ll see the graphic used for the object in the inventory window. To change this, select the &#8220;Image&#8221; entry in the property grid on the right, and click the &#8220;&#8230;&#8221; button.</p>
<p>The last thing to do with the inventory items is to define their events: what happens when the player manipulates them in the inventory window. Click the &#8220;Events&#8221; button (the lightning bolt button at the top of the property grid), which brings up a list which works identically to the hotspot events. The available events are described in the reference section.</p>
<p><em>NOTE: Each character in the game carries their own set of inventory items. This means, if you want to create a game like Day of the Tentacle, where the player can control three different characters, each character will have a separate inventory.</em></p>
<p>You have two choices about how the inventory is displayed to the player &#8211; a built-in inventory window to get you started, and support for custom inventory windows when you&#8217;re ready to make your own.</p>
<p>The default option is the Sierra-style pop-up inventory window, which is popped up by clicking on the Inventory icon on the icon bar. You can also have the current inventory item displayed in its own button on the icon bar by creating a button on the GUI and setting its text to (INV) which stretches the item picture to the button size, or (INVNS) which draws the inventory item picture straight onto the button with no resizing. Finally, (INVSHR) , probably the best option, will draw it at actual size if it will fit, or shrink it if not.</p>
<p>The other option is a custom inventory window. To use this, you will need to edit the GUI to add it, so I will explain this later on. While you are starting off with AGS, it is recommended to use the supplied standard Sierra-style inventory window.</p>
<p>Finally, you may have noticed a &#8220;Hotspot Marker Settings&#8221; frame at the top of the Inventory pane. This allows you to switch on an option so that when the selects an inventory item, the mouse cursor for it will have a dot and mini-crosshair drawn on it, to show the player where the hotspot is. You can enter the colour for the centre dot and also for the surrounding 4 pixels.</p>
<h3 id="importing-your-own-sprite-graphics">Importing your own sprite graphics</h3>
<p>When you were choosing the graphics for the object earlier in this tutorial, you probably noticed that most of the graphics available didn&#8217;t look up to much. This is no problem, because you can import your own graphics using the Sprite Manager.</p>
<p>Go to the <strong>Sprites pane in the editor. Here, you will see the complete sprite set for the game. There are two ways to import your graphics - either overwrite an existing slot with your graphic, or create a new slot for it.</strong></p>
<p>To overwrite an existing sprite, right-click the sprite and select &#8220;Replace sprite from file&#8221;. To import a new slot, right-click on the background to the window and choose &#8220;Import new sprite&#8221;.</p>
<p>The graphic you choose to import must be at the same colour depth as your game (ie. if you are using hi-colour backgrounds, your sprites must be hi-colour, and vice versa). AGS will attempt to convert the image if possible, but if your game is 256-colour then the results of downgrading a hi-colour image can be poor.</p>
<p>Then, the Import Sprite window will appear. Here, you need to decide which portion of the image will be imported. You do this by right-clicking and dragging in the image, which will produce a yellow rectangle showing the selection. Once you are happy with it, left-click to import. Alternatively, you can import the entire image with the &#8220;Import whole image&#8221; button.</p>
<p>**</p>
<p>NOTE (256-colour only): You may well find that the colours on your graphic look slightly strange in the AGS Editor. This is because the sprites are only allocated, by default, the first 41 of the palette colours (see the ), so your graphic will be remapped to this much smaller palette. If you find that many of your imported sprites look strange, you can increase the number of colours assigned to sprites, at the expense of background colours (again see the section above for information on how to do this).</p>
<p>If your sprite will only be used in one room then alternatively you can use the &#8220;use background palette&#8221; option, which will remap your graphic to the palette of the room currently loaded, giving much better results. Note, however, that if you do this, and then try and use the sprite on another screen, its colours will most likely be screwed up. To use the room palette, check the &#8220;use bkgrnd pal&#8221; check-box. Make sure to un-check this box before you import any other sprites.</p>
<p>NOTE: The transparent colour used by AGS is palette index 0 (for 256-colour sprites) and RGB (255,0,255) for hi-color. Any pixels you draw on imported sprites in these colours will be transparent.</p>
<p>You can group imported sprites into folders. This prevents the main sprite list from becoming too long. By default, the Sprite Manager displays the Main folder, which contains some graphics and a sub-folder called &#8220;Defaults&#8221;. Folders work the same way as Windows folders. Right-click on a folder in the tree to rename it or make a sub-folder.</p>
<p>You can delete a folder by right-clicking on it and selecting the &#8220;Delete&#8221; option; beware though that <strong>this will also delete all the sprites in the folder.</strong></p>
<p>* <em>NOTE: A few people have experienced problems when importing from clipboard, in that the image colours get reversed (red becomes blue, blue becomes red, and so on) when they are running Windows at 24-bit or 32-bit colour. If this happens to you, there are two solutions: (a) turn down your desktop colour depth to 16-bit to run the AGS Editor, or (b) import your sprites from files rather than the clipboard.</em></p>
<p><strong>Tiled sprite import</strong></p>
<p>You may have noticed a checkbox called &#8220;Tiled sprite import&#8221;. Some people find this a useful way of importing many frames of a character&#8217;s animation at once.</p>
<p>In order for this to work, you need to have all your sprites lined up on your source bitmap at even intervals. Then, use the &#8220;Import from file&#8221; option and import it as usual. Check the &#8220;Tiled sprite import&#8221; box, and select the upper-left frame.</p>
<p>When you click the left mouse button, the selection rectangle will become un-filled and now you can drag the mouse to define how many frames to import - they&#8217;ll all be enclosed by selection rectangles. Once you have the correct number, click the left button again and they will all be imported.</p>
<p><strong>Alpha blended sprites</strong></p>
<p>AGS supports alpha blended sprites if your game is 32-bit colour. In this case, you need to import a PNG image with an alpha channel (you cannot paste alpha-blended images from the clipboard).</p>
<p>When you do so, AGS will prompt you asking whether you want to use the image&#8217;s alpha channel or not. If you select Yes, then the sprite will be drawn alpha blended in the game if it is used for a character, object, mouse cursor or GUI.</p>
<p>Note that if you use alpha blending, any overall transparency that you set (such as Character.Transparency, Object.Transparency, GUI.Transparency) will be ignored.</p>
<p><strong>NOTE: Currently, alpha blended sprites cannot be antialiased, so if you have the Anti Alias Sprites option turned on in Setup, it will not be applied to alpha-blended characters.</strong></p>
<h3 id="introduction-sequences">Introduction sequences</h3>
<p>You can easily add intro, outro and cutscene sequences to your game. There is no specific function to do these, but using the provided animation and script commands you can create almost anything you might need.</p>
<p>Normally, the game will start in room 1. This is defined by the starting room number of the player character. To change it, open up the player character&#8217;s Character pane, and change the StartingRoom number in the property grid.</p>
<p><em>TIP: The starting room facility is also useful when testing your game - you can make the game start in any room, at the point where you are testing it, rather than having to keep playing the game through to get there.</em></p>
<p>Cutscenes are created using the normal animation script commands, such as Character.Walk, Object.SetView, and so forth. I would suggest you leave this until you are more comfortable with AGS, and have some experience of how to use these functions.</p>
<h3 id="animations">Animations</h3>
<p>In most games you will use some sort of animation during the game, whether it be a flag waving in the breeze or the player bending over to pick something up. The term &#8220;animation&#8221; refers to the ability to change the look of, and move, objects.</p>
<p>Animations in AGS are managed using Views. A &#8220;view&#8221; is a set of one or more &#8220;loops&#8221;. A loop is a set of frames which, when put together, give the effect of movement. Each frame in the view can be set a graphic and a speed.</p>
<p>Go to the editor&#8217;s &#8220;Views&#8221; node, right-click it and select the &#8220;New view&#8221; option to create us a new, empty view. Double-click the new view to open it. Each loop is displayed horizontally with its number at the left hand side, frames going out to the right. To add a frame, click the grey &#8220;New frame&#8221; button. To delete a frame, right-click it.</p>
<p>To change a frame&#8217;s graphic, double-left-click it. The sprite list screen will be displayed (you may remember this from the Object graphic selection) where you can choose the graphic you want to use for this frame.</p>
<p>Note that for walking animations, the first frame in each loop is reserved for the standing frame, and when walking it will only cycle through from the second frame onwards.</p>
<p>You select a frame by left-clicking it &#8211; when you do so, the property grid will update with information about the frame. One of these settings is called &#8220;Delay&#8221;, which is the frame&#8217;s <strong>relative speed. The larger the number, the longer the frame stays (ie. the slower it is). When the animation is run, an overall animation speed will be set, so the actual speed of the frame will be: overall_speed + frame_speed . Note that you can use negative numbers for the frame delay to make it particularly fast, for example setting it to -3 means that the frame will stay for hardly any time at all. ILBRK Animation speed is specified in Game Loops (ie. animation speed 4 will show the frame for 4 game loops - at 40fps, that would be 0.1 seconds).</strong></p>
<p>The &#8220;Sound&#8221; propery allows you to enter a sound number that will be played when this frame becomes visible on the screen. This is especially useful for footstep sounds.</p>
<p>You run an animation by using the script animation commands, which will be explained in detail later. Briefly, to animate an object, you first of all need to set the object&#8217;s view to the correct view number (use the Object.SetView script command), and then use the Object.Animate script command to actually start the animation.</p>
<h3 id="characters">Characters</h3>
<p>A character is similar to an object, except that it can change rooms, maintain its own inventory, and take part in conversations (more on these later). It can also have its own custom animation speed and movement speed.</p>
<p>Go to the &#8220;Characters&#8221; node in the main tree. You will see under it a list of all the characters in the game. To create a new character, right-click the &#8220;Characters&#8221; node and choose the &#8220;New character&#8221; option.</p>
<p>You will see that there are a lot of options which you can set for each character. The most immediately obvious one is the &#8220;Make this the player character&#8221; button, which allows you to change which character the player will control at the start of the game. When the game starts, the first room loaded will be this character&#8217;s starting room.</p>
<p>The rest of the options are hidden away in the property grid on the right. Some of them are described below:</p>
<p>The &#8220;UseRoomAreaScaling&#8221; option allows you to specify whether this character will be stretched or shrunk in scaling areas of the screen. You might want to disable this if you have a character who always stands still in the same place, and you want the graphics on-screen to be the same size as you drew them, even though he is standing on a scaled area.</p>
<p>The &#8220;Clickable&#8221; option tells AGS whether you want the player to be able to click on the character. If Clickable is enabled, then the character will be interactable, like the way things worked in Sierra games. If it is not enabled then the character works like the main character did in Lucasarts games - if you move the cursor over him or click to look, speak, etc, then the game will ignore the character and respond to whatever is behind him.</p>
<p>To set which room this character starts in, change the &#8220;StartingRoom&#8221; property. You can set the character&#8217;s location within this room by using the &#8220;StartX&#8221; and &#8220;StartY&#8221; properties to type in the X,Y co-ordinates you want him to start at. These co-ordinates define where the middle of his feet will be placed.</p>
<p>The &#8220;NormalView&#8221; is where you set what the character looks like. You must create a view in the , and this view must have either 4 or 8 loops. If you use 4 loops, then when walking diagonally the closest straight direction is used for the graphics. Each loop is used for the character walking in one direction, as follows:</p>
<pre><code> Loop 0 - walking down (towards screen)
 Loop 1 - walking left
 Loop 2 - walking right
 Loop 3 - walking up (away from screen)
 Loop 4 - walking diagonally down-right
 Loop 5 - walking diagonally up-right
 Loop 6 - walking diagonally down-left
 Loop 7 - walking diagonally up-left</code></pre>
<p>To change the rate at which the character animates, change the Animation Speed box. Here, a smaller number means faster animation. Note that this does NOT effect the speed at which the character actually moves when walking.</p>
<p><strong>NOTE: The first frame in each loop is the standing still frame. When walking, the game will cycle through the rest of the frames in the loop.</strong></p>
<p>The &#8220;MovementSpeed&#8221; option allows you to control how fast the character moves when walking. Here, a larger number means he walks faster. If you find that a movement speed of 1 is still too fast, you can use negative numbers (eg. -3) which will move even more slowly. The lower you go, the slower the movement speed.</p>
<p>The &#8220;SpeechColor&#8221; option specifies which colour is used for the text when this character is talking. It effects all messages that are said by this character. You can find out the colour for each number by going to the &#8220;Colours&#8221; pane.</p>
<p>The &#8220;IdleView&#8221; option allows you to set an idle animation for the character. To do this, create a new view, with one or more loops of the character idle (eg. smoking, reading a book, etc). Then, set the &#8220;Idle view&#8221; to this view number. If the player stands still for 20 seconds (you can change the timeout with the Character.SetIdleView script function), then the current loop from the idle view will be played.</p>
<p>The &#8220;ScriptName&#8221; property sets the name by which the character will be referred to in scripts and in conversation scripting. The difference from the RealName of the character is that the script name may only contain letters A-Z and numbers 0-9 (the first character must be a letter, however). The convention in AGS is that character script names start with a lower case &#8220;c&#8221;.</p>
<p>To set what happens when the player interacts with the character, click the &#8220;Events&#8221; button (this is the lightning bolt button at the top of the property grid). You will be presented with the events list; select an event and press the &#8220;&#8230;&#8221; button to allow you to enter some script to handle the event.</p>
<p>You can also set a talking view for the character. To set one, use the &#8220;SpeechView&#8221; property. If you set a talking view, then that view will be used to animate the character while they are speaking. You should generally have about 2-3 frames in each loop (the loops are used for the same directions as in the main view).</p>
<p>There is also an available &#8220;Blinking view&#8221;. This is used to play intermittent extra animations while the character is talking. You may want to use this for effects such as blinking (hence the name). If you set a view here, it will play intermittently while the character talks (it is drawn on top of the normal talking view). The default time between it playing is 3-4 seconds, but you can change this with the Character.BlinkInterval script property.ILBRK <strong>NOTE: the blinking view is currently only supported with sierra-style speech.</strong></p>
<p>&#8220;UseRoomAreaLighting&#8221; allows you to tell AGS whether this character will be affected by light and tint levels set on room regions.</p>
<p>If you disable &#8220;TurnBeforeWalking&#8221;, it will override the General Setting for turning and tell AGS not to turn this particular character around on the spot before they move.</p>
<p>&#8220;Diagonal loops&#8221; specifies that loops 4-8 of the character&#8217;s view will be used for the four diagonal directions. If this option is not enabled, the character will only face 4 ways, and you can use loops 4-8 for other purposes.</p>
<p>&#8220;Adjust speed with scaling&#8221; modifies the character&#8217;s walking speed in line with their zoom level, as set on the walkable areas.</p>
<p>&#8220;Adjust volume with scaling&#8221; modifies the volume of any frame-linked sounds on the character&#8217;s view (eg. footstep sounds) with their zoom level, as set on the walkable areas.</p>
<p>&#8220;Solid&#8221; specifies that this character is solid and will block other characters from walking through it. Note that <strong>both characters must be solid in order for them to block one another.</strong></p>
<p>AGS allows you to export your characters to a file, and then import the file into a different game - so you can share the same main character between games, or create one for distribution on the internet. Right-click on the character and choose &#8220;Export character&#8221;. The entire character setup and graphics will be exported to the file, including the character&#8217;s walking and talking animations. To import the character into a different game, load it up, right-click the &#8220;Characters&#8221; node and choose &#8220;Import Character&#8221;. The file selector appears, where you find the CHA file which you exported earlier. A new character slot will be created and all the settings imported.</p>
<p><em>NOTE: Because importing always creates a new slot, you cannot use it to overwrite an existing character.</em></p>
<h3 id="conversations">Conversations</h3>
<p>While the old Sierra games were mainly based on action and not talking, the Lucasarts games took the opposite approach.</p>
<p>If you want to create a game with conversations where the player can choose from a list of optional topics to talk about, you can now with the new Dialog Editor. Go to the &#8220;Dialogs&#8221; node.</p>
<p>Conversations are made up of Topics. A &#8220;topic&#8221; is a list of choices from which the player can choose. You may have up to 30 choices in a topic. However, not all of them need to be available to the player at the start of the game - you can enable various options for conversation once the player has said or done other things. For example, when you talk to the man in the demo game, the first option is just &#8220;Hi&#8221;. Once he has said this, however, a new option becomes available.</p>
<p>The Dialog Editor is quite self-explanatory. Double-click a dialog topic to open up its window. You&#8217;ll see the list of options for the topic on the left, and the dialog script on the right. Each option has a couple of checkboxes to its right:</p>
<ul>
<li><p>The &#8220;Show&#8221; column specifies whether that option is available to the player at the start of the game.</p></li>
<li><p>The &#8220;Say&#8221; column defines whether the character says the option when the player clicks it. The default is on, but if you want options describing the player&#8217;s actions rather than the actual words, you may want to turn this column off for that dialog.</p></li>
</ul>
<p><strong>Dialog scripts</strong></p>
<p>You control what happens when the player chooses an option by editing the script on the right. This is called the <strong>dialog script, and is a simplified version of scripting streamlined for conversations.</strong></p>
<p>With a newly created dialog topic, all you will see in the script is a number of lines starting with an &#8216;@&#8217; symbol. In the dialog script, these signify the starting points of the script for each option. For example, when the player clicks on option 3, the script will begin on the line following &#8220;<span class="citation">@3</span>&#8221;. There is also a special starting point, called &#8220;<span class="citation">@S</span>&#8221;. This is run when the conversation starts, before any choices are given to the player. This could be used to display a &#8220;Hello&#8221; message or something similar.</p>
<p>To display some speech, you begin the line with the character&#8217;s SCRIPT NAME (not full name), followed by a colon, then a space, and then what you want them to say. For example, if my main character&#8217;s script name is EGO, I would write</p>
<pre><code>ego: &quot;I am very happy today because it&#39;s my birthday.&quot;</code></pre>
<p>The character name is used by the system to choose the correct colour for the text.</p>
<p><strong>IMPORTANT: Do </strong>NOT include the &#8220;c&#8221; at the start of the character&#8217;s script name here.****</p>
<p>You can also use the special character name &#8220;narrator&#8221;, which displays the text in the pop-up message box instead of as speech text; and the alias &#8220;player&#8221;, which will say it as the current player character - useful if you don&#8217;t know which character the player will be controlling when they speak the conversation.</p>
<p>If you just use <code>...</code> as the text for a character to say, the game will pause briefly as if they are stopping to think, and nothing will be displayed.</p>
<p>To signal the end of the script for this option, place a &#8220;return&#8221; command on the last line of it. For example,</p>
<pre><code>@1
ego: &quot;Hello. How are you?&quot;
narrator: The man looks you in the eye.
otherman: ...
otherman: &quot;I&#39;m fine.&quot;
return</code></pre>
<p>&#8220;return&#8221; tells AGS to go back and display the choices again to the player. If you use &#8220;stop&#8221; instead of return, then the conversation is ended. Alternatively, you can use &#8220;goto-dialog&#8221; or &#8220;goto-previous&#8221;, which abort the current dialog script and transfer control to the new dialog.</p>
<p><strong>NOTE: Do </strong>NOT indent these lines with spaces or tabs. Indented lines signify that AGS should interpret the line as a normal scripting command rather than a dialog scripting command.****</p>
<p>The dialog commands available are:</p>
<ul>
<li><p><strong>goto-dialog X ILBRK Switches the current topic to Topic X, and displays the current list of choices for that topic.</strong></p></li>
<li><p><strong>goto-previous ILBRK Returns to the previous topic that this one was called from. If the dialog started on this topic, then the dialog will be stopped.</strong></p></li>
<li><p><strong>option-off X ILBRK Turns option X for the current topic off, meaning it won&#8217;t be displayed in the list of choices next time.</strong></p></li>
<li><p><strong>option-off-forever X ILBRK Turns option X off permanently. It will never again be displayed, not even if an &#8220;option-on&#8221; command is used.</strong></p></li>
<li><p><strong>option-on X ILBRK Turns option X for the current topic on, including it in the list of choices to the player next time they are displayed.</strong></p></li>
<li><p><strong>returnILBRK Stops the script and returns to the list of choices.</strong></p></li>
<li><p><strong>stop ILBRK Stops the conversation and returns the player to the game.</strong></p></li>
</ul>
<p>For an example of a dialog script, load the demo game into the editor and look at the script for its topic 0.</p>
<p><strong>Using scripting commands in dialogs</strong></p>
<p>Often the provided dialog scripting commands won&#8217;t be enough for what you want to do in the dialog. You might want to give the player an inventory item or add some points to their score, for example.</p>
<p>AGS now lets you put normal scripting commands in your dialog script, by indenting the line with spaces or tabs. For example:</p>
<pre><code>@1
ego: &quot;Hello. How are you?&quot;
narrator: The man looks you in the eye.
  player.AddInventory(iKey);
  Display(&quot;This line is displayed from a normal script command&quot;);
otherman: &quot;I&#39;m fine.&quot;
return</code></pre>
<p>Here, you can see dialog script commands being used, but also then a couple of normal scripting commands have been inserted, on indented lines.</p>
<p>When working with dialog scripts, the <strong>this keyword allows you to access the currently running dialog.</strong></p>
<p>If you want to conditionally break out of the dialog script, the special tokens <code>RUN_DIALOG_GOTO_PREVIOUS</code>, <code>RUN_DIALOG_RETURN</code> and <code>RUN_DIALOG_STOP_DIALOG</code> are available which you can <code>return</code> from inside a script block. For example:</p>
<pre><code>@1
ego: &quot;Hello. How are you?&quot;
narrator: The man looks you in the eye.
  if (player.HasInventory(iKey)) {
    player.Say(&quot;Actually, I&#39;d better go.&quot;);
    return RUN_DIALOG_STOP_DIALOG;
  }
otherman: &quot;Here&#39;s a key for you.&quot;
return</code></pre>
<p><strong>Parser input</strong></p>
<p>You&#8217;ll notice in the dialog editor, the property grid has an option called &#8220;ShowTextParser&#8221;. If you enable this, a text box will be displayed below the predefined options in the game, which allows the player to type in their own input.</p>
<p>If they type in something themselves, then the dialog_request global script function will be run, with its parameter being the dialog topic number that the player was in.</p>
<p>AGS automatically calls ParseText with the text they typed in before it calls dialog_request, so you can use Said() calls to respond. See the section for more info.</p>
<h3 id="game-options">Game options</h3>
<p>The Game Settings pane contains a list of all the various overall options that you can set for your game.</p>
<p>Note that some things listed here are explained later in the documentation, so if you don&#8217;t understand one of the items in this list, come back to it later.</p>
<p>Most of these options can be changed at runtime with the script command SetGameOption.</p>
<ul>
<li><p><strong>Debug Mode - whether the debug keys are active. When debug mode is on, you can press Ctrl-X to teleport to any room, Ctrl-S to give all inventory items, Ctrl-A to display walkable areas on the screen, and Ctrl-D to display statistics about the current room. When debug mode is off, these do nothing. See the section for more.</strong></p></li>
<li><p><strong>Play sound on score - controls whether a sound effect is played when the player scores points. If so, you can set the sound number, which will play SOUNDx.WAV (or SOUNDx.MP3), where X is the number you set.</strong></p></li>
<li><p><strong>Walk to hotspot in Look mode - controls whether the player will walk to &#8220;walk-to&#8221; spots when the player looks at the hotspot. Normally he only walks on use, speak and use-inv.</strong></p></li>
<li><p><strong>Dialog options on GUI - controls where the player&#8217;s options for dialog are displayed. If this option is not checked, then in a conversation, the options will be displayed at the bottom of the screen. If you check this box, then instead the options will be displayed on the GUI you specify.</strong></p></li>
<li><p><strong>Use &#8220;anti-glide&#8221; mode - you may notice that, as the character walks, it can seem as if he is gliding, especially if you have a slow animation speed setting. When anti-glide mode is on, the man&#8217;s position is only updated when the frame of animation changes. You will need to increase each character&#8217;s walking speed if you use this option.</strong></p></li>
<li><p><strong>Text windows use GUI - allows you to customize the standard text window appearance in the game, using the specified interface element. See for more information.</strong></p></li>
<li><p><strong>Pixel gap between options - defines the gap between the options displayed to the player in a conversation. Normally this is 0, which means the options are right below each other. Changing it to 1 or 2 can make the option display look less cluttered; it&#8217;s a matter of personal preference.</strong></p></li>
<li><p><strong>Skip Speech - determines how and whether the player can skip speech in-game. This can be set to allow the mouse and/or keyboard, or neither, to skip speech in the game.</strong></p></li>
<li><p><strong>When interface disabled - determines what happens to buttons on your GUIs while the game interface is disabled (eg. during a cutscene).</strong></p></li>
<li><p><strong>GUI alpha rendering style - determines which rendering method to use in 32-bit games when a GUI Control is drawn over GUI. The &#8220;Proper alpha belnding&#8221; choice is meant for full alpha blending support, other options exist for compatibility with older versions of AGS only.</strong></p></li>
<li><p><strong>Sprite alpha rendering style - determines which rendering method to use in 32-bit games when an image is drawn over . The &#8220;Proper alpha belnding&#8221; choice is meant for full alpha blending support, &#8220;Classic&#8221; style exists for compatibility with older versions of AGS only.</strong></p></li>
<li><p><strong>Always display text as speech - if you select this option, then all normal text in the game will be displayed above the main character&#8217;s head as speech text, much like the way the Lucasarts games worked. If this option is not checked, then normal text appears in a pop-up message box, like the way that the Sierra games worked.</strong></p></li>
<li><p><strong>Speech style - in the default Lucasarts-style speech, when a character talks, the speech text is displayed above their head in the game, and the character&#8217;s talking view is used to animate the actual character. ILBRK However, if you set this option to Sierra-style then the talking view is used to display an animating portrait separately in the top-left of the screen, with the text to the right of it. This is similar to the way that Space Quest 5, King&#8217;s Quest 6 and other later Sierra games worked. You can also cycle to another option, &#8220;Sierra- style with background&#8221;, which is the same except a text window is drawn behind the speech text to make it easier to read. ILBRK &#8220;Whole Screen&#8221; uses a full-screen character portrait, like the way that QFG4 worked.</strong></p></li>
<li><p><strong>Speech portrait side - if you&#8217;re using Sierra-style speech, then this determines whether the portrait appears on the left or the right of the screen. The &#8220;alternate&#8221; setting means it swaps sides whenever a different person talks, and the &#8220;Based on X position&#8221; setting means that the side of the screen is chosen depending on where the characters are standing.</strong></p></li>
<li><p><strong>Room transition style - defines what type of screen transition is used when moving from one room to another. Various options are available.</strong></p></li>
<li><p><strong>Save screenshots in save games - Saves a mini-screenshot of the player&#8217;s current position into the save game file. This will create larger save game files, but it will mean that you can use a save game thumbnails GUI to make the save/load interface more professional.</strong></p></li>
<li><p><strong>Enforce object-based scripting - Puts the script compiler into strict mode, where it will not accept the old-style (pre-AGS 2.7) script commands. This should preferably be ticked, since you should no longer be using the old commands.</strong></p></li>
<li><p><strong>Left-to-right operator precedence - if this is ticked, then operators of equal precedence in the script will be evaluated left to right. For example, 5 - 4 - 3 could be interpreted as (5 - 4) - 3 or as 5 - (4 - 3), thus giving different results. You should always use parenthesis to clarify expressions like this, so that the operator precedence doesn&#8217;t affect the result.</strong></p></li>
<li><p><strong>Pixel-perfect click detection - normally, when the player clicks the mouse, AGS just checks to see if the cursor is within the rectangular area of each character and object on the screen. However, if this option is checked, then it will further check whether the player clicked on an actual pixel of the object graphic, or whether it was a transparent part of the graphic. If this option is enabled and they click on a transparent pixel, then the hotspot behind the object will be activated instead.</strong></p></li>
<li><p><strong>Don&#8217;t automatically move character in Walk mode - normally, when you click the mouse in the Walk mode, the main character will move to where you clicked. However, if you want to create a game all viewed from a 1st-person perspective, and so don&#8217;t have a main character, then selecting this option allows you to use the Walk mode for other things. If selected, then &#8220;Character stands on hotspot&#8221; events are instead triggered by clicking the Walk cursor on the hotspot.</strong></p></li>
<li><p><strong>Don&#8217;t use inventory graphics as cursors - normally, when you select an inventory item the mouse cursor is changed into that item. However, if you want to create a Lucasarts-style game (where the inventory cursor is always a cross-hair), check this option and it won&#8217;t be changed.</strong></p></li>
<li><p><strong>Don&#8217;t scale up fonts at 640x400 - normally, if the player chooses 640x400, then the fonts will be scaled up to match. However, if you have drawn your fonts for the 640x400 resolution, use this option to stop them being stretched.</strong></p></li>
<li><p><strong>Resources split every Mb - see for information.</strong></p></li>
<li><p><strong>Characters turn before walking - specifies that when a character starts to walk somewhere, it will first turn round to face the correct direction using available animation frames, rather than just suddenly switching to face the right way.</strong></p></li>
<li><p><strong>Override built-in inventory window click handling - AGS has some built-in processing of Inventory Window GUI controls, whereby a right-click will Look at the item, and a left click will select it if the cursor mode is Interact. However, if you enable this option, then clicking on an inventory item in an Inventory Window will call your <code>on_mouse_click</code> function with eMouseLeftInv, eMouseMiddleInv or eMouseRightInv, and you then need to process it yourself. You can use the <code>game.inv_activated</code> variable to find out what they clicked on.</strong></p></li>
<li><p><strong>Enable mouse wheel support - if enabled, on_mouse_click can be called with the values eMouseWheelNorth and eMouseWheelSouth, which signify the user scrolling their mouse wheel north or south, respectively.</strong></p>
<p><strong>NOTE: Not all mice have mouse wheels, and the DOS engine does not support the mouse wheel at all. Therefore, your game should never require the mouse wheel in order to be playable - it should only be used as a handy extra.</strong></p></li>
<li><p><strong>Number dialog options - enables keyboard shortcuts to choose dialog options (keys 1-9) and adds an index number before each dialog option when they are displayed to the player. For example,</strong></p>
<pre><code>1. Hello there!
2. Goodbye</code></pre>
<p>This allows you to visually show the player which option the shortcut keys will choose, as well as seperating the options if you don&#8217;t use a bullet point.</p></li>
<li><p><strong>Dialog options go upwards on GUI - Normally, if you select a non-textwindow GUI for the dialog options, they will be printed from the top down. However, if you select this option they will go from the bottom of the GUI upwards.</strong></p></li>
<li><p><strong>Crossfade music tracks - This allows you to tell AGS to crossfade between your background music tracks. Crossfading means fading out the old track while fading in the new one when the music changes. You can select a crossfade speed from the drop-down list. There are some disadvantages to using this option - firstly, it&#8217;s fairly slow, since AGS has to decode two music files at once. Secondly, it only works with OGG, MP3 and WAV music. You cannot crossfade MIDI, XM, MOD, S3M or IT music.</strong></p></li>
<li><p><strong>Anti-alias TTF fonts - If enabled, any TTF fonts you have in your game will be rendered to the screen anti-aliased. This can make them look a lot better, but it has two drawbacks - firstly, anti-aliasing is significantly slower than normal rendering, so you might want an option to allow the player to turn it off. Second, anti-aliasing only works in hi-color games (in 256-colour games, the output will look blurred and unreadable). </strong>NOTE that anti-aliasing is not currently done on lucasarts-style speech due to technical reasons.****</p></li>
<li><p><strong>Thought uses bubble GUI - Determines which text window GUI is used for displaying thoughts with .</strong></p></li>
<li><p><strong>Characters turn to face direction - if set, then when a character turns round with the or script commands, they will visibly turn around using their available loops. If this option is not set, they will immediately appear facing their new direction.</strong></p></li>
<li><p><strong>Write game text backwards - in-game text will be written right-to-left, ie. line breaks are worked out from the end of the sentence going backwards, and the last words are displayed first. This is used by languages such as Arabic and Hebrew.</strong></p></li>
<li><p><strong>Display multiple inventory items multiple times - normally, if the player has two of an inventory item, the item will still only be shown once in the Inventory window. If you check this option, however, then all the copies of the item that the player has will be displayed. Useful for RPG-style inventories.</strong></p></li>
<li><p><strong>Save games folder name - if this is blank, then the player&#8217;s saved games will be saved to the folder where the game is installed. This is not a good idea, because it forces different users on the same machine to share save games, and Windows Vista and later versions discourage games from writing to the Program Files folder. Instead, if you supply a folder name here, then AGS will automatically create it within the user&#8217;s Saved Games (Vista and later) or My Documents (XP and earlier) folder, and their save games will be saved there.</strong></p></li>
</ul>
<p>See Also: ILBRK See Also:</p>
<h3 id="cursors">Cursors</h3>
<p>The Cursors node of the editor shows you the current mouse cursor modes available in the game. Each cursor mode performs a different action within the game. Double-click one to open it up.</p>
<p>The &#8220;StandardMode&#8221; option in the property grid tells AGS that this is a &#8216;normal&#8217; cursor mode - ie. using this cursor will fire an event on whatever is clicked on as usual. This mode applies to the standard Walk, Look, Interact and Talk modes, but you can create others too. Do not tick it for the Use Inventory mode, since this is a special mode.</p>
<p>The &#8220;Animate&#8221; option allows you to specify that the mouse cursor will animate while it is on the screen. Choose a view number, and the cursor will animate using the first loop of that view. You can make it animate only when over something (hotspot, object or character) by enabling the &#8220;AnimateOnlyOnHotspots&#8221; option.</p>
<p>The &#8220;AnimateOnlyWhenMoving&#8221; box allows you to do a QFG4-style cursor, where it only animates while the player is moving it around.</p>
<p>Three of the cursor modes are hard-coded special meanings into AGS:</p>
<ul>
<li><p><strong>Mode 4 (Use Inventory). This is special because the game decides whether to allow its use or not, depending on whether the player has an active inventory item selected.</strong></p></li>
<li><p><strong>Mode 6 (Pointer). This cursor is used whenever a modal dialog is displayed (ie. a GUI that pauses the game). Normally this is a standard arrow pointer.</strong></p></li>
<li><p><strong>Mode 7 (Wait). This cursor is used whenever the player cannot control the action, for example during a scripted cutscene. For a lucasarts-style game where the cursor disappears completely in this state, simply import a blank graphic over the wait cursor.</strong></p></li>
</ul>
<p>For the standard modes,</p>
<ul>
<li><p>Mode 0 will cause the player to walk to the mouse pointer location when clicked.</p></li>
<li><p>Modes 1, 2, 3, 5, 8 and 9 will run the event with the same name as the cursor mode.</p></li>
</ul>
<h3 id="fonts">Fonts</h3>
<p>AGS comes with a couple of default fonts, but you can replace the and add your own. You can use both TrueType (TTF) and SCI fonts (Sierra&#8217;s font format).</p>
<p>SCI fonts can be created in two ways:</p>
<ul>
<li><p>Extract the font from a Sierra game, using the SCI Decoder program available on the internet.</p></li>
<li><p>Create your own font and save it in SCI Font format, using the .</p></li>
</ul>
<p>There are also some fonts available on the .</p>
<p>Note that SCI fonts are faster to render than TTF fonts, and so may give your game a speed advantage. It&#8217;s preferable to use a SCI font if you can.</p>
<p>Go to the &#8220;Fonts&#8221; node in the main tree. Here you can see all the current fonts listed underneath. You can create a new font by right-clicking the &#8220;Fonts&#8221; node and choosing &#8220;New font&#8221;. To overwrite an existing font, open it up and press the &#8220;Import over this font&#8221; button.</p>
<p>Fonts can have outlines. For lucasarts-style speech, outlines are really a necessity since they stop the text blending into the background and becoming un-readable. To outline a font, either set the OutlineStyle to &#8220;Automatic&#8221; to have AGS do it for you, or you can use a specific font slot as the outline font (it will be drawn in black behind the main font when the main font is used).</p>
<p><strong>NOTE: If you go to your Windows Fonts folder, you will not be able to select any fonts to import, since double-clicking them will open them up in the Windows Font Viewer. Unfortunately there is nothing I can do about this, you must either type the filename in manually, or copy the font to another folder and import it from there.</strong></p>
<p><strong>NOTE: Font 0 is used as the normal text font, and font 1 is used as the speech font. To use any additional fonts, you can set the Game.NormalFont and Game.SpeechFont properties in your script.</strong></p>
<h2 id="advanced-room-features">Advanced room features</h2>
<p>This section describes slightly more advanced things you can do with the rooms.</p>
<h3 id="character-scaling">Character scaling</h3>
<p>AGS supports scaling of characters, where the character can appear to get smaller as he walks away from the screen. Character scaling is supported as part of the walkable areas in a room.</p>
<p>The reason why you have multiple colours available for the walkable areas is because you can set a zoom level for each colour, which defines how large the character will be while he is in that area. The default for all walkable areas is <code>100%</code>, ie. full size. However, you can adjust it using the &#8220;Walkable Areas&#8221; mode to anywhere from <code>10%</code> (one-tenth size) to <code>200%</code> (double size).</p>
<p>The scaling settings can effect all characters and objects in the game. For characters, it is on by default but you can disable the scaling for an individual character by setting the &#8220;UseRoomAreaScaling&#8221; option in that character&#8217;s properties.</p>
<p>For objects, it is off by default but you can make a specific object obey scaling levels by setting its &#8220;UseRoomAreaScaling&#8221; option.</p>
<p>If you set the &#8220;UseContinuousScaling&#8221; option, then rather than just specifying a zoom level for the whole walkable area, you specify a min and max zoom level. These specify the scaling at the top and bottom of the walkable area. When the game is run, AGS will interpolate these values to make the character smoothly scale down from one value to another as he walks towards the back or front of the screen.</p>
<h3 id="scrolling">Scrolling</h3>
<p>It&#8217;s easy to create scrolling rooms like the ones used in Lucasarts games like Monkey Island (tm) and Day of the Tentacle.</p>
<p>To do this, just import a background scene that is larger than your game resolution. For example, in a 320x200 game, 500x200 is a good size for Lucasarts-type rooms.</p>
<p>That&#8217;s all you have to do. Draw on the walkable areas, hotspots and so on, as normal, and then save the room. The screen will scroll to follow the main character around.</p>
<p>The script command allows you to manually scroll the room around if you don&#8217;t want it to follow the character.</p>
<h3 id="importing-a-file-as-the-walkable-area-mask">Importing a file as the walkable area mask</h3>
<p>AGS has the ability to import an external BMP or PNG file to use as the walkable-area, hotspot or walk-behind area mask. If you don&#8217;t like the way you have to draw these in the editor itself, you can draw them in another program and then import them. This is also useful if you are converting a game you were making with another game-creation system into AGS.</p>
<p>To use the feature, click the &#8220;Import Mask&#8221; button (in the toolbar) in the relevant mode of the Areas editor. There are some restrictions to how this file must be drawn: it must be the exact same size as the background scene, and it must be in 16-colour (4-bit) or 256-colour (8-bit). Then, colour 0 on the bitmap signifies transparency and colours 1-15 are used as the respective hotspot/walk-behind/walkable area numbers.</p>
<p><strong>IMPORTANT: Do NOT use any colour numbers above 15 on the mask bitmap. Use only palette indexes 0 to 15.</strong></p>
<h3 id="animating-background-scenes">Animating background scenes</h3>
<p>If you want to have a lot of animation on the screen, you will come across two problems if you try to do it using objects:</p>
<ul>
<li><p>There is a limit on the number of objects per screen, so you may not be able to animate everything that you want to that way.</p></li>
<li><p>Objects slow down the game - the more objects on the screen, the slower the game runs.</p></li>
</ul>
<p>The solution to these problems is to use an animating background scene.</p>
<p>How it works is this: Each room can have from 1 to 5 backgrounds. Normally, each room just has one background. However, you can import up to four extra backgrounds in each room, and if you do so then the game will cycle through them, giving the effect of animation.</p>
<p>This gives two main advantages - you can animate the entire screen, and due to the way the engine works, it doesn&#8217;t slow down the game at all.</p>
<p>To import a second background for a room, load the room into the editor, pull down the &#8220;Main background&#8221; list box, and choose the &#8220;Import new background&#8221; option. Choose the file that&#8217;s storing the background and you&#8217;re done.</p>
<p>To delete a background, select it then click the &#8220;Delete&#8221; button.</p>
<p>You define the speed at which the backgrounds will animate by setting the &#8220;BackgroundAnimationDelay&#8221; option in the property grid for the room. The default is 5, which cycles background every 5 frames.</p>
<p>**</p>
<p>NOTE: All the background scenes must be the same size.</p>
<p>NOTE: (256-colour only) The backgrounds frames each have their own palette (unless you select &#8220;Share palette with main background&#8221; before importing). This means that when the current frame switches in-game, the palette will get reset - therefore you can&#8217;t use special palette effects such as CyclePalette or SetPalRGB on screens with animating backgrounds.</p>
<h3 id="lighting-effects">Lighting effects</h3>
<p>You can control the brightness of your characters, courtesy of the &#8220;LightLevel&#8221; setting for room Regions.</p>
<p>By default this is <code>100%</code>, but you can change it from <code>0% to 200%</code>. This number is the light level in the current walkable area. Smaller numbers are darker, so that <code>0%</code> is pitch black and <code>200%</code> is very bright.</p>
<p>This feature could be useful if, for example, you have a street lamp on your scene so when the character walks under it they get brighter, or if a wall is shading the character from the light they can get darker.</p>
<p>You can alternatively use a colour tint for the region. If you select this, then you can enter Red, Green and Blue values as numbers from 0-255, which reflect the colour you want the area to be tinted to. The Amount setting determines to what extent characters will be tinted, and is from 0-100.</p>
<p><strong>NOTE: Light levels only work when the character&#8217;s graphic is at the same colour depth as the background (ie. a 256-colour character in a hi-colour game won&#8217;t get lightened).</strong></p>
<p><strong>NOTE: In a 256-colour game, only darkening areas (light level &lt; <code>100%</code>) will work. Also, depending on the room palette the quality of the darkening will vary in 256-colour games.</strong></p>
<p><strong>NOTE: Light levels affect characters and objects, depending on the &#8220;UseRoomAreaLighting&#8221; setting for each one. They do not affect overlays or the background scene.</strong></p>
<h1 id="other-features">Other Features</h1>
<p>This section describes AGS features that were not covered in the tutorial.</p>
<h2 id="music-and-sound">Music and sound</h2>
<p>Sound and music are an essential part of any gameplay experience, and AGS 3.2 and higher provides a re-written audio system giving you full control over your game audio.</p>
<p><strong>File formats</strong></p>
<p>AGS is able to play the following types of audio file: OGG, MP3, MIDI, WAV (uncompressed), MOD, XM, IT, S3M and VOC.</p>
<p>The only limitation to this is that AGS is only able to play one MIDI file at a time. If you attempt to play two simulataneous MIDI music files, the first one will be cut off when the second one starts playing.</p>
<p>If you haven&#8217;t heard of OGG before, it&#8217;s a digital music format, similar to MP3, but achieving better compression and higher quality. More importantly, it is a totally free format so no royalty payments or licenses are required to use it. For more information and programs to encode your music to OGG, see http://www.vorbis.org/</p>
<p><strong>Audio in the Editor</strong></p>
<p>Look under the &#8220;Audio&#8221; branch in the project tree. Here you&#8217;ll find sub-nodes called &#8220;Speech&#8221;, &#8220;Types&#8221; and two default folders called &#8220;Music&#8221; and &#8220;Sounds&#8221;.</p>
<p><strong>Speech</strong></p>
<p>At the moment, voice speech files are not setup within the editor. See the help page to find out more about adding speech to your game.</p>
<p><strong>Audio Types</strong></p>
<p>Audio Types allow you to group together similar types of audio files. The standard distinction here is between Sound and Music, whereby you usually only want one Music file to be playing at any one time; whereas you might have several simultaneous sound effects.</p>
<p>Double-click on an Audio Type and it will open up; you can see its properties in the Property Grid. Here, the &#8220;MaxChannels&#8221; setting allows you to specify how many audio clips of this type are allowed to play at the same time. The &#8220;VolumeReductionWhenSpeechPlaying&#8221; setting allows you to have AGS automatically reduce the volume of these audio clips while speech is playing, to make it easier for the player to hear the speech over the background music.</p>
<p>You&#8217;ll probably find that the default settings here are fine, and in many games you won&#8217;t need to change them.</p>
<p><strong>Importing audio files</strong></p>
<p>Now let&#8217;s get on to the important question &#8211; how do you add sound and music to your game? Well, if you right-click on the &#8220;Sound&#8221; or &#8220;Music&#8221; folders (or any other folders that you create yourself), you&#8217;ll see an option called &#8220;Add Audio Files&#8221;.</p>
<p>Select this option, and you&#8217;ll be given a dialog box to find the audio files that you want to import. Once imported, they&#8217;ll be assigned script names automatically.</p>
<p>Double-click an audio file in the project tree to open a window where you can preview it, as well as change its properties in the Property Grid.</p>
<p><strong>Playing audio in the game</strong></p>
<p>The script to play an audio clip in the game is very simple. For example:</p>
<pre><code>aExplosion.Play();</code></pre>
<p>plays the audio clip called <em>aExplosion.</em></p>
<p><strong>Priorities and channels</strong></p>
<p>AGS currently has an 8-channel audio system, which means that up to 8 sounds can be playing at the same time. With the default Audio Types settings, one channel is reserved for speech, one for music and one for ambient sounds; thus leaving 5 available for sound effects.</p>
<p>If you try to play an audio clip and there are no channels available, then an existing one will be stopped and the new one will take its place. However, this will only happen if the new audio clip has an <strong>equal or higher priority than one of the currently playing sounds.</strong></p>
<p>Thus, the priority allows you to decide which audio clips are more important than others. For example, you might set a footstep sound as low priority, and a door opening as high priority. This can be configured at the folder level in the editor, and also by changing the properties of an individual audio clip (by default they will inherit from their containing folder).</p>
<p>Sometimes you might not want the priority of the sound to be fixed in the editor &#8211; you might want to decide it at run-time in the script. For this reason the <em>Play command has an optional parameter which allows you to explicity specify the priority when you play it, for example:</em></p>
<pre><code>aExplosion.Play(eAudioPriorityLow);</code></pre>
<p><strong>Seeking and changing volume</strong></p>
<p>So, how do you change a sound once it is playing? Well, there are no methods on the Audio Clip to do this, because you might be playing two copies of the same sound at once, and then AGS wouldn&#8217;t know which one you wanted to access. That&#8217;s where <strong>Audio Channels come to the rescue.</strong></p>
<p>When you use the Play() command, AGS returns to you an AudioChannel* instance representing the channel on which the sound is playing. You can store this to a global variable and access it later on. For example:</p>
<pre><code>AudioChannel* chan = aExplosion.Play();
chan.Volume = 20;</code></pre>
<p>This will start the <em>aExplosion audio clip playing, and then change its volume to <code>20%</code>.</em></p>
<p><strong>Using Audio Channels</strong></p>
<p>Supposing you want to start playing a sound now, and then change its volume or panning later on. How would you do that? Well, you&#8217;d need to keep the AudioChannel around, so that you can access it later. The easiest way to do that is to make it a Global Variable; if you open the Global Variables editor, you can create a new AudioChannel* variable (let&#8217;s call it <em>longWindedSound). Then when you play the sound you set it like this:</em></p>
<p><code>longWindedSound = aExplosion.Play();</code></p>
<p>later on, elsewhere in the script, you can change the volume by doing:</p>
<pre><code>if (longWindedSound != null)
{
  longWindedSound.Volume = 20;
}</code></pre>
<p>Note the check for null here &#8211; this makes sure that your game won&#8217;t crash if the sound isn&#8217;t playing (it might have finished, or not have been started yet).</p>
<p><strong>Overall system volume</strong></p>
<p>There is a property called that controls the overall game volume, which you can use with some sort of volume control slider for the player. All individual sound volumes work within the overall system volume.</p>
<p><strong>Conclusion</strong></p>
<p>The new audio system in AGS gives you much more control over your game audio. Please see the following sections for a complete list of the supported commands:</p>
<p>,</p>
<h3 id="voice-speech">Voice speech</h3>
<p>With AGS you can link a line of dialog to a speech file, to enable &#8220;talkie&#8221;- style games. Suppose you have a dialog script with the following:</p>
<pre><code>ego: &quot;Hi! How are you?&quot;
michael: &quot;I&#39;m fine.&quot;</code></pre>
<p>Normally this would display the words in the speech text above the characters heads. However, you can add the special character &#8216;&amp;&#8217; to symbolise that a voice file should also be played.</p>
<p>The file name has format XXXXY.EXT, where XXXX is made of up to <strong>first four letters of the character&#8217;s script name (except the leading &#8216;c&#8217;), the Y is the speech file number (with no leading or trailing zeroes or padding of any kind), and EXT is the file extension.</strong></p>
<p>For example, if you have dialog script:</p>
<pre><code>ego: &amp;10 &quot;Hi! How are you?&quot;
michael: &amp;7 &quot;I&#39;m fine.&quot;</code></pre>
<p>or common script using Say script function:</p>
<pre><code>cEgo.Say(&quot;&amp;10 Hi! How are you?&quot;);
cMichael.Say(&quot;&amp;7 I&#39;m fine.&quot;);</code></pre>
<p>Both of those examples would play EGO10.WAV with the first line, and MICH7.WAV with the second. When a line of text has a voice linked to it, the text on the screen will not be removed until the voice file has finished playing. If the player interrupts it by clicking the mouse or pressing a key, the text and voice will be stopped. Voice files must be placed in the &#8220;Speech&#8221; sub-directory of the game folder.</p>
<p><strong>NOTE: WAV, OGG and MP3 format files can be used for speech.</strong></p>
<p><strong>NOTE: You cannot use speech file numbers above 9999. That is, you can have EGO1.OGG all the way up to EGO9999.OGG, but not EGO10000.OGG or higher.</strong></p>
<p>Speech is compiled into a file called SPEECH.VOX and is separate from the rest of your game data so that you can offer it as an optional extra download to the player. The game will function correctly if the file is not present.</p>
<p><em>SeeAlso:</em></p>
<h3 id="the-audiocache-folder">The AudioCache folder</h3>
<p>When you import audio files into AGS, you&#8217;ll probably notice that a folder inside your game folder, called AudioCache, starts to fill up with files. What is it and why is it there?</p>
<p>Well, when you import audio into AGS, you might be importing it from anywhere &#8211; it could be off your hard drive, but it might also be off a USB stick or a CD. AGS can&#8217;t rely on the audio files always being there because you might remove the USB stick or delete the files on it.</p>
<p>Therefore, when you import audio into AGS it makes a copy of the file in the AudioCache folder. AGS also remembers where the file came from, and when you compile your game it will check if the file has been updated in its original location &#8211; if so it will copy the latest version to the AudioCache.</p>
<p>But if the source file no longer exists, your game will continue to build just fine because AGS has its own copy of the file.</p>
<p>This allows AGS to stick to one of its core principles, that all the files you need to build your game are within the game&#8217;s folder. That way, you have complete security in knowing that by backing up your game folder, your game will be safe if the worst happens.</p>
<h2 id="editing-the-guis">Editing the GUIs</h2>
<p>The game interface is split up into GUIs. Each GUI is a rectangular region on the screen which is drawn on top of the background scene. Each can be set to either:</p>
<ul>
<li><p>be always displayed (for example the Sierra status-line)</p></li>
<li><p>pop-up when the mouse moves to a certain position (eg. Sierra icon-bar)</p></li>
<li><p>pop-up on script command only</p></li>
</ul>
<p>The default interface is made up of two GUIs - the status line, and the icon bar.</p>
<p>Go to the &#8220;GUIs&#8221; node in the main tree. Under this all the GUIs in the game are listed &#8211; double-click one to edit it. To create a new one, right-click on the main &#8220;GUIs&#8221; node and choose &#8220;New GUI&#8221;.</p>
<p>Once you&#8217;ve opened up a GUI, you&#8217;ll notice the GUI itself in the main window, and its settings can be edited in the Properties grid. This allows you to change the background colour of the GUI, set a background picture, and set the location and width/height amongst other things.</p>
<p>The &#8220;Visibility&#8221; property allows you to set when the GUI is displayed. The default is &#8220;Normal&#8221;, which means that the GUI will initially be visible, though you can turn it off with a GUI.Visible=false command in game_start if you need to.</p>
<p>The &#8220;Popup modal&#8221; option means that the GUI will be initially off and must be turned on by a script command. With this option, the game will be paused while the GUI is displayed, during which time the on_mouse_click and on_key_press functions will not get run.</p>
<p>The &#8220;Mouse YPos&#8221; option means that the GUI only appears when the mouse vertical position moves above the y-coordinate set with the &#8220;Popup-YP&#8221; option.</p>
<p>&#8220;Persistent&#8221; is like &#8220;Normal&#8221;, except that this GUI will not be removed during a cutscene when the setting &#8220;GUIs turn off when disabled&#8221; is set in the general settings. Useful if you want most of your GUIs to turn off, except a status line or whatever.</p>
<p>The &#8220;Z-Order&#8221; setting allows you to set which order the GUIs are drawn in - ie. when there are two GUIs that overlap, which is drawn in front. The Z-order setting is an arbitrary number between 0 and 1000. AGS draws the GUIs in order, from the lowest numbered at the back to the highest numbered at the front.</p>
<p>The &#8220;Clickable&#8221; setting allows you to set whether the GUI and buttons on it respond to mouse clicks. This is on by default, but if you turn it off and the player clicks on the GUI, the game will actually process the click as if they clicked behind the GUI onto the actual screen. Useful for transparent GUIs which are only used to display information.</p>
<p>You&#8217;ll notice that the GUIs have names. These can be used in the script in the same way as character names. For example, if a GUI is called &#8220;gIconBar&#8221;, you can use scripts such as:</p>
<p><code>gIconBar.Visible = true;</code></p>
<h3 id="gui-buttons">GUI buttons</h3>
<p>To provide interactivity with the interface, you use buttons.</p>
<p>To add a button, click the &#8220;Add button&#8221; button in the toolbar, and then drag a rectangle with the mouse onto the GUI. You will see it displayed as a text button, with the text &#8220;New button&#8221; on. Notice that the Properties window is now displaying properties for your new button rather than the GUI.</p>
<p>Using the Properties window, you can set a picture for the button instead, and you can also set various other self-explanitory attributes. You set what happens when the player clicks on the button by using the &#8220;Click Action&#8221; attribute. This can be set to &#8220;Run Script&#8221; (the default), and also &#8220;Set mode&#8221;, which changes the cursor mode to the mode specified in the &#8220;New mode number&#8221; property.</p>
<p>To delete a GUI button, right-click it and choose Delete.</p>
<h3 id="interface-text">Interface text</h3>
<p>You can easily display static text on interfaces. For example, the Sierra-style interface displays the score in the status bar.</p>
<p>To show text to a GUI, you need a label. Click the &#8220;Add label&#8221; button in the toolbar, then drag out a rectangle like you did when adding a button. You can change the text displayed in the label by editing the &#8220;Text&#8221; property. Notice that the text automatically wraps round to fit inside the rectangle you drew.</p>
<p>As well as typing normal text into the label, you can add some special markers which allow the text to change during the game. The following tokens will be replaced with the relevant values in the game:</p>
<pre><code> @GAMENAME@    The game&#39;s name, specified on the Game Settings pane
 @OVERHOTSPOT@ Name of the hotspot which the cursor is over
 @SCORE@       The player&#39;s current score
 @SCORETEXT@   The text &quot;Score: X of XX&quot; with the relevant numbers filled in.
 @TOTALSCORE@  The maximum possible score, specified on the Game Settings pane</code></pre>
<p>Example: You have <span class="citation">@SCORE</span>@ out of <span class="citation">@TOTALSCORE</span>@ points.</p>
<p>The Properties window also allows you to align the text to left, right or centre, as well as change its font and colour.</p>
<h3 id="customized-text-windows">Customized Text Windows</h3>
<p>If you want to add a personal touch to the standard white text-boxes which display all the messages during the game, you can create a border using the GUI Editor. Right-click the &#8220;GUIs&#8221; node, and choose &#8220;New Text Window GUI&#8221;.</p>
<p>The element will be resized to about 1/4 of the screen, and you will see 8 pictures - one in each corner and one on each side. These are the border graphics. You change the graphic for a corner in the normal way.</p>
<p>In the game, the corner graphics will be placed in the respective corners of the text window, and the side graphics will be repeated along the edge of the window. To tell the game to use your custom text window style, go to the General Settings pane, and check the &#8220;Text windows use GUI&#8221; box. Then, enter the number of the GUI which you used.</p>
<p>You can also set a background picture for the text window. In the GUI editor, simply set a background picture for the GUI element. The graphic you specify will not be tiled or stretched in the game; however, it will be clipped to fit the window. You should use a graphic of at least about 250x80 pixels to make sure that it fills up the whole window.</p>
<p>To set the text colour in the window, simply set the Foreground Colour of the GUI and that will be used to print the message text in.</p>
<p>Additionally, you may configure padding - the distance kept between text window&#8217;s border and text inside of it.</p>
<h3 id="custom-inventory">Custom inventory</h3>
<p>Another option you may have noticed in the GUI editor is the Add Inventory button. This allows you to drag out a rectangle which will display the player&#8217;s current inventory, in the same way as the Lucasarts games did. To make the inventory window scrollable, you will need to add Up and Down arrow buttons, and attach script code to those buttons to use the available functions such as and .</p>
<p>To see a full list of commands available for inventory windows, see the section.</p>
<h3 id="sliders">Sliders</h3>
<p>You can now add sliders to your GUIs. This allows you to have a nice interface for the player to change settings such as volume and game speed. To add a slider, click the &#8220;Add slider&#8221; button and drag out its rectangle just like you would for a button. You can also resize it by dragging the bottom- right hand corner out in the same way as a button.</p>
<p>Sliders can be either vertical or horizontal. The direction that it is drawn in is automatic depending on the size that you stretch the slider box to - if it is wider than it is tall you will get a horizontal slider, otherwise you&#8217;ll get a vertical slider.</p>
<p>For the properties of a slider you can set the minimum, maximum and current values that the slider can have. In the game, the user will be able to drag the handle from MIN to MAX, and the slider will start off set to VALUE. For horizontal sliders, MIN is on the left and MAX on the right, for vertical sliders MAX is at the top and MIN is at the bottom.</p>
<p>Whenever the user moves the handle&#8217;s position on the slider, the OnChange event is called. This means that if they continually drag the handle up and down, the event will get called repeatedly.</p>
<p>Your script can find out the value of the slider using the Slider.Value script property.</p>
<h3 id="text-boxes">Text Boxes</h3>
<p>A text box is a simple device that allows the player to type information into your game. Adding a text box works like adding the other types of control.</p>
<p>If a text box is on a currently displayed GUI, all standard keypresses (ie. letter keys, return and backspace) are diverted to the textbox instead of being passed to the on_key_press function. When the player presses Return in the text box, the OnActivate event is called. You can then use the TextBox.Text property to retrieve what they typed in.</p>
<h3 id="list-boxes">List Boxes</h3>
<p>List box controls allow you to add a list of items to your GUI. This could be useful for doing a custom save/load dialog box, allowing the user to choose between various options, and so forth.</p>
<p>You use the ListBox script functions to manipulate the list box - for example, ListBox.AddItem to add an item, or ListBox.SelectedIndex to get the current selection.</p>
<p>The ListBox.Translated property defines whether the translation will be applied to list items or not. It is recommended to disable translation for lists containing saved games.</p>
<p>The OnSelectionChanged event is fired when the player clicks on an item in the list. You may wish to ignore this or to do something useful with it.</p>
<h2 id="distributing-your-game">Distributing your game</h2>
<p>When you choose the &#8220;Build EXE&#8221; option in the Editor, a &#8220;Compiled&#8221; sub-directory is created in your game&#8217;s folder, where more subdirectories are created in turn for every target platform you are building the game for. For example, &#8220;Compiled/Windows&#8221; subfolder will be created if you have Windows build checked in General Settings, and &#8220;Compiled/Linux&#8221; subfolder if you have Linux build enabled. The &#8220;Compiled&#8221; folder itself will contain all the &#8220;raw&#8221; game files that cannot be run on their own, but distinct subfolders will contain a runnable variant of the compiled game for corresponding operating system. For example, if you want to distribute Windows version of your game, you need to take the contents of &#8220;Windows&#8221; subfolder. At its simplest this will just be your game executable and the setup program, but you may also have audio and speech libraries (AUDIO.VOX and SPEECH.VOX); and if you have selected to split resources files, you will also have several files named &#8220;game.001&#8221;, &#8220;game.002&#8221;, and so forth.</p>
<p>So, when you want to upload your game to the internet, just zip up the files in the &#8220;Windows&#8221; folder, and there you go!</p>
<p><em>NOTE: It is not possible to load the exe file back into the AGS Editor. This means two things when only the EXE file is available: (1) other people can&#8217;t edit your game&#8217;s data, and (2) you can&#8217;t either. Always keep a backup of the other files produced (*.CRM, GAME.AGF, etc) as they are what the Editor needs to be able to load your game for editing.</em></p>
<p><em>TIP: You can make a &#8220;Loading&#8230;&#8221; style splash screen to be displayed while your game starts up. To do so, simply save the image as PRELOAD.PCX (must be the same resolution and colour depth as the game) in the game folder, and build the game. It should then display while the game is loading.</em></p>
<p><em>NOTE: Due to the licenses of code used by AGS, your documentation should acknowledge the following:</em></p>
<p>TrueType font display uses ALFont by Javier Gonzalez and the Freetype project. Distributed under the terms of the FreeType project license.</p>
<p>OGG player is alogg by Javier Gonzalez, using the Ogg Vorbis decoder, which is available from http://www.xiph.org/ Copyright (c) 2002-2008, Xiph.org Foundation</p>
<p>MP3 player is almp3, by Javier Gonzalez and the FreeAmp team. It uses the mpg123 MP3 decoder, and is distributed under the terms of the GNU Lesser General Public License version 2.1.</p>
<p>You should also include all the license_* files from the DOCS directory with your game.</p>
<p><strong>IMPORTANT: If you intend to make money for your game, be it shareware or commercial, it is imperative that you read the Legal Information page on the AGS website, currently at http://www.bigbluecup.com/aclegal.htm</strong></p>
<p><strong>NOTE: The AUDIO.VOX file contains audio clips that you have marked as &#8220;InSeperateVOX&#8221; in the editor. This allows you to have an optional audio download, if your game uses lots of sound files but you don&#8217;t want the player to have to download them.</strong></p>
<h3 id="custom-icon">Custom icon</h3>
<p>If you wish, you can use your own custom icon when you build a Windows EXE file. To do this, simply place your icon in your game&#8217;s folder, and name it USER.ICO. Then, load the editor and save the game.</p>
<p>AGS is only able to build your custom icon if you are running the editor on Windows 2000 and later. If you&#8217;re using Windows 98 then your game will be built with the standard AGS icon.</p>
<p><em>NOTE: The icon <strong>must be a proper Windows .ICO file, </strong>not just a renamed BMP file. Icon editors, such as AX-Icons from http://www.axialis.com, will convert it for you.</em>****</p>
<p>You can also have a custom icon for the Setup program generated. To do so, create your icon as above but name it <strong>setup.ico in the game folder.</strong></p>
<h3 id="splitting-resource-files">Splitting resource files</h3>
<p>Some people found that once their game became large, the single EXE file was slow to load due to anti-virus checkers scanning the whole file. AGS includes an option to split up the resource files into smaller chunks to avoid this happening. On the General Settings pane you&#8217;ll notice a setting &#8220;Split resource files into X Mb sized chunks&#8221;.</p>
<p>If you tick this, then type in a number such as 1 or 2, then save the game, the game data will be split up into chunks that size, named GAME.001, GAME.002 and so on.</p>
<p>Some resources are still combined into the EXE file but all the rooms will be placed into the other files. If you use this option, you need to distribute your game&#8217;s EXE file plus all the GAME.00? files.</p>
<h2 id="backing-up-your-game">Backing up your game</h2>
<p>You will no doubt want to back up your game files, and should do so regularly during your game development. But which files should you back up?</p>
<p>When taking a backup, make sure you copy <strong>ALL the files listed below:</strong></p>
<ul>
<li><p><strong>GAME.AGF - this is the main data file for your game and contains almost all of the game settings. Without it, your game is lost.</strong></p></li>
<li><p><strong>ACSPRSET.SPR - this is your game&#8217;s sprite file, containing all the sprites from the sprite manager.</strong></p></li>
<li><p><strong>ROOM*.CRM - all the ROOM*.CRM files are your room files, and obviously without one of them you wouldn&#8217;t be able to go into that room any longer.</strong></p></li>
<li><p><strong>*.ASC, *.ASH - these are your script files, and contain all of your scripting handywork.</strong></p></li>
<li><p><strong>*.TRS - translation source files. They contain any translations that you&#8217;ve had done.</strong></p></li>
<li><p><strong>AGSFNT*.TTF, AGSFNT*.WFN - these files contain any fonts you have imported.</strong></p></li>
</ul>
<p>Also remember to back up any sound, music and video files you are using.</p>
<h2 id="the-text-parser">The text parser</h2>
<p>You can now use a text parser in your games if you wish to, much as the older Sierra games did. Go to the &#8220;Text parser&#8221; pane in the editor. There, you will see a short list of words which are provided for you. Each word has a number beside it.</p>
<p>Basically, you add words you want to use by right-clicking the list, and selecting &#8220;Add word&#8221;. However, the real beauty of the parser is its ability to recognise synonyms - that is, two words that mean the same thing. So, for example, if you wanted the player to type &#8220;look at fence&#8221;, they might well type &#8220;look at wall&#8221; instead, if that&#8217;s how they see the drawing. Or, a British person might type &#8220;colour&#8221; whereas an American might type &#8220;color&#8221;, both of which should have the same effect.</p>
<p>To add a synonym for an existing word, highlight the current word, right-click it and choose &#8220;Add synonym&#8221;. You&#8217;ll notice that the new word is given the same number as the old one. All words with the same number are considered identical by the parser.</p>
<p>You will notice that the provided list has a lot of words with number 0. This is a special number, that indicates that the parser should ignore the word completely. In our previous example, the player might type &#8220;look at the fence&#8221;, &#8220;look at fence&#8221;, or just &#8220;look fence&#8221;. By adding words like &#8220;at&#8221; and &#8220;the&#8221; to the ignore list, they get stripped out of the user&#8217;s input automatically. To add new ignore words, just select an existing one and add a synonym.</p>
<p>So, how do you use the text parser? Well, you&#8217;ll need a text box GUI control somewhere in order for the user to type in their input, or you could just use the InputBox command (but it has quite a short line length).</p>
<p>When the user has typed in their text (you&#8217;ll probably know this by the text box&#8217;s event being activated), you call the Parser.ParseText script function which tells AGS what input string to use in subsequent commands. You then simply use the Said command to test what the player typed in.</p>
<p>You type the whole sentence (but NOT including any ignore words), and AGS will compare it to the user&#8217;s string, considering all synonyms identical. For example (assuming our text box is called &#8220;txtUserInput&#8221;):</p>
<pre><code>  String input = txtUserInput.Text;
  Parser.ParseText(input);
  if (Parser.Said(&quot;look fence&quot;)) {
    Display(&quot;It&#39;s an old wooden fence.&quot;);
  }
  if (Parser.Said(&quot;eat apple&quot;)) {
    Display(&quot;You&#39;d love to, but you don&#39;t have one.&quot;);
  }</code></pre>
<p>There are a couple of special words you can use with the Said command. &#8220;anyword&#8221; will match any word that the user types in. For example, Said(&#8220;throw anyword away&#8221;) will match if they type &#8220;throw dagger away&#8221;, or &#8220;throw trash away&#8221;. &#8220;rol&#8221; (short for Rest-of-Line) will match the rest of the user&#8217;s input. So, you might want to do:</p>
<pre><code>if (Parser.Said(&quot;kill rol&quot;)) {
  Display(&quot;You&#39;re not a violent person.&quot;);
}</code></pre>
<p>This way if they try to kill anything they will get the generic response.</p>
<p>Sometimes, you want to accept two different words that are not synonyms as the same thing. For example, the words &#8220;take&#8221; and &#8220;eat&#8221; normally have totally different meanings, so you wouldn&#8217;t make them synonyms of each other. However, if the player has a headache tablet, for instance, then &#8220;take tablet&#8221; and &#8220;eat tablet&#8221; would both be valid. This is where the comma &#8220;,&#8221; comes in - if you include a comma in your input, all synonyms of all words separated by the comma will match. So:</p>
<pre><code>if (Parser.Said(&quot;eat,take tablet&quot;))</code></pre>
<p>will match eat or take and all their synonyms, then tablet and its synonyms.</p>
<p>Another fairly common task with a parser is to check for optional words - for example, if there is a brick wall on the screen, you want the player to be able to type &#8220;look wall&#8221; and &#8220;look brick wall&#8221;. Although this can be done with two OR&#8217;ed Said commands, AGS makes it easier. You can use [brackets] to signify an optional word. So:</p>
<pre><code>if (Parser.Said(&quot;look [brick] wall&quot;))</code></pre>
<p>will match &#8220;look wall&#8221; and &#8220;look brick wall&#8221;.</p>
<p>Now this is all very well, but in different rooms you have different items to interact with - for example, in one room there might be a tree that the player should be able to type &#8220;look at tree&#8221; to look at, and so on. Putting all this in your global script would make a big mess. So, enter the function. Using this, you can do:</p>
<pre><code>  Parser.ParseText(input);
  String badWord = Parser.SaidUnknownWord();
  if (badWord != null)
    Display(&quot;You can&#39;t use &#39;%s&#39; in this game.&quot;, badWord);
  else if (Parser.Said(&quot;eat apple&quot;)) {
    Display(&quot;You&#39;d love to, but you don&#39;t have one.&quot;);
  }
  ... // other game-wide commands
  else
    CallRoomScript (1);</code></pre>
<p>Then, the room script can check for things that the player can do in the current room. See the description for more information.</p>
<h2 id="translations">Translations</h2>
<p>AGS now makes it easy for you to create translations of your games. Right-click the &#8220;Translations&#8221; node in the tree, and choose &#8220;New translation&#8221;. Once you&#8217;ve named it, AGS will ask if you want to populate the file now. Say yes.</p>
<p>Creating the translation writes all lines of game text to the file - no script sources, just all the displayable text from the game. The file is generated with each line of text separated by a blank line.</p>
<p>You can now give this file to your translators. They should <strong>fill in each blank line with the corresponding translation of the English line above it (DO NOT REPLACE THE ORIGINAL ENGLISH LINES WITH THE TRANSLATION). If a line is left blank, it will simply not be translated.</strong></p>
<p>Once the translation is done, right-click the translation and choose &#8220;Compile&#8221;. It will be converted into a compiled translation (<code>.TRA</code>) file in the Compiled folder, which can be used with the game engine.</p>
<p>Run the game Setup program, and select the translation from the drop-down box. Then, run the game, and all the text should be translated.</p>
<p><em>NOTE: With SCI fonts, only 128 characters are available, so many of the extended characters needed for non-english translations are not available. You may need to use substitute characters, or consider using TTF fonts for international applications. However, bear in mind that TTF rendering slows down the engine.</em></p>
<p>While most in-game text is translated automatically, there are a few instances when this is not possible. These are when a script uses functions like Append to build up a string, or CompareTo to check some user input. In these cases, you can use the function to make it work.</p>
<p>You&#8217;ll also have noticed a &#8220;Update&#8221; option when right-clicking a translation. This is useful if you&#8217;ve got a translated version of your game, but you want to update the game and add a few bits in. Once you&#8217;ve updated your game, run the Update Translation option and the translation file you select will get any new bits of text added to it at the bottom &#8211; then you can just ask your translator to additionally translate these lines.</p>
<h2 id="global-variables">Global variables</h2>
<p>The Global Variables pane allows you to easily add variables to your game which can then be accessed from all your scripts.</p>
<p>In previous versions of AGS, declaring a global variable in the script involved defining it in three different places, with import and export clauses in the appropriate locations. Now, this whole process is vastly simplified with the new Global Variables Editor.</p>
<p><strong>When should I use a global variable?</strong></p>
<p>Use a global variable when you need to store some information that you need to access from different scripts. For example, if you want to store the player&#8217;s health and you want all your different scripts to be able to access this value, then use a global variable.</p>
<p>If you just need to store some information locally (for example, a &#8220;door opened&#8221; flag that only applies to one particular room) then you should declare the variable manually at the top of the room&#8217;s script file instead.</p>
<p><strong>What about GlobalInts and Graphical Variables?</strong></p>
<p>GlobalInts and Graphical Variables were ways in which previous versions of AGS provided global variable capabilities. They are now considered obsolete, and are replaced with this new Global Variables system instead.</p>
<p><strong>How do I use global variables?</strong></p>
<p>The Global Variables Editor is pretty self-explanitory. To add a variable, right-click and choose &#8220;Add&#8221;. You can name the variable, and choose its type and initial value. Most of the time you&#8217;ll probably be using the <em>int and </em>String types. Optionally, you can also set a default value for the variable.**</p>
<p>Then, in your scripts it&#8217;s a simple matter of just using the variable with the name that you gave it. Simple! So, for example if you add an int global variable called &#8220;myVariable&#8221;, then in your script you can just do things like this:</p>
<pre><code>if (myVariable == 3)
{
  myVariable = 4;
}</code></pre>
<p>or</p>
<p><code>Display(&quot;myVariable: %d&quot;, myVariable);</code></p>
<p>That&#8217;s it! Just use it as you&#8217;d use any other variable declared in the script.</p>
<p>Note that some of the types available are managed instance pointers, like &#8220;GUI&#8221;, &#8220;DynamicSprite&#8221; and &#8220;Character&#8221;. These are for more advanced users only. If you create one of these you cannot set a default value, and it will initially be set to <em>null. You will need to initialize the pointer in your script to point to something before you use it.</em></p>
<h2 id="custom-properties">Custom Properties</h2>
<p><strong>What are custom properties?</strong></p>
<p>Suppose you&#8217;re making a Lucasarts-style game, and you want all your hotspots to have a default event (so if the player right-clicks a window, for example, &#8220;Open&#8221; will be the default, but if they click on a pen, &#8220;Pick up&#8221; will be the default).</p>
<p>To do that, surely you would have to script in lots of code to change the default mode over each different object?</p>
<p>This is where Custom Properties come to the rescue. You can create a custom property for &#8220;Default event&#8221;, for example, and then have some simple code in the global script to use the setting accordingly.</p>
<p><strong>How do I use them?</strong></p>
<p>You&#8217;ll notice that characters, objects, hotspots, rooms and inventory items all have a &#8220;Properties&#8221; option in their property grids. Select it and click the &#8220;&#8230;&#8221; button.</p>
<p>Since you don&#8217;t yet have any custom properties, you&#8217;ll get a blank window, so click the &#8220;Edit Schema&#8221; button. This takes you to the Schema Editor, where you can create the various properties you want in your game. To begin with you are presented with an empty list box, so right-click in it and choose &#8220;Add property&#8221;.</p>
<p>In the &#8220;Add Property&#8221; window you can set various options about the new property:</p>
<ul>
<li><p><strong>Name - this is the name by which you will access the property from the script. This cannot be changed after the property has been created.</strong></p></li>
<li><p><strong>Description - this is the user-friendly description which will be displayed in the custom property editor when you are setting the property.</strong></p></li>
<li><p><strong>Type - this specifies what type of property you want. &#8220;Boolean&#8221; gives you a checkbox (which will return 0 or 1 to the script), &#8220;Number&#8221; gives you a text box which you can type numbers into, and &#8220;Text&#8221; gives you a larger text box which can store a string.</strong></p></li>
<li><p><strong>Default value - this specifies what the default value of the property will be for objects where you have not set it specifically.</strong></p></li>
</ul>
<p>For example, add a new &#8220;Boolean&#8221; property. Close the schema editor, and then click the &#8220;Properties&#8221; button again. You&#8217;ll now have a window with a checkbox with the description text you typed in. You can click the &#8220;Edit schema&#8221; button there to return to the schema editor if you like.</p>
<p>All types of game item share the same schema. That is, if you create a &#8220;Jibble&#8221; property in the schema editor for a hotspot, it will also appear in the properties window for characters, objects, and so on.</p>
<p><strong>Getting and setting values in the script</strong></p>
<p>To access the properties from the script, there are various script functions. See their descriptions for how they work:</p>
<p>, ILBRK , ILBRK , ILBRK , ILBRK , ILBRK , ILBRK , ILBRK , ILBRK , ILBRK ,</p>
<p><strong>NOTE: Calling will reset that room&#8217;s properties to default values, as well as that room&#8217;s hotspot and object properties.</strong></p>
<h2 id="plugins">Plugins</h2>
<p>AGS supports user-written plugins in order to provide functionality to your game that AGS itself does not support.</p>
<p>The plugin developer&#8217;s guide is available from the Resources section of the AGS website.</p>
<p>Plugins come as DLL files with the names AGS*.DLL, for example agscircle.dll might be a plugin providing a DrawCircle script function.</p>
<p><strong>How to use a plugin</strong></p>
<p>So, you&#8217;ve downloaded a plugin for AGS. What do you do with it? Well, firstly read any readme file that the plugin author has included. But to get any plugin to work you must do the following:</p>
<p>1. Place a copy of the plugin files in the AGSEDIT directory (not your game folder).</p>
<p>2. Start the AGS Editor up, and load your game. Go to the Plugins node in the main tree. Open it up, and you should see all available plugins listed. To use one in your game, right-click it and choose &#8220;Use plugin&#8221;. The plugin developer should provide instructions on what to do next. Save your game to make sure that AGS remembers that you want to use the plugin.</p>
<h2 id="lip-sync">Lip sync</h2>
<p>Lip sync is a way to animate character talking in connection with particular letters and their combinations (phonemes).</p>
<p>Normally when a character is talking, AGS simply cycles through the speech animation from start to finish, and then loops back round. However, lip syncing allows you to be cleverer by specifying a particular frame to go with various letters and sounds. Then, as the character talks, AGS plays appropriate frames to simulate the character actually saying those words.</p>
<p>Lip sync is being configured on corresponding &#8216;Lip Sync&#8217; pane in the editor.</p>
<h3 id="text-based-lip-syncing">Text-based lip syncing</h3>
<p>In the Lip Sync Editor, you have 20 text boxes, one for each possible frame of the talking loop. In each box, you can enter all the letters which will cause that frame of the loop to be played. Letter combinations such as &#8216;th&#8217; and &#8216;ch&#8217; can be used too - AGS will match each part of the spoken text to the longest possible phrase in the lip sync editor.</p>
<p>separate the letters by forward slashes. For example,</p>
<pre><code>3  R/S/Th/G</code></pre>
<p>will mean that frame 3 of the character&#8217;s talking animation is shown whenever the letter R, S, Th or G is spoken.</p>
<p>The &#8220;Default frame for unlisted characters&#8221; box allows you to set which frame is used when a character not listed in any of the text boxes is encountered.</p>
<h3 id="voice-based-lip-sync">Voice-based lip sync</h3>
<p>AGS supports lip syncing voice speech to the talking animation. If you enable this feature, you cannot use the standard lip-sync for non-voice lines.</p>
<p><strong>NOTE: This is an unofficial feature and is not currently supported. Use at your own risk</strong></p>
<p><strong>NOTE: The voice sync feature only supports Sierra-style speech.</strong></p>
<p>In order to do this, you need to download one of the third-party applications that produce lip sync data based on voice clips. AGS supports two such data formats: <strong>PAMELA and </strong>Papagayo.****</p>
<h3 id="pamela">PAMELA</h3>
<p>Download PAMELA application by the following link: <code>http://www-personal.monash.edu.au/~myless/catnap/pamela/</code></p>
<p>Set up the phenomes in Pamela so that there are only 10 (or as many talking frames as you have) available choices. Then, in the Lip Sync pane of AGS, change the Type property to &#8220;Voice&#8221;. Enter the Pamela phenomes into the text boxes to create the association between the pamela phenome code and the AGS frame number.</p>
<p>For example, enter &#8220;AY0&#8221; into frame 0&#8217;s box, &#8220;E&#8221; into frame 1, and so forth - corresponding to how it is set up in Pamela. For multiple phenomes to share the same frame, seperate them with forward slashes &#8211; for example, &#8220;AY0/AY1&#8221; allows both of those phenomes to correspond to the specified frame.</p>
<p>Use the Pamela application on each of your speech lines, and save a Pamela project file (.pam file) for each speech file, naming it the same as the speech.</p>
<p>For example, the pamela project for EGO46.OGG would be called EGO46.PAM, placed in your game&#8217;s Speech folder.</p>
<p>When you build the game, this pam file is compiled into the speech.vox and will be used to sync the animation of the talking frames during the game.</p>
<p><strong>NOTE: Voice lip sync does not work well with MP3 files. It is strongly recommended that you use OGG or WAV for speech.</strong></p>
<h3 id="papagayo">Papagayo</h3>
<p>Download Papagayo application by the following link: <code>http://www.lostmarble.com/papagayo/</code></p>
<p>First you would need to set up your 10 or so phonemes associations (as described above for PAMELA).</p>
<p>Then start up the Papagayo program and open a speech file in .WAV format. The waveform will appear on-screen, represented by a blue, horizontal bar. You can press the triangular &#8216;Play&#8217; button at the top of the screen to listen to the speech audio.</p>
<p>In the &#8220;Spoken Text&#8221; field at the bottom of the screen, type in the exact text words heard in the speech file. As you type, you will notice that each word appears as a horizontal orange bar above the blue waveform. At the same time, individual pink phonemes start appearing below the blue waveform bar. (These pink phonemes at the bottom should correspond to the fields in AGS editor&#8217;s &#8220;Lip Sync&#8221; tab).</p>
<p>If you play the speech audio at this point, you&#8217;ll see that the mouth image at the upper right corner of the screen changes as each pink phoneme is reached during playback. However, the result will not be perfect. To remedy this, you need to drag the orange words at the top of the screen so that their length matches up with the timing of each spoken word in the audio. Double-clicking an orange word will make that portion of the audio play, so you can test if it&#8217;s accurate.</p>
<p>Sometimes an orange word will contain too many, too few, or inaccurate phonemes. You can edit these by right-clicking an orange word and adding, editing, or deleting the desired phonemes. Each one should be separated by a space.</p>
<p>For even further accuracy, individual pink phonemes can be dragged left or right to position them more precisely.</p>
<p>When you&#8217;re happy with the results, you can save the project as a .pgo file, which will allow you to open and re-edit this line later. But to use it in AGS, click the &#8220;Export&#8221; button at the bottom right side of the screen, and save it as a .dat file.</p>
<p>Use the Papagayo application on each of your speech lines, and export a Papagayo file (.dat file) for each speech file, naming it the same as the speech.</p>
<p>For example, the Papagayo project for EGO46.OGG would be called EGO46.DAT, placed in your game&#8217;s Speech folder.</p>
<p>When you build the game, this dat file is compiled into the speech.vox and will be used to sync the animation of the talking frames during the game.</p>
<h2 id="new-game-templates">New Game templates</h2>
<p>When you choose &#8220;Start a new game&#8221; in the initial &#8220;Welcome to AGS&#8221; dialog box, a window appears with various templates that you can base your game off.</p>
<p>AGS comes with a few standard templates, but you can create your own too.</p>
<p><strong>Using downloaded templates</strong></p>
<p>If you&#8217;ve downloaded a game template from the internet, you should find a file with a .AGT extension. This is the AGS Template File, and you just need to copy it into the &#8220;Templates&#8221; folder within the AGS Editor directory.</p>
<p><strong>Creating your own template</strong></p>
<p>A game template is basically just an archive containing all of the game source files, which are then extracted into the new folder when the user creates a new game. It is similar to you just zipping up your game folder and sending it to a friend - except that this way looks far more professional.</p>
<p>To create a template, first of all you create a game as normal in the editor. Once you have everything set up how you want it, select &#8220;Make template from this game&#8221; on the File menu. This will prompt you for a name for the template (this is what will appear under its icon in the &#8220;Start New Game&#8221; dialog box), and then it will go away and compile the template for you.</p>
<p>The template game takes the following files from your game folder: Core game files (GAME.AGF, ACSPRSET.SPR), all script and room files, all sound and music files, all fonts, game icons, and *.TXT (to allow you to include a README.TXT or whatever).</p>
<p>If you include a <strong>template.ico file in your game folder when you make the template, then it will be used as the icon in the Start New Game dialog box. Otherwise, the icon will be taken from user.ico (if present), or if not it will get the default AGS icon.</strong></p>
<p>You can also include a &#8220;template.txt&#8221; file in your game folder. If you do, then its contents will be displayed to the user in a messagebox after they create a new game based on the template. You could use this to explain briefly about any key aspects of the template, or it could tell them to read your README.TXT file. This file should be quite small - its entire contents need to fit into a standard message box.</p>
<p><strong>NOTE: Do not simply make a template out of a half-finished game. If you want to make a template, you should start a game from scratch and make your changes - the user probably doesn&#8217;t want to already have a semi-completed game when they use your template.</strong></p>
<h2 id="debugging-features">Debugging features</h2>
<p>It happens to the best of us - you&#8217;re merrily ploughing along making your game, when suddenly something just isn&#8217;t working right. It&#8217;s not always obvious where the problem is.</p>
<p>AGS now has some advanced debugging features that can help you out. If all else fails, you can of course ask for help on the AGS forums.</p>
<p>There are two different types of debugging, that are enabled in different ways. The script debugger is only enabled when you use F5 to run your game; but the Debug() commands are only available when &#8220;Enable debug mode&#8221; is set in your Game Settings. So, just before you release your game, set that option to False and compile the game again to make sure the player can&#8217;t cheat using these features.</p>
<p><strong>1. The script debugger</strong></p>
<p>When you run the game using the Run (F5) option, the game will be started with the debugger. This allows you to pause your game and follow it through one line at a time.</p>
<p>There are two main ways to use this feature:</p>
<p>* Press SCROLL LOCK while playing the game. This will break out when the next line of script is run.</p>
<p>* Place a breakpoint in your script. You do this by clicking on a line of code in the script editor, then pressing F9. Then, when the game arrives at this line of code, it will stop running.</p>
<p><strong>NOTE: The editor will allow you to place a breakpoint on any line of script. However, in order for it to work, it must be placed on a line that has some code on it.</strong></p>
<p>Once the script has stopped, you can use the &#8220;Step Into&#8221; button (F11) to step through the lines of code, one by one. To allow the game to continue running normally, use the Run (F5) button.</p>
<p><strong>NOTE: The Script Debugger is not supported on Windows 98 or Windows ME systems. If you&#8217;re still using Windows 98, please upgrade to Windows XP or higher to take advantage of this feature.</strong></p>
<p><strong>2. The Debug() command</strong></p>
<p>There is a scripting command, , which you can use in your script to help you find problems. The default setup enables some hotkeys for the various features - in particular, Ctrl+X allows you to teleport to another room, Ctrl+A shows the walkable areas on the screen and Ctrl+S gives you all the inventory items.</p>
<p>You can also use the Debug command to assign a hotkey to toggle FPS display on and off. (FPS is Frames Per Second, which allows you to see the game speed and spot any slow-running rooms).</p>
<p>This command only works if Debug Mode is enabled in your Game Settings.</p>
<p><strong>3. Current room information</strong></p>
<p>Pressing Ctrl+D displays some information about the current room. It tells you what room number you are in, followed by the current status of all objects in the room. After that, another messagebox tells you all the characters that are in the current room and various information about them.</p>
<p>This command only works if Debug Mode is enabled in your Game Settings.</p>
<h2 id="auto-number-speech-files">Auto-number speech files</h2>
<p>If you&#8217;ve already made your game, and then you decide you want a voice pack to go with it, the thought of manually adding speech numbers to every line of speech in the game is rather daunting. But never fear, this is where the Auto-number Speech Files feature comes in.</p>
<p>If you select this option, then it will go through all the speech lines in the game and add a &amp;NUM to the start of them. A summary of the results is written to a file called SPEECHREF.TXT in the game folder, so that you can easily see what file is what when recording the speech.</p>
<p>The following types of message are auto-numbered. If one of the messages already has a speech number, it will be overwritten:</p>
<ul>
<li><p>room messages set to be displayed as speech</p></li>
<li><p>dialog script messages</p></li>
<li><p>dialog options (if &#8220;Say&#8221; is selected for the option)</p></li>
<li><p>Say commands in scripts</p></li>
</ul>
<h2 id="integration-with-windows">Integration with Windows</h2>
<p>AGS has the ability to integrate with Windows in two ways. Firstly, it can be set up to launch save games directly from explorer when the player double-clicks them; and secondly, in Windows Vista and later, AGS can integrate with the Game Explorer feature.</p>
<h3 id="enhanced-save-games">Enhanced Save Games</h3>
<p>Optionally, AGS can set up Windows Explorer so that you can double-click on a save game file to directly launch the game and continue from where you left off.</p>
<p><strong>Setting it up</strong></p>
<p>In order to enable this, open the General Settings pane, and look for the &#8220;Saved Games&#8221; section. Here, there is an option called &#8220;Enhanced Save Games&#8221;. If you switch this on, then AGS will enable the integration with Windows Explorer.</p>
<p>To make this work, you need to set the Save Game File Extension setting to a file extension. This is how Windows will identify the save game files, and you must supply an extension of between 5 and 20 characters in length (&#8220;DemoQuestSave&#8221; would be an appropriate extension for Demo Quest, for example).</p>
<p>By changing these settings, your game&#8217;s saved game filenames will change, and therefore you will lose access to any existing saved games.</p>
<p><strong>Extra features for Windows Vista and later</strong></p>
<p>If the player is running Windows Vista or later versions, then this feature will also allow them to see the save game description and screenshot (if enabled) in the Explorer preview window:</p>
<p>LTSSimg src=&#8220;images/GameExplorer3.jpg&#8221; GTSS ILBRK <em>Save games with embedded screenshots on Vista and later versions</em></p>
<p><strong>Enabling the integration</strong></p>
<p>Once you&#8217;ve built the game, the integration won&#8217;t be enabled immediately. If you want to use this feature, you&#8217;ll need to distribute your game in an installer rather than a zip file, because there&#8217;s an extra step you need to run after installation to set up the association.</p>
<p>In your installer, you need to run the game executable with the special parameter <code>-registergame</code> When you do this, AGS will create the necessary associations in Explorer to get the feature working. If it is successful, it will not display any messages.</p>
<p>You can manually test this by creating a shortcut to your game EXE file, and modifying it to add <code>-registergame</code> to the end of the command line. Then, run the shorcut and the associations should be created for you.</p>
<p>For un-installing, run the game EXE again but with a <code>-unregistergame</code> parameter. This will cause AGS to remove the associations from the player&#8217;s system.</p>
<p><strong>Cross-Platform Support</strong></p>
<p>Windows: ** Yes ILBRK MS-DOS: ** No ILBRK Linux: ** No ILBRK MacOS: ** No ********</p>
<h3 id="windows-game-explorer">Windows Game Explorer</h3>
<p>Windows Vista and later versions have a feature called the Game Explorer, which is a special folder on the Start Menu that lists all the games installed on the user&#8217;s system and provides easy shortcuts to play them.</p>
<p>AGS is now able to add your games to this list. However, in order to do so you would need to distribute your game using an installer rather than just in a plain zip file, since you need to tell AGS to add the game to the list at install-time.</p>
<p>LTSSimg src=&#8220;images/GameExplorer1.jpg&#8221; GTSS ILBRK <em>The &#8220;Games&#8221; option launches the Game Explorer</em></p>
<p><strong>Enabling Game Explorer support</strong></p>
<p>Open the General Settings pane in the editor. If you scroll down to the bottom of the list, you&#8217;ll find a section titled &#8220;Windows Game Explorer&#8221;. The main setting is called &#8220;Enable Game Explorer integration&#8221;, and is disabled by default. Set this to True if you want to be able to add your game to the Game Explorer (it will have no effect on Windows XP and earlier versions).</p>
<p><strong>Game Explorer settings</strong></p>
<p>The rest of the settings here allow you to set up various fields that the Game Explorer can display. <strong>Developer Website must be a URL starting with &#8220;http://&#8221; if you fill it in, and </strong>Version must be a four-point version number (eg. 1.0.0.0).****</p>
<p>The <strong>Windows Experience Index is a score that Windows gives each computer depending on its game-playing prowess. 1 is the lowest score, and 5 is the highest at present. This field allows you to specify the minimum score required to play your game (this will usually be 1 for AGS games, unless you have high resolution and lots of animation).</strong></p>
<p><strong>Save games</strong></p>
<p>If you set the <em>Save games folder name property in the Saved Games section, then the Game Explorer will provide a right-click option to go straight to the save game folder. This is only useful if you also enable Enhanced Save Games.</em></p>
<p><strong>Parental controls</strong></p>
<p>AGS is not currently able to support the Windows Parental Controls, due to Windows requiring the game to be digitally signed for this to work. Digital signatures require you to buy a certificate from an authority such as Verisign, so at present they are not supported. Your game will be classed as &#8220;Unrated&#8221; by Windows.</p>
<p><strong>Boxart image</strong></p>
<p>The Game Explorer can display a high-resolution alpha-blended image for your game, rather than the standard game icon. To utilise this, place a file called <code>GameExplorer.png</code> in your game folder, and rebuild the game EXE. This must be a PNG image, no larger than 256 x 256 pixels:</p>
<p>LTSSimg src=&#8220;images/GameExplorer2.jpg&#8221; GTSS ILBRK <em>My game (&#8220;Chris Kwest&#8221;) in the Game Explorer</em></p>
<p><strong>Adding the game to the Game Explorer</strong></p>
<p>In order to actually add the game to the Game Explorer&#8217;s list, you need to run the game executable with the special parameter <code>-registergame</code> When you do this, AGS will add the game to the Game Explorer and exit. If it is successful, it will not display any messages.</p>
<p>Therefore, as part of your installer, once the game files are all installed you should add a step at the end to run the game EXE file with this parameter. It will do nothing on Windows XP and earlier versions.</p>
<p>For un-installing, run the game EXE again but with a <code>-unregistergame</code> parameter. This will cause AGS to remove the game from the Game Explorer&#8217;s list.</p>
<p><strong>NOTE: If you have both Enhanced Save Games and Game Explorer Integration enabled, then the <code>-registergame</code> and <code>-unregistergame</code> commands will register/unregister both.</strong></p>
<p><strong>Cross-Platform Support</strong></p>
<p>Windows: ** Vista and later ILBRK MS-DOS: ** No ILBRK Linux: ** No ILBRK MacOS: ** No ********</p>
<h2 id="source-control-integration">Source Control integration</h2>
<p>The AGS Editor supports integration with source control systems like SourceSafe and Perforce.</p>
<p><strong>What is source control?</strong></p>
<p>Source Control allows you to easily keep copies of old versions of your files, so that if you break something you can easily look back and see what your script was like in previous versions.</p>
<p>AGS does not provide this functionality itself, but it is able to integrate with Source Control applications such as SourceSafe and Perforce in order to allow you to easily check things in and out.</p>
<p><strong>Which providers are supported?</strong></p>
<p>AGS supports any source control system that can integrate with Visual Studio (this is called the MSCCI interface). Most source control systems are quite heavyweight and designed for use by large teams, but there are smaller systems like SourceSafe available which work well on a standalone PC.</p>
<p><strong>How do I use it?</strong></p>
<p>If AGS detects an installed source control system, an extra option &#8220;Add to source control&#8221; will appear on the File menu. Use this to add your game to source control, and from then on whenever AGS attempts to edit a file it will prompt you to check it out if necessary.</p>
<p>You can check in files by using the &#8220;Show Pending Checkins&#8221; option that appears on the File menu once you&#8217;ve added your game to source control.</p>
<p><strong>Which files does AGS put under source control?</strong></p>
<p>AGS currently puts the main game file and your scripts, rooms, fonts and translations under source control. Optionally, you can also add sound, music and sprites by changing the setting in the General Settings pane.</p>
<h1 id="scripting">Scripting</h1>
<p>The AGS scripting system allows you to write a mini-program, giving you great control over your game.</p>
<h2 id="scripting-tutorial-part-1">Scripting tutorial part 1</h2>
<p>The Scripting Tutorial is online here:</p>
<h2 id="scripting-tutorial-part-2">Scripting tutorial part 2</h2>
<p>The Scripting Tutorial Part 2 is online here:</p>
<h2 id="pointers-in-ags">Pointers in AGS</h2>
<p>Various commands in the new scripting language will require you to use pointers. This section has been split into three separate topics to introduce you to pointers depending on your previous programming experience &#8211; select one of the links below:</p>
<h3 id="pointers-for-programming-newbies">Pointers for programming newbies</h3>
<p>Pointers can be quite a daunting prospect, and in languages like C and C++ they certainly are; but AGS tries to make things as simple as possible.</p>
<p>Basically, a pointer is a variable that <em>points to something of a particular type. For example, a </em>Character pointer would point to characters. What&#8217;s the point of all this, I hear you ask?**</p>
<p>Well, let&#8217;s look back at AGS 2.62. If you wanted to reference a particular hotspot, you&#8217;d need to remember its number. If you wanted to switch on an object, you&#8217;d need to remember what number it was too. And because you could accidentally use an object number where you wanted a hotspot number, mistakes could easily happen and it all got rather messy.</p>
<p>That&#8217;s where pointers step in &#8211; basically, they allow you to do away with identifying things by number, and in the process provide <em>type checking, so you can&#8217;t accidentally use a hotspot where you meant to use an object.</em></p>
<p>Let&#8217;s look at an example. If you wanted to write a string to a file in 2.62, you&#8217;d do this:</p>
<pre><code>int handle = FileOpen(&quot;temp.txt&quot;, FILE_WRITE);
FileWrite(handle, &quot;Test!&quot;);
FileClose(handle);</code></pre>
<p>That&#8217;s simple enough; but what if you wanted to open the file in one place, and write to it somewhere else? You&#8217;d have to make <em>handle a global variable, and then make sure you remembered that it was a file handle and not a hotspot number or anything else. Now, with 2.7 the same code would be:</em></p>
<pre><code>File *file = File.Open(&quot;temp.txt&quot;, eFileWrite);
file.WriteString(&quot;Test!&quot;);
file.Close();</code></pre>
<p>Looks fairly simple, doesn&#8217;t it. The only slightly confusing part is getting used to declaring the variable as <code>File*</code> rather than <code>int</code>; but that&#8217;s something you&#8217;ll get used to quite quickly, and all the examples in the manual should point you in the right direction.</p>
<p>Let&#8217;s look at another example. Suppose you want a variable that contains the current hotspot that the mouse is over. In 2.62, you might have something like this:</p>
<pre><code>// top of global script
int mouseOverHotspot;

// repeatedly_execute
mouseOverHotspot = GetHotspotAt(mouse.x, mouse.y);</code></pre>
<p>How would you do this in 2.7? Well, quite simply:</p>
<pre><code>// top of global script
Hotspot *mouseOverHotspot;

// repeatedly_execute
mouseOverHotspot = Hotspot.GetAtScreenXY(mouse.x, mouse.y);</code></pre>
<p>But hold on, what if you want to know whether the mouse is over your Door hotspot (say it&#8217;s hotspot 2). In 2.62, you&#8217;d have done:</p>
<pre><code>if (mouseOverHotspot == 2) {
  Display(&quot;Mouse over the door&quot;);
}</code></pre>
<p>but that&#8217;s rather messy, because what if you change the door&#8217;s hotspot number? You&#8217;d have to remember to go back and change all the 2&#8217;s to 3, or whatever. In 2.7, you now just do this (assuming you gave the hotspot a script name of hDoor):</p>
<pre><code>if (mouseOverHotspot == hDoor) {
  Display(&quot;Mouse over the door&quot;);
}</code></pre>
<p>If you&#8217;re a fan of numbers for some strange reason, you can still use them like this:</p>
<pre><code>if (mouseOverHotspot == hotspot[2]) {
  Display(&quot;Mouse over the door&quot;);
}</code></pre>
<p>So, that concludes our introduction to pointers. Hopefully you&#8217;ve got an understanding of what they are and what they do; if there&#8217;s anything you can&#8217;t work out, feel free to ask on the Technical forums.</p>
<h3 id="pointers-for-people-who-know-java-or-c">Pointers for people who know Java or C<code>#</code></h3>
<p>AGS pointers work in a very similar way to object variables in Java and C<code>#</code>. The main difference is that AGS pointers are declared in the C-style manner with an asterisk t represent the pointer. So:</p>
<pre><code>Hotspot *hs;</code></pre>
<p>would declare a variable <em>hs which points to a Hotspot. This would be equivalent to the following in Java or C<code>#</code>:</em></p>
<pre><code>Hotspot hs;</code></pre>
<p>In AGS, pointers are used to point to various built-in types, such as Hotspots, Inventory Items, Characters and so on. Because AGS does not have a <em>new keyword, you cannot create pointers to custom struct types.</em></p>
<p>You use pointers in the same way as you would in Java and C<code>#</code>. Various built-in AGS static methods return a pointer to an instance (for example, , , and so on). You can save this pointer into a pointer variable, and then call its methods as you would in Java or C<code>#</code>. The following examples are all valid:</p>
<pre><code>File *theFile = File.Open(&quot;test.dat&quot;, eFileWrite);
if (theFile == null) Display(&quot;It&#39;s null!&quot;);
File *file2 = theFile;
if (theFile == file2) Display(&quot;They&#39;re the same file!&quot;);
theFile = null;
file2.WriteInt(10);
file2.Close();</code></pre>
<p>If you attempt to call a method on a null pointer, an error will occur (just like you&#8217;d get an exception in Java or C<code>#</code>).</p>
<p>Pointer memory management in AGS is all automatic &#8211; the memory is freed when there are no longer any variables pointing to the instance. Thus, if you have global pointer variables in your global script, it&#8217;s a good idea to set them to <em>null when you&#8217;re no longer using them, to allow the memory to be freed.</em></p>
<h3 id="pointers-for-people-who-know-c-or-c">Pointers for people who know C or C++</h3>
<p>Pointers in AGS are based on the C/C++ syntax, so they are declared with an asterisk. However, in AGS you can only create pointers to built-in AGS types, and not to any custom structs declared in your script.</p>
<p>Pointer members are accessed with the dot operator, and not the <code>-&gt;</code> C-style operator. Because AGS doesn&#8217;t support features such as pointers-to-pointers and so forth, there is no need for a separate operator.</p>
<p>In AGS, pointer memory management is done automatically based on reference counting (similar to the way COM works), so there is no <em>new or </em>delete keyword. When an object is no longer referenced by any pointer variables, it will be freed. For this reason, if you have any global pointer variables it&#8217;s advisable to set them to <em>null if you are done with them.</em>**</p>
<p>AGS pointers are strongly typed, and you cannot cast between types at will like you can in C and C++. AGS will only allow you to compare and assign pointers of the same type, or of the same base type. There is a special keyword <em>null which all pointers can be set to and compared with, which indicates that they are unassigned.</em></p>
<p>Because there is no <em>new keyword, you cannot create object instances; rather, they are returned by static member functions in AGS, such as and . See the examples for the functions to get an idea of how to use them.</em></p>
<h2 id="calling-global-functions-from-local-scripts">Calling global functions from local scripts</h2>
<p>You can now call your global script functions directly from your rooms. This means that if you have a common script that you want to use in response to various different events during the game, you can call it from your room scripts rather than duplicating code.</p>
<p>To use a global function, open up the main script header (GlobalScript.ash), and add a line similar to the following:</p>
<pre><code>import function my_function_name (parameters);</code></pre>
<p>Where <em>my_function_name is the name of the global script function, and </em>parameters is a list of the TYPES ONLY of the parameters it takes. For example, if you had in your global script:**</p>
<pre><code>function do_animation (int anim_number) {</code></pre>
<p>then you would write:</p>
<pre><code>import function do_animation (int);</code></pre>
<p>To use the function, you just call it normally in your script, eg:</p>
<pre><code>do_animation (3);</code></pre>
<p>You can also return a value to the caller by using the &#8220;return&#8221; statement, and the local script picks this up the same way it does with built-in functions. For example, the end of your global script function could be:</p>
<pre><code>return 51;</code></pre>
<p>then the local script just does:</p>
<pre><code>int value = do_animation(3);</code></pre>
<h2 id="the-script-header">The script header</h2>
<p>This allows you to include the same information into all your scripts. For example, if you have a global function you want all the room scripts to use, you can add its import definition to the header file.</p>
<p>Do NOT place any actual functions or variables in this header, because if you do you will need to re-compile ALL the scripts whenever you modify the function. Instead, place your functions in your global script and just place an import line in the header file to allow the other scripts to access it.</p>
<h2 id="string-formatting">String formatting</h2>
<p>You will find many times in your game when you need to create a string based on the values of variables, and functions like and allow you to do so.</p>
<p>AGS uses printf-style argument formatting (used by the C language). This means that you intersperse your text with special codes to insert a variable&#8217;s value. These special codes begin with a percent sign, and then specify the variable type. The actual variables that you want to display are then listed afterwards.</p>
<p>The special codes you can use are as follows:</p>
<p>|l|l|</p>
<p>Some examples:</p>
<pre><code>int life = 42;
float twoPi = Maths.Pi * 2.0;
String message = &quot;A string variable&quot;;

Display(&quot;A normal string with no variables.&quot;);
Display(&quot;The meaning of life is %d.&quot;, life);
Display(&quot;The meaning of life in 3 digits is %03d.&quot;, life);
Display(&quot;2 times Pi is %f.&quot;, twoPi);
Display(&quot;The message says: %s.&quot;, message);</code></pre>
<p>would display:</p>
<pre><code>A normal string with no variables.
The meaning of life is 42.
The meaning of life in 3 digits is 042.
2 times Pi is 6.283186.
The message says: A string variable.</code></pre>
<p>You can display as many variables as you like in one line:</p>
<pre><code>int life = 42;
float twoPi = Maths.Pi * 2.0;

Display(&quot;Life is %d, 2 x Pi = %f, and my dinner is %s.&quot;, life, twoPi, &quot;awful&quot;);</code></pre>
<p>but, <strong>be very careful that you supply the right number of variables to correspond with the tags you use in the text. If you don&#8217;t supply enough variables, your game could crash.</strong></p>
<h2 id="multiple-scripts">Multiple Scripts</h2>
<p>If you&#8217;re working on a fairly large game, you&#8217;ll find that your global script can quickly become rather large and unwieldy. AGS allows you to create extra scripts (formerly known as Script Modules) in order to split up your code and easily import scripts written by other people.</p>
<p>The main global script still has to contain all the event functions (Look At Character scripts, Interact With Inventory scripts and so forth) and all the GUI handlers (btnSave_Click, etc).</p>
<p>But if you have any custom functions then you can put them in a separate script in order to divide up your code. Scripts have the added advantage that they can be easily exported and imported, if you want to share some of your code with other people, or even just move it from one game to another.</p>
<p>The scripts for the game can be seen under the &#8220;Scripts&#8221; node in the project tree. Each script has its own header, which is where you place the definitions for that script to allow the rest of your game to access its functionality.</p>
<p>The order of the scripts is important. A script can only use functionality from other scripts that come before it in the list, so the Move Up and Move Down options allow you to adjust the order. The global script is always at the bottom so that it can access all other scripts, and room scripts are automatically provided with access to all the scripts.</p>
<p>As an example, suppose you want to have a special <em>AddNumbers function in a module. You&#8217;d create a new script, then put this in its header file (.ASH):</em></p>
<pre><code>import function AddNumbers(int a, int b);</code></pre>
<p>Then, in the script file (.ASC) you could put:</p>
<pre><code>function AddNumbers(int a, int b) {
  return a + b;
}</code></pre>
<p>That&#8217;s the basic principle behind using multiple scripts!</p>
<p><strong>Special functions</strong></p>
<p>Can extra scripts use special functions like <code>game_start</code> and <code>repeatedly_execute</code>? Well, yes and no. They can contain the following functions, and they will be called at the appropriate times just before the global script&#8217;s function is:</p>
<ul>
<li><p>function game_start()</p></li>
<li><p>function on_event(EventType event, int data)</p></li>
<li><p>function on_key_press(eKeyCode keycode)</p></li>
<li><p>function on_mouse_click(MouseButton button)</p></li>
<li><p>function repeatedly_execute()</p></li>
<li><p>function repeatedly_execute_always()</p></li>
<li><p>function late_repeatedly_execute_always()</p></li>
</ul>
<p>All other special functions, such as <code>dialog_request</code>, will only be called in the Global Script, even if they exist in another script. If you need other scripts to handle any of this functionality, you can simply create a custom function in the script and then call it from the global script.</p>
<p>The command is supported for on_key_press, on_mouse_click and on_event. Calling it prevents the rest of the scripts (including the global script) from being called.</p>
<h2 id="understanding-blocking-scripts">Understanding blocking scripts</h2>
<p>You will see some commands listed as &#8220;blocking&#8221;, where control does not return to the script until the command finishes. But what does this mean, exactly?</p>
<p>In order to better understand this, we need to explore a little about the way that the AGS script engine works. In an AGS game, there are three script <strong>threads that can be running at once. Think of a thread as a mini-CPU that executes your scripts.</strong></p>
<p>At the start of the game, the threads are all idle (not running any scripts):</p>
<p>LTSSimg src=&#8220;images/threads1.gif&#8221; GTSS</p>
<p>Now, as and when your scripts need to be run, AGS will try to run them on the appropriate thread (the Room thread for local scripts, and the Global thread for global scripts).</p>
<p>So, on the first game loop, your global scripts&#8217; repeatedly_execute will be run:</p>
<p>LTSSimg src=&#8220;images/threads2.gif&#8221; GTSS</p>
<p>That&#8217;s fine, and when it finishes running the thread becomes idle again.</p>
<p>But, suppose that within repeatedly_execute, you make a call to the Character.Say command. Say (or <em>DisplaySpeech in old-style scripting) is a blocking command and does not return until the character finishes talking:</em></p>
<p>LTSSimg src=&#8220;images/threads3.gif&#8221; GTSS</p>
<p>The global thread is now <strong>blocked, waiting for the character to finish talking. This means that none of your global script functions such as repeatedly_execute, on_event and on_key_press will be run while the character is talking, since the thread is busy.</strong></p>
<p>Now, AGS does queue up to 5 script functions to be run on the thread as soon as it is free; but if you have a lot of things happening within your script, it&#8217;s possible that you will lose some events such as on_events and keypresses if you script is blocked for a long time.</p>
<p>Let&#8217;s explore the most common situation in which this causes confusion. Suppose you have a <em>Player looks at inventory event on a Key inventory item, which runs a script to display a message.</em></p>
<p>Let&#8217;s also suppose that you have some code at the end of your on_mouse_click function to make the character stand still after running mouse click events.</p>
<p>What you&#8217;ll find is that the code at the end of on_mouse_click actually gets called <em>before the inventory item&#8217;s event. Let&#8217;s look at why:</em></p>
<p>LTSSimg src=&#8220;images/threads4.gif&#8221; GTSS</p>
<p>Remember that AGS does not run events automatically; rather, the on_mouse_click script function handles the mouse click and calls ProcessClick to run the appropriate event. When it does so, it finds that the key&#8217;s Look At Item event has a script function associated with it.</p>
<p>But oh no! Inventory item scripts are in the global script, and the global thread is already blocked because of the mouse click. Therefore, the inventory event script gets added to the thread&#8217;s queue, and on_mouse_click then finishes running. The inventory event script will follow on afterwards.</p>
<p>Now you might think that this means that object and hotspot events can run within on_mouse_click, since they use the room thread, like this:</p>
<p>LTSSimg src=&#8220;images/threads5.gif&#8221; GTSS</p>
<p>However, this is not the case. It is still the global thread that is calling ProcessClick, so the room script will actually be run on the global thread once it is free.</p>
<p>Finally, we come onto the No-Block thread. This thread is only used to run the <em>repeatedly_execute_always and </em>late_repeatedly_execute_always functions. Because these two are not allowed to run any blocking functions, this ensures that the thread never gets blocked and so it will always run, even when the other threads are busy:**</p>
<p>LTSSimg src=&#8220;images/threads6.gif&#8221; GTSS</p>
<p>I hope that helps explain blocking in terms of AGS scripting. If there&#8217;s anything that you don&#8217;t think is clear, please suggest amendments on the Technical forum.</p>
<h2 id="dynamic-arrays">Dynamic Arrays</h2>
<p>Suppose that you&#8217;re writing a script that you want people to be able to use in their games. You need to store the Health for every character in the game, but you don&#8217;t know how many characters there will be. What do you do?</p>
<p>Dynamic Arrays are designed for just this purpose. You can declare an array like this:</p>
<p><code>int characterHealth[];</code></p>
<p>in your script file. This special notation tells AGS that you don&#8217;t yet know how large you want the array to be. Now, before you use the array (so probably in game_start), you can do this:</p>
<p><code>characterHealth = new int[Game.CharacterCount];</code></p>
<p>If you forget to do this <code>new</code> command, you&#8217;ll get a Null Pointer Error if you try to access the array. You can change the size of an array by simply using another <code>new</code> command with a different size; but this will erase the contents of the array in the process.</p>
<p>Currently dynamic arrays are supported as global and local variables, or members of normal (not managed) structs. Also, at present you can create arrays of basic types (int, char, etc) and of built-in types (String, Character, etc) but not of custom structs.</p>
<h2 id="extender-functions">Extender functions</h2>
<p>Suppose that you wanted to add a new function, &#8220;Scream&#8221;, to characters which would make them cry out &#8220;AARRRGGGHHH&#8221;. Because the Character type is defined within AGS, it&#8217;s not possible for you to just add a method to it.</p>
<p>That&#8217;s where Extender Functions come in. Here&#8217;s an example:</p>
<pre><code>function Scream(this Character*)
{
  this.Say(&quot;AAAAARRRRGGGGHHHHHH!!!!&quot;);
}</code></pre>
<p>This adds a new &#8220;Scream&#8221; function to the Character type, so that in your script code elsewhere you can do things like:</p>
<pre><code>player.Scream();
character[EGO].Scream();
cJohn.Scream();</code></pre>
<p>and so on.</p>
<p><strong>Where do I put this code?</strong></p>
<p>In the script header, you&#8217;d put:</p>
<p><code>import function Scream(this Character*);</code></p>
<p>and then put the main function in the script file. This will then allow it to be used by other scripts.</p>
<p><strong>Static extenders</strong></p>
<p>Since AGS 3.4.0 you may also create static extender functions, that is functions that are called from type, rather than an actual object. Static extender declaration is a bit different, for example:</p>
<pre><code>int AbsInt(static Maths, int value)
{
  if (value &lt; 0)
    return -value;
  return value;
}</code></pre>
<p>You declare the function&#8217;s import in the script header:</p>
<p><code>import int AbsInt(static Maths, int value);</code></p>
<p>and you use such function as:</p>
<pre><code>int x = Maths.AbsInt(-10);</code></pre>
<h2 id="game-variables">Game variables</h2>
<p>The following variables are available to your script. They allow you to do various tweaks to the engine at run-time.</p>
<p>Names in <strong>bold are </strong>read-only variables and should NOT be modified by the script.****</p>
<p>All the following variables are <code>int</code> variables.</p>
<p>|l|l|</p>
<h2 id="predefined-global-script-functions">Predefined global script functions</h2>
<p>In your main global script file, there are some functions which are automatically added when you create the game. These are global events, and the function is called when a particular event happens. There are also some other events which you can add if you want to.</p>
<p>The available event functions are:</p>
<dl>
<dt>dialog_request (int parameter)</dt>
<dd><p>Called when a dialog script line &#8220;run-script&#8221; is processed. PARAMETER is the value of the number following the &#8220;run-script&#8221; on that line of the dialog script.</p>
</dd>
<dt>game_start ()</dt>
<dd><p>Called at the start of the game, before the first room is loaded. You can use this to set up the initial positions of characters, and to turn GUIs on and off. <strong>You cannot run animations or do anything else which relies on a room being loaded.</strong></p>
</dd>
<dt>interface_click (int interface, int button)</dt>
<dd><p><strong>(Now Obsolete) Called when the player clicks on a button on a GUI which has its action set as &#8220;Run script&#8221;. INTERFACE is the number of the GUI which they clicked on. BUTTON is the object number of the button within this GUI.</strong></p>
</dd>
<dt>on_event (EventType event, int data)</dt>
<dd><p>Called whenever certain game events happen. The value of DATA depends on which event has occurred. This allows you to perform checks or update things every time the player does something, regardless of which room it is in. The possible values of event are:</p>
<pre><code>eEventEnterRoomBeforeFadein
      called just before room Player Enters Room event is run.
      DATA = new room number
eEventLeaveRoom
      called just after room Player Leaves Room event is run.
      DATA = room number they are leaving
eEventGotScore
      called whenever the player&#39;s score changes
      DATA = number of points they got
eEventGUIMouseDown
      called when a mouse button is pressed down over a GUI
      DATA = GUI number
eEventGUIMouseUp
      called when a mouse button is released over a GUI
      DATA = GUI number
eEventAddInventory
      the player just got a new inventory item
      DATA = inventory item number that was added
eEventLoseInventory
      the player just lost an inventory item
      DATA = inventory item number that was lost
eEventRestoreGame
      tells your game that it has just been restored from a save game
      DATA = save slot number</code></pre>
</dd>
<dt>on_key_press (eKeyCode keycode)</dt>
<dd><p>Called whenever a key is pressed on the keyboard. KEYCODE holds the ASCII value of the key. A list of these values is in .</p>
</dd>
<dt>on_mouse_click (MouseButton button)</dt>
<dd><p>Called when the player clicks a mouse button. BUTTON is either LEFT, RIGHT or MIDDLE, depending on which button was clicked. The &#8220;mouse.x&#8221; and &#8220;mouse.y&#8221; global variables contain the mouse&#8217;s position. ILBRK If &#8216;Handle inventory clicks in script&#8217; is enabled in the game options, this function can also be called with eMouseLeftInv, eMouseMiddleInv or eMouseRightInv, which indicate a left, middle or right click on an inventory item, respectively. ILBRK If &#8216;Enable mouse wheel support&#8217; is enabled, this function can also be called with eMouseWheelNorth or eMouseWheelSouth, which indicate the user moving the mouse wheel north or south, respectively.</p>
</dd>
<dt>repeatedly_execute()</dt>
<dd><p>Called every game cycle (normally 40 times per second). See for more information.</p>
</dd>
<dt>repeatedly_execute_always()</dt>
<dd><p>Called every game cycle, even when a blocking routine (eg. speech/cutscene) is in progress. You <strong>cannot call any blocking functions from this event handler. </strong>repeatedly_execute_always is called <strong>BEFORE the game objects (characters, rooms, etc) get updated. See for more information.</strong>****</p>
</dd>
<dt>late_repeatedly_execute_always()</dt>
<dd><p>Called every game cycle, even when a blocking routine (eg. speech/cutscene) is in progress. You <strong>cannot call any blocking functions from this event handler. </strong>late_repeatedly_execute_always is called <strong>AFTER the game objects (characters, rooms, etc) got updated, but before game is redrawn on screen.</strong>****</p>
</dd>
<dt>unhandled_event (int what, int type)</dt>
<dd><p>Called when an event occurs, but no handler is set up in the Events list. This could be used to display a default &#8220;I can&#8217;t do that&#8221; type of message. The values of WHAT and TYPE tell you what the player did. ILBRK The possible values are listed below:</p>
<pre><code>    WHAT TYPE Description
     1    1   Look at hotspot
     1    2   Interact with hotspot
     1    3   Use inventory on hotspot
     1    4   Talk to hotspot
     1    7   Pick up hotspot
     1    8   Cursor Mode 8 on hotspot
     1    9   Cursor Mode 9 on hotspot
     2    0   Look at object
     2    1   Interact with object
     2    2   Talk to object
     2    3   Use inventory on object
     2    5   Pick up object
     2    6   Cursor Mode 8 on object
     2    7   Cursor Mode 9 on object
     3    0   Look at character
     3    1   Interact with character
     3    2   Speak to character
     3    3   Use inventory on character
     3    5   Pick up character
     3    6   Cursor Mode 8 on character
     3    7   Cursor Mode 9 on character
     4    1   Look at nothing (ie. no hotspot)
     4    2   Interact with nothing
     4    3   Use inventory with nothing
     4    4   Talk to nothing
     5    0   Look at inventory
     5    1   Interact with inventory (currently not possible)
     5    2   Speak to inventory
     5    3   Use an inventory item on another
     5    4   Other click on inventory</code></pre>
<p>Note that the &#8220;Character stands on hotspot&#8221; event does not trigger this function, and it will not be triggered if there is an &#8220;Any click&#8221; event defined.</p>
<p>This function is <strong>not triggered if the player clicks on nothing (hotspot 0).</strong></p>
</dd>
</dl>
<p>The <em>on_key_press and </em>on_mouse_click events can also be handled by individual room scripts. If you add their function definitions to your room script in a similar way to how they are in the global script, the room script can intercept the keypress/mouseclick first, and then decide whether to pass it on to the global script or not. See the function for more.**</p>
<h2 id="repeatedly_execute-_always">repeatedly_execute (_always)</h2>
<p>One of the most common things you&#8217;ll need to do when scripting is to check if something has happened in the game &#8211; and if so, then make the game do something in response.</p>
<p>For example, suppose that you want a bird to fly backwards and forwards across the screen in the background. You need a way of telling the bird to move in one direction, recognise when it has finished, and tell it to move back again.</p>
<p>This is where <em>repeatedly_execute, </em>repeatedly_execute_always and <em>late_repeatedly_execute_always come in.</em>**</p>
<p><strong>What&#8217;s the difference between them?</strong></p>
<p>The <em>repeatedly_execute event is run on every game loop (by default this is 40 times per second), but only when the game is not blocked. That means that it will run as long as there are no current blocking animations or moves going on (ie. a Walk or Animate command where </em>eBlock has been specified as a parameter).**</p>
<p>On the other hand, <em>repeatedly_execute_always and </em>late_repeatedly_execute_always are always run on every game loop, no matter whether the game is blocked or not. This comes at a price though, which is that you cannot run any blocking code within it. So if you try to script a <em>player.Walk() command that passes the </em>eBlock parameter &#8211; or even just try to use a <code>Wait(1);</code> command, these will fail within <em>(late_)repeatedly_execute_always.</em>****</p>
<p>The difference between <em>repeatedly_execute_always and </em>late_repeatedly_execute_always is that first is run <strong>before game updates itself, changing animation frames, moving objects into new position etc, while the second, &#8220;late&#8221; version, is run </strong>after the game was updated, but before it redrew its new state on screen.******</p>
<p><strong>What would I use each one for?</strong></p>
<p>You would usually use <em>repeatedly_execute for doing things that affect the player character, and </em>repeatedly_execute_always for doing background tasks that don&#8217;t directly affect the player.**</p>
<p>For example, if your game kept track of the player&#8217;s hunger, you might want to check in <em>repeatedly_execute how long it has been since he last ate &#8211; and if it has been more than 20 minutes, make the player character stop walking and rub his stomach. Because you want to perform a blocking animation, and you wouldn&#8217;t want this to interrupt any specific cutscenes that were going on, repeatedly_execute would be the ideal place for it.</em></p>
<p>On the other hand, in the case of our bird flying across the screen, because we don&#8217;t want to block the game while the bird flies, and we just want it to happen in the background, <em>repeatedly_execute_always would be the place to put it.</em></p>
<p>The <em>late_repeatedly_execute_always is used in similar way to its &#8220;earlier&#8221; counterpart, but it may be essential if you need to precisely keep track of a game object movement. When </em>late_repeatedly_execute_always is called all the objects are already updated to their new states, therefore you will have accurate information about them. On contrary, the <em>repeatedly_execute_always will always be &#8220;one step behind&#8221; of the game state.</em>**</p>
<p>In a nutshell, if you need to do something right before game state changes, use <em>repeatedly_execute_always, if you need to do something right after game state has changed, use </em>late_repeatedly_execute_always.**</p>
<p><strong>How do I create them?</strong></p>
<p>In main game scripts, you create your <em>repeatedly_execute script function by just pasting it into the script as follows. In the GlobalScript.asc it is already created for you:</em></p>
<pre><code>function repeatedly_execute()
{
  // Put your script code here
}</code></pre>
<p>In rooms, it is slightly different. If you want to run some script that is specific to a particular room, open that room&#8217;s Events Pane and you&#8217;ll see a &#8220;Repeatedly execute&#8221; event. Click the &#8220;&#8230;&#8221; button and a function called something like <em>Room_RepExec will be created for you.</em></p>
<p>This is important to remember &#8211; in a room script, <strong>you cannot simply paste in a repeatedly_execute function; you need to use the Events Pane to create it instead.</strong></p>
<p>To create <em>repeatedly_execute_always, you can simply paste it into the script as above &#8211; but you can also paste it into room scripts. Therefore the following will work in any script, whether it be a room or a global script.</em></p>
<pre><code>function repeatedly_execute_always()
{
  // Put your script code here
}</code></pre>
<p>Remember, of course, that RepExec or <em>repeatedly_execute_always functions in a room script will only be run while the player is actually in that room!</em></p>
<p><strong>Can you show me an example?</strong></p>
<p>Let&#8217;s implement the two things we just talked about. Here&#8217;s our hunger checking code:</p>
<pre><code>function repeatedly_execute()
{
  // increment our timer variable (we would have created this
  // in the Global Variables editor)
  hungerTimer++;

  if (hungerTimer == 800)
  {
    Display(&quot;You are getting very hungry.&quot;);
    player.LockView(RUBSTOMACH);
    player.Animate(0, 5, eOnce, eBlock, eForwards);
    player.UnlockView();
  }
}</code></pre>
<p>and let&#8217;s put the bird flying code in the room script, because we only want it to happen in that one room:</p>
<pre><code>function repeatedly_execute_always()
{
  if (!cBird.Moving)
  {
    if (cBird.x &lt; 100)
    {
      // if the bird is on the left hand side of the screen,
      // start it moving towards the right
      cBird.Walk(400, cBird.y, eNoBlock, eAnywhere);
    }
    else
    {
      // otherwise, move it towards the left
      cBird.Walk(0, cBird.y, eNoBlock, eAnywhere);
    }
  }
}</code></pre>
<h2 id="custom-dialog-options-rendering">Custom dialog options rendering</h2>
<p>By default, AGS comes with two types of dialog options &#8211; displaying them using the size and position of an existing GUI, or creating a text window to display the options in.</p>
<p>As of AGS 3.1, if neither of these methods suit you (for example, because you want to use picture-based dialog options, or you want to add scroll arrows), you can now implement the dialog options display yourself in the script.</p>
<p><strong>NOTE: This topic involves some advanced scripting. If you&#8217;re just starting out with AGS, please just use one of the built-in dialog option styles for now, and come back to this later when you&#8217;re comfortable with scripting.</strong></p>
<p>To write your custom dialog options code, you need to do the following:</p>
<ul>
<li><p>Add a <code>dialog_options_get_dimensions</code> function to your script (an example follows). This function is called by AGS to find out which part of the screen you will be drawing onto. By setting the width and height to values greater than 0, the custom dialog system is activated.</p></li>
<li><p>Add a <code>dialog_options_render</code> function, which is called by AGS when it needs to draw the dialog options. A standard script is supplied, which you can use to draw onto.</p></li>
<li><p>Optionally, add a <code>dialog_options_mouse_click</code> function. This is called by AGS if the player clicks the mouse anywhere on dialog options GUI. You might want to use this to process clicks on dialog options, and also on some custom scroll arrows, for example.</p></li>
<li><p>Optionally, add a <code>dialog_options_key_press</code> function. This is called by AGS if the player presses any key while custom dialog options are shown on screen. You can use this to implement key-controlled selection of dialog option, for example.</p></li>
<li><p>Optionally, add a <code>dialog_options_repexec</code> function. This works similarily to general <code>repeatedly_execute</code> function, but is called only if custom dialog options are shown on screen. You may use this to handle any other situations, such as determining which option the mouse is currently hovering over, or scripting time-related actions.</p></li>
</ul>
<p>These functions don&#8217;t have to go in the global script; you can put them in any script you like. However, beware that if the functions are present in more than one script they could interfere with each other and cause problems.</p>
<p><strong>COMPATIBILITY NOTE: The older versions of AGS (pre-3.4.0) supported slightly different set of functions. Thus, there was no <code>dialog_options_repexec</code>, but you had to add <code>dialog_options_get_active</code> function instead, in which you set active option property. Clicks on the options were processed by AGS automatically, so doing this was essential. If you have imported older project and want to keep old dialog option scripts, then you should go to General Settings and enable &#8220;Use old-style dialog options rendering API&#8221;.</strong></p>
<p><strong>IMPORTANT: When adding the functions to the script, they all take in a parameter of type . The dialog_options_mouse_click function has an extra parameter for the mouse button, and dialog_options_key_press has an extra parameter for the key code. See the example below.</strong></p>
<p><strong>IMPORTANT: All of the Custom Dialog functions run on the non-blocking thread. That means that you should not make any blocking calls, such as Character.Say, Wait or Display within them, as they may not behave correctly.</strong></p>
<p><strong>Example A. Classic mouse controls</strong></p>
<pre><code>int dlg_opt_color = 14;
int dlg_opt_acolor = 13;
int dlg_opt_ncolor = 4;

function dialog_options_get_dimensions(DialogOptionsRenderingInfo *info)
{
  // Create a 200x200 dialog options area at (50,100)
  info.X = 50;
  info.Y = 100;
  info.Width = 200;
  info.Height = 200;
  // Enable alpha channel for the drawing surface
  info.HasAlphaChannel = true;
  // Put the text parser at the bottom (if enabled)
  info.ParserTextBoxX = 10;
  info.ParserTextBoxY = 160;
  info.ParserTextBoxWidth = 180;
}

function dialog_options_render(DialogOptionsRenderingInfo *info)
{
  info.Surface.Clear(dlg_opt_color);
  int i = 1,  ypos = 0;
  // Render all the options that are enabled
  while (i &lt;= info.DialogToRender.OptionCount)
  {
    if (info.DialogToRender.GetOptionState(i) == eOptionOn)
    {
      if (info.ActiveOptionID == i)
        info.Surface.DrawingColor = dlg_opt_acolor;
      else
        info.Surface.DrawingColor = dlg_opt_ncolor;
        
      info.Surface.DrawStringWrapped(5, ypos, info.Width - 10, 
              eFontFont0, eAlignLeft, info.DialogToRender.GetOptionText(i));
      ypos += GetTextHeight(info.DialogToRender.GetOptionText(i), eFontFont0, info.Width - 10);
    }
    i++;
  }
}

function dialog_options_repexec(DialogOptionsRenderingInfo *info)
{
  info.ActiveOptionID = 0;
  if (mouse.y &lt; info.Y || mouse.y &gt;= info.Y + info.Height ||
      mouse.x &lt; info.X || mouse.x &gt;= info.X + info.Width)
  {
    return; // return if the mouse is outside UI bounds
  }

  int i = 1, ypos = 0;
  // Find the option that corresponds to where the mouse cursor is
  while (i &lt;= info.DialogToRender.OptionCount)
  {
    if (info.DialogToRender.GetOptionState(i) == eOptionOn)
    {
      ypos += GetTextHeight(info.DialogToRender.GetOptionText(i), eFontFont0, info.Width - 10);
      if ((mouse.y - info.Y) &lt; ypos)
      {
        info.ActiveOptionID = i;
        return;
      }
    }
    i++;
  }
}

function dialog_options_mouse_click(DialogOptionsRenderingInfo *info, MouseButton button)
{
  if (info.ActiveOptionID &gt; 0)
    info.RunActiveOption();
}</code></pre>
<p>The examples above are slightly naive; in reality you would probably want to track the Y position of each option in a variable to save having to continually scan through all the options.</p>
<p><strong>Example B. Keyboard controls</strong></p>
<pre><code>int dlg_opt_color = 14;
int dlg_opt_acolor = 13;
int dlg_opt_ncolor = 4;

function dialog_options_get_dimensions(DialogOptionsRenderingInfo *info)
{
  // Create a 200x200 dialog options area at (50,100)
  info.X = 50;
  info.Y = 100;
  info.Width = 200;
  info.Height = 200;
  info.ActiveOptionID = 1; // set to first option
}

function dialog_options_render(DialogOptionsRenderingInfo *info)
{
  info.Surface.Clear(dlg_opt_color);
  int i = 1,  ypos = 0;
  // Render all the options that are enabled
  while (i &lt;= info.DialogToRender.OptionCount)
  {
    if (info.DialogToRender.GetOptionState(i) == eOptionOn)
    {
      if (info.ActiveOptionID == i)
        info.Surface.DrawingColor = dlg_opt_acolor;
      else
        info.Surface.DrawingColor = dlg_opt_ncolor;

      info.Surface.DrawStringWrapped(5, ypos, info.Width - 10, 
          eFontFont0, eAlignLeft, info.DialogToRender.GetOptionText(i));
      ypos += GetTextHeight(info.DialogToRender.GetOptionText(i), eFontFont0, info.Width - 10);
    }
    i++;
  }
}

function dialog_options_key_press(DialogOptionsRenderingInfo *info, eKeyCode keycode) 
{
  if (keycode == eKeyUpArrow &amp;&amp; info.ActiveOptionID &gt; 1)
    info.ActiveOptionID = info.ActiveOptionID - 1;
  if (keycode == eKeyDownArrow &amp;&amp; info.ActiveOptionID &lt; info.DialogToRender.OptionCount)
    info.ActiveOptionID = info.ActiveOptionID + 1;
  if (keycode == eKeyReturn || keycode == eKeySpace)
    info.RunActiveOption();
}</code></pre>
<p>For more detail on the commands used here, see the page.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.1.0 and later versions.</strong></em></p>
<h2 id="built-in-enumerated-types">Built-in enumerated types</h2>
<p>AGS has several built in. These are used in calls to various commands, and will usually pop up automatically in autocomplete. However, for times where autocomplete doesn&#8217;t do the job, having a manual reference is invaluable:</p>
<pre><code>enum BlockingStyle {
  eBlock,
  eNoBlock
};</code></pre>
<p><em>Used by: , , , , , , , ,</em></p>
<pre><code>enum CharacterDirection {
  eDirectionDown = 0,
  eDirectionLeft,
  eDirectionRight,
  eDirectionUp,
  eDirectionDownRight,
  eDirectionUpRight,
  eDirectionDownLeft,
  eDirectionUpLeft,
  eDirectionNone = SCR_NO_VALUE
};</code></pre>
<p><em>Used by: ,</em></p>
<pre><code>enum Direction {
  eForwards,
  eBackwards
};</code></pre>
<p><em>Used by: ,</em></p>
<pre><code>enum WalkWhere {
  eAnywhere,
  eWalkableAreas
};</code></pre>
<p><em>Used by: , ,</em></p>
<pre><code>enum RepeatStyle {
  eOnce,
  eRepeat
};</code></pre>
<p><em>Used by: , ,</em></p>
<pre><code>enum Alignment {
  eAlignLeft,
  eAlignCentre,
  eAlignRight
};</code></pre>
<p><em>Used by:</em></p>
<pre><code>enum eFlipDirection {
  eFlipLeftToRight,
  eFlipUpsideDown,
  eFlipBoth
};</code></pre>
<p><em>Used by:</em></p>
<pre><code>enum TransitionStyle {
  eTransitionFade,
  eTransitionInstant,
  eTransitionDissolve,
  eTransitionBoxout,
  eTransitionCrossfade
};</code></pre>
<p><em>Used by: ,</em></p>
<pre><code>enum MouseButton {
  eMouseLeft,
  eMouseRight,
  eMouseMiddle,
  eMouseLeftInv,
  eMouseMiddleInv,
  eMouseRightInv,
  eMouseWheelNorth,
  eMouseWheelSouth
};</code></pre>
<p><em>Used by: ILBRK </em>Passed into: on_mouse_click**</p>
<pre><code>enum EventType {
  eEventLeaveRoom,
  eEventEnterRoom,
  eEventGotScore,
  eEventGUIMouseDown,
  eEventGUIMouseUp,
  eEventAddInventory,
  eEventLoseInventory,
  eEventRestoreGame
};</code></pre>
<p><em>Passed into: on_event</em></p>
<pre><code>enum RoundDirection {
  eRoundDown,
  eRoundNearest,
  eRoundUp
};</code></pre>
<p><em>Used by:</em></p>
<pre><code>enum eSpeechStyle {
  eSpeechLucasarts,
  eSpeechSierra,
  eSpeechSierraWithBackground,
  eSpeechFullScreen
};</code></pre>
<p><em>Used by:</em></p>
<pre><code>enum SkipSpeechStyle {
  eSkipKeyMouseTime = 0,
  eSkipKeyTime      = 1,
  eSkipTime         = 2,
  eSkipKeyMouse     = 3,
  eSkipMouseTime    = 4,
  eSkipKey          = 5,
  eSkipMouse        = 6
};</code></pre>
<p><em>Used by:</em></p>
<pre><code>enum eVoiceMode {
  eSpeechTextOnly,
  eSpeechVoiceAndText,
  eSpeechVoiceOnly
};</code></pre>
<p><em>Used by:</em></p>
<pre><code>enum DialogOptionState {
  eOptionOff,
  eOptionOn,
  eOptionOffForever
};</code></pre>
<p><em>Used by: ,</em></p>
<pre><code>enum CutsceneSkipType {
  eSkipESCOnly,
  eSkipAnyKey,
  eSkipMouseClick,
  eSkipAnyKeyOrMouseClick,
  eSkipESCOrRightButton
};</code></pre>
<p><em>Used by:</em></p>
<pre><code>enum eOperatingSystem {
  eOSDOS,
  eOSWindows,
  eOSLinux,
  eOSMacOS,
  eOSAndroid,
  eOSiOS,
  eOSPSP
};</code></pre>
<p><em>Used by:</em></p>
<pre><code>enum eCDAudioFunction {
  eCDIsDriverPresent,
  eCDGetPlayingStatus,
  eCDPlayTrack,
  eCDPausePlayback,
  eCDResumePlayback,
  eCDGetNumTracks,
  eCDEject,
  eCDCloseTray,
  eCDGetCDDriveCount,
  eCDSelectActiveCDDrive
};</code></pre>
<p><em>Used by:</em></p>
<pre><code>enum CursorMode {
  eModeXXXX,
  eModeXXXX,
  ...
};</code></pre>
<p>The CursorMode enumeration is generated automatically based on your mouse cursors. The cursor mode name is taken, all its spaces are removed, and <em>eMode is added to the front. ILBRK </em>Used by: , , , , , , , , , , , , , , ,**</p>
<pre><code>enum FontType {
  eFontXXXX,
  eFontXXXX,
  ...
};</code></pre>
<p>The FontType enumeration is generated automatically based on your fonts. The font name is taken, all its spaces are removed, and <em>eFont is added to the front. ILBRK </em>Used by: , , , , , , , , , , , ,**</p>
<pre><code>enum LocationType {
  eLocationNothing,
  eLocationHotspot,
  eLocationCharacter,
  eLocationObject
};</code></pre>
<p><em>Returned by:</em></p>
<pre><code>enum FileMode {
  eFileRead,
  eFileWrite,
  eFileAppend
};</code></pre>
<p><em>Used by:</em></p>
<pre><code>enum FileSeek {
  eSeekBegin = 0,
  eSeekCurrent = 1,
  eSeekEnd = 2
};</code></pre>
<p><em>Used by:</em></p>
<pre><code>enum DialogOptionSayStyle {
  eSayUseOptionSetting,
  eSayAlways,
  eSayNever
};</code></pre>
<p><em>Used by:</em></p>
<pre><code>enum VideoSkipStyle {
  eVideoSkipNotAllowed,
  eVideoSkipEscKey,
  eVideoSkipAnyKey,
  eVideoSkipAnyKeyOrMouse
};</code></pre>
<p><em>Used by:</em></p>
<pre><code>enum AudioFileType {
  eAudioFileOGG,
  eAudioFileMP3,
  eAudioFileWAV,
  eAudioFileVOC,
  eAudioFileMIDI,
  eAudioFileMOD
};</code></pre>
<p><em>Used by:</em></p>
<pre><code>enum AudioPriority {
  eAudioPriorityVeryLow = 1,
  eAudioPriorityLow = 25,
  eAudioPriorityNormal = 50,
  eAudioPriorityHigh = 75,
  eAudioPriorityVeryHigh = 100
};</code></pre>
<p><em>Used by: , ,</em></p>
<h2 id="script-language-keywords">Script language keywords</h2>
<h3 id="arrays">Arrays</h3>
<p><em>data_type </em>name <code>[</code> <em>size <code>];</code></em>**</p>
<p>Arrays allow you to easily create several variables of the same type. For example, suppose you wanted to store a health variable for all the different characters in the game. One way would be to declare several different variables like this:</p>
<pre><code>int egoHealth;
int badGuyHealth;
int swordsmanHealth;</code></pre>
<p>but that quickly gets messy and difficult to keep up to date, since you need to use different script code to update each one. So instead, you can do this:</p>
<pre><code>int health[50];</code></pre>
<p>This example declares 50 int variables, all called <em>health. ILBRK You access each seperate variable via its <strong>index (the number in the brackets). Indexes start from 0, so in this case the <em>health array can be accessed by indexes 0 to 49. If you attempt to access an invalid index, your game will exit with an error.</em></strong></em></p>
<p>Here&#8217;s an example of using the array:</p>
<pre><code>  health[3] = 50;
  health[4] = 100;
  health[player.ID] = 10;</code></pre>
<p>this sets Health 3 to 50, Health 4 to 100, and the Health index that corresponds to the player character&#8217;s ID number to 10.</p>
<p>See Also:</p>
<h3 id="data-types">Data types</h3>
<p>|l|l|</p>
<p>You will normally only need to use the <strong>int and </strong>String data types. The smaller types are only useful for conserving memory if you are creating a very large number of variables.****</p>
<p>To declare a variable, write the type followed by the variable name, then a semicolon. For example:</p>
<p><code>int my_variable;</code></p>
<p>declares a new 32-bit integer called my_variable</p>
<p><strong>WARNING: When using the <em>float data type, you may find that the == and != operators don&#8217;t seem to work properly. For example:</em></strong></p>
<pre><code>float result = 2.0 * 3.0;
if (result == 6.0) {
  Display(&quot;Result is 6!&quot;);
}</code></pre>
<p>may not always work. This is due to the nature of floating point variables, and the solution is to code like this:</p>
<pre><code>float result = 2.0 * 3.0;
if ((result &gt; 5.99) &amp;&amp; (result &lt; 6.01)) {
  Display(&quot;Result is 6!&quot;);
}</code></pre>
<p>The way floating point numbers are stored means that 6 might actually be stored as 6.000001 or 5.999999; this is a common gotcha to all programming languages so just be aware of it if you use any floating point arithmetic.</p>
<h3 id="operators">Operators</h3>
<p>The AGS scripting engine supports the following operators in expressions. They are listed in order of precedence, with the most tightly bound at the top of the list.</p>
<p><strong>WARNING: When using operators of equal precedence, AGS by default evaluates them right-to-left. So, the expression <code>a = 5 - 4 - 2;</code> evaluates as <code>a = 5 - (4 - 2);</code> which is not what you might expect. Always use parenthesis to make it clear what you want. ILBRK The &#8220;Left-to-right operator precedence&#8221; option on the General Settings pane allows you to control this behaviour.</strong></p>
<hr />
<pre><code>Operator  Description              Example

  !    NOT                        if (!a)
  *    Multiply                   a = b * c;
  /    Divide                     a = b / c;
  %    Remainder                  a = b % c;
  +    Add                        a = b + c;
  -    Subtract                   a = b - c;
  &lt;&lt;   Bitwise Left Shift         a = b &lt;&lt; c;
       (advanced users only)
  &gt;&gt;   Bitwise Right Shift        a = b &gt;&gt; c;
       (advanced users only)
  &amp;    Bitwise AND                a = b &amp; c;
       (advanced users only)
  |    Bitwise OR                 a = b | c;
       (advanced users only)
  ^    Bitwise XOR                a = b ^ c;
       (advanced users only)
  ==   Is equal to                if (a == b)
  !=   Is not equal to            if (a != b)
  &gt;    Is greater than            if (a &gt; b)
  &lt;    Is less than               if (a &lt; b)
  &gt;=   Is greater than or equal   if (a &gt;= b)
  &lt;=   Is less than or equal      if (a &lt;= b)
  &amp;&amp;   Logical AND                if (a &amp;&amp; b)
  ||   Logical OR                 if (a || b)</code></pre>
<p>This order of precedence allows expressions such as the following to evaluate as expected:</p>
<p><code>if (!a &amp;&amp; b &lt; 4)</code></p>
<p>which will execute the &#8216;if&#8217; block if <strong>a is 0 and </strong>b is less than 4.****</p>
<p>However, it is always good practice to use parenthesis to group expressions. It&#8217;s much more readable to script the above expression like this:</p>
<p><code>if ((!a) &amp;&amp; (b &lt; 4))</code></p>
<h3 id="constants">Constants</h3>
<p>The following predefined macros are available in your scripts:</p>
<p>|l|l|</p>
<p>You can check for whether a macro is defined or not by using the <code>#ifdef</code> and <code>#ifndef</code> keywords:</p>
<pre><code>#ifndef STRICT
  // only compile the MoveCharacter command if not using object-based scripting
  MoveCharacter(EGO, 30, 40);
#endif
#ifdef DEBUG
  // only display this when the game is compiled in debug mode
  Display(&quot;Debugging information&quot;);
#endif</code></pre>
<p>There is also an <code>#error</code> directive you can use to stop the script compiling:</p>
<pre><code>#ifndef AGS_NEW_STRINGS
#error This script requires at least AGS 2.71
#endif</code></pre>
<p>The other constants (AGS_MAX_*) are useful if you are writing some script code that you want to be portable to different versions of AGS, and to pick up the limits from the user&#8217;s AGS version. For example, if you wanted to store some extra information on all the inventory items, you could do:</p>
<pre><code>int invWeights[AGS_MAX_INV_ITEMS];</code></pre>
<p>To get the actual number of things in the game rather than the AGS limit, use the -style properties.</p>
<h3 id="version-checking">Version checking</h3>
<p>If you are writing a script module, you may need to check which version of AGS the user of your module is using.</p>
<p>For this purpose there are two directives:</p>
<pre><code>#ifver 2.72
// do stuff for 2.72 and above
#endif
#ifnver 2.72
// do stuff for 2.71 and below
#endif</code></pre>
<p>Note that this ability was only added in 2.72, so you cannot use the <code>#ifver</code> checks if you want your module to work with earlier versions than this.</p>
<h3 id="if-else-statements">if, else statements</h3>
<p><strong>if ( <em>expression <strong>) <code>{</code> ILBRK <em>statements1 ILBRK <code>}</code> ILBRK [ <strong>else <code>{</code> ILBRK <em>statements2 ILBRK <code>}</code> ]</em></strong></em></strong></em></strong></p>
<p>If <em>expression is true, then </em>statements1 are run.**</p>
<p>If <em>expression is not true, and there is an <strong>else clause present, then <em>statements2 are run instead.</em></strong></em></p>
<p>For example:</p>
<pre><code>if (GetGlobalInt(5) == 10) {
  Display(&quot;Globalint 5 is 10.&quot;);
}
else {
  Display(&quot;Globalint 5 is not 10.&quot;);
}</code></pre>
<p>In this example, the first message will be displayed if the return value from <code>GetGlobalInt(5)</code> is 10, and the second message will be displayed if it is not.</p>
<p><strong>if statements can be nested inside </strong>else statements to produce an &#8220;else if&#8221; effect. For example:****</p>
<pre><code>if (GetGlobalInt(5) == 1) {
  Display(&quot;Globalint 5 is 1.&quot;);
}
else if (GetGlobalInt(5) == 2) {
  Display(&quot;Globalint 5 is 2.&quot;);
}
else {
  Display(&quot;Globalint 5 is not 1 or 2.&quot;);
}</code></pre>
<h3 id="switch-case-statements">switch, case statements</h3>
<p><strong>switch ( <em>expression <strong>) <code>{</code> ILBRK [ </strong>case </em>expression: ILBRK <em>statements ILBRK [ <strong>break; ] ] ILBRK [ </strong>default: ILBRK </em>statements ILBRK [ </strong>break; ] ] ILBRK <code>}</code>****************</p>
<p>Calculates first <em>expression in the <strong>switch header, then finds a </strong>case statement which </em>constant expression matches the <em>result of the previous calculation, and begins executing statements under that <strong>case. When doing so, it ignores any other </strong>case statements, but runs all the statements under them. Stops only when reaching the switch&#8217;s end, or <strong>break statement. If the result of <em>expression is not found in any of the <strong>case lines, then goes to </strong>default line and runs statements from that point. If no <strong>default statement found in the switch, then the whole switch is skipped. </strong>Switch may have any number of <strong>case statements and only one </strong>default statement, but they may be arranged in any order.</em></strong></em>**********************</p>
<p>Unlike many programming languages, AGS allows expression result of any type (integer, boolean, string, pointers).</p>
<p><strong>KNOWN ISSUES:</strong></p>
<ul>
<li><p>Since the final release of AGS 3.4.0 usage of strings in the switch is broken: instead of comparing by value, as intended, they are instead compared as pointers.</p></li>
<li><p>Local function variables do not work when being used in the &#8220;case&#8221; expression.</p></li>
</ul>
<p>We expect above to be fixed in the future updates.</p>
<p>Example:</p>
<pre><code>switch (player)
{
case cEgo: Display(&quot;Hello, my name is Ego, default player controlled character.&quot;); break;
case cJohn: Display(&quot;Greetings, I am John, the male character.&quot;); break;
case cMary: Display(&quot;Hi there, I am Mary, the female character.&quot;); break;
default:
  Display(&quot;I am not really sure what character the player is controlling, this might be a bug&quot;);
  break;
}</code></pre>
<p>Example with &#8220;fall-through&#8221; cases:</p>
<pre><code>switch (player)
{
case cJohn:
case cMary:
  player.Say(&quot;I like oranges.&quot;)
  break;
case cEgo:
  player.Say(&quot;I like apples.&quot;);
default:
  player.Say(&quot;I would like some berries.&quot;);
}</code></pre>
<p>In the above example both cJohn and cMary cases lead to &#8220;I like oranges&#8221; line. cEgo sais &#8220;I like apples&#8221; and then also &#8220;I would like some berries&#8221;. If there were any other player controlled character, not mentioned in this switch, they would go straight to default line.</p>
<h3 id="while">while</h3>
<p><strong>while ( <em>expression <strong>) <code>{</code> ILBRK <em>statements ILBRK <code>}</code></em></strong></em></strong></p>
<p>Runs <em>statements continuously, while </em>expression is true.**</p>
<p>For example:</p>
<pre><code>while (cEgo.Moving) {
  Wait(1);
}</code></pre>
<p>will run the script <code>Wait(1);</code> repeatedly, as long as <code>cEgo.Moving</code> is not zero. Once it is zero, the <strong>while statement will exit at the end of the loop.</strong></p>
<h3 id="do..while">do..while</h3>
<p><strong>do <code>{</code> ILBRK <em>statements ILBRK <code>}</code> <strong>while ( <em>expression <strong>);</strong></em></strong></em></strong></p>
<p>Similarily to runs <em>statements continuously, so long as </em>expression is true, but unlike <strong>while it checks the expression AFTER executing statements, not before. This also means that the statements will be executed at least once.</strong>**</p>
<p>For example:</p>
<pre><code>do
{
  cEgo.Move(cEgo.x + 1, cEgo.y);
}
while (IsKeyPressed(eKeyRightArrow));</code></pre>
<p>will run the script <code>cEgo.Move(cEgo.x + 1, cEgo.y);</code> once, and then continue run it repeatedly, as long as the right arrow key is pressed by player.</p>
<h3 id="for">for</h3>
<p><strong>for ( [<em>initialization]<strong>; [<em>expression]<strong>; [<em>iteration] <strong>) <code>{</code> ILBRK <em>statements ILBRK <code>}</code></em></strong></em></strong></em></strong></em></strong></p>
<p>This loop command first performs <em>initialization statements, then runs </em>statements inside curved brackets continuously. Each time before executing these statements it checks whether <em>expression is true, and if not - ends the loop. Each time after statements were executed it additionally runs </em>iteration statements.****</p>
<p><em>Initialization is commonly used to declare variables or setting up existing variable values. If a new variable is declared in </em>initialization - such variable will exist and may be used only inside the loop. <em>Iteration step is usually meant to &#8220;move&#8221; to the next step, by changing some variable value. Every part of the command header - </em>initialization, <em>expression and </em>iteration - is optional: there may be <strong>for command without initialization, or without iteration, or even without conditional expression (in which case loop should be ended with either or statement).</strong>******</p>
<p>For example:</p>
<pre><code>for (int i = 0; i &lt; Game.CharacterCount; i++)
{
  Display(&quot;My name is %s&quot;, character[i].Name);
}</code></pre>
<p>will look over every character in game and display their names.</p>
<p>Another example (note missing initialization and iteration):</p>
<pre><code>for (; cEgo.x &lt; 100;)
{
  Wait(1);
}</code></pre>
<p>This will repeat <code>Wait(1);</code> until cEgo character does not move beyond coordinate x = 100.</p>
<h3 id="break">break</h3>
<p><strong>break;</strong></p>
<p><code>break</code> statement ends the execution of most inner loop or immediately. After this script continues running from the next line after loop or switch.</p>
<p>For example:</p>
<pre><code>while (cEgo.Moving) {
  if (IsKeyPressed(eKeyEscape))
    break;

  Wait(1);
}</code></pre>
<p>will run the script <code>Wait(1);</code> repeatedly, as long as <code>cEgo.Moving</code> is not zero. If player presses Escape key, the loop is terminated immediately.</p>
<h3 id="continue">continue</h3>
<p><strong>continue;</strong></p>
<p><code>continue</code> statement makes the loop skip remaining statements in current iteration and proceed to the next end-condition check, followed by the loop restart, if condition is still met, or loop end. If in kind of loop, the <em>iteration statement is executed right before that.</em></p>
<p>For example:</p>
<pre><code>for (int i = 0; i &lt; 100; i++)
{
  // multiple statements here
  
  if (i &gt; 50)
    continue;
  
  // more statements following
}</code></pre>
<p>will run first part of the loop statements always, and second part only when <code>i &lt;= 50</code>.</p>
<h3 id="function">function</h3>
<p><strong>function <em>name <code>(</code> [</em>type1 param1, <em>type2 param2, &#8230; ] <code>)</code></em></strong>**</p>
<p>Declares a custom function in your script. A function is a way in which you can separate out commonly used code into its own place, and thus avoid duplicating code.</p>
<p>For example, suppose that you quite often want to play a sound and add an inventory item at the same time. You could write both commands each time, or you could define a custom function:</p>
<pre><code>function AddInvAndPlaySound(InventoryItem* item) {
  player.AddInventory(item);
  aInventorySound.Play();
}</code></pre>
<p>then, elsewhere in your code you can simply call:</p>
<pre><code>AddInvAndPlaySound(iKey);</code></pre>
<p>to add inventory item <em>iKey and play the sound.</em></p>
<p>Generally, you place your functions in your global script. You then need to add an line to your script header to allow the function to be called from room scripts.</p>
<p><strong>Optional parameters</strong></p>
<p>You can make <em>int parameters optional if there is a default value that the user doesn&#8217;t need to supply. To do this, change the script header </em>import declaration like this:**</p>
<pre><code>import function TestFunction(int stuff, int things = 5);</code></pre>
<p>that declares a function with a mandatory <em>stuff parameter, and an optional </em>things parameter. If the caller does not supply the second parameter, it will default to 5.**</p>
<p><strong>NOTE: To use optional parameters, you need to have an &#8220;import&#8221; declaration for the function in the script header. The default values cannot be specified in the actual function declaration itself.</strong></p>
<h3 id="return">return</h3>
<p><strong>return;</strong></p>
<p>Immediately quits currently run function and returns to the previous script function current one was called from, if there was any, otherwise passes execution to engine. <strong>return can be put in any place in the the function, no matter if it is inside the if/else statement group, loop or switch - it will still work as immediate function exit.</strong></p>
<p>If the function is declared with return type other than <strong>void (or simply like <code>function</code>), then the </strong>return statement <strong>has to specify </strong>return value.********</p>
<pre><code>int GetHowManyTradeGoodsShopkeeperHas() {
  return 2;
}</code></pre>
<p>Alternatively, when function is not supposed to have any return value, sometimes you may want to break out of current function before it ends naturally:</p>
<pre><code>function DoThisAndOptionallyThat(bool do_all) {
  // multiple statements here
  
  if (!do_all)
    return; // quit the function prematurely
    
  // more statements following
}</code></pre>
<h3 id="struct">struct</h3>
<p><strong>struct <em>name <code>{</code></em></strong></p>
<p>Declares a custom struct type in your script. ILBRK Structs allow you to group together related variables in order to make your script more structured and readable. For example, suppose that wanted to store some information on weapons that the player could carry. You could declare the variables like this:</p>
<pre><code>int swordDamage;
int swordPrice;
String swordName;</code></pre>
<p>but that quickly gets out of hand and leaves you with tons of variables to keep track of. This is where structs come in:</p>
<pre><code>struct Weapon {
  int damage;
  int price;
  String name;
};</code></pre>
<p>Now, you can declare a struct in one go, like so:</p>
<pre><code>Weapon sword;
sword.damage = 10;
sword.price = 50;
sword.name = &quot;Fine sword&quot;;</code></pre>
<p>Much neater and better organised. You can also combine structs with :</p>
<pre><code>// at top of script
Weapon weapons[10];
// inside script function
weapons[0].damage = 10;
weapons[0].price = 50;
weapons[0].name = &quot;Fine sword&quot;;
weapons[1].damage = 20;
weapons[1].price = 80;
weapons[1].name = &quot;Poison dagger&quot;;</code></pre>
<p>structs are essential if you have complex data that you need to store in your scripts.</p>
<h3 id="managed-struct">managed (struct)</h3>
<p><strong>managed struct <em>name <code>{</code></em></strong></p>
<p><strong>Managed is a modifier that can be applied to </strong>struct declaration to make them managed structs.****</p>
<p>Managed structs are special in the way that objects of their types are created in dynamic pool as opposed to global variables, that exist from the game start to when the game is shut down, and local variables, that exist only when their function is run. You cannot declare a variable of managed struct, but only a pointer variable.</p>
<p>The advantage of such managed (or dynamic) objects is that they are created only when needed and disposed of when no longer needed. Also, since you work with pointer to object instead of object itself, you may assign them to another variable without copying object itself, pass them to function as parameter, or return from the function.</p>
<p><strong>IMPORTANT: there is a big limitation for user-defined managed structs now, it is that they themselves cannot have members of pointer types (or dynamic arrays).</strong></p>
<p>Example:</p>
<pre><code>managed struct Apple {
  int color;
  int freshness;
};</code></pre>
<p>This declares managed struct. To declare a pointer to such struct you do:</p>
<pre><code>Apple* my_apple;</code></pre>
<p>This creates a pointer variable <code>my_apple</code> of managed type <code>Apple</code>.</p>
<p>However, this does <strong>not create an object itself yet, and <code>my_apple</code> is assigned </strong>null value now. If you try to access struct members using <code>my_apple</code> now, you will get errors. To create an actual object you need to use a keyword:****</p>
<pre><code>my_apple = new Apple;</code></pre>
<p>The object is now created in the dynamic memory pool, and variable <code>my_apple</code> <strong>points to it. This lets us access object contents:</strong></p>
<pre><code>my_apple.color = Game.GetColorFromRGB(255, 0, 0);
my_apple.freshness = 100;</code></pre>
<p>You may copy pointer to another variable of same type:</p>
<pre><code>Apple* apple2 = my_apple;</code></pre>
<p>This does <strong>not copy object itself, only its address in dynamic pool, meaning both variables - <code>my_apple</code> and <code>appl2</code> - point to same object!</strong></p>
<p>You may write a function that take such pointer as parameter:</p>
<pre><code>function DisplayAppleDescription(Apple* apple) {
  String s = String.Format(&quot;Apple has color %d and freshness %d&quot;, apple.color, apple.freshness);
  Display(s);
}</code></pre>
<p>and then call it like:</p>
<pre><code>DisplayAppleDescription(my_apple);</code></pre>
<p>You may write a function that returns pointer to apple:</p>
<pre><code>Apple* CreateYellowApple(int fresh) {
  Apple* apple = new Apple;
  apple.color = Game.GetColorFromRGB(255, 0, 255);
  apple.freshness = fresh;
  return apple;
}</code></pre>
<p>and then use such function just like:</p>
<pre><code>Apple *my_apple = CreateYellowApple(50);</code></pre>
<p><strong>When does the dynamic object gets destroyed? After you created dynamic object as described above, it will exist in memory as long as <em>there is at least one pointer variable pointing to it. As soon as the last pointer gets destroyed itself (for example, if it was local function variable, and function ended), or is assigned another object, or simply assigned <code>null</code>, then the dynamic object is removed from your game forever.</em></strong></p>
<p>See Also: ,</p>
<h3 id="new">new</h3>
<p><em>pointer_variable = <strong>new <em>managed_type;</em></strong></em></p>
<p>Creates a new dynamic (managed) object of <em>managed_type and assigns it to </em>pointer_variable.**</p>
<p>Example:</p>
<pre><code>// Here we declare a managed struct for Apple
managed struct Apple {
  int color;
  int freshness;
};

// ...and declare a global pointer to Apple
Apple* SomeApple;

// At the game start we create a new dynamic object of Apple type
// and assign its address to the pointer variable
function game_start()
{
  SomeApple = new Apple;
}</code></pre>
<p>See Also: ,</p>
<h3 id="enum">enum</h3>
<p><strong>Recommended for advanced users only</strong></p>
<p><strong>enum <em>name <code>{</code> ILBRK </em>option1 [ = <em>value1 ], ILBRK </em>option2 [ = <em>value2 ], ILBRK &#8230; ILBRK <code>};</code></em></strong>****</p>
<p>Declares an enumeration type. An enumeration allows you to group together a set of related options, where only one will be true at any one time &#8211; a bit like the contents of a list box.</p>
<p>For example, if you have a script function, <em>doStuff, that can perform 3 different operations, you could do this:</em></p>
<pre><code>function doStuff(int param) {
  if (param == 1) {
    // do something
  }
  else if (param == 2) {
    // do something else
  }
  // etc
}</code></pre>
<p>but it&#8217;s hard to read, and when calling the function from elsewhere in your script, it&#8217;s not clear what 1 or 2 means. That&#8217;s where enums come in:</p>
<pre><code>enum DoStuffOption {
  BakeCake,
  DoLaundry
};

function doStuff(DoStuffOption param) {
  if (param == BakeCake) {
    // do something
  }
  else if (param == DoLaundry) {
    // do something else
  }
  // etc
}</code></pre>
<p>and then the calling code looks like: ILBRK <code>doStuff(BakeCake);</code> ILBRK thus making it perfectly clear what the command will do.</p>
<p>Normally, you would put the enum definition into the script header.</p>
<p>In summary, enums are not an essential part of scripting and you can get away perfectly well without using them, but in some specific situations they&#8217;re very handy.</p>
<h3 id="this">this</h3>
<p>There are two uses for the <code>this</code> keyword.</p>
<p><strong>1. Accessing members of the current struct</strong></p>
<p>When you are creating custom , you use the &#8220;this&#8221; keyword inside member functions to refer to the current struct. For example:</p>
<p>Suppose you had this in your script header:</p>
<pre><code>struct MyStruct {
  int myValue;

  import function MyMethod();
};</code></pre>
<p>Then, in your main script, you could put this:</p>
<pre><code>function MyStruct::MyMethod()
{
  this.myValue = 5;
}</code></pre>
<p>The <code>MyStruct::MyMethod</code> tells AGS that you are defining the function <em>MyMethod which belongs to the struct </em>MyStruct (the <code>::</code> operator means &#8220;belongs to&#8221;).**</p>
<p>The code above will mean that when the MyMethod function is called, it sets the <code>myValue</code> variable to 5.</p>
<p><strong>2. Declaring extender functions</strong></p>
<p>Please see the page for details.</p>
<h3 id="import">import</h3>
<p><strong>import <em>declaration ;</em></strong></p>
<p>Declares <em>declaration as a variable or function which is external to the current script, but that the script needs access to it. You use this to provide your room scripts with access to parts of your global script.</em></p>
<p>For example:</p>
<pre><code>import int counter;
import function add_numbers (int, int);</code></pre>
<p>This imports an integer variable <code>counter</code> and the function <code>add_numbers</code> from the global script to enable the current script to call them. You normally place import statements into the script header so that all rooms can benefit from them.</p>
<p>In order to import the variable, it must have been exported from the global script with the .</p>
<p><strong>NOTE: You </strong>MUST import external variables with the correct type. If <code>counter</code> was declared as a <strong>short in the global script, you MUST import it as a short, otherwise your game may crash.</strong>****</p>
<p><strong>NOTE: You cannot import old-style <code>string</code> variables (this does not apply to new-style <code>String</code> variables).</strong></p>
<h3 id="export">export</h3>
<p><strong>export <em>variable [, </em>variable &#8230; ] ;</strong>**</p>
<p>Declares that <em>variable can be exported and accessed by other scripts. You must place this at the <strong>end of your global script. You can export many variables with one export line.</strong></em></p>
<p>For example:</p>
<pre><code>export my_variable;
export counter, strength;</code></pre>
<p>This exports three variables - my_variable, counter and strength.</p>
<h3 id="noloopcheck">noloopcheck</h3>
<p>function <strong>noloopcheck <em>function_name ( </em>parameters &#8230; ) <code>{</code></strong>**</p>
<p>The noloopcheck keyword disables the script loop checking for the current function.</p>
<p>Normally, if a loop runs for more than 150,000 loops, AGS will assume that the script has hung and abort the game. This is to assist scripting since otherwise the game would lock up if you scripted a loop wrongly.</p>
<p>However, there are some rare situations in which you need a loop to run several thousand times (for example, when initialising a very large array). In this case, the <em>noloopcheck keyword can be used to stop AGS aborting your script.</em></p>
<p><strong>NOTE: The <em>noloopcheck keyword must be placed between &#8220;function&#8221; and the function&#8217;s name. ILBRK If you import the function into the script header, you <strong>do not include the &#8220;noloopcheck&#8221; keyword in the import declaration &#8211; it is only included in the actual function body.</strong></em></strong></p>
<p><strong>NOTE: If AGS gives you a script iterations error, </strong>DO NOT just automatically add this keyword as a way to fix the problem &#8211; more often than not, it is a fault in your scripting and using this keyword will mean that the game will hang rather than abort.****</p>
<p>For example:</p>
<pre><code>function noloopcheck initialize_array() {
  char bigarray[200000];
  int a = 0;
  while (a &lt; 200000) {
    bigarray[a] = 1;
    a++;
  }
}</code></pre>
<p>without the &#8220;noloopcheck&#8221; keyword here, AGS would abort that script.</p>
<h2 id="audiochannel-functions-and-properties">AudioChannel functions and properties</h2>
<p>The AudioChannel instance represents a currently playing audio file. You can use this instance to check the status of playing sounds, and adjust them.</p>
<h3 id="seek-audio-channel">Seek (audio channel)</h3>
<p><em>(Formerly known as SeekMIDIPosition, which is now obsolete) ILBRK </em>(Formerly known as SeekMODPattern, which is now obsolete) ILBRK <em>(Formerly known as SeekMP3PosMillis, which is now obsolete)</em>**</p>
<pre><code>AudioChannel.Seek(int position)</code></pre>
<p>Seeks the audio clip that is currently playing on this channel to <em>position.</em></p>
<p>What <em>position represents depends on the FileType of the audio clip:</em></p>
<ul>
<li><p><strong>MIDI - the beat number</strong></p></li>
<li><p><strong>MOD/XM/S3M - the pattern number</strong></p></li>
<li><p><strong>WAV/VOC - the sample number (eg. in a 22050 Hz sound, 22050 = 1 second)</strong></p></li>
<li><p><strong>OGG/MP3 - milliseconds offset</strong></p></li>
</ul>
<!-- -->
<pre><code>AudioChannel *channel = aExplosion.Play();
Wait(40);
channel.Seek(0);</code></pre>
<p>will start playing the <em>aExplosion audio clip, wait for a second, then seek it back to the start.</em></p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="setroomlocation">SetRoomLocation</h3>
<p><em>(Formerly part of PlayAmbientSound, which is now obsolete)</em></p>
<pre><code>AudioChannel.SetRoomLocation(int x, int y)</code></pre>
<p>Sets the currently playing audio to be a directional sound, eminating from (x,y).</p>
<p>The volume of the channel will be dynamically adjusted depending on how close the player character is to the co-ordinates. Therefore, as the player walks closer the volume will increase, and as they walk away the volume will decrease.</p>
<p>The channel&#8217;s Volume setting sets the maximum possible volume when the player is standing on the specified co-ordinates.</p>
<p>Pass the co-ordinates as (0,0) to remove the directional effect and return this channel to playing at its normal volume.</p>
<pre><code>AudioChannel *channel = aMachine.Play();
channel.SetRoomLocation(oMachine.X, oMachine.Y);</code></pre>
<p>will start playing the <em>aMachine audio clip, and set it at the location of the </em>oMachine room object.**</p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="speed-property-audio-channel">Speed property (audio channel)</h3>
<pre><code>int AudioChannel.Speed</code></pre>
<p>Gets/sets the playing audio clip&#8217;s playback speed. The value is defined in clip&#8217;s milliseconds per second: 1000 is default, meaning 1000 of clip&#8217;s ms in 1 real second (scale 1:1). Set &lt; 1000 for slower play and &gt; 1000 for faster play. <strong>NOTE: currently works for MP3 and OGG audio clips only.</strong></p>
<pre><code>AudioChannel *channel = aFunnyTalk.Play();
channel.Speed = 2000;</code></pre>
<p>plays <em>aFunnyTalk clip at the double speed.</em></p>
<p><em>Compatibility: Supported by <strong>AGS 3.4.0 and later versions.</strong></em></p>
<h3 id="stop-audio-channel">Stop (audio channel)</h3>
<p><em>(Formerly known as StopAmbientSound, which is now obsolete) ILBRK </em>(Formerly known as StopChannel, which is now obsolete)**</p>
<pre><code>AudioChannel.Stop()</code></pre>
<p>Stops the sound that is currently playing on this audio channel.</p>
<pre><code>AudioChannel *channel = aExplosion.Play();
Wait(40);
channel.Stop();</code></pre>
<p>will start playing the <em>aExplosion audio clip, wait for a second, then stop it.</em></p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="id-property-audio-channel">ID property (audio channel)</h3>
<pre><code>readonly int AudioChannel.ID</code></pre>
<p>Gets the Channel ID of this audio channel. You will not normally need to use this, but it can be used for inter-operating with legacy commands such as StopChannel.</p>
<pre><code>AudioChannel *channel = aExplosion.Play();
Display(&quot;Explosion playing on channel %d&quot;, channel.ID);</code></pre>
<p>will start playing the <em>aExplosion audio clip, and display which channel it is playing on.</em></p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.0 and later versions.</strong></em></p>
<h3 id="isplaying-property">IsPlaying property</h3>
<p><em>(Formerly known as IsChannelPlaying, which is now obsolete)</em></p>
<pre><code>readonly bool AudioChannel.IsPlaying</code></pre>
<p>Gets whether this audio channel is currently playing a sound. Returns <em>true if it is, or </em>false if it is not.**</p>
<pre><code>AudioChannel *channel = aExplosion.Play();
while (channel.IsPlaying) Wait(1);
Display(&quot;Finished playing the explosion&quot;);</code></pre>
<p>will start playing the <em>aExplosion audio clip, and wait until it finishes.</em></p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="lengthms-property">LengthMs property</h3>
<pre><code>readonly int AudioChannel.LengthMs</code></pre>
<p>Gets the length of the audio playing on this channel, in milliseconds.</p>
<p>This is supported by all file types, but with MIDI music it is only accurate to the nearest second.</p>
<p>If this channel is not currently playing any audio, returns 0.</p>
<pre><code>AudioChannel *channel = aExplosion.Play();
Display(&quot;The Explosion sound is %d ms long.&quot;, channel.LengthMs);</code></pre>
<p>will start playing the <em>aExplosion audio clip, then display its length.</em></p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="panning-property">Panning property</h3>
<pre><code>int AudioChannel.Panning</code></pre>
<p>Gets/sets the panning of this audio channel.</p>
<p>Panning allows you to adjust the stereo balance of the audio. The default is 0, which is centred and will play at the same volume on both speakers. However you can adjust this between -100 (fully left) to 100 (fully right) to adjust the balance between the speakers.</p>
<p><strong>NOTE: MIDI music files do not support panning.</strong></p>
<pre><code>AudioChannel *channel = aExplosion.Play();
channel.Panning = -100;</code></pre>
<p>will start playing the <em>aExplosion audio clip on the left speaker only.</em></p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="playingclip-property">PlayingClip property</h3>
<p><em>(Formerly known as GetCurrentMusic, which is now obsolete)</em></p>
<pre><code>readonly AudioClip* AudioChannel.PlayingClip</code></pre>
<p>Gets the audio clip that is playing on this channel. This allows you to find out the type of the clip, and other information.</p>
<p>Returns <em>null if there is no sound currently playing on this channel.</em></p>
<pre><code>AudioChannel *channel = System.AudioChannels[2];
if (channel.PlayingClip == null)
{
  Display(&quot;Nothing is playing on channel 2&quot;);
}
else
{
  Display(&quot;Channel 2 is playing a clip of type %d&quot;, channel.PlayingClip.Type);
}</code></pre>
<p>will display what is currently playing on audio channel 2.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.0 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="position-property-audio-channel">Position property (audio channel)</h3>
<p><em>(Formerly known as GetMIDIPosition, which is now obsolete) ILBRK </em>(Formerly known as GetMODPattern, which is now obsolete) ILBRK <em>(Formerly known as GetMP3PosMillis, which is now obsolete)</em>**</p>
<pre><code>readonly int AudioChannel.Position</code></pre>
<p>Gets the current position of the audio playing on this channel.</p>
<p>What <em>position represents depends on the FileType of the audio clip:</em></p>
<ul>
<li><p><strong>MIDI - the beat number</strong></p></li>
<li><p><strong>MOD/XM/S3M - the pattern number</strong></p></li>
<li><p><strong>WAV/VOC - the sample number (eg. in a 22050 Hz sound, 22050 = 1 second)</strong></p></li>
<li><p><strong>OGG/MP3 - milliseconds offset</strong></p></li>
</ul>
<p>This property is read-only. If you want to change the current playback position within the audio file, use the function.</p>
<pre><code>AudioChannel *channel = aExplosion.Play();
Wait(40);
channel.Seek(channel.Position + 1000);</code></pre>
<p>will start playing the <em>aExplosion audio clip, wait for a second, then seek it ahead one second (if it is OGG/MP3/WAV).</em></p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.0 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="positionms-property">PositionMs property</h3>
<pre><code>readonly int AudioChannel.PositionMs</code></pre>
<p>Gets the current position of the audio playing on this channel, in milliseconds.</p>
<p>This is supported by all file types except MIDI, and returns the current offset into the sound in milliseconds. MIDI files will always return 0.</p>
<p>This property is read-only. If you want to change the current playback position within the audio file, use the function.</p>
<pre><code>AudioChannel *channel = aExplosion.Play();
Wait(40);
Display(&quot;After 1 second, offset is %d ms.&quot;, channel.PositionMs);</code></pre>
<p>will start playing the <em>aExplosion audio clip, wait for a second, then display its position.</em></p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.0 and later versions.</strong></em></p>
<p><em>See Also: </em>See Also: ,**</p>
<h3 id="volume-property-audio-channel">Volume property (audio channel)</h3>
<p><em>(Formerly known as SetChannelVolume, which is now obsolete) ILBRK </em>(Formerly known as SetMusicVolume, which is now obsolete)**</p>
<pre><code>int AudioChannel.Volume</code></pre>
<p>Gets/sets the volume of this audio channel, from 0 to 100. This allows you to dynamically adjust the volume of a playing sound.</p>
<p>This command adjusts the volume of this channel relative to the other channels. It is still constrained within the overall volume, set by the System.Volume property.</p>
<p><strong>NOTE: This command only affects the current sound being played on the channel. When a new audio clip starts playing on this channel, the volume will be set to the DefaultVolume of the new audio clip.</strong></p>
<p><strong>NOTE: The volume returned by this property is the channel&#8217;s base volume, ie. it does not include the effects of any directional audio set with SetRoomLocation, or any temporary volume drop while speech is playing.</strong></p>
<pre><code>AudioChannel *channel = aExplosion.Play();
Wait(40);
channel.Volume = 20;</code></pre>
<p>will start playing the <em>aExplosion audio clip, wait for a second, then reduce its volume.</em></p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.0 and later versions.</strong></em></p>
<p><em>See Also: , ,</em></p>
<h2 id="audioclip-functions-and-properties">AudioClip functions and properties</h2>
<p>AudioClips are created when you import files in the AGS Editor. The commands in this section allow to play them.</p>
<h3 id="play">Play</h3>
<p><em>(Formerly known as PlayAmbientSound, which is now obsolete) ILBRK </em>(Formerly known as PlayMP3File, which is now obsolete) ILBRK <em>(Formerly known as PlayMusic, which is now obsolete) ILBRK </em>(Formerly known as PlaySound, which is now obsolete) ILBRK <em>(Formerly known as PlaySoundEx, which is now obsolete) ILBRK </em>(Formerly known as SetMusicRepeat, which is now obsolete)******</p>
<pre><code>AudioChannel* AudioClip.Play(optional AudioPriority, optional RepeatStyle)</code></pre>
<p>Plays the audio clip.</p>
<p>Optionally you can supply a priority and Repeat setting; if you do not supply these, the defaults set for the audio clip in the editor will be used.</p>
<p>This command searches through all the available audio channels to find one that is available for this type of audio. If no spare channels are found, it will try to find one that is playing a clip with a lower or equal priority, and interrupt it to replace it with this new sound.</p>
<p>If all audio channels are busy playing higher priority sounds, then this new audio clip will not be played.</p>
<p>This command returns the AudioChannel instance that the new sound is playing on, or <em>null if it did not play for any reason.</em></p>
<p><strong>NOTE: AGS can only play one MIDI file at a time.</strong></p>
<pre><code>aExplosion.Play();</code></pre>
<p>plays the <em>aExplosion audio clip.</em></p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.0 and later versions.</strong></em></p>
<p><em>See Also: , ,</em></p>
<h3 id="playfrom">PlayFrom</h3>
<pre><code>AudioChannel* AudioClip.PlayFrom(int position, optional AudioPriority,
                                 optional RepeatStyle)</code></pre>
<p>Plays the audio clip, starting from <em>position. For the meaning of the position, see the help page.</em></p>
<p>Otherwise, this command behaves identially to . Please see that help page for more information.</p>
<pre><code>aExplosion.PlayFrom(1000);</code></pre>
<p>plays the <em>aExplosion audio clip, starting from a 1 second offset (if it is OGG/MP3).</em></p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="playqueued">PlayQueued</h3>
<p><em>(Formerly known as PlayMusicQueued, which is now obsolete)</em></p>
<pre><code>AudioChannel* AudioClip.PlayQueued(optional AudioPriority, optional RepeatStyle)</code></pre>
<p>Plays the audio clip, or queues it to be played later if it cannot be played now.</p>
<p>This command behaves identially to , except that if there are no available audio channels, it will queue this audio clip to be played when a channel becomes available.</p>
<p>Additionally, unlike the Play command, using PlayQueued will not interrupt an existing audio clip with an equal priority; it will only interrupt clips with a lower priority.</p>
<p>You can queue up to 10 tracks in the audio queue. Note that if you queue audio clips to be played after a repeating audio clip, they will never be played.</p>
<pre><code>aExplosion.Play();
aAftermath.PlayQueued();</code></pre>
<p>plays the <em>aExplosion audio clip, and queues the </em>aAftermath sound to be played afterwards.**</p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="stop-audio-clip">Stop (audio clip)</h3>
<pre><code>AudioClip.Stop()</code></pre>
<p>Stops all currently playing instances of this audio clip.</p>
<pre><code>aExplosion.Play();
Wait(40);
aExplosion.Stop();</code></pre>
<p>plays the <em>aExplosion audio clip, waits 1 second and then stops it again.</em></p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="filetype-property-audio-clip">FileType property (audio clip)</h3>
<pre><code>readonly AudioFileType AudioClip.FileType;</code></pre>
<p>Gets the file type of this audio clip. This is useful in conjunction with the PlayFrom and Seek commands to determine what the position offset represents.</p>
<pre><code>if (aExplosion.FileType == eAudioFileMIDI)
{
  Display(&quot;Explosion is a MIDI file!&quot;);
}</code></pre>
<p>displays a message if aExplosion is a MIDI file</p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.0 and later versions.</strong></em></p>
<p><em>See Also: , ,</em></p>
<h3 id="isavailable-property-audio-clip">IsAvailable property (audio clip)</h3>
<p><em>(Formerly known as IsMusicVoxAvailable, which is now obsolete)</em></p>
<pre><code>readonly bool AudioClip.IsAvailable;</code></pre>
<p>Gets whether this audio clip is available on the player&#8217;s system.</p>
<p>This will normally be <em>true, unless the clip was bundled in the external AUDIO.VOX file and the player does not have the file on their system.</em></p>
<p>You do not normally need to check this property, since the Play command will silently fail if it cannot find the audio clip to play.</p>
<pre><code>if (aExplosion.IsAvailable)
{
  aExplosion.Play();
}</code></pre>
<p>checks if the aExplosion audio clip is available, and if so plays it.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="type-property-audio-clip">Type property (audio clip)</h3>
<pre><code>readonly AudioType AudioClip.Type;</code></pre>
<p>Gets the type of this audio clip, as initially set in the editor.</p>
<p>The AudioType allows you to group audio clips into areas such as Sound and Music.</p>
<pre><code>if (aExplosion.Type == eAudioTypeMusic)
{
  Display(&quot;Explosion is music!&quot;);
}</code></pre>
<p>displays a message if the <em>aExplosion clip is music.</em></p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.0 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h2 id="character-functions-and-properties">Character functions and properties</h2>
<h3 id="addinventory">AddInventory</h3>
<p><em>(Formerly known as global function AddInventory, which is now obsolete) ILBRK </em>(Formerly known as global function AddInventoryToCharacter, which is now obsolete)**</p>
<pre><code>Character.AddInventory(InventoryItem *item, optional int addAtIndex)</code></pre>
<p>Adds the specified item to the character&#8217;s inventory. This ensures that the item gets added to the character&#8217;s inventory list, and that any on-screen inventory display gets updated if appropriate.</p>
<p>The first parameter is the inventory item&#8217;s Script O-Name from the editor (for example, <em>iPoster).</em></p>
<p>By default, the new item is added to the end of the character&#8217;s inventory list. However, you can insert it in a particular position in the list by supplying the second parameter. The new item is inserted <em>before the current item at </em>addAtIndex. Indexes are numbered from 0, so to add the item at the start of the list, pass 0 as the second parameter.**</p>
<pre><code>cEgo.AddInventory(iKey);</code></pre>
<p>will give inventory item iKey to character EGO.</p>
<p><em>See Also: , ,</em></p>
<h3 id="addwaypoint">AddWaypoint</h3>
<p><em>(Formerly known as MoveCharacterPath, which is now obsolete)</em></p>
<pre><code>Character.AddWaypoint(int x, int y)</code></pre>
<p>Tells the character to move to (X,Y) directly, after it has finished its current move. This function allows you to queue up a series of moves for the character to make, if you want them to take a preset path around the screen. Note that any moves made with this command ignore walkable areas.</p>
<p>This is useful for situations when you might want a townsperson to wander onto the screen from one side, take a preset route around it and leave again.</p>
<pre><code>cSomeguy.Walk(160, 100);
cSomeguy.AddWaypoint(50, 150);
cSomeguy.AddWaypoint(50, 50);</code></pre>
<p>tells character SOMEGUY to first of all walk to the centre of the screen normally (obeying walkable areas), then move to the bottom left corner and then top left corner afterwards.</p>
<p><em>See Also:</em></p>
<h3 id="animate-character">Animate (character)</h3>
<p><em>(Formerly known as AnimateCharacter, which is now obsolete) ILBRK </em>(Formerly known as AnimateCharacterEx, which is now obsolete)**</p>
<pre><code>Character.Animate(int loop, int delay, optional RepeatStyle,
                  optional BlockingStyle, optional Direction)</code></pre>
<p>Starts the character animating, using loop number LOOP of his current view. The overall speed of the animation is set with DELAY, where 0 is the fastest, and increasing numbers mean slower. The delay for each frame is worked out as DELAY + FRAME SPD, so the individual frame speeds are relative to this overall speed.</p>
<p>Before using this command, you should use in order to select the view you want to animate with and prevent any automatic animations (eg. walking or idle animations) from playing.</p>
<p>The <em>RepeatStyle parameter sets whether the animation will continuously repeat the cycling through the frames. This can be </em>eOnce (or zero), in which case the animation will start from the first frame of LOOP, and go through each frame in turn until the last frame, where it will stop. If RepeatStyle is <em>eRepeat (or 1), then when the last frame is reached, it will go back to the first frame and start over again with the animation.</em>**</p>
<p><em>direction specifies which way the animation plays. You can either pass eForwards (the default) or eBackwards.</em></p>
<p>For <em>blocking you can pass either eBlock (in which case the function will wait for the animation to finish before returning), or eNoBlock (in which case the animation will start to play, but your script will continue). The default is eBlock.</em></p>
<p>If the character is currently moving, it will be stopped.</p>
<pre><code>cEgo.LockView(5);
cEgo.Animate(3, 1, 0, eBlock, eBackwards);
cEgo.UnlockView();</code></pre>
<p>will animate the character once using loop number 3 of view 5 backwards, and wait until the animation finishes before returning.</p>
<p><em>See Also:</em></p>
<h3 id="changeroom">ChangeRoom</h3>
<p><em>(Formerly known as NewRoom, which is now obsolete) ILBRK </em>(Formerly known as NewRoomEx, which is now obsolete) ILBRK <em>(Formerly known as NewRoomNPC, which is now obsolete)</em>**</p>
<pre><code>Character.ChangeRoom(int room_number, optional int x, optional int y, optional CharacterDirection direction)</code></pre>
<p>Changes the room that the character is in.</p>
<p>If you call this on the player character, then the game will move into the new room with them.</p>
<p><strong>IMPORTANT: This command does not change the room immediately; instead, it will perform the actual room change once your script function has finished (This is to avoid problems with unloading the script while it is still running). This means that you should not use any other commands which rely on the new room (object positionings, and so on) after this command within the same function.</strong></p>
<p>If you call this on a non-player character, then they are instantly transported to the new room number.</p>
<p>Optionally, you can include an X and Y co-ordinate (you must include either both or neither). If you do so, then the character will also be moved to the specified co-ordinates in the new room.</p>
<p>Optionally, you can also include direction parameter, that determines which direction this character will be facing after room change.</p>
<pre><code>player.ChangeRoom(4, 100, 50, eDirectionRight);</code></pre>
<p>will move the player character to room 4 and also place him at coordinates 100,50. This will also mean that the game moves into room 4.</p>
<p><em>Compatibility: Optional </em>direction parameter is supported only by <strong>AGS 3.4.0 and later versions.</strong>**</p>
<p><em>See Also:</em></p>
<h3 id="changeroomautoposition">ChangeRoomAutoPosition</h3>
<pre><code>Character.ChangeRoomAutoPosition(int room_number, optional int newPosition)</code></pre>
<p>Changes the room that the character is in, and positions him along one of the room edges.</p>
<p>This command simulates the behaviour of the old &#8220;Go to room&#8221; interaction command from AGS 2.72 and previous versions. If <em>newPosition is not specified or is 0, the character will be placed on the opposite side of the new room, if he is within 10 pixels of a room edge in the current room.</em></p>
<p>Altenatively, you can specify the position where he will get placed in the new room. <em>newPosition can be 1000 for the left edge, 2000 for the right edge, 3000 for the bottom edge and 4000 for the top edge. Then, add on the offset within that edge where you want to place the character, in normal room co-ordinates.</em></p>
<p><strong>IMPORTANT: This command does not change the room immediately; instead, it will perform the actual room change once your script function has finished (This is to avoid problems with unloading the script while it is still running). This means that you should not use any other commands which rely on the new room (object positionings, and so on) after this command within the same function.</strong></p>
<p><strong>NOTE: This command can only be used with the player character.</strong></p>
<pre><code>player.ChangeRoomAutoPosition(4, 2100);</code></pre>
<p>will move the player character to room 4 and place him half way down the right hand side of the screen. This will also mean that the game moves into room 4.</p>
<p><em>See Also:</em></p>
<h3 id="changeview">ChangeView</h3>
<p><em>(Formerly known as ChangeCharacterView, which is now obsolete)</em></p>
<pre><code>Character.ChangeView(int view)</code></pre>
<p>Changes the normal view number of the character to <em>view. This is useful if, for example, you want the character to change the clothes they are wearing, and so permanently alter their view number.</em></p>
<p><strong>NOTE: This command is </strong>not intended to change the view temporarily to perform an animation. If you want to do that, use the LockView command instead. This ChangeView command permanently changes the character&#8217;s normal walking view.****</p>
<pre><code>cEgo.ChangeView(5);</code></pre>
<p>will make the EGO character use view number 5 as his walking view.</p>
<p><em>See Also: ,</em></p>
<h3 id="facecharacter">FaceCharacter</h3>
<p><em>(Formerly known as global function FaceCharacter, which is now obsolete)</em></p>
<pre><code>Character.FaceCharacter(Character* toFace, optional BlockingStyle)</code></pre>
<p>Turns the graphic of the character so that it looks like he is facing character TOFACE. This involves changing the current loop to the appropriate loop number, and setting the frame number to 0 (standing).</p>
<p>If the character has Turning enabled (ie. the &#8220;Characters turn to face direction&#8221; game option is turned on, and the character does not have the &#8220;Do not turn before walking&#8221; option checked), then the character will turn on the spot in order to face the new direction. In this case, the BlockingStyle parameter determines whether the script waits for the character to finish turning (eBlock, the default) or whether the script continues immediately and the character finishes turning later on (eNoBlock).</p>
<p>If the character does not have Turning enabled, he will immediately turn to face the new direction and the BlockingStyle parameter has no effect. In this case, the screen will not be refreshed straight away &#8211; if you want to see the character facing his new direction immediately, call Wait(1);</p>
<pre><code>cEgo.FaceCharacter(cMan);</code></pre>
<p>will make the character EGO face the character MAN</p>
<p><em>See Also: , , ,</em></p>
<h3 id="facedirection">FaceDirection</h3>
<pre><code>Character.FaceDirection(CharacterDirection direction, BlockingStyle=eBlock)</code></pre>
<p>Turns the graphic of the character so that it looks like he is facing direction <em>direction. This involves changing the current loop to the appropriate loop number, and setting the frame number to 0 (standing).</em></p>
<p>If the character has Turning enabled (ie. the &#8220;Characters turn to face direction&#8221; game option is turned on, and the character does not have the &#8220;Do not turn before walking&#8221; option checked), then the character will turn on the spot in order to face the new direction. In this case, the BlockingStyle parameter determines whether the script waits for the character to finish turning (eBlock, the default) or whether the script continues immediately and the character finishes turning later on (eNoBlock).</p>
<p>If the character does not have Turning enabled, he will immediately turn to face the new direction and the BlockingStyle parameter has no effect. In this case, the screen will not be refreshed straight away &#8211; if you want to see the character facing his new direction immediately, call Wait(1);</p>
<pre><code>cEgo.FaceDirection(eDirectionUpRight);</code></pre>
<p>will make the character EGO face up-right.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.4.0 and later versions.</strong></em></p>
<p><em>See Also: , , ,</em></p>
<h3 id="facelocation">FaceLocation</h3>
<p><em>(Formerly known as global function FaceLocation, which is now obsolete)</em></p>
<pre><code>Character.FaceLocation(int x, int y, optional BlockingStyle)</code></pre>
<p>Similar to the FaceCharacter function, except that this faces the character to room co-ordinates (X,Y). This allows him to face not only other characters, but also hotspots or anything else as well (you can get co-ordinates by watching the co-ordinates displayed in the Room Settings mode as you move the mouse over the room background).</p>
<p>If the character has Turning enabled (ie. the &#8220;Characters turn to face direction&#8221; game option is turned on, and the character does not have the &#8220;Do not turn before walking&#8221; option checked), then the character will turn on the spot in order to face the new direction. In this case, the BlockingStyle parameter determines whether the script waits for the character to finish turning (eBlock, the default) or whether the script continues immediately and the character finishes turning later on (eNoBlock).</p>
<p>If the character does not have Turning enabled, he will immediately turn to face the new direction and the BlockingStyle parameter has no effect. In this case, the screen will not be refreshed straight away &#8211; if you want to see the character facing his new direction immediately, call Wait(1);</p>
<pre><code>cEgo.FaceLocation(cEgo.x + 50, cEgo.y);</code></pre>
<p>will make the character face to the east.</p>
<p><em>See Also: , , ,</em></p>
<h3 id="faceobject">FaceObject</h3>
<pre><code>Character.FaceObject(Object* object, optional BlockingStyle)</code></pre>
<p>Similar to the FaceCharacter function, except that this faces the character to object OBJECT in the current room.</p>
<p>If the character has Turning enabled (ie. the &#8220;Characters turn to face direction&#8221; game option is turned on, and the character does not have the &#8220;Do not turn before walking&#8221; option checked), then the character will turn on the spot in order to face the new direction. In this case, the BlockingStyle parameter determines whether the script waits for the character to finish turning (eBlock, the default) or whether the script continues immediately and the character finishes turning later on (eNoBlock).</p>
<p>If the character does not have Turning enabled, he will immediately turn to face the new direction and the BlockingStyle parameter has no effect. In this case, the screen will not be refreshed straight away &#8211; if you want to see the character facing his new direction immediately, call Wait(1);</p>
<pre><code>player.FaceObject(object[2]);</code></pre>
<p>will make the player character face object 2.</p>
<p><em>See Also: , , ,</em></p>
<h3 id="followcharacter">FollowCharacter</h3>
<p><em>(Formerly known as global function FollowCharacter, which is now obsolete) ILBRK </em>(Formerly known as global function FollowCharacterEx, which is now obsolete)**</p>
<pre><code>Character.FollowCharacter(Character* chartofollow, optional int dist,
                          optional int eagerness)</code></pre>
<p>Tells the character to follow CHARTOFOLLOW around, wherever he goes. You could use this command to have a group of main characters who go around together, or for example when the hero has rescued someone from the bad guy, they can follow the hero home.</p>
<p>Pass CHARTOFOLLOW as <em>null to stop the character following.</em></p>
<p>There are a couple of extra optional parameters:</p>
<p>DIST sets how far away from CHARTOFOLLOW that CHARID will stand. If DIST is 1, they will try to stand very close; if DIST is for example 20, they will stand about 20 pixels away.</p>
<p>EAGERNESS sets on average how long the character will stand around before checking if he needs to move again. Setting this to 0 means that he will always be on the move until he reaches CHARTOFOLLOW; setting this to 99 means that he will pause and think for a while on route. Values in between specify different lengths of idle time.</p>
<p>The default values are DIST=10 and EAGERNESS=97.</p>
<p>As a special case, setting DIST=0 and EAGERNESS=0 makes CHARID behave as if it is chasing CHARTOFOLLOW - it will try and get there as quickly as possible. Setting EAGERNESS=0 also tells the character not to stop when they reach CHARTOFOLLOW, but instead to randomly wander around the character - useful perhaps for a very energetic dog or something.</p>
<p>There is also another special use for this command. You can pass the special value FOLLOW_EXACTLY as the DIST parameter rather than passing a number. If you do this, then CHARID will always remain at exactly the same X and Y co-ordinates as CHARTOFOLLOW. This might be useful for effects such as a temporary halo over the character and so forth.</p>
<p>If you use FOLLOW_EXACTLY, then EAGERNESS has another meaning. If you pass 0, CHARID will be drawn in front of CHARTOFOLLOW; if you pass 1, it will be drawn behind.</p>
<pre><code>cMan.FollowCharacter(cEgo, 5, 80);</code></pre>
<p>will make character MAN follow character EGO standing about 5 pixels near him and waiting for a while before he makes his move.</p>
<h3 id="getatscreenxy-character">GetAtScreenXY (character)</h3>
<p><em>(Formerly known as global function GetCharacterAt, which is now obsolete)</em></p>
<pre><code>static Character* Character.GetAtScreenXY(int x, int y)</code></pre>
<p>Checks if there is a character at SCREEN co-ordinates (X,Y). Returns the character if there is, or null if there is not. See the description of GetLocationName for more on screen co-ordinates.</p>
<p>NOTE: Any characters with the &#8220;Clickable&#8221; property set to false will not be seen by this function.</p>
<pre><code>if (Character.GetAtScreenXY(mouse.x, mouse.y) == cEgo) {
  Display(&quot;The mouse is over the main character&quot;);
}</code></pre>
<p>will display the message if the mouse cursor is over the EGO character</p>
<p><em>See Also: , ,</em></p>
<h3 id="getproperty-character">GetProperty (character)</h3>
<p><em>(Formerly known as GetCharacterProperty, which is now obsolete)</em></p>
<pre><code>Character.GetProperty(string property)</code></pre>
<p>Returns the custom property setting of the PROPERTY for the specified character.</p>
<p>This command works with Number properties (it returns the number), and with Boolean properties (returns 1 if the box was checked, 0 if not).</p>
<p>Use the equivalent GetTextProperty function to get a text property.</p>
<pre><code>if (cEgo.GetProperty(&quot;Value&quot;) &gt; 200)
  Display(&quot;EGO&#39;s value is over 200!&quot;);</code></pre>
<p>will print the message if EGO has its &#8220;Value&#8221; property set to more than 200.</p>
<p><em>See Also:</em></p>
<h3 id="gettextproperty-character">GetTextProperty (character)</h3>
<p><em>(Formerly known as GetCharacterPropertyText, which is now obsolete) ILBRK </em>(Formerly known as Character.GetPropertyText, which is now obsolete)**</p>
<pre><code>String Character.GetTextProperty(string property)</code></pre>
<p>Returns the custom property setting of the PROPERTY for the specified character.</p>
<p>This command works with Text properties only. The property&#8217;s text will be returned from this function.</p>
<p>Use the equivalent GetProperty function to get a non-text property.</p>
<pre><code>String description = cEgo.GetTextProperty(&quot;Description&quot;);
Display(&quot;EGO&#39;s description: %s&quot;, description);</code></pre>
<p>will retrieve EGO&#8217;s &#8220;description&#8221; property and display it.</p>
<p><em>See Also:</em></p>
<h3 id="setproperty-character">SetProperty (character)</h3>
<pre><code>bool Character.SetProperty(const string property, int value)</code></pre>
<p>Sets the new <em>value for the custom </em>property for the specified character. Returns TRUE if such property exists and FALSE on failure.**</p>
<p>This command works with Number properties (it sets the numeric value), and with Boolean properties (sets FALSE is value is equal to 0, or TRUE otherwise).</p>
<p>Use the equivalent SetTextProperty function to set new text property value.</p>
<pre><code>cEgo.SetProperty(&quot;XPLevel&quot;, 10);</code></pre>
<p>will change EGO character&#8217;s &#8220;XPLevel&#8221; custom property to 10.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.4.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="settextproperty-character">SetTextProperty (character)</h3>
<pre><code>bool Character.SetTextProperty(const string property, const string value)</code></pre>
<p>Sets the new <em>value text for the custom </em>property for the specified character. Returns TRUE if such property exists and FALSE on failure.**</p>
<p>This command works with Text properties only. The property&#8217;s text will be changed to new value.</p>
<p>Use the equivalent SetProperty function to set a non-text property.</p>
<pre><code>cEgo.SetTextProperty(&quot;Description&quot;, &quot;I am handsome!&quot;);</code></pre>
<p>will change EGO&#8217;s &#8220;description&#8221; property.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.4.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="hasinventory">HasInventory</h3>
<pre><code>bool Character.HasInventory(InventoryItem *item)</code></pre>
<p>Checks whether the character currently has the specified inventory item. Returns <em>true if they do, or </em>false if they don&#8217;t.**</p>
<p>The parameter is the inventory item&#8217;s Script O-Name from the editor (for example, <em>iPoster).</em></p>
<pre><code>if (player.HasInventory(iKey))
{
  Display(&quot;The player has the key!!&quot;);
}</code></pre>
<p>will display a message if the player has the key.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.1.0 and later versions.</strong></em></p>
<p><em>See Also: , ,</em></p>
<h3 id="iscollidingwithchar">IsCollidingWithChar</h3>
<p><em>(Formerly known as AreCharactersColliding, which is now obsolete)</em></p>
<pre><code>Character.IsCollidingWithChar(Character* otherChar)</code></pre>
<p>Checks if the character is touching OTHERCHAR. This function just checks the baseline of both characters, so if one is standing a fair distance behind the other, it will not be marked as colliding.</p>
<p>Returns 1 if the characters feet are touching, 0 otherwise.</p>
<pre><code>if (cEgo.IsCollidingWithChar(cMan) == 1)
   { colliding code here }</code></pre>
<p>will execute the colliding code only if the characters EGO and MAN are colliding.</p>
<p><em>See Also: , ,</em></p>
<h3 id="iscollidingwithobject-character">IsCollidingWithObject (character)</h3>
<p><em>(Formerly known as AreCharObjColliding, which is now obsolete)</em></p>
<pre><code>Character.IsCollidingWithObject(Object* obj)</code></pre>
<p>Checks whether the character&#8217;s feet (ie. the bottom third of the character) are touching OBJ. This can be used to determine if the character is standing on the object.</p>
<p>Returns 1 if they are, and 0 if they are not.</p>
<pre><code>if (cEgo.IsCollidingWithObject(object[3]) == 1) {
  // colliding code here
}</code></pre>
<p>will execute the colliding code only if the character EGO and the object number 3 are colliding.</p>
<p><em>See Also: , ,</em></p>
<h3 id="lockview">LockView</h3>
<p><em>(Formerly known as SetCharacterView, which is now obsolete)</em></p>
<pre><code>Character.LockView(int view)</code></pre>
<p>Sets the character&#8217;s view to VIEW. This can be used to perform animations with characters, for example bending down to pick something up, which don&#8217;t use the default view.</p>
<p><strong>NOTE: This function locks the character&#8217;s view to the specified view, so that it can only be changed by other script commands (ie. it won&#8217;t automatically be changed by AGS on walkable areas, screen changes, etc). When you are done with the animation, call UnlockView to allow AGS to take control back.</strong></p>
<pre><code>cEgo.LockView(12);
cEgo.Animate(0, 0, eOnce, eBlock, eForwards);
cEgo.UnlockView();</code></pre>
<p>will change the character&#8217;s EGO view to view 12, perform an animation using loop 0, wait until the animation finishes and then return the character to his normal view.</p>
<p><em>See Also: , , , , ,</em></p>
<h3 id="lockviewaligned">LockViewAligned</h3>
<p><em>(Formerly known as SetCharacterViewEx, which is now obsolete)</em></p>
<pre><code>Character.LockViewAligned(int view, int loop, Alignment)</code></pre>
<p>Sets the character&#8217;s view to VIEW, and sets the character&#8217;s current frame to the first frame in LOOP of VIEW.</p>
<p>The main purpose of this command is that it can align the new frame to the previous one. This is particularly useful if you want to go from the character&#8217;s normal walking view to a specific animation - since characters have the central point as their &#8216;axis&#8217;, if you have a wider animation then it can be difficult to stop yourself getting a jumping effect when the animation starts.</p>
<p><em>Alignment can have one of the following values:</em></p>
<p>|l|l|</p>
<p>Note that this only aligns the first frame of the animation, so to get the full benefit all your frames in the animation loop should be the same width. All following frames will be shifted by the same amount, until UnlockView is called.</p>
<p><strong>NOTE: This function locks the character&#8217;s view to the specified view, so that it can only be changed by other script commands (ie. it won&#8217;t automatically be changed by the program on regions, screen changes, etc). When you are done with the animation, call UnlockView to allow the program to take control back.</strong></p>
<pre><code>cEgo.LockViewAligned(12, 1, eAlignLeft);
cEgo.Animate(1, 5, eOnce, eBlock, eForwards);
cEgo.UnlockView();</code></pre>
<p>will change the character&#8217;s EGO view to view 12, perform an animation using loop 1, wait until the animation finishes and then return the character to his normal view.</p>
<p><em>See Also: , ,</em></p>
<h3 id="lockviewframe">LockViewFrame</h3>
<p><em>(Formerly known as SetCharacterFrame, which is now obsolete)</em></p>
<pre><code>Character.LockViewFrame(int view, int loop, int frame)</code></pre>
<p>Sets the character&#8217;s graphic to frame FRAME of loop LOOP of view number VIEW. This is useful if you don&#8217;t want an animation, but just want to change the character to display a specific frame.</p>
<p>The frame will be locked to the one you specify until you call UnlockView.</p>
<pre><code>cEgo.LockViewFrame(AGHAST, 2, 4);
Wait(40);
cEgo.UnlockView();</code></pre>
<p>will change EGO to have frame 4 of loop 2 in the AGHAST view, wait for a second, then return him to normal.</p>
<p><em>See Also: , ,</em></p>
<h3 id="lockviewoffset">LockViewOffset</h3>
<p><em>(Formerly known as SetCharacterViewOffset, which is now obsolete)</em></p>
<pre><code>Character.LockViewOffset(int view, int xOffset, int yOffset)</code></pre>
<p>Sets the character&#8217;s view to VIEW, in the same way as LockView does. However, it also adds a specified offset to all the character&#8217;s frames until UnlockView is called.</p>
<p>The XOFFSET and YOFFSET parameters specify <strong>in actual game resolution units how much to move the character&#8217;s sprite. Positive values for X move right, for Y move down; negative values do the opposite.</strong></p>
<p>This command is designed to allow you to cope with those niggly situations where animations don&#8217;t quite line up with the standing frame, assuming all the frames of the animation are the same size. Note that LockViewAligned is easier to use if your frames will align at the left or right hand side.</p>
<p><strong>NOTE: You should only use this command for minor adjustments, since the offsets do not affect the clickable area of the character, what walkable area he is in, and so forth. You should limit the use of this command to in-game cutscenes where the player has no control.</strong></p>
<p><strong>NOTE: This is the only command in AGS which uses actual game-resolution co-ordinates. Therefore, specifying an x offset of 1 will actually move 1 pixel in a 640x400 game, and will not be multiplied up to 2 (they will be automatically adjusted though if the player chooses to play the game at another resolution).</strong></p>
<p><strong>NOTE: This function locks the character&#8217;s view to the specified view, so that it can only be changed by other script commands (ie. it won&#8217;t automatically be changed by AGS on walkable areas, screen changes, etc). When you are done with the animation, call UnlockView to allow AGS to take control back.</strong></p>
<pre><code>cEgo.LockViewOffset(12, 1, -1);
cEgo.Animate(1, 5, eOnce, eBlock, eForwards);
cEgo.UnlockView();</code></pre>
<p>will change EGO&#8217;s view to view 12 and animate using loop 1, meanwhile all frames will be shifted 1 pixel right and 1 pixel up.</p>
<p><em>See Also: , ,</em></p>
<h3 id="loseinventory">LoseInventory</h3>
<p><em>(Formerly known as global function LoseInventory, which is now obsolete)ILBRK </em>(Formerly known as LoseInventoryFromCharacter, which is now obsolete)**</p>
<pre><code>Character.LoseInventory(InventoryItem *item)</code></pre>
<p>Removes the specified inventory item from the character&#8217;s inventory. If they do not have the item, nothing happens.</p>
<p>The parameter is the inventory item&#8217;s Script O-Name from the editor.</p>
<pre><code>cEgo.LoseInventory(iKey);</code></pre>
<p>will make the character EGO lose the inventory item iKey from the inventory tab</p>
<p><em>See Also:</em></p>
<h3 id="move-character">Move (character)</h3>
<pre><code>Character.Move(int x, int y, optional BlockingStyle,
                             optional WalkWhere);</code></pre>
<p>Starts the character moving from its current location to (X,Y), but does not play the character&#8217;s walking animation.</p>
<p>The parameters to this command are identical to the command &#8211; see that page for more details. The only difference is that <em>Walk plays the walking animation whereas </em>Move does not.**</p>
<p>In the vast majority of cases, you will use <strong>Character.Walk instead.</strong></p>
<pre><code>cEgo.Move(155, 122, eBlock);</code></pre>
<p>will make the character move to 155,122 without playing his walking animation. The script will not continue until the character has reached his destination.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.1.0 and later versions.</strong></em></p>
<p><em>See Also: , , , , ,</em></p>
<h3 id="placeonwalkablearea">PlaceOnWalkableArea</h3>
<p><em>(Formerly known as MoveToWalkableArea, which is now obsolete)</em></p>
<pre><code>Character.PlaceOnWalkableArea()</code></pre>
<p>Places the character in the nearest walkable area to its current location. If the character is already on a walkable area, nothing happens.</p>
<p>This is useful for example in the Player Enters Room event of a room, to make sure the character can move if a ChangeRoom with co-ordinates has been issued to get there. You could also use this in on_event for eEventEnterRoomBeforeFadein to use whenever a player enters a room.</p>
<pre><code>cEgo.x = Random(320);
cEgo.y = Random(200);
cEgo.PlaceOnWalkableArea();</code></pre>
<p>will move character EGO to a random position but make sure that he is on a walkable area.</p>
<h3 id="removetint-character">RemoveTint (character)</h3>
<pre><code>Character.RemoveTint()</code></pre>
<p>Undoes the effects of calling Tint, and returns the character to using the room&#8217;s ambient tint.</p>
<pre><code>player.Tint(0, 250, 0, 30, 100);
Wait(40);
player.RemoveTint();</code></pre>
<p>will tint the player character green for a second, then turn it back to normal.</p>
<p><em>See Also: ,</em></p>
<h3 id="isinteractionavailable-character">IsInteractionAvailable (character)</h3>
<pre><code>Character.IsInteractionAvailable(CursorMode)</code></pre>
<p>Checks whether there is an event handler defined for activating the character in cursor mode MODE.</p>
<p>This function is very similar to RunInteraction, except that rather than run the event handler script function, it simply returns <em>true if something would have happened, or </em>false if unhandled_event would have been run.**</p>
<pre><code>if (cNPC.IsInteractionAvailable(eModeTalkto) == 0)
  Display(&quot;speaking with this character would not do anything.&quot;);</code></pre>
<p><em>Compatibility: Supported by <strong>AGS 3.4.0 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="runinteraction-character">RunInteraction (character)</h3>
<p><em>(Formerly known as RunCharacterInteraction, which is now obsolete)</em></p>
<pre><code>Character.RunInteraction(CursorMode)</code></pre>
<p>Fires the event script as if the player had clicked the mouse on the character in the specified cursor mode. This is one of the mouse cursor modes, as defined in your Cursors tab in the editor.</p>
<pre><code>cMan.RunInteraction(eModeTalk);</code></pre>
<p>will execute the code defined in the MAN&#8217;s &#8220;TALK TO CHARACTER&#8221; event.</p>
<p><em>See Also: , , ,</em></p>
<h3 id="say">Say</h3>
<p><em>(Formerly known as DisplaySpeech, which is now obsolete)</em></p>
<pre><code>Character.Say(string message)</code></pre>
<p>Displays the text MESSAGE as speech above the character&#8217;s head. The text will remain on screen for a limited time, and the user may or may not be able to click it away depending on the setting of &#8220;Player can&#8217;t skip speech text&#8221;. The text displayed by this function looks identical to that used by the dialog system.</p>
<p>You can insert the value of variables into the message. For more information, see the section.</p>
<pre><code>cEgo.Say(&quot;My name is ego&quot;);</code></pre>
<p>will display the message above the character&#8217;s EGO head like the LEC games, whilst playing the character&#8217;s talking animation.</p>
<p><em>See Also: , , ,</em></p>
<h3 id="sayat">SayAt</h3>
<p><em>(Formerly known as DisplaySpeechAt, which is now obsolete)</em></p>
<pre><code>SayAt(int x, int y, int width, string message)</code></pre>
<p>Similar to , except that the text is displayed with its top left corner at (X,Y), in an area WIDTH wide.</p>
<p>You can use this function to write the character&#8217;s speech text anywhere you like, and AGS will still play the character&#8217;s talking animation and so on if appropriate.</p>
<p><strong>NOTE: This function does not support Whole-Screen speech.</strong></p>
<pre><code>cEgo.SayAt(220, 20, 100, &quot;My name is ego&quot;);</code></pre>
<p>will display the message in the top right corner of the screen, whilst playing the character&#8217;s talking animation.</p>
<p><em>See Also: ,</em></p>
<h3 id="saybackground">SayBackground</h3>
<p><em>(Formerly known as DisplaySpeechBackground, which is now obsolete)</em></p>
<pre><code>Overlay* Character.SayBackground(string message)</code></pre>
<p>Similar to Say, except that this function returns immediately and the game continues while the character is talking. This allows you to have characters talking in the background while the player does other things. Note that the character&#8217;s talking animation is not played if this function is used.</p>
<p>This command works by creating a text overlay with an automatic removal time delay. The overlay is returned by this command, so you can save it for use later with Overlay.IsValid and Overlay.Remove, if you want to remove the text prematurely.</p>
<p>If background speech is already on-screen for the character, it will be removed and replaced with the new MESSAGE.</p>
<p>All background speech is automatically removed when a normal Say command is used (unless you set the global variable to 1).</p>
<pre><code>cMan.SayBackground(&quot;Hey, why won&#39;t you talk to me?&quot;);</code></pre>
<p>will display the message above character MAN&#8217;s head without pausing the game.</p>
<p><em>See Also:</em></p>
<h3 id="setasplayer">SetAsPlayer</h3>
<p><em>(Formerly known as SetPlayerCharacter, which is now obsolete)</em></p>
<pre><code>Character.SetAsPlayer()</code></pre>
<p>Changes the character which the player controls to the specified character. This function will also cause the room to change to the room which the chosen character is currently in (though as with ChangeRoom, the change won&#8217;t happen until the end of the script).</p>
<p>Additionally, calling this command will cause the &#8220;player&#8221; variable to be updated to point to the specified character.</p>
<pre><code>cMan.SetAsPlayer();</code></pre>
<p>will change the character that the player controls to character MAN and also change to the room that MAN is in, if he is not in the current room.</p>
<p><em>See Also: ,</em></p>
<h3 id="setlightlevel-character">SetLightLevel (character)</h3>
<pre><code>void Character.SetLightLevel(int light_level)</code></pre>
<p>Sets individual light level for this character.</p>
<p>The light level is from <strong>-100 to 100.</strong></p>
<p>In 8-bit games you cannot use positive light level for brightening effect, but you may still use negative values to produce darkening effect.</p>
<p>To disable character lighting and tinting effects, call .</p>
<p><strong>NOTE: Setting a light level will disable any RGB tint set for the character.</strong></p>
<p><strong>NOTE: Character&#8217;s individual light level OVERRIDES both ambient light level and local region light level.</strong></p>
<pre><code>cEgo.SetLightLevel(100);</code></pre>
<p>This will give character EGO maximal individual brightness.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.4.0 and later versions.</strong></em></p>
<p><em>See Also: , , ,</em></p>
<h3 id="setidleview">SetIdleView</h3>
<p><em>(Formerly known as SetCharacterIdle, which is now obsolete)</em></p>
<pre><code>Character.SetIdleView(int idleview, int delay)</code></pre>
<p>Changes the character&#8217;s idle view to IDLEVIEW, with a timeout of DELAY seconds of inactivity before it is played. Inactivity is defined as when the character is not moving and not being animated.</p>
<p>Setting DELAY to 0 causes the idle view to be looped continuously when the character is not moving - this is useful when for example the character is swimming and they need to tread water when idle.</p>
<p>Pass IDLEVIEW as -1 to disable the idle view completely.</p>
<p><strong>NOTE: The DELAY is actually relative to the game speed. Setting this to 1 means a one second delay at the default 40 fps, but if you have adjusted the game speed then the delay will be adjusted accordingly.</strong></p>
<p><strong>NOTE: Due to a quirk in AGS, you cannot set the Idle View to view 1. In the unlikely event that you created your idle view in View 1, you&#8217;ll need to move it to another view number.</strong></p>
<pre><code>cEgo.SetIdleView(12, 30);</code></pre>
<p>will change/set the character EGO&#8217;s idle view to 12. The idle view will be played if the character is idle for 30 seconds.</p>
<h3 id="setwalkspeed">SetWalkSpeed</h3>
<p><em>(Formerly known as SetCharacterSpeed, which is now obsolete)ILBRK </em>(Formerly known as SetCharacterSpeedEx, which is now obsolete)**</p>
<pre><code>Character.SetWalkSpeed(int x_speed, int y_speed)</code></pre>
<p>Changes the character to have a walking speed of X_SPEED in the horizontal direction and Y_SPEED in the vertical direction. The values used for X_SPEED and Y_SPEED are identical to those set in the AGS Editor for walking speed.</p>
<p>X_SPEED and Y_SPEED can be identical, in which case the character moves with the same speed in any direction. (the editor calls this &#8220;Uniform movement speed&#8221;)</p>
<p><strong>NOTE: This function CANNOT be called while the character is moving, so you must stop him first.</strong></p>
<pre><code>cEgo.SetWalkSpeed(10, 10);</code></pre>
<p>will change the character EGO&#8217;s speed to 10.</p>
<p><em>See Also: , , , ,</em></p>
<h3 id="stopmoving-character">StopMoving (character)</h3>
<p><em>(Formerly known as global function StopMoving, which is now obsolete)</em></p>
<pre><code>Character.StopMoving()</code></pre>
<p>Stops the character moving and sets its graphic to the standing frame of the current loop.</p>
<pre><code>if (cEgo.x &gt; 299)
{
  cEgo.StopMoving();
}</code></pre>
<p>will stop the character when he reaches the coordinate x=300.</p>
<p><em>See Also: ,</em></p>
<h3 id="think">Think</h3>
<p><em>(Formerly known as DisplayThought, which is now obsolete)</em></p>
<pre><code>Character.Think(string message, ...)</code></pre>
<p>Displays the text MESSAGE as a thought above the specified character&#8217;s head. The text will remain on screen for a limited time, and the user may or may not be able to click it away depending on the setting of &#8220;Player can&#8217;t skip speech text&#8221;.</p>
<p>How this function displays the text depends on a few things: the Speech Style setting, the &#8216;Thought uses bubble GUI&#8217; setting, and whether the character has a thinking animation or not.</p>
<p>If the &#8220;Thought uses bubble GUI&#8221; setting is not checked, then the thought will be displayed in the same way as normal speech - the difference being that the character&#8217;s thinking animation will play (or no animation if they don&#8217;t have one).</p>
<p>If you are using Sierra-style speech and the character doesn&#8217;t have a thinking animation, the thought bubble will be displayed in lucasarts-style.</p>
<p>If the &#8220;Thought uses bubble GUI&#8221; setting has been set, then the thought will be displayed like normal speech, except that the bubble GUI will be used for the window background. In Lucasarts-style speech this means above the character&#8217;s head, in Sierra-style it will be done along the top of the screen as normal.</p>
<p>If the character has a thinking animation, it will just loop through once (it won&#8217;t repeat).</p>
<p>You can insert the value of variables into the message. For more information, see the section.</p>
<pre><code>cEgo.Think(&quot;I wonder what&#39;s for dinner.&quot;);</code></pre>
<p>will display the message above EGO&#8217;s head and play the character&#8217;s thinking animation.</p>
<p><em>See Also: , , , , ,</em></p>
<h3 id="tint-character">Tint (character)</h3>
<pre><code>Character.Tint(int red, int green, int blue,
               int saturation, int luminance)</code></pre>
<p>Tints the character on the screen to (RED, GREEN, BLUE) with SATURATION percent saturation.</p>
<p>This function applies a tint to a specific character. For the meaning of all the parameters, see .</p>
<p>The tint set by this function overrides any ambient tint set for the room. For this reason, passing the SATURATION as 0 to this function does not turn it off - rather, it ensures that no tint is applied to the character (even if an ambient tint is set).</p>
<p>To remove the tint set by this function and return to using the ambient tint for this character, call .</p>
<p><strong>NOTE: This function only works in hi-colour games and with hi-colour sprites.</strong></p>
<pre><code>cEgo.Tint(0, 250, 0, 30, 100);</code></pre>
<p>will tint the EGO character green.</p>
<p><em>See Also: , ,</em></p>
<h3 id="unlockview">UnlockView</h3>
<p><em>(Formerly known as ReleaseCharacterView, which is now obsolete)</em></p>
<pre><code>Character.UnlockView()</code></pre>
<p>Allows the engine to automatically control the character&#8217;s view, as normal. Use this once you have finished doing the animation which you started with the LockView command.</p>
<pre><code>cEgo.LockView(12);
cEgo.Animate(0, 0, eOnce, eBlock, eForwards);
cEgo.UnlockView();</code></pre>
<p>will play an animation using loop 0 of view 12, then return the character to its normal view.</p>
<p><em>See Also:</em></p>
<h3 id="walk">Walk</h3>
<p><em>(Formerly known as MoveCharacter, which is now obsolete)ILBRK </em>(Formerly known as MoveCharacterBlocking, which is now obsolete)ILBRK <em>(Formerly known as MoveCharacterDirect, which is now obsolete)</em>**</p>
<pre><code>Character.Walk(int x, int y, optional BlockingStyle,
                             optional WalkWhere);</code></pre>
<p>Starts the character moving from its current location to (X,Y), whilst playing his walking animation.</p>
<p>If <em>blocking is eNoBlock (the default) then control returns to the script immediately, and the character will move in the background.</em></p>
<p>If <em>blocking is eBlock then this command will wait for the character to finish moving before your script resumes.</em></p>
<p>If <em>walkWhere is eWalkableAreas (the default), then the character will attempt to get as close a possible to (X,Y) by using the room&#8217;s walkable areas.</em></p>
<p>If <em>walkWhere is eAnywhere, then the character will simply walk directly from its current location to (X,Y), ignoring the room walkable areas.</em></p>
<p>If you don&#8217;t want the character&#8217;s walking animation to play, you can use the command instead.</p>
<p><strong>NOTE: this function only works with characters which are on the current screen.</strong></p>
<p><strong>NOTE: if you need to find out when the character has reached its destination, use the property.</strong></p>
<pre><code>cEgo.Walk(155, 122, eBlock);</code></pre>
<p>will make the character walk to 155,122. The script will not continue until the character has reached his destination.</p>
<p><em>See Also: , , , , ,</em></p>
<h3 id="walkstraight">WalkStraight</h3>
<p><em>(Formerly known as MoveCharacterStraight, which is now obsolete)</em></p>
<pre><code>Character.WalkStraight(int x, int y, optional BlockingStyle);</code></pre>
<p>Moves the character from its current location towards (X,Y) in a straight line as far as is possible before hitting a non-walkable area. This is useful for use with the arrow keys for character movement, since it guarantees that the character will move in a straight line in the direction specified.</p>
<p><em>blocking determines whether the function waits for the character to finish moving before your script resumes. eNoBlock is the default (which means your script resumes straight away, and the character moves in the background). You can also pass eBlock, in which case your script will not resume until the character finishes moving.</em></p>
<pre><code>cEgo.WalkStraight(166, 78);</code></pre>
<p>will move the character EGO in a straight line towards co ordinates 166,78 until he hits a non walkable area.</p>
<p><em>See Also:</em></p>
<h3 id="activeinventory-property">ActiveInventory property</h3>
<p><em>(Formerly known as SetActiveInventory, which is now obsolete) ILBRK </em>(Formerly known as character[].activeinv, which is now obsolete)**</p>
<pre><code>InventoryItem* Character.ActiveInventory</code></pre>
<p>Gets/sets the character&#8217;s current active inventory item. Setting it will update the mouse cursor if appropriate.</p>
<p>This property is useful in &#8220;Use inventory on hotspot/character/etc&#8221; events, to find out which inventory item the player is trying to use on the target.</p>
<p>To deselect the current inventory, set it to <em>null.</em></p>
<pre><code>cEgo.ActiveInventory = iKey;</code></pre>
<p>will make the inventory item iKey active (before you use it make sure that the player has the inventory item)</p>
<h3 id="animating-property-character">Animating property (character)</h3>
<p><em>(Formerly known as character[].animating, which is now obsolete)</em></p>
<pre><code>readonly bool Character.Animating</code></pre>
<p>Returns 1 if the character is currently animating. ILBRK Returns 0 if the character has finished its animation.</p>
<p>This property is read-only. To change character animation, use the command.</p>
<pre><code>cEgo.Animate(5, 0);
while (cEgo.Animating) Wait(1);</code></pre>
<p>will animate EGO and wait until the animation finishes.</p>
<p>In reality, you would simply use the Blocking parameter of Animate so you wouldn&#8217;t need to do this.</p>
<p><em>See Also: , , ,</em></p>
<h3 id="animationspeed-property">AnimationSpeed property</h3>
<p><em>(Formerly known as character[].animspeed, which is now obsolete)</em></p>
<pre><code>int Character.AnimationSpeed;</code></pre>
<p>Gets/sets the character&#8217;s animation delay, as set in the editor.</p>
<pre><code>player.AnimationSpeed = 4;</code></pre>
<p>will change the player character&#8217;s animation speed to 4.</p>
<p><em>See Also: ,</em></p>
<h3 id="baseline-property-character">Baseline property (character)</h3>
<p><em>(Formerly known as SetCharacterBaseline, which is now obsolete)</em></p>
<pre><code>int Character.Baseline</code></pre>
<p>Gets/sets the character&#8217;s baseline. This allows you to set a specific base line for the character, which works similarly to walk-behind area and object baselines.</p>
<p>The baseline can be from 1 to the height of the room (normally 200), or set it to 0 to go back to using the character&#8217;s feet as the baseline.</p>
<pre><code>cEgo.Baseline = 120;</code></pre>
<p>will move the character&#8217;s baseline (which can be used for testing collisions, or for walk-behinds) to a line positioned at y coordinate = 120.</p>
<p><em>See Also: ,</em></p>
<h3 id="blinkinterval-property">BlinkInterval property</h3>
<p><em>(Formerly part of SetCharacterBlinkView, which is now obsolete)</em></p>
<pre><code>int Character.BlinkInterval</code></pre>
<p>Gets/sets the character&#8217;s blinking interval, which specifies how long the game waits between playing the blinking animation. This is specified in game loops - an interval of 80 would play the blinking animation about every 2 seconds.</p>
<p>This property has no effect if no has been set.</p>
<pre><code>cEgo.BlinkView = 10;
cEgo.BlinkInterval = 160;</code></pre>
<p>will change the character EGO&#8217;s blink view to view 10, and play the animation every 4 seconds.</p>
<p><em>See Also: ,</em></p>
<h3 id="blinkview-property">BlinkView property</h3>
<p><em>(Formerly part of SetCharacterBlinkView, which is now obsolete)</em></p>
<pre><code>int Character.BlinkView</code></pre>
<p>Gets/sets the character&#8217;s blinking view. To stop the character from blinking, set this to -1.</p>
<p>The property sets how often the blinking animation is played.</p>
<pre><code>cEgo.BlinkView = 10;
cEgo.BlinkInterval = 160;</code></pre>
<p>will change the character EGO&#8217;s blink view to view 10, and play the animation every 4 seconds.</p>
<p><em>See Also: ,</em></p>
<h3 id="blinkwhilethinking-property">BlinkWhileThinking property</h3>
<pre><code>bool Character.BlinkWhileThinking</code></pre>
<p>Gets/sets whether the character can blink while thinking. By default this is set to true, but if your blinking animation only goes with the talking animation and not the thinking one, you can stop the character from blinking while Thinking by setting this to false.</p>
<pre><code>cEgo.BlinkWhileThinking = false;</code></pre>
<p>will stop EGO from blinking while his thinking animation is playing.</p>
<p><em>See Also: ,</em></p>
<h3 id="blockingheight-property-character">BlockingHeight property (character)</h3>
<pre><code>int Character.BlockingHeight</code></pre>
<p>Gets/sets the character&#8217;s blocking height.</p>
<p>The blocking height determines how large of a blocking rectangle the character exerts to stop other characters walking through it. If this is set to 0 (the default), then the blocking rectangle is automatically calculated to be the character&#8217;s width, and 5 pixels high.</p>
<p>You can manually change the setting by entering a blocking height in pixels, which is the size of walkable area that the character effectively removes by standing on it.</p>
<p><strong>NOTE: This property has no effect unless the property is set to <em>true.</em></strong></p>
<pre><code>cEgo.BlockingHeight = 20;</code></pre>
<p>will make EGO block 20 pixels high (10 above and 10 below his baseline)</p>
<p><em>See Also: ,</em></p>
<h3 id="blockingwidth-property-character">BlockingWidth property (character)</h3>
<pre><code>int Character.BlockingWidth</code></pre>
<p>Gets/sets the character&#8217;s blocking width.</p>
<p>The blocking width determines how large of a blocking rectangle the character exerts to stop other characters walking through it. If this is set to 0 (the default), then the blocking rectangle is automatically calculated to be the character&#8217;s width, and 5 pixels high.</p>
<p>You can manually change the setting by entering a blocking width in pixels, which is the size of walkable area that the character effectively removes by standing on it.</p>
<p><strong>NOTE: This property has no effect unless the property is set to <em>true.</em></strong></p>
<pre><code>cEgo.BlockingWidth = 50;</code></pre>
<p>will make EGO block 50 pixels wide (25 pixels to the left of his X co-ordinate, and 25 to the right)</p>
<p><em>See Also: ,</em></p>
<h3 id="clickable-property-character">Clickable property (character)</h3>
<p><em>(Formerly known as SetCharacterClickable, which is now obsolete)</em></p>
<pre><code>bool Character.Clickable</code></pre>
<p>Gets/sets whether the character is recognised as something which the player can interact with. This allows you to modify the &#8220;Clickable&#8221; property set initially in the Editor.</p>
<p>If you set this to <em>true then the player can look at, speak to, and so on the character (as with the old Sierra games). If you set this to </em>false, then if the player clicks on the character it will activate whatever is behind them (as with the old Lucasarts games).**</p>
<pre><code>cMan.Clickable = 0;</code></pre>
<p>will make the game ignore clicks on the character MAN.</p>
<p><em>See Also: , , ,</em></p>
<h3 id="destinationx-property">DestinationX property</h3>
<pre><code>readonly int Character.DestinationX</code></pre>
<p>Gets the X coordinate of the character&#8217;s final moving destination. If character is not walking or moving it is equal to its current position.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.4.0 and later versions.</strong></em></p>
<p><em>See Also: , , ,</em></p>
<h3 id="destinationy-property">DestinationY property</h3>
<pre><code>readonly int Character.DestinationY</code></pre>
<p>Gets the Y coordinate of the character&#8217;s final moving destination. If character is not walking or moving it is equal to its current position.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.4.0 and later versions.</strong></em></p>
<p><em>See Also: , , ,</em></p>
<h3 id="diagonalloops-property">DiagonalLoops property</h3>
<p><em>(Formerly part of SetCharacterProperty, which is now obsolete)</em></p>
<pre><code>bool Character.DiagonalLoops</code></pre>
<p>Gets/sets whether diagonal walking loops are used for the character. If this is set to <em>true, then loops 4-7 will be used as diagonal walking loops. If this is set to </em>false, then the character will only face in 4 directions and you can use loops 4-7 for other purposes.**</p>
<pre><code>cEgo.DiagonalLoops = true;</code></pre>
<p>will enable diagonal walking loops for character EGO.</p>
<h3 id="frame-property-character">Frame property (character)</h3>
<p><em>(Formerly known as character[].frame, which is now obsolete)</em></p>
<pre><code>int Character.Frame</code></pre>
<p>Gets/sets the character&#8217;s current frame number. Usually you won&#8217;t change this directly, but will use the Animate command to play an animation.</p>
<pre><code>Display(&quot;EGO currently using frame %d.&quot;, cEgo.Frame);</code></pre>
<p>displays EGO&#8217;s current frame number within his view.</p>
<p><em>SeeAlso: , ,</em></p>
<h3 id="hasexplicittint-property">HasExplicitTint property</h3>
<pre><code>readonly bool Character.HasExplicitTint</code></pre>
<p>Returns <em>true if the character has a tint set explicitly with the command.</em></p>
<p>Returns <em>false if the character has no explicit tint, but it may still be tinted by or a region tint.</em></p>
<pre><code>if (player.HasExplicitTint)
{
  player.RemoveTint();
}</code></pre>
<p>removes the player&#8217;s tint if it currently has one.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.1.0 and later versions.</strong></em></p>
<p><em>SeeAlso: ,</em></p>
<h3 id="id-property-character">ID property (character)</h3>
<pre><code>readonly int Character.ID</code></pre>
<p>Gets the character&#8217;s ID number. This is the character&#8217;s number from the editor, and is useful if you need to interoperate with legacy code that uses the character&#8217;s number rather than name.</p>
<pre><code>MoveCharacter(cEgo.ID, 100, 50);</code></pre>
<p>uses the obsolete MoveCharacter function to move EGO to (100, 50)</p>
<h3 id="idleview-property">IdleView property</h3>
<pre><code>readonly int Character.IdleView</code></pre>
<p>Gets the character&#8217;s current idle view. If the character doesn&#8217;t have one, returns -1.</p>
<p>This property is read-only; to change the view, use the function.</p>
<pre><code>Display(&quot;EGO&#39;s idle view is currently view %d.&quot;, cEgo.IdleView);</code></pre>
<p>will display EGO&#8217;s current idle view number.</p>
<p><em>SeeAlso:</em></p>
<h3 id="ignorelighting-property">IgnoreLighting property</h3>
<p><em>(Formerly known as SetCharacterIgnoreLight, which is now obsolete)</em></p>
<pre><code>bool Character.IgnoreLighting</code></pre>
<p>Allows you to dynamically modify the &#8220;ignore lighting&#8221; checkbox for the character. If this is set to 0, the character will be affected by region light levels and tints; if this is set to 1, then the character will ignore all region lighting.</p>
<pre><code>cEgo.IgnoreLighting = 1;</code></pre>
<p>will make the character look the same no matter if he stands on regions with different light levels.</p>
<h3 id="ignorewalkbehinds-property-character">IgnoreWalkbehinds property (character)</h3>
<p><em>(Formerly known as SetCharacterIgnoreWalkbehinds, which is now obsolete)</em></p>
<pre><code>bool Character.IgnoreWalkbehinds</code></pre>
<p>Gets/sets whether the character is affected by walkbehind areas. Passing <em>false (the default setting) means that the character will be placed behind walk- behind areas according to the relevant baselines.</em></p>
<p>Passing <em>true means that the character will never be placed behind a walk-behind area. This is useful if for example you want to use the character as an overlay to display rain or snow onto a scene.</em></p>
<p><strong>NOTE: enabling this property does not currently work properly when using the Direct3D driver.</strong></p>
<pre><code>cEgo.IgnoreWalkbehinds = true;</code></pre>
<p>will make the character EGO ignore walk-behinds.</p>
<p><em>See Also: ,</em></p>
<h3 id="inventoryquantity-property">InventoryQuantity property</h3>
<p><em>(Formerly known as character[].inv, which is now obsolete)</em></p>
<pre><code>int Character.InventoryQuantity[]</code></pre>
<p>Gets/sets the quantity of the specified inventory item that the character currently has. The array index is the inventory item number, from the Inventory pane in the editor.</p>
<p>Usually, you should use the AddInventory and LoseInventory functions to modify the character&#8217;s inventory; however, if you need to add or remove a large number of items in one go, directly changing this array can be an easier method.</p>
<p>If you change this array directly, the on-screen inventory will not be updated. In this case, you must call UpdateInventory to see any new or removed items.</p>
<p>If you just want to quickly check whether the character has a particular item or not, use the function instead.</p>
<pre><code>Display(&quot;The player has $%d.&quot;, player.InventoryQuantity[iCash.ID]);</code></pre>
<p>will display how many inventory items of type iCash the player has.</p>
<p><em>See Also: , , ,</em></p>
<h3 id="loop-property-character">Loop property (character)</h3>
<p><em>(Formerly known as character[].loop, which is now obsolete)</em></p>
<pre><code>int Character.Loop</code></pre>
<p>Gets/sets the character&#8217;s current loop number. Usually you won&#8217;t change this directly, but will use the Animate command to play an animation.</p>
<pre><code>Display(&quot;EGO currently using loop %d.&quot;, cEgo.Loop);</code></pre>
<p>displays EGO&#8217;s current loop number within his view.</p>
<p><em>SeeAlso: , ,</em></p>
<h3 id="manualscaling-property-character">ManualScaling property (character)</h3>
<p><em>(Formerly known as Character.IgnoreScaling, which is now obsolete) ILBRK </em>(Formerly part of SetCharacterProperty, which is now obsolete)**</p>
<pre><code>bool Character.ManualScaling</code></pre>
<p>Gets/sets whether the character&#8217;s scaling level is determined by the walkable area that he is walking on, or whether it is set manually by the script. This is equivalent to the &#8220;Ignore room area scaling&#8221; checkbox in the editor.</p>
<p>If this is set to <em>true, then the character&#8217;s scaling level is set manually by the property (by default this is <code>100%</code>). If it is set to </em>false, then the character will be stretched or shrunk automatically as appropriate on walkable areas.**</p>
<pre><code>cEgo.ManualScaling = true;
cEgo.Scaling = 50;</code></pre>
<p>will tell EGO to ignore walkable area scaling levels and be fixed to <code>50%</code> zoom level.</p>
<p><em>SeeAlso:</em></p>
<h3 id="movementlinkedtoanimation-property">MovementLinkedToAnimation property</h3>
<pre><code>bool Character.MovementLinkedToAnimation</code></pre>
<p>Gets/sets whether the character&#8217;s movement is linked to their animation. By default this is <em>true, which means that when the character is walking their movement across the screen will be kept in sync with their animation frame changing. Without this, the character can appear to &#8220;glide&#8221; across the screen.</em></p>
<p>In some special cases you may wish to turn this off though, and to do so you can set this property to <em>false.</em></p>
<p>In previous versions of AGS, this setting was known as &#8220;Anti-glide mode&#8221; and was a game-wide setting.</p>
<pre><code>player.MovementLinkedToAnimation = false;
player.Walk(50, 100, eBlock);
player.MovementLinkedToAnimation = true;</code></pre>
<p>will turn off movement-linked animation for the player character, walk him to (50,100), then turn it back on again.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.1.1 and later versions.</strong></em></p>
<p><em>See Also: , ,</em></p>
<h3 id="moving-property-character">Moving property (character)</h3>
<p><em>(Formerly known as character[].walking, which is now obsolete)</em></p>
<pre><code>readonly bool Character.Moving</code></pre>
<p>Returns <em>true if the character is currently moving, or </em>false if not.**</p>
<p>This property is read-only; to change the character&#8217;s movement, use the , and commands.</p>
<pre><code>cEgo.Walk(125, 40);
while (cEgo.Moving) Wait(1);</code></pre>
<p>will move EGO to 125,40 and return control to the player when he gets there.</p>
<p><em>See Also: , , , , ,</em></p>
<h3 id="name-property-character">Name property (character)</h3>
<p><em>(Formerly known as character[].name, which is now obsolete)</em></p>
<pre><code>String Character.Name</code></pre>
<p>Gets/sets the name of the character, as set in the AGS Editor. This is the full name, not the script name.</p>
<p>Note that character names are limited to 40 characters, so if you set the name it will be truncated to that length.</p>
<pre><code>Display(&quot;You are controlling %s.&quot;, player.Name);</code></pre>
<p>will display the name of the player character</p>
<h3 id="normalview-property">NormalView property</h3>
<p><em>(Formerly known as character[].defview, which is now obsolete)</em></p>
<pre><code>readonly int Character.NormalView</code></pre>
<p>Gets the character&#8217;s normal view. This is the character&#8217;s standard walking view, that is used when his view is not locked to something else.</p>
<p>This property is read-only; to change it, use the command.</p>
<pre><code>if (cEgo.View == cEgo.NormalView) {
  Display(&quot;EGO is not animating, not talking and not idle.&quot;);
}</code></pre>
<p>will display a message if EGO is currently displayed using his normal view.</p>
<p><em>See Also: ,</em></p>
<h3 id="previousroom-property">PreviousRoom property</h3>
<p><em>(Formerly known as character[].prevroom, which is now obsolete)</em></p>
<pre><code>readonly int Character.PreviousRoom</code></pre>
<p>Gets the room number that the character was previously in. If the character is still in the room that they started in, this will be -1. Otherwise, it will be the room number of the room that they were last in.</p>
<p>This is a read-only property. It is set automatically by .</p>
<pre><code>Display(&quot;EGO&#39;s previous room was %d.&quot;, cEgo.PreviousRoom);</code></pre>
<p>will display the EGO character&#8217;s previous room.</p>
<h3 id="room-property">Room property</h3>
<p><em>(Formerly known as character[].room, which is now obsolete)</em></p>
<pre><code>readonly int Character.Room</code></pre>
<p>Gets the room number that the character is currently in.</p>
<p>This is a read-only property. It is set by .</p>
<pre><code>Display(&quot;EGO is in room %d.&quot;, cEgo.Room);</code></pre>
<p>will display the EGO character&#8217;s current room.</p>
<h3 id="scalemovespeed-property">ScaleMoveSpeed property</h3>
<p><em>(Formerly part of SetCharacterProperty, which is now obsolete)</em></p>
<pre><code>bool Character.ScaleMoveSpeed</code></pre>
<p>Gets/sets whether the character&#8217;s movement speed is adjusted in line with his current scaling level. This allows you to modify the &#8220;Adjust speed with scaling&#8221; option from the editor.</p>
<p>If you set this to <em>true, the character&#8217;s movement speed will be adjusted so that he walks at a speed relative to his current scaling level. If you set this to </em>false, the character will always just move at his normal speed.**</p>
<pre><code>cEgo.ScaleMoveSpeed = true;</code></pre>
<p>will mean that EGO&#8217;s speed is adjusted in line with his scaling</p>
<p><em>See Also:</em></p>
<h3 id="scalevolume-property">ScaleVolume property</h3>
<pre><code>bool Character.ScaleVolume</code></pre>
<p>Gets/sets whether the character&#8217;s volume is adjusted in line with his current scaling level. This allows you to modify the &#8220;Adjust volume with scaling&#8221; option from the editor.</p>
<p>By default, this is <em>false. If you set it to </em>true, then any frame-linked sounds for the character (for example, footstep sounds) will have their volume automatically adjusted in line with the character&#8217;s scaling level. At the normal <code>100%</code> zoom level the sounds will be played at normal volume, but will then get quieter and louder as appropriate in scaled walkable areas.**</p>
<pre><code>cEgo.ScaleVolume = true;</code></pre>
<p>will mean that EGO&#8217;s footstep sounds are adjusted in line with his scaling</p>
<p><em>See Also:</em></p>
<h3 id="scaling-property-character">Scaling property (character)</h3>
<pre><code>int Character.Scaling</code></pre>
<p>Gets/sets the character&#8217;s current scaling level.</p>
<p>This property can always be read, and returns the character&#8217;s current zoom level, which will be between 5 and 200 (the default being 100 if they are not currently scaled).</p>
<p>You can only set the value of this property if is enabled for the character; otherwise, the scaling is determined automatically based on the walkable area that the character is on.</p>
<pre><code>cEgo.ManualScaling = true;
cEgo.Scaling = 50;</code></pre>
<p>will tell EGO to ignore walkable area scaling levels and be fixed to <code>50%</code> zoom level.</p>
<p><em>SeeAlso:</em></p>
<h3 id="solid-property-character">Solid property (character)</h3>
<p><em>(Formerly part of SetCharacterProperty, which is now obsolete)</em></p>
<pre><code>bool Character.Solid</code></pre>
<p>Gets/sets whether the character can be walked through by other characters.</p>
<p>If this is set to <em>true, then the character is solid and will block the path of other characters. If this is set to </em>false, then the character acts like a hologram, and other characters can walk straight through him.**</p>
<pre><code>cEgo.Solid = true;</code></pre>
<p>will mean that EGO blocks the path other characters.</p>
<p><em>See Also: ,</em></p>
<h3 id="speaking-property">Speaking property</h3>
<pre><code>readonly bool Character.Speaking</code></pre>
<p>Returns true if the character is currently talking, or false if not.</p>
<p>This property is read-only. It will <strong>only return true for the active talking character; that is, it will not return true for any characters talking with the SayBackground command.</strong></p>
<p>Since this property will only be true while the character is speaking, and speaking is a blocking command, this property will probably only be useful to access from the (late_)repeatedly_execute_always handler.</p>
<pre><code>if ((cEgo.Speaking) &amp;&amp; (!cEgo.Animating)) {
  cEgo.Animate(3, 5, eRepeat, eNoBlock);
}</code></pre>
<p>will animate the character using loop 3 while they are talking (only useful with Sierra-style speech).</p>
<p><em>See Also: , , , ,</em></p>
<h3 id="speakingframe-property">SpeakingFrame property</h3>
<pre><code>readonly int Character.SpeakingFrame</code></pre>
<p>Returns the current frame number of the character&#8217;s talking animation. This is useful when using Sierra-style speech, if you want to synchronize events with the progress of the close-up face talking animation.</p>
<p>This property is read-only. It is only accessible while the character is speaking; if you attempt to call it when is <em>false then it will raise an error.</em></p>
<p>Since speaking is a blocking command, this property will probably only be useful access from the (late_)repeatedly_execute_always handler.</p>
<pre><code>if (cEgo.Speaking) {
  if (cEgo.SpeakingFrame == 0) {
    cMan.Move(cMan.x + 10, cMan.y, eNoBlock, eAnywhere);
  }
}</code></pre>
<p>will move cMan to the right every time the talking animation loops back to Frame 0.</p>
<p><em>See Also: ,</em></p>
<h3 id="speechanimationdelay-property">SpeechAnimationDelay property</h3>
<pre><code>int Character.SpeechAnimationDelay;</code></pre>
<p>Gets/sets the character&#8217;s speech animation delay, as set in the editor. This specifies how many game loops each frame of the character&#8217;s speech animation is shown for.</p>
<p><strong>NOTE: This property is ignored if lip sync is enabled.</strong></p>
<p><strong>NOTE: This property </strong>cannot be used if the Speech.UseGlobalSpeechAnimationDelay is set to <strong>true. In that case, the Speech.GlobalSpeechAnimationDelay property value is used instead.</strong>****</p>
<pre><code>player.SpeechAnimationDelay = 4;</code></pre>
<p>will change the player character&#8217;s speech animation speed to 4.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.1.2 and later versions.</strong></em></p>
<p><em>See Also: , , , , ,</em></p>
<h3 id="speechcolor-property">SpeechColor property</h3>
<p><em>(Formerly known as SetTalkingColor, which is now obsolete)</em></p>
<pre><code>int Character.SpeechColor</code></pre>
<p>Gets/sets the character&#8217;s speech text color. This is set by default in the editor.</p>
<p>NEWCOLOR is the colour slot index from the Palette Editor. This can be 0-255 for a 256-colour game, or one of the hi-colour indexes available from the Palette Editor.</p>
<pre><code>cEgo.SpeechColor = 14;</code></pre>
<p>will change the character&#8217;s EGO talking color to yellow.</p>
<p><em>See Also:</em></p>
<h3 id="speechview-property">SpeechView property</h3>
<p><em>(Formerly known as SetCharacterSpeechView, which is now obsolete)ILBRK </em>(Formerly known as character[].talkview, which is now obsolete)**</p>
<pre><code>int Character.SpeechView</code></pre>
<p>Gets/sets the character&#8217;s talking view. If you change it, the new view number will be used as the character&#8217;s talking view in all future conversations.</p>
<p>You can set this to -1 to disable the character&#8217;s speech view.</p>
<pre><code>cEgo.SpeechView = 10;</code></pre>
<p>will change the character EGO&#8217;s speech view to view 10.</p>
<p><em>See Also: , , ,</em></p>
<h3 id="thinking-property">Thinking property</h3>
<pre><code>readonly bool Character.Thinking</code></pre>
<p>Returns true if the character is currently thinking, or false if not.</p>
<p>This property is read-only. It will <strong>only return true for the active thinking character.</strong></p>
<p>Since this property will only be true while the character is thinking, and thinking is a blocking command, this property will probably only be useful to access from the (late_)repeatedly_execute_always handler.</p>
<pre><code>function repeatedly_execute_always()
{
  if (cEgo.Thinking) {
    cEgo.Transparency = 50;
  else
    cEgo.Transparency = 0;
}</code></pre>
<p>this will keep character semi-transparent while he is thinking.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.3.4 and later versions.</strong></em></p>
<p><em>See Also: , , , ,</em></p>
<h3 id="thinkingframe-property">ThinkingFrame property</h3>
<pre><code>readonly int Character.ThinkingFrame</code></pre>
<p>Returns the current frame number of the character&#8217;s thinking animation. This is useful when using Sierra-style speech, if you want to synchronize events with the progress of the close-up face talking animation.</p>
<p>This property is read-only. It is only accessible while the character is thinking; if you attempt to call it when is <em>false then it will raise an error.</em></p>
<p>Since thinking is a blocking command, this property will probably only be useful access from the (late_)repeatedly_execute_always handler.</p>
<pre><code>if (cEgo.Thinking) {
  if (cEgo.ThinkingFrame == 0) {
    cMan.Move(cMan.x + 10, cMan.y, eNoBlock, eAnywhere);
  }
}</code></pre>
<p>will move cMan to the right every time the thinking animation loops back to Frame 0.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.3.4 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="thinkview-property">ThinkView property</h3>
<p><em>(Formerly known as character[].thinkview, which is now obsolete)</em></p>
<pre><code>int Character.ThinkView</code></pre>
<p>Gets/sets the character&#8217;s thinking view. This is used to animate the character when a thought is being displayed.</p>
<pre><code>cEgo.ThinkView = 14;</code></pre>
<p>will change the character EGO&#8217;s thinking view to 14.</p>
<p><em>See Also:</em></p>
<h3 id="transparency-property-character">Transparency property (character)</h3>
<p><em>(Formerly known as SetCharacterTransparency, which is now obsolete)</em></p>
<pre><code>int Character.Transparency</code></pre>
<p>Gets/sets the character&#8217;s transparency. This is specified as a percentage, from 0 to 100. 100 means fully transparent (ie. invisible), and 0 is totally opaque (fully visible). Numbers in between represent varying levels of transparency.</p>
<p><strong>NOTE: Transparency only works in 16-bit and 32-bit colour games.</strong></p>
<p><strong>NOTE: When using the DirectX 5 driver, a large transparent character can significantly slow down AGS.</strong></p>
<p>Some rounding is done internally when the transparency is stored &#8211; therefore, if you get the transparency after setting it, the value you get back might be one out. Therefore, using a loop with <code>cEgo.Transparency++;</code> is not recommended as it will probably end too quickly.</p>
<p>In order to fade a character in, the best approach is shown in the example below:</p>
<pre><code>int trans = cEgo.Transparency;
while (trans &lt; 100) {
  trans++;
  cEgo.Transparency = trans;
  Wait(1);
}</code></pre>
<p>will gradually fade out the character from its current transparency level to being fully invisible.</p>
<p><em>See Also:</em></p>
<h3 id="turnbeforewalking-property">TurnBeforeWalking property</h3>
<p><em>(Formerly part of SetCharacterProperty, which is now obsolete)</em></p>
<pre><code>bool Character.TurnBeforeWalking</code></pre>
<p>Gets/sets whether the character turns to face his new direction before walking. This is equivalent (though opposite) to the editor &#8220;Do not turn before walking&#8221; tick-box.</p>
<p>If you set this to 1, the character will turn on the spot to face his new direction before setting off on a walk. If you set this to 0, the character will instantly face in the correct direction and start walking.</p>
<pre><code>cEgo.TurnBeforeWalking = 1;</code></pre>
<p>will tell EGO to turn to face his new direction before setting off, whenever he walks.</p>
<h3 id="view-property-character">View property (character)</h3>
<pre><code>readonly int Character.View</code></pre>
<p>Gets the view that the character is currently displayed using.</p>
<p>This property is read-only; to change the view, use the ChangeView and LockView functions.</p>
<pre><code>Display(&quot;EGO&#39;s view is currently view %d.&quot;, cEgo.View);</code></pre>
<p>will display EGO&#8217;s current view number.</p>
<p><em>SeeAlso: , , , ,</em></p>
<h3 id="walkspeedx-property">WalkSpeedX property</h3>
<pre><code>readonly int Character.WalkSpeedX;</code></pre>
<p>Gets the character&#8217;s walking speed in the X direction. If using uniform movement, this will be the same as the Y walking speed.</p>
<p>This property is read-only. To change the walking speed, use the SetWalkSpeed function.</p>
<pre><code>Display(&quot;player&#39;s x speed: %d&quot;, player.WalkSpeedX);</code></pre>
<p>will display the player&#8217;s X speed.</p>
<p><em>See Also: ,</em></p>
<h3 id="walkspeedy-property">WalkSpeedY property</h3>
<pre><code>readonly int Character.WalkSpeedY;</code></pre>
<p>Gets the character&#8217;s walking speed in the Y direction. If using uniform movement, this will be the same as the X walking speed.</p>
<p>This property is read-only. To change the walking speed, use the SetWalkSpeed function.</p>
<pre><code>Display(&quot;player&#39;s y speed: %d&quot;, player.WalkSpeedY);</code></pre>
<p>will display the player&#8217;s Y speed.</p>
<p><em>See Also: ,</em></p>
<h3 id="x-property-character">x property (character)</h3>
<pre><code>int Character.x;</code></pre>
<p>Gets/sets the character&#8217;s current X co-ordinate. This is expressed in normal room co-ordinates, and specifies the centre-bottom of the character&#8217;s sprite.</p>
<p><strong>NOTE: Do </strong>NOT change this property while the character is moving. Make sure the character is standing still before changing his co-ordinates.****</p>
<pre><code>Display(&quot;The player is at %d,%d.&quot;, player.x, player.y);</code></pre>
<p>displays the player character&#8217;s current coordinates.</p>
<p><em>See Also: ,</em></p>
<h3 id="y-property-character">y property (character)</h3>
<pre><code>int Character.y;</code></pre>
<p>Gets/sets the character&#8217;s current Y co-ordinate. This is expressed in normal room co-ordinates, and specifies the centre-bottom of the character&#8217;s sprite.</p>
<p><strong>NOTE: Do </strong>NOT change this property while the character is moving. Make sure the character is standing still before changing his co-ordinates.****</p>
<pre><code>Display(&quot;The player is at %d,%d.&quot;, player.x, player.y);</code></pre>
<p>displays the player character&#8217;s current coordinates.</p>
<p><em>See Also: ,</em></p>
<h3 id="z-property-character">z property (character)</h3>
<pre><code>int Character.z;</code></pre>
<p>Gets/sets the character&#8217;s current Z position. This allows the character to levitate off the ground, whilst still retaining its normal Y co-ordinate for baseline calculations and regions.</p>
<p>Normally this is set to 0 (ground-level), but you can increase it to make the character float.</p>
<pre><code>while (player.z &lt; 20) {
  player.z++;
  Wait(1);
}</code></pre>
<p>gradually levitates the character up to 20 pixels.</p>
<p><em>See Also: ,</em></p>
<h3 id="setcharacterproperty">SetCharacterProperty</h3>
<pre><code>SetCharacterProperty (CHARID, PROPERTY, int new_value)</code></pre>
<p><strong>This command is now obsolete. It has been replaced by the following properties:</strong></p>
<p>ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK</p>
<h2 id="datetime-functions-and-properties">DateTime functions and properties</h2>
<h3 id="now-property">Now property</h3>
<p><em>(Formerly known as GetTime, which is now obsolete)</em></p>
<pre><code>readonly static DateTime* DateTime.Now;</code></pre>
<p>Gets the current system time. You could use this for timing a loop, or for effects like telling the player to go to bed, and so on.</p>
<p>A <em>DateTime object is returned, which contains various properties that you can use.</em></p>
<p>Note that the DateTime object that you get will not be kept up to date with the current time; it will remain static with the time at which you called DateTime.Now.</p>
<pre><code>DateTime *dt = DateTime.Now;
Display(&quot;The date is: %02d/%02d/%04d&quot;, dt.DayOfMonth, dt.Month, dt.Year);
Display(&quot;The time is: %02d:%02d:%02d&quot;, dt.Hour, dt.Minute, dt.Second);</code></pre>
<p>will display the current date and time in 24-hour format</p>
<p><em>See Also: , , , , , ,</em></p>
<h3 id="dayofmonth-property">DayOfMonth property</h3>
<pre><code>readonly int DateTime.DayOfMonth;</code></pre>
<p>Gets the day of the month represented by the DateTime object. This will be from 1 to 31, representing the current day within the month.</p>
<p>For an example, see .</p>
<p><em>See Also:</em></p>
<h3 id="hour-property">Hour property</h3>
<pre><code>readonly int DateTime.Hour;</code></pre>
<p>Gets the hour represented by the DateTime object. This will be from 0 to 23, representing the hour in 24-hour format.</p>
<p>For an example, see .</p>
<p><em>See Also:</em></p>
<h3 id="minute-property">Minute property</h3>
<pre><code>readonly int DateTime.Minute;</code></pre>
<p>Gets the minute represented by the DateTime object. This will be from 0 to 59, representing the minute in 24-hour format.</p>
<p>For an example, see .</p>
<p><em>See Also:</em></p>
<h3 id="month-property">Month property</h3>
<pre><code>readonly int DateTime.Month;</code></pre>
<p>Gets the month represented by the DateTime object. This will be from 1 to 12, representing the month of the year.</p>
<p>For an example, see .</p>
<p><em>See Also:</em></p>
<h3 id="rawtime-property">RawTime property</h3>
<p><em>(Formerly known as GetRawTime, which is now obsolete)</em></p>
<pre><code>readonly int DateTime.RawTime;</code></pre>
<p>This function returns the raw system time, as the number of seconds since January 1970. While this value is not useful in itself, you can use it to calculate time differences by getting the value at the start of the game, for example, and then getting the value later on, and the difference between the two is how much time has elapsed.</p>
<p><strong>NOTE: Because this accesses the real-time clock on the users&#8217; system, it is not a good idea to use this for long term timing tasks, since if the user saves the game and then restores it later, the Time value returned by this function will obviously include the difference when they were not playing.</strong></p>
<pre><code>DateTime *dt = DateTime.Now;
int start_time = dt.RawTime;
Wait(120);
dt = DateTime.Now;
Display(&quot;After the wait it is now %d seconds later.&quot;, dt.RawTime - start_time);</code></pre>
<p>should display that 3 seconds have elapsed.</p>
<p><em>See Also: ,</em></p>
<h3 id="second-property">Second property</h3>
<pre><code>readonly int DateTime.Second;</code></pre>
<p>Gets the second represented by the DateTime object. This will be from 0 to 59, representing the second.</p>
<p>For an example, see .</p>
<p><em>See Also:</em></p>
<h3 id="year-property">Year property</h3>
<pre><code>readonly int DateTime.Year;</code></pre>
<p>Gets the year represented by the DateTime object. This is the full year, for example <em>2005.</em></p>
<p>For an example, see .</p>
<p><em>See Also:</em></p>
<h2 id="dialog-functions-and-properties">Dialog functions and properties</h2>
<h3 id="displayoptions-dialog">DisplayOptions (dialog)</h3>
<pre><code>int Dialog.DisplayOptions(optional DialogOptionSayStyle)</code></pre>
<p>Presents the options for this dialog to the user and waits until they select one of them. The selected option number is returned.</p>
<p><strong>NOTE: This command does not run any dialog scripts, it simply displays the options and waits for the player to choose one. To run the dialog normally, use the command instead.</strong></p>
<p>This command is useful if you want to implement your own dialog system, but still use the standard AGS dialog option selection screens.</p>
<p>The optional <em>DialogOptionSayStyle parameter determines whether the chosen option is automatically spoken by the player character. The default is </em>eSayUseOptionSetting, which will use the option&#8217;s &#8220;Say&#8221; setting from the dialog editor. You can alternatively use <em>eSayAlways, which will speak the chosen option regardless of its setting in the editor; or </em>eSayNever, which will not speak the chosen option.****</p>
<p>If the text parser is enabled for this dialog and the player types something into it rather than selecting an option, the special value <code>DIALOG_PARSER_SELECTED</code> will be returned, and AGS will have automatically called with the player&#8217;s text. Therefore, you can call to process it.</p>
<pre><code>int result = dOldMan.DisplayOptions();
if (result == DIALOG_PARSER_SELECTED)
{
  Display(&quot;They typed something into the parser!!&quot;);
}
else
{
  Display(&quot;They chose dialog option %d.&quot;, result);
}</code></pre>
<p>will show the options for dialog <em>dOldMan and display a message depending on what the player selected.</em></p>
<p><em>Compatibility: Supported by <strong>AGS 3.0.2 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="getoptionstate-dialog">GetOptionState (dialog)</h3>
<p><em>(Formerly known as global function GetDialogOption, which is now obsolete)</em></p>
<pre><code>Dialog.GetOptionState(int option)</code></pre>
<p>Finds out whether an option in a conversation is available to the player or not.</p>
<p>OPTION is the option number within the dialog, from 1 to whatever the highest option is for that topic.</p>
<p>The return value can have the following values:</p>
<pre><code>eOptionOff
  The option is disabled - the player will not see it
eOptionOn
  The option is enabled - the player can now see and use it
eOptionOffForever
  The option is permanently disabled - no other command can ever turn
  it back on again.</code></pre>
<p>These are the same as the options passed to Dialog.SetOptionState.</p>
<pre><code>if (dJoeExcited.GetOptionState(2) != eOptionOn)
  Display(&quot;It&#39;s turned off&quot;);</code></pre>
<p>Will display a message if option 2 of dialog dJoeExcited is not currently switched on.</p>
<p><em>See Also: , ,</em></p>
<h3 id="getoptiontext-dialog">GetOptionText (dialog)</h3>
<pre><code>String Dialog.GetOptionText(int option)</code></pre>
<p>Returns the text for the specified dialog option.</p>
<p>OPTION is the option number within the dialog, from 1 to whatever the highest option is for that topic.</p>
<pre><code>String optionText = dJoeBloggs.GetOptionText(3);
Display(&quot;Option 3 of dialog dJoeBloggs is %s!&quot;, optionText);</code></pre>
<p>will display the text for the third option of the dJoeBloggs dialog.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.0.2 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="hasoptionbeenchosen">HasOptionBeenChosen</h3>
<pre><code>bool Dialog.HasOptionBeenChosen(int option)</code></pre>
<p>Finds out whether the player has already chosen the specified option in this dialog. This is mainly useful when drawing your own custom dialog options display, since it allows you to differentiate options that have already been chosen.</p>
<p>OPTION is the option number within the dialog, from 1 to whatever the highest option is for that topic.</p>
<pre><code>if (dJoeExcited.HasOptionBeenChosen(2))
  Display(&quot;The player has chosen option 2 in dialog dJoeExcited!&quot;);</code></pre>
<p>will display a message if the player has used option 2 of the dialog before.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.1.1 and later versions.</strong></em></p>
<p><em>See Also: , ,</em></p>
<h3 id="id-property-dialog">ID property (dialog)</h3>
<pre><code>readonly int Dialog.ID;</code></pre>
<p>Gets the dialog ID number from the editor.</p>
<p>This might be useful if you need to interoperate with legacy scripts that work with dialog ID numbers.</p>
<pre><code>Display(&quot;dFisherman is Dialog %d!&quot;, dFisherman.ID);</code></pre>
<p>will display the ID number of the dFisherman dialog</p>
<p><em>Compatibility: Supported by <strong>AGS 3.1.0 and later versions.</strong></em></p>
<h3 id="optioncount-property-dialog">OptionCount property (dialog)</h3>
<pre><code>readonly int Dialog.OptionCount;</code></pre>
<p>Gets the number of options that this dialog has.</p>
<p>This might be useful in a script module if you want to iterate through all the possible choices in the dialog.</p>
<pre><code>Display(&quot;dFisherman has %d options!&quot;, dFisherman.OptionCount);</code></pre>
<p>will display the number of options in the dFisherman dialog.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.0.2 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="sethasoptionbeenchosen-dialog">SetHasOptionBeenChosen (dialog)</h3>
<pre><code>Dialog.SetHasOptionBeenChosen(int option, bool chosen)</code></pre>
<p>Changes whether an option in a conversation is marked as previously chosen by the player. The option is marked as chosen whenever player selects it during the conversation, and is usually highlighted with different text colour. This function lets you to reset the option state, or force it change at any random moment.</p>
<p>OPTION is the option number within the dialog, from 1 to whatever the highest option is for that topic.</p>
<pre><code>if (dDialog1.HasOptionBeenChosen(1))
    dDialog1.SetHasOptionBeenChosen(1, false); // reset the option state</code></pre>
<p>will mark option 1 of dialog dDialog1 as &#8220;not chosen yet&#8221;.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.3.0 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="setoptionstate-dialog">SetOptionState (dialog)</h3>
<p><em>(Formerly known as global function SetDialogOption, which is now obsolete)</em></p>
<pre><code>Dialog.SetOptionState(int option, DialogOptionState)</code></pre>
<p>Changes whether an option in a conversation is available to the player or not. This allows you to add extra options to a conversation once the player has done certain things.</p>
<p>OPTION is the option number within the topic, from 1 to whatever the highest option is for that topic.</p>
<p>The DialogOptionState controls what happens to this option. It can have the following values:</p>
<pre><code>eOptionOff
  The option is disabled - the player will not see it
eOptionOn
  The option is enabled - the player can now see and use it
eOptionOffForever
  The option is permanently disabled - no other command can ever turn
  it back on again.</code></pre>
<p>These are equivalent to the option-off, option-on, and option-off-forever dialog commands.</p>
<pre><code>if (GetGlobalInt(10)==1)
    dialog[4].SetOptionState(2, eOptionOn);</code></pre>
<p>will enable option 2 of topic number 4 if the Global Integer 10 is 1.</p>
<p><em>See Also: , ,</em></p>
<h3 id="showtextparser-property-dialog">ShowTextParser property (dialog)</h3>
<pre><code>readonly bool Dialog.ShowTextParser;</code></pre>
<p>Gets whether this dialog shows a text box allowing the player to type in text.</p>
<p>This property is initially set in the Dialog Editor.</p>
<pre><code>if (dFisherman.ShowTextParser)
{
  Display(&quot;dFisherman has a text box!&quot;);
}</code></pre>
<p>will display a message if dFisherman has the option enabled</p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.1 and later versions.</strong></em></p>
<h3 id="start-dialog">Start (dialog)</h3>
<p><em>(Formerly known as global function RunDialog, which is now obsolete)</em></p>
<pre><code>Dialog.Start()</code></pre>
<p>Starts a conversation from the specified topic.</p>
<p>NOTE: The conversation will not start immediately; instead, it will be run when the current script function finishes executing.</p>
<p>If you use this command from within the dialog_request function, it will specify that the game should return to this new topic when the script finishes.</p>
<pre><code>dMerchant.Start();</code></pre>
<p>will start the conversation topic named dMerchant.</p>
<p><em>See Also: ,</em></p>
<h3 id="stopdialog">StopDialog</h3>
<pre><code>StopDialog ()</code></pre>
<p>This command can only be used from within the dialog_request function. It tells AGS that when dialog_request finishes, the whole conversation should stop rather than continuing with the dialog script.</p>
<p>You can use this function to end the conversation depending on whether the player has/does a certain thing.</p>
<pre><code> function dialog_request (int dr) {
 if (dr==1) {
   cEgo.AddInventory(iPoster);
   StopDialog();
 }</code></pre>
<p>will give the player the inventory item 3 and then end the conversation.</p>
<p><em>See Also:</em></p>
<h2 id="dialogoptionsrenderinginfo-functions-and-properties">DialogOptionsRenderingInfo functions and properties</h2>
<p>The DialogOptionsRenderingInfo instance is used by the system. You can never create one yourself, it will be passed in to the dialog option functions as described in the linked page.</p>
<h3 id="runactiveoption">RunActiveOption</h3>
<pre><code>bool DialogOptionsRenderingInfo.RunActiveOption();</code></pre>
<p>Runs the currently selected dialog option, the one set in ActiveOptionID, and returns <strong>true on success.</strong></p>
<p>As of AGS 3.4.0 you must call this function for conversation to continue, most common places for such call are <code>dialog_options_mouse_click</code> and <code>dialog_options_key_press</code> functions.</p>
<pre><code>function dialog_options_key_press(DialogOptionsRenderingInfo *info, eKeyCode key)
{
  if (keycode == eKeyReturn)
    info.RunActiveOption();
}</code></pre>
<p>runs selected dialog option when player presses Enter/Return key.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.4.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="update">Update</h3>
<pre><code>void DialogOptionsRenderingInfo.Update();</code></pre>
<p>Forces dialog options to redraw, eventually leading to be <code>dialog_options_render</code> function run.</p>
<p>Like other elements of interface, dialog options GUI does not redraw itself every game loop; in attempt to optimize perfomance it aims to do so only when there are changes to its look. But sometimes you may want to change GUI looks based on your own decision, and not automatic behavior. For example, you want to script animated text, or other element belonging to dialog options. This is when you call DialogOptionsRenderingInfo.Update().</p>
<p><strong>IMPORTANT: Keep in mind that calling </strong>Update does not immediately run <code>dialog_options_render</code>, render function will be run at least after current script ends.****</p>
<p><em>Compatibility: Supported by <strong>AGS 3.4.0 and later versions.</strong></em></p>
<h3 id="activeoptionid-property">ActiveOptionID property</h3>
<pre><code>int DialogOptionsRenderingInfo.ActiveOptionID;</code></pre>
<p>Gets/sets the currently active option on the dialog options screen. You set this in the <code>dialog_options_get_active</code> function to tell AGS which option the mouse is hovering over. This ensures that the correct option is activated when the player clicks the mouse button.</p>
<p>You can read this property in the <code>dialog_options_render</code> function in order to highlight the selected option in a different manner to the others.</p>
<p>This property can be set to <strong>0 which indicates that no option is selected; otherwise it will be the option number from 1 to the number of options in the dialog.</strong></p>
<pre><code>function dialog_options_get_active(DialogOptionsRenderingInfo *info)
{
  info.ActiveOptionID = 1;
}</code></pre>
<p>always selects the first option</p>
<p><em>Compatibility: Supported by <strong>AGS 3.1.0 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="dialogtorender-property">DialogToRender property</h3>
<pre><code>Dialog* DialogOptionsRenderingInfo.DialogToRender;</code></pre>
<p>Gets the dialog that needs to be rendered. You can loop through all the options in the dialog in order to decide what to display on the screen.</p>
<p>For an example please see the page.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.1.0 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="hasalphachannel-property-dialogoptionsrenderinginfo">HasAlphaChannel property (DialogOptionsRenderingInfo)</h3>
<pre><code>int DialogOptionsRenderingInfo.HasAlphaChannel;</code></pre>
<p>Gets/sets whether the dialog options&#8217;s drawing surface will have alpha channel.</p>
<p>This can only be set within the <code>dialog_options_get_dimensions</code> function, but can be read in other functions in order to render the options.</p>
<pre><code>function dialog_options_get_dimensions(DialogOptionsRenderingInfo *info)
{
  info.Width = 300;
  info.Height = 150;
  info.HasAlphaChannel = true;
}</code></pre>
<p>creates a 300x150 size area with alpha channel to draw the dialog options in.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.3.0 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="height-property-dialogoptionsrenderinginfo">Height property (DialogOptionsRenderingInfo)</h3>
<pre><code>int DialogOptionsRenderingInfo.Height;</code></pre>
<p>Gets/sets the height of the area needed to draw the dialog options.</p>
<p>This can only be set within the <code>dialog_options_get_dimensions</code> function, but can be read in other functions in order to render the options.</p>
<pre><code>function dialog_options_get_dimensions(DialogOptionsRenderingInfo *info)
{
  info.Width = 300;
  info.Height = 150;
}</code></pre>
<p>creates a 300x150 size area to draw the dialog options in</p>
<p><em>Compatibility: Supported by <strong>AGS 3.1.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="parsertextboxwidth-property">ParserTextBoxWidth property</h3>
<pre><code>int DialogOptionsRenderingInfo.ParserTextBoxWidth;</code></pre>
<p>Gets/sets the width of the text parser textbox on the dialog options. If the text parser is not enabled for this dialog, this setting will be ignored.</p>
<p>This can only be set within the <code>dialog_options_get_dimensions</code> function.</p>
<pre><code>function dialog_options_get_dimensions(DialogOptionsRenderingInfo *info)
{
  info.Width = 300;
  info.Height = 150;
  // Put the text parser at the bottom (if enabled)
  info.ParserTextBoxX = 10;
  info.ParserTextBoxY = 130;
  info.ParserTextBoxWidth = 180;
}</code></pre>
<p>positions the parser text box at (10,130) inside the 300x150 dialog options area</p>
<p><em>Compatibility: Supported by <strong>AGS 3.1.0 and later versions.</strong></em></p>
<p><em>See Also: , ,</em></p>
<h3 id="parsertextboxx-property">ParserTextBoxX property</h3>
<pre><code>int DialogOptionsRenderingInfo.ParserTextBoxX;</code></pre>
<p>Gets/sets the X-position of the text parser textbox on the dialog options. If the text parser is not enabled for this dialog, this setting will be ignored.</p>
<p>This X-position is relative to the dialog options surface. That is, an X of 10 will position it 10 pixels within the dialog options area, not 10 pixels from the edge of the screen.</p>
<p>This can only be set within the <code>dialog_options_get_dimensions</code> function.</p>
<pre><code>function dialog_options_get_dimensions(DialogOptionsRenderingInfo *info)
{
  info.Width = 300;
  info.Height = 150;
  // Put the text parser at the bottom (if enabled)
  info.ParserTextBoxX = 10;
  info.ParserTextBoxY = 130;
  info.ParserTextBoxWidth = 180;
}</code></pre>
<p>positions the parser text box at (10,130) inside the 300x150 dialog options area</p>
<p><em>Compatibility: Supported by <strong>AGS 3.1.0 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="parsertextboxy-property">ParserTextBoxY property</h3>
<pre><code>int DialogOptionsRenderingInfo.ParserTextBoxY;</code></pre>
<p>Gets/sets the Y-position of the text parser textbox on the dialog options. If the text parser is not enabled for this dialog, this setting will be ignored.</p>
<p>This Y-position is relative to the dialog options surface. That is, a Y of 10 will position it 10 pixels within the dialog options area, not 10 pixels from the edge of the screen.</p>
<p>This can only be set within the <code>dialog_options_get_dimensions</code> function.</p>
<pre><code>function dialog_options_get_dimensions(DialogOptionsRenderingInfo *info)
{
  info.Width = 300;
  info.Height = 150;
  // Put the text parser at the bottom (if enabled)
  info.ParserTextBoxX = 10;
  info.ParserTextBoxY = 130;
  info.ParserTextBoxWidth = 180;
}</code></pre>
<p>positions the parser text box at (10,130) inside the 300x150 dialog options area</p>
<p><em>Compatibility: Supported by <strong>AGS 3.1.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="surface-property-dialogoptionsrenderinginfo">Surface property (DialogOptionsRenderingInfo)</h3>
<pre><code>DrawingSurface* DialogOptionsRenderingInfo.Surface;</code></pre>
<p>Gets the drawing surface that can be used to draw the dialog options.</p>
<p>This can only be used within the <code>dialog_options_render</code> function; in all other functions it will return <em>null.</em></p>
<p>Unlike most other uses of the DrawingSurface, you do <strong>NOT have to release this one. AGS will automatically do that for you after the <code>dialog_options_render</code> function has completed.</strong></p>
<p>The size of the surface should correspond to the Width and Height requested in the <code>dialog_options_get_dimensions</code> function.</p>
<pre><code>function dialog_options_render(DialogOptionsRenderingInfo *info)
{
  info.Surface.Clear(14);
}</code></pre>
<p>clears the dialog options area to yellow.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.1.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="width-property-dialogoptionsrenderinginfo">Width property (DialogOptionsRenderingInfo)</h3>
<pre><code>int DialogOptionsRenderingInfo.Width;</code></pre>
<p>Gets/sets the width of the area needed to draw the dialog options.</p>
<p>This can only be set within the <code>dialog_options_get_dimensions</code> function, but can be read in other functions in order to render the options.</p>
<pre><code>function dialog_options_get_dimensions(DialogOptionsRenderingInfo *info)
{
  info.Width = 300;
  info.Height = 150;
}</code></pre>
<p>creates a 300x150 size area to draw the dialog options in</p>
<p><em>Compatibility: Supported by <strong>AGS 3.1.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="x-property-dialogoptionsrenderinginfo">X property (DialogOptionsRenderingInfo)</h3>
<pre><code>int DialogOptionsRenderingInfo.X;</code></pre>
<p>Gets/sets the horizontal co-ordinate of the top-left corner of the dialog options area.</p>
<p>This can only be set within the <code>dialog_options_get_dimensions</code> function, but can be read in other functions in order to render the options.</p>
<pre><code>function dialog_options_get_dimensions(DialogOptionsRenderingInfo *info)
{
  info.X = 50;
  info.Y = 20;
  info.Width = 200;
  info.Height = 150;
}</code></pre>
<p>creates a 200x150 size area at (50, 20) to draw the dialog options in</p>
<p><em>Compatibility: Supported by <strong>AGS 3.1.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="y-property-dialogoptionsrenderinginfo">Y property (DialogOptionsRenderingInfo)</h3>
<pre><code>int DialogOptionsRenderingInfo.Y;</code></pre>
<p>Gets/sets the vertical co-ordinate of the top-left corner of the dialog options area.</p>
<p>This can only be set within the <code>dialog_options_get_dimensions</code> function, but can be read in other functions in order to render the options.</p>
<pre><code>function dialog_options_get_dimensions(DialogOptionsRenderingInfo *info)
{
  info.X = 50;
  info.Y = 20;
  info.Width = 200;
  info.Height = 150;
}</code></pre>
<p>creates a 200x150 size area at (50, 20) to draw the dialog options in</p>
<p><em>Compatibility: Supported by <strong>AGS 3.1.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h2 id="drawingsurface-functions-and-properties">DrawingSurface functions and properties</h2>
<p>The DrawingSurface family of functions allow you to directly draw onto dynamic sprites and room backgrounds in the game. You get a drawing surface by calling or , and you can then use the following methods to draw onto the surface.</p>
<p><strong>IMPORTANT: You </strong>MUST call the method when you have finished drawing onto the surface. This allows AGS to update its cached copies of the image and upload it to video memory if appropriate.****</p>
<h3 id="clear-drawing-surface">Clear (drawing surface)</h3>
<p><em>(Formerly known as RawClearScreen, which is now obsolete)</em></p>
<pre><code>DrawingSurface.Clear(optional int colour)</code></pre>
<p>Clears the surface to the specified COLOUR (this is a number you can find in the Colours pane of the editor). The current contents of the surface will be lost.</p>
<p>If you do not supply the COLOUR parameter, or use COLOR_TRANSPARENT, the surface will be cleared to be fully transparent.</p>
<pre><code>DrawingSurface *surface = Room.GetDrawingSurfaceForBackground();
surface.Clear(14);
surface.DrawingColor = 13;
surface.DrawCircle(160,100,50);
surface.Release();</code></pre>
<p>clears the room background to be fully yellow, then draws a pink circle in the middle of it.</p>
<p><em>See Also:</em></p>
<h3 id="createcopy">CreateCopy</h3>
<p><em>(Formerly known as RawSaveScreen, which is now obsolete)</em></p>
<pre><code>DrawingSurface* DrawingSurface.CreateCopy()</code></pre>
<p>Makes a backup copy of the current surface, in order that it can be restored later. This could be useful to back up a background scene before writing over it, or to save a certain state of your drawing to restore later.</p>
<p>Unlike the obsolete RawSaveScreen command in previous versions of AGS, backup surfaces created with this command are not lost when the player changes room or restores a game. However, surfaces containing a copy of room backgrounds can be <strong>very large, using up a large amount of memory and can increase the save game sizes significantly. Therefore, it is </strong>strongly recommended that you Release any backup copy surfaces as soon as you are done with them.****</p>
<pre><code>DrawingSurface *surface = Room.GetDrawingSurfaceForBackground();
DrawingSurface *backup = surface.CreateCopy();
surface.DrawTriangle(0,0,160,100,0,200);
Wait(80);
surface.DrawSurface(backup);
backup.Release();
surface.Release();</code></pre>
<p>will save a copy of the room background, draw a triangle onto it, wait for a while and then restore the original background.</p>
<p><em>See Also:</em></p>
<h3 id="drawcircle">DrawCircle</h3>
<p><em>(Formerly known as RawDrawCircle, which is now obsolete)</em></p>
<pre><code>DrawingSurface.DrawCircle(int x, int y, int radius)</code></pre>
<p>Draws a filled circle of radius RADIUS with its centre at (X,Y) in the current drawing colour.</p>
<pre><code>DrawingSurface *surface = Room.GetDrawingSurfaceForBackground();
surface.DrawingColor = 14;
surface.DrawCircle(160,100,50);
surface.Release();</code></pre>
<p>will draw a circle in the centre of the screen, of 50 pixels radius.</p>
<p><em>See Also: ,</em></p>
<h3 id="drawimage">DrawImage</h3>
<p><em>(Formerly known as RawDrawImage, which is now obsolete) ILBRK </em>(Formerly known as RawDrawImageResized, which is now obsolete) ILBRK <em>(Formerly known as RawDrawImageTransparent, which is now obsolete)</em>**</p>
<pre><code>DrawingSurface.DrawImage(int x, int y, int slot, optional int transparency,
                         optional int width, optional int height)</code></pre>
<p>Draws image SLOT from the sprite manager onto the surface at location (X,Y).</p>
<p>Optionally, you can also specify the transparency of the image. This is a number from 0-100; using a <em>transparency of 50 will draw the image semi-transparent; using 0 means it will not be transparent.</em></p>
<p>You can also resize the image as you draw it. In order to do this, simply specify a <em>width and </em>height that you wish to resize the image to when it is drawn.**</p>
<p><strong>NOTE: This command only works if the image to be drawn is the same colour depth as the surface that you are drawing onto.</strong></p>
<p><strong>NOTE: Transparency does not work in 256-colour games, or with 256-colour sprites.</strong></p>
<p><strong>NOTE: The X and Y co-ordinates given are ROOM co-ordinates, not SCREEN co-ordinates. This means that in a scrolling room you can draw outside the current visible area.</strong></p>
<pre><code>DrawingSurface *surface = Room.GetDrawingSurfaceForBackground();
surface.DrawImage(100, 100, oDoor.Graphic, 40);
surface.Release();</code></pre>
<p>will draw the <em>oDoor object&#8217;s graphic onto the room background at (100, 100), at <code>40%</code> transparency.</em></p>
<p><em>See Also: , , ,</em></p>
<h3 id="drawline">DrawLine</h3>
<p><em>(Formerly known as RawDrawLine, which is now obsolete)</em></p>
<pre><code>DrawingSurface.DrawLine(int from_x, int from_y, int to_x, int to_y,
                        optional int thickness)</code></pre>
<p>Draws a line from (FROM_X, FROM_Y) to (TO_X, TO_Y) in the surface&#8217;s current drawing colour.</p>
<p>The <em>thickness parameter allows you to specify how thick the line is, the default being 1 pixel.</em></p>
<p><strong>NOTE: The X and Y co-ordinates given are ROOM co-ordinates, not SCREEN co-ordinates. This means that in a scrolling room you can draw outside the current visible area.</strong></p>
<pre><code>DrawingSurface *surface = Room.GetDrawingSurfaceForBackground();
surface.DrawingColor = 14;
surface.DrawLine(0, 0, 160, 100);
surface.Release();</code></pre>
<p>will draw a line from the left top of the screen (0,0) to the middle of the screen (160,100);</p>
<p><em>See Also: , , ,</em></p>
<h3 id="drawmessagewrapped">DrawMessageWrapped</h3>
<p><em>(Formerly known as RawPrintMessageWrapped, which is now obsolete)</em></p>
<pre><code>DrawingSurface.DrawMessageWrapped(int x, int y, int width,
                                  FontType font, int message_number)</code></pre>
<p>Draws the room message MESSAGE_NUMBER onto the surface at (x,y), using the specified FONT.</p>
<p>WIDTH is the width of the virtual textbox enclosing the text, and is the point that the text will wrap at. This command is designed for writing a long message to the screen with it wrapping normally like a standard label would do.</p>
<p>The text will be printed using the current drawing colour.</p>
<pre><code>DrawingSurface *surface = Room.GetDrawingSurfaceForBackground();
surface.DrawingColor = 14;
surface.DrawMessageWrapped(80, 40, 160, Game.NormalFont, 10);
surface.Release();</code></pre>
<p>will display message 10 in the centre of the screen, starting from Y = 40.</p>
<p><em>See Also: , ,</em></p>
<h3 id="drawpixel">DrawPixel</h3>
<pre><code>DrawingSurface.DrawPixel(int x, int y)</code></pre>
<p>Draws a single pixel onto the surface at (X,Y) in the current colour. The pixel thickness respects the property.</p>
<p><strong>NOTE: This command is not fast enough to use repeatedly to build up an image. Only use it for single pixel adjustments.</strong></p>
<pre><code>DrawingSurface *surface = Room.GetDrawingSurfaceForBackground();
surface.DrawingColor = 14;
surface.DrawPixel(50, 50);
surface.Release();</code></pre>
<p>draws a yellow pixel in the top left of the room background</p>
<p><em>See Also: , , ,</em></p>
<h3 id="drawrectangle">DrawRectangle</h3>
<p><em>(Formerly known as RawDrawRectangle, which is now obsolete)</em></p>
<pre><code>DrawingSurface.DrawRectangle(int x1, int y1, int x2, int y2)</code></pre>
<p>Draws a filled rectangle in the current colour with its top-left corner at (x1,y1) and its bottom right corner at (x2, y2)</p>
<p><strong>NOTE: The X and Y co-ordinates given are ROOM co-ordinates, not SCREEN co-ordinates. This means that in a scrolling room you can draw outside the current visible area.</strong></p>
<pre><code>DrawingSurface *surface = Room.GetDrawingSurfaceForBackground();
surface.DrawingColor = 14;
surface.DrawRectangle(0, 0, 160, 100);
surface.Release();</code></pre>
<p>will draw a rectangle over the top left hand quarter of the screen.</p>
<p><em>See Also: ,</em></p>
<h3 id="drawstring">DrawString</h3>
<p><em>(Formerly known as RawPrint, which is now obsolete)</em></p>
<pre><code>DrawingSurface.DrawString(int x, int y, FontType font, string text, ...)</code></pre>
<p>Draws the <em>text onto the surface at (x, y), using the supplied font number. The text will be drawn in the current drawing colour.</em></p>
<p>You can insert the value of variables into the message. For more information, see the section.</p>
<pre><code>DrawingSurface *surface = Room.GetDrawingSurfaceForBackground();
surface.DrawingColor = 14;
surface.DrawString(0, 100, Game.NormalFont, &quot;Text written into the background!&quot;);
surface.Release();</code></pre>
<p>will write some text onto the middle-left of the room background</p>
<p><em>See Also: , ,</em></p>
<h3 id="drawstringwrapped">DrawStringWrapped</h3>
<pre><code>DrawingSurface.DrawStringWrapped(int x, int y, int width,
                                 FontType font, Alignment,
                                 const string text)</code></pre>
<p>Draws the <em>text onto the surface at (x,y), using the specified FONT.</em></p>
<p><em>width is the width of the virtual textbox enclosing the text, and is the point that the text will wrap at. You can use the </em>alignment parameter to determine how the text is horizontally aligned.**</p>
<p>The text will be printed using the current drawing colour.</p>
<pre><code>DrawingSurface *surface = Room.GetDrawingSurfaceForBackground();
surface.DrawingColor = 14;
surface.DrawStringWrapped(80, 40, 160, Game.NormalFont, eAlignCentre, &quot;Hello, my name is Bob.&quot;);
surface.Release();</code></pre>
<p>will display the text in the centre of the screen, starting from Y = 40.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.0.1 and later versions.</strong></em></p>
<p><em>See Also: , ,</em></p>
<h3 id="drawsurface">DrawSurface</h3>
<p><em>(Formerly known as RawDrawFrameTransparent, which is now obsolete) ILBRK </em>(Formerly known as RawRestoreScreen, which is now obsolete)**</p>
<pre><code>DrawingSurface.DrawSurface(DrawingSurface *source, optional int transparency)</code></pre>
<p>Draws the specified surface on top of this surface, optionally using <em>transparency percent transparency.</em></p>
<p>This allows you to perform day-to-night fading and other special effects.</p>
<p><strong>NOTE: You cannot use the <em>transparency parameter with 256-colour surfaces.</em></strong></p>
<p><strong>NOTE: This command can be a bit on the slow side, so don&#8217;t call it from repeatedly_execute.</strong></p>
<p><strong>TIP: If you want to gradually fade in a second background, create a copy of the original surface and then restore it after each iteration, otherwise the backgrounds will converge too quickly.</strong></p>
<pre><code>DrawingSurface *mainBackground = Room.GetDrawingSurfaceForBackground(0);
DrawingSurface *nightBackground = Room.GetDrawingSurfaceForBackground(1);
mainBackground.DrawSurface(nightBackground, 50);
mainBackground.Release();
nightBackground.Release();</code></pre>
<p>this will draw background frame 1 onto frame 0 at 50<code>%</code> opacity.</p>
<p><em>See Also: ,</em></p>
<h3 id="drawtriangle">DrawTriangle</h3>
<p><em>(Formerly known as RawDrawTriangle, which is now obsolete)</em></p>
<pre><code>DrawingSurface.DrawTriangle(int x1, int y1, int x2, int y2, int x3, int y3)</code></pre>
<p>Draws a filled triangle in the current colour with corners at the points (x1,y1), (x2,y2) and (x3,y3).</p>
<p>Well, don&#8217;t look at me, you might find it useful for something :-)</p>
<pre><code>DrawingSurface *surface = Room.GetDrawingSurfaceForBackground();
surface.DrawingColor = 14;
surface.DrawTriangle(0,0,160,100,0,200);
surface.Release();</code></pre>
<p>will draw a triangle with corners at the points (0,0),(160,100),(0,200).</p>
<p><em>See Also: , ,</em></p>
<h3 id="release-drawing-surface">Release (drawing surface)</h3>
<pre><code>DrawingSurface.Release()</code></pre>
<p>Tells AGS that you have finished drawing onto this surface, and that AGS can now upload the changed image into video memory.</p>
<p>After calling this method, you can no longer use the DrawingSurface instance. To do any further drawing, you need to get the surface again.</p>
<pre><code>DrawingSurface *surface = Room.GetDrawingSurfaceForBackground();
surface.DrawingColor = 14;
surface.DrawLine(0, 0, 50, 50);
surface.Release();</code></pre>
<p>draws a yellow diagonal line across the top-left of the current room background, then releases the image.</p>
<p><em>See Also: ,</em></p>
<h3 id="drawingcolor-property">DrawingColor property</h3>
<p><em>(Formerly known as RawSetColor, which is now obsolete)</em></p>
<pre><code>int DrawingSurface.DrawingColor</code></pre>
<p>Gets/sets the current drawing colour on this surface. Set this before using commands like , which use this colour for their drawing.</p>
<p>You can set this either to an AGS Colour Number (as you&#8217;d get from the Colours pane in the editor) or to the special constant COLOR_TRANSPARENT, which allows you to draw transparent areas onto the surface.</p>
<pre><code>DrawingSurface *surface = Room.GetDrawingSurfaceForBackground();
surface.DrawingColor = 14;
surface.DrawLine(0, 0, 160, 100);
surface.DrawingColor = Game.GetColorFromRGB(255, 255, 255);
surface.DrawLine(0, 199, 160, 100);
surface.Release();</code></pre>
<p>will draw a yellow line from the left top of the screen (0,0) to the middle of the screen (160,100), and a white line from the bottom left to the middle.</p>
<p><em>See Also: , , ,</em></p>
<h3 id="getpixel">GetPixel</h3>
<pre><code>int DrawingSurface.GetPixel(int x, int y)</code></pre>
<p>Returns the AGS Colour Number of the pixel at (X,Y) on the surface.</p>
<p><strong>NOTE: In high-colour games, the first 32 colour numbers have a special meaning due to an AGS feature which maintains compatibility with 8-bit games. Therefore, if you draw onto the surface using a blue colour number 0-31 you will get a different number when you GetPixel &#8211; and in fact the colour drawn may not be what you expect. To get around this, add 1 Red or Green component to adjust the colour number out of this range.</strong></p>
<p><strong>NOTE: This command is relatively slow. Don&#8217;t use it to try and process an entire image.</strong></p>
<pre><code>DrawingSurface *surface = Room.GetDrawingSurfaceForBackground();
Display(&quot;The colour of the middle pixel is %d.&quot;, surface.GetPixel(160, 100));
surface.Release();</code></pre>
<p>displays the pixel colour of the centre pixel on the screen.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.0.1 and later versions.</strong></em></p>
<p><em>See Also: , ,</em></p>
<h3 id="height-property-drawing-surface">Height property (drawing surface)</h3>
<pre><code>readonly int DrawingSurface.Height</code></pre>
<p>Gets the height of the surface.</p>
<pre><code>DrawingSurface *surface = Room.GetDrawingSurfaceForBackground();
Display(&quot;The background is %d x %d!&quot;, surface.Width, surface.Height);
surface.Release();</code></pre>
<p>displays the size of the surface to the player</p>
<p><em>See Also: ,</em></p>
<h3 id="usehighrescoordinates-property">UseHighResCoordinates property</h3>
<pre><code>bool DrawingSurface.UseHighResCoordinates</code></pre>
<p>Gets/sets whether you want to use high-resolution co-ordinates with this surface.</p>
<p>By default, this property will be set such that drawing surface co-ordinates use the same co-ordinate system as the rest of the game, as per the &#8220;Use low-res co-ordinates in script&#8221; game setting. However, if your game is 640x400 or higher you can customize whether this drawing surface uses native co-ordinates or the low-res 320x200 co-ordinates by changing this property.</p>
<p>Setting this property affects <strong>ALL other commands performed on this drawing surface, including the and properties.</strong></p>
<pre><code>DrawingSurface *surface = Room.GetDrawingSurfaceForBackground();
surface.UseHighResCoordinates = true;
surface.DrawingColor = 14;
surface.DrawLine(0, 0, 320, 200);
surface.Release();</code></pre>
<p>draws a yellow line from the top left of the screen to the middle of the screen. If we hadn&#8217;t set <em>UseHighResCoordinates to true, this would draw a line from the top left to the bottom right of the screen.</em></p>
<p><em>See Also: , , ,</em></p>
<h3 id="width-property-drawing-surface">Width property (drawing surface)</h3>
<pre><code>readonly int DrawingSurface.Width</code></pre>
<p>Gets the width of the surface.</p>
<pre><code>DrawingSurface *surface = Room.GetDrawingSurfaceForBackground();
Display(&quot;The background is %d x %d!&quot;, surface.Width, surface.Height);
surface.Release();</code></pre>
<p>displays the size of the surface to the player</p>
<p><em>See Also: ,</em></p>
<h2 id="dynamicsprite-functions-and-properties">DynamicSprite functions and properties</h2>
<h3 id="create-dynamic-sprite">Create (dynamic sprite)</h3>
<pre><code>static DynamicSprite* DynamicSprite.Create(int width, int height,
                                           optional bool hasAlphaChannel)</code></pre>
<p>Creates a new blank dynamic sprite of the specified size. It will initially be fully transparent, and can optionally have an alpha channel. This command is useful if you just want to create a new sprite and then use the DrawingSurface commands to draw onto it.</p>
<p>If the game colour depth is lower than 32-bit, then the <em>hasAlphaChannel parameter will be ignored.</em></p>
<p>Use the property of the DynamicSprite to interface with other commands and to use the new sprite in the game.</p>
<p><strong>IMPORTANT: This command loads an extra sprite into memory which is not controlled by the normal AGS sprite cache and will not be automatically disposed of. Therefore, when you are finished with the image you </strong>MUST call Delete on it to free its memory.****</p>
<p><strong>IMPORTANT: If the DynamicSprite instance is released from memory (ie. there is no longer a DynamicSprite* variable pointing to it), then the sprite will also be removed from memory. Make sure that you keep a global variable pointer to the sprite until you are finished with it, and at that point call Delete.</strong></p>
<pre><code>DynamicSprite* sprite = DynamicSprite.Create(50, 30);
DrawingSurface *surface = sprite.GetDrawingSurface();
surface.DrawingColor = 14;
surface.DrawPixel(25, 15);
surface.Release();
sprite.Delete();</code></pre>
<p>creates a 50x30 sprite, draws a white dot in the middle, then deletes the sprite.</p>
<p><em>See Also: , ,</em></p>
<h3 id="createfrombackground">CreateFromBackground</h3>
<pre><code>static DynamicSprite* DynamicSprite.CreateFromBackground
                      (optional int frame, optional int x, optional int y,
                       optional int width, optional int height)</code></pre>
<p>Creates a new dynamic sprite containing a copy of the specified room background.</p>
<p>The most basic use of this function is to supply no parameters, in which case the sprite will contain an exact copy of the current room background.</p>
<p>If you want, you can supply the <em>frame only, in which case you will get a complete copy of that background frame number from the current room.</em></p>
<p>Optionally, you can specify a portion of the background to grab. You must either supply all or none of the x, y, width and height parameters; if you do supply them, this allows you to just get a small portion of the background image into the new sprite. All co-ordinates are in 320x200-resolution room co-ordinates.</p>
<p>Use the property of the DynamicSprite to interface with other commands and to use the new sprite in the game.</p>
<p><strong>IMPORTANT: This command loads an extra sprite into memory which is not controlled by the normal AGS sprite cache and will not be automatically disposed of. Therefore, when you are finished with the image you </strong>MUST call Delete on it to free its memory.****</p>
<p><strong>IMPORTANT: If the DynamicSprite instance is released from memory (ie. there is no longer a DynamicSprite* variable pointing to it), then the sprite will also be removed from memory. Make sure that you keep a global variable pointer to the sprite until you are finished with it, and at that point call Delete.</strong></p>
<pre><code>DynamicSprite* sprite = DynamicSprite.CreateFromBackground(GetBackgroundFrame(), 130, 70, 60, 60);
DrawingSurface *surface = Room.GetDrawingSurfaceForBackground();
surface.DrawImage(0, 0, sprite.Graphic);
surface.Release();
sprite.Delete();</code></pre>
<p>creates a copy of the centre 60x60 area on the background, and draws it onto the top left corner of the background image.</p>
<p><em>See Also:</em></p>
<h3 id="createfromdrawingsurface">CreateFromDrawingSurface</h3>
<pre><code>static DynamicSprite* DynamicSprite.CreateFromDrawingSurface(
                        DrawingSurface* surface, int x, int y,
                        int width, int height)</code></pre>
<p>Creates a new dynamic sprite containing a copy of the specified portion of the drawing surface. This allows you to easily create new sprites from portions of other sprites.</p>
<p><strong>NOTE: The <em>x, </em>y, <em>width and </em>height parameters respect the DrawingSurface&#8217;s setting, so make sure that the type of co-ordinates that you are using match up with what the drawing surface expects.</strong>****</p>
<p>Use the property of the DynamicSprite to interface with other commands and to use the new sprite in the game.</p>
<p><strong>IMPORTANT: This command loads an extra sprite into memory which is not controlled by the normal AGS sprite cache and will not be automatically disposed of. Therefore, when you are finished with the image you </strong>MUST call Delete on it to free its memory.****</p>
<p><strong>IMPORTANT: If the DynamicSprite instance is released from memory (ie. there is no longer a DynamicSprite* variable pointing to it), then the sprite will also be removed from memory. Make sure that you keep a global variable pointer to the sprite until you are finished with it, and at that point call Delete.</strong></p>
<pre><code>DynamicSprite* sprite = DynamicSprite.CreateFromExistingSprite(object[0].Graphic);
DrawingSurface *surface = sprite.GetDrawingSurface();
DynamicSprite *newSprite = DynamicSprite.CreateFromDrawingSurface(surface, 0, 0, 10, 10);
surface.Release();
sprite.Delete();
object[0].Graphic = newSprite.Graphic;</code></pre>
<p>changes object 0&#8217;s image to be just the top-left corner of what it previously was.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.0.2 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="createfromexistingsprite">CreateFromExistingSprite</h3>
<pre><code>static DynamicSprite* DynamicSprite.CreateFromExistingSprite(
                        int slot, optional bool preserveAlphaChannel)</code></pre>
<p>Creates a new dynamic sprite containing a copy of the specified sprite <em>slot.</em></p>
<p>Returns the DynamicSprite instance representing the new sprite. This function is useful as it effectively allows you to apply transformations such as resizing to any sprite in the game.</p>
<p>Use the property of the DynamicSprite to interface with other commands and to use the new sprite in the game.</p>
<p><em>preserveAlphaChannel determines whether the sprite&#8217;s alpha channel will also be copied across. It is false by default for backwards compatibility reasons, and is useful because it allows you to strip the alpha channel in order to do whole image transparency. This parameter has no effect with sprites that do not have an alpha channel.</em></p>
<p><strong>IMPORTANT: This command loads an extra sprite into memory which is not controlled by the normal AGS sprite cache and will not be automatically disposed of. Therefore, when you are finished with the image you </strong>MUST call Delete on it to free its memory.****</p>
<p><strong>IMPORTANT: If the DynamicSprite instance is released from memory (ie. there is no longer a DynamicSprite* variable pointing to it), then the sprite will also be removed from memory. Make sure that you keep a global variable pointer to the sprite until you are finished with it, and at that point call Delete.</strong></p>
<pre><code>DynamicSprite* sprite = DynamicSprite.CreateFromExistingSprite(object[0].Graphic);
sprite.Resize(20, 20);
DrawingSurface *surface = Room.GetDrawingSurfaceForBackground();
surface.DrawImage(100, 80, sprite.Graphic);
surface.Release();
sprite.Delete();</code></pre>
<p>creates a copy of object 0&#8217;s current sprite, resizes it down to 20x20, and then draws the result onto the background.</p>
<p><em>See Also: ,</em></p>
<h3 id="createfromfile">CreateFromFile</h3>
<p><em>(Formerly known as LoadImageFile, which is now obsolete)</em></p>
<pre><code>static DynamicSprite* DynamicSprite.CreateFromFile(string filename)</code></pre>
<p>Loads an external image FILENAME into memory as a sprite.</p>
<p>Returns the DynamicSprite instance representing the sprite, or <em>null if the image could not be loaded (file not found or unsupported format).</em></p>
<p>Only BMP and PCX files can be loaded with this command.</p>
<p>Use the property of the DynamicSprite to interface with other commands and to use the new sprite in the game.</p>
<p><strong>IMPORTANT: This command loads an extra sprite into memory which is not controlled by the normal AGS sprite cache and will not be automatically disposed of. Therefore, when you are finished with the image you </strong>MUST call Delete on it to free its memory.****</p>
<p><strong>IMPORTANT: If the DynamicSprite instance is released from memory (ie. there is no longer a DynamicSprite* variable pointing to it), then the sprite will also be removed from memory. Make sure that you keep a global variable pointer to the sprite until you are finished with it, and at that point call Delete.</strong></p>
<pre><code>DynamicSprite* sprite = DynamicSprite.CreateFromFile(&quot;CustomAvatar.bmp&quot;);
if (sprite != null) {
  DrawingSurface *surface = Room.GetDrawingSurfaceForBackground();
  surface.DrawImage(100, 80, sprite.Graphic);
  surface.Release();
  sprite.Delete();
}</code></pre>
<p>will load the file &#8220;CustomAvatar.bmp&#8221; and if successful draw the image near the middle of the screen.</p>
<p>Once the image is finished with, Delete should be called on it.</p>
<p><em>See Also: ,</em></p>
<h3 id="createfromsavegame">CreateFromSaveGame</h3>
<p><em>(Formerly known as LoadSaveSlotScreenshot, which is now obsolete)</em></p>
<pre><code>static DynamicSprite* DynamicSprite.CreateFromSaveGame
                        (int saveSlot, int width, int height)</code></pre>
<p>Loads the screenshot for save game SAVESLOT into memory, resizing it to WIDTH x HEIGHT.</p>
<p>Returns the DynamicSprite instance of the image if successful, or returns <em>null if the screenshot could not be loaded (perhaps the save game didn&#8217;t include one).</em></p>
<p>In order for this to work, the &#8220;Save screenshots in save games&#8221; option must be ticked in the main Game Settings pane.</p>
<p><strong>IMPORTANT: This command loads an extra sprite into memory which is not controlled by the normal AGS sprite cache and will not be automatically disposed of. Therefore, when you are finished with the image you </strong>MUST call Delete on it to free its memory.****</p>
<p><strong>IMPORTANT: If the DynamicSprite instance is released from memory (ie. there is no longer a DynamicSprite* variable pointing to it), then the sprite will also be removed from memory. Make sure that you keep a global variable pointer to the sprite until you are finished with it, and at that point call Delete.</strong></p>
<pre><code>// at top of script, outside event functions
DynamicSprite *buttonSprite;

// inside an event function
buttonSprite = DynamicSprite.CreateFromSaveGame(1, 50, 50);
if (buttonSprite != null) {
  btnScrnshot.NormalGraphic = buttonSprite.Graphic;
}</code></pre>
<p>will load the screenshot for save game 1 and resize it to 50x50. It then places it onto the btnScrnshot GUI button.</p>
<p>Once the GUI is disposed of, Delete should be called on the sprite.</p>
<p><em>See Also: , , ,</em></p>
<h3 id="createfromscreenshot">CreateFromScreenShot</h3>
<pre><code>static DynamicSprite* DynamicSprite.CreateFromScreenShot
                        (optional int width, optional int height)</code></pre>
<p>Creates a new DynamicSprite instance with a copy of the current screen in it, resized to WIDTH x HEIGHT. If you do not supply the width or height, then a full screen sized sprite will be created.</p>
<p>This command can be useful if you&#8217;re creating a save game screenshots GUI, in order to display the current game position as well as the saved slot positions.</p>
<p><strong>NOTE: This command can be slow when using the Direct3D graphics driver.</strong></p>
<p><strong>IMPORTANT: This command loads an extra sprite into memory which is not controlled by the normal AGS sprite cache and will not be automatically disposed of. Therefore, when you are finished with the image you </strong>MUST call Delete on it to free its memory.****</p>
<p><strong>IMPORTANT: If the DynamicSprite instance is released from memory (ie. there is no longer a DynamicSprite* variable pointing to it), then the sprite will also be removed from memory. Make sure that you keep a global variable pointer to the sprite until you are finished with it, and at that point call Delete.</strong></p>
<pre><code>// at top of script, outside event functions
DynamicSprite *buttonSprite;

// inside an event function
buttonSprite = DynamicSprite.CreateFromScreenShot(80, 50);
if (buttonSprite != null) {
  btnScrnshot.NormalGraphic = buttonSprite.Graphic;
}</code></pre>
<p>places a screen grab of the current game session onto btnScrnshot.</p>
<p>Once the GUI is disposed of, Delete should be called on the sprite.</p>
<p><em>See Also: , , ,</em></p>
<h3 id="changecanvassize">ChangeCanvasSize</h3>
<pre><code>DynamicSprite.ChangeCanvasSize(int width, int height, int x, int y);</code></pre>
<p>Changes the sprite size to <em>width x </em>height, placing the current image at offset (x, y) within the new canvas. Unlike the command, the current image is kept at its original size.**</p>
<p>This function allows you to enlarge the sprite background in order to draw more onto it than its current boundaries allow. It is effectively the opposite of . The additional surface area will be transparent.</p>
<p>The width and height are specified in 320x200-resolution units.</p>
<pre><code>DynamicSprite* sprite = DynamicSprite.CreateFromExistingSprite(10);
sprite.ChangeCanvasSize(sprite.Width + 10, sprite.Height, 5, 0);
DrawingSurface *surface = sprite.GetDrawingSurface();
surface.DrawingColor = 14;
surface.DrawLine(0, 0, 5, surface.Height);
surface.Release();
sprite.Delete();</code></pre>
<p>creates a dynamic sprite as a copy of sprite 10, enlarges it by 5 pixels to the left and right, and draws a line in the new area to the left.</p>
<p><em>See Also: , , ,</em></p>
<h3 id="copytransparencymask">CopyTransparencyMask</h3>
<pre><code>DynamicSprite.CopyTransparencyMask(int fromSpriteSlot)</code></pre>
<p>Copies the transparency mask from the specified sprite slot onto the dynamic sprite. The dynamic sprite&#8217;s transparency and/or alpha channel will be replaced with the one from the other sprite.</p>
<p>This command is designed for special effects. It is fairly slow since it involves inspecting each pixel of the image, so it&#8217;s not recommended that you use it often.</p>
<p>The source sprite must be the same size and colour depth as the dynamic sprite.</p>
<p><strong>NOTE: This command makes all pixels that are transparent in the source sprite also transparent in the dynamic sprite. It does not make opaque pixels from the source sprite into opaque pixels on the dynamic sprite (because it wouldn&#8217;t know what colour to make them).</strong></p>
<p>If the source image has an alpha channel, then the dynamic sprite will have an alpha channel created as a copy of the one from the source sprite.</p>
<pre><code>DynamicSprite* sprite = DynamicSprite.CreateFromExistingSprite(10);
sprite.CopyTransparencyMask(11);
object[0].Graphic = sprite.Graphic;
Wait(80);
sprite.Delete();</code></pre>
<p>creates a dynamic sprite as a copy of sprite 10, changes its transparency mask to use that of sprite 11, and displays it on object 0.</p>
<p><em>See Also:</em></p>
<h3 id="crop-dynamic-sprite">Crop (dynamic sprite)</h3>
<pre><code>DynamicSprite.Crop(int x, int y, int width, int height);</code></pre>
<p>Crops the sprite down to <em>width x </em>height, starting from (x,y) in the image. The width and height are specified in 320x200-resolution units, as usual.**</p>
<p>This allows you to trim the edges off a sprite, and perform related tasks. Only the area with its top-left corner as (x,y) and of WIDTH x HEIGHT in size will remain.</p>
<pre><code>DynamicSprite* sprite = DynamicSprite.CreateFromFile(&quot;CustomAvatar.bmp&quot;);
sprite.Crop(10, 10, sprite.Width - 10, sprite.Height - 10);
DrawingSurface *surface = Room.GetDrawingSurfaceForBackground();
surface.DrawImage(100, 100, sprite.Graphic);
surface.Release();
sprite.Delete();</code></pre>
<p>will load the CustomAvatar.bmp image, cut off the left and top 10 pixels, and then draw it onto the room background at (100,100).</p>
<p><em>See Also: , , ,</em></p>
<h3 id="delete-dynamic-sprite">Delete (dynamic sprite)</h3>
<p><em>(Formerly known as DeleteSprite, which is now obsolete)</em></p>
<pre><code>DynamicSprite.Delete();</code></pre>
<p>Deletes the specified dynamic sprite from memory. Use this when you are no longer displaying the sprite and it can be safely disposed of.</p>
<p>You do not normally need to delete sprites, since the AGS Sprite Cache manages loading and deleting sprites automatically.</p>
<p>However, when an extra sprite has been loaded into the game (for example, with the CreateFromFile or CreateFromScreenShot commands) then AGS does not delete it automatically, and you must call this command instead.</p>
<pre><code>DynamicSprite* sprite = DynamicSprite.CreateFromFile(&quot;CustomAvatar.bmp&quot;);
object[1].Graphic = sprite.Graphic;
Wait(200);
object[1].Graphic = 22;
sprite.Delete();</code></pre>
<p>will load the file &#8220;CustomAvatar.bmp&#8221;, change Object 1 to display this graphic, wait 5 seconds, then change object 1 back to its old sprite 22 and free the new image.</p>
<p><em>See Also: ,</em></p>
<h3 id="flip-dynamic-sprite">Flip (dynamic sprite)</h3>
<pre><code>DynamicSprite.Flip(eFlipDirection);</code></pre>
<p>Flips the dynamic sprite according to the parameter:</p>
<p><em>eFlipLeftToRight flips the image from left to right ILBRK </em>eFlipUpsideDown flips the image from top to bottom ILBRK <em>eFlipBoth flips the image from top to bottom and left to right</em>**</p>
<pre><code>DynamicSprite* sprite = DynamicSprite.CreateFromFile(&quot;CustomAvatar.bmp&quot;);
sprite.Flip(eFlipUpsideDown);
DrawingSurface *surface = Room.GetDrawingSurfaceForBackground();
surface.DrawImage(100, 100, sprite.Graphic);
surface.Release();
sprite.Delete();</code></pre>
<p>will load the CustomAvatar.bmp image, flip it upside down, and then draw it onto the room background at (100,100).</p>
<p><em>See Also: , ,</em></p>
<h3 id="getdrawingsurface-dynamic-sprite">GetDrawingSurface (dynamic sprite)</h3>
<pre><code>DrawingSurface* DynamicSprite.GetDrawingSurface();</code></pre>
<p>Gets the drawing surface for this dynamic sprite, which allows you to modify the sprite by drawing onto it in various ways.</p>
<p>After calling this method, use the various to modify the sprite, then call Release on the surface when you are finished.</p>
<pre><code>DynamicSprite *sprite = DynamicSprite.CreateFromExistingSprite(object[0].Graphic);
DrawingSurface *surface = sprite.GetDrawingSurface();
surface.DrawingColor = 13;
surface.DrawLine(0, 0, 20, 20);
surface.Release();
object[0].Graphic = sprite.Graphic;
Wait(40);
sprite.Delete();</code></pre>
<p>this creates a dynamic sprite as a copy of Object 0&#8217;s existing sprite, draws a pink diagonal line across it, sets this new sprite onto the object for 1 second and then removes it.</p>
<p><em>See Also: , ,</em></p>
<h3 id="resize-dynamic-sprite">Resize (dynamic sprite)</h3>
<pre><code>DynamicSprite.Resize(int width, int height);</code></pre>
<p>Resizes an existing dynamic sprite to WIDTH x HEIGHT pixels.</p>
<p>The width and height are specified in 320x200-resolution units, as usual.</p>
<p><strong>NOTE: Resizing is a relatively slow operation, so do not attempt to resize sprites every game loop; only do it when necessary.</strong></p>
<pre><code>DynamicSprite* sprite = DynamicSprite.CreateFromFile(&quot;CustomAvatar.bmp&quot;);
sprite.Resize(sprite.Width * 2, sprite.Height * 2);
DrawingSurface *surface = Room.GetDrawingSurfaceForBackground();
surface.DrawImage(100, 100, sprite.Graphic);
surface.Release();
sprite.Delete();</code></pre>
<p>will load the CustomAvatar.bmp image, stretch it to double its original size, and then draw it onto the room background at (100,100).</p>
<p><em>See Also: , , , , ,</em></p>
<h3 id="rotate-dynamic-sprite">Rotate (dynamic sprite)</h3>
<pre><code>DynamicSprite.Rotate(int angle, optional int width, optional int height)</code></pre>
<p>Rotates the dynamic sprite by the specified <em>angle. The angle is in degrees, and must lie between 1 and 359. The image will be rotated clockwise by the specified angle.</em></p>
<p>Optionally, you can specify the width and height of the rotated image. By default, AGS will automatically calculate the new size required to hold the rotated image, but you can override this by passing the parameters in.</p>
<p>Note that specifying a width/height does not stretch the image, it just allows you to set the image dimensions to crop the rotation.</p>
<p><strong>NOTE: Rotating is a relatively slow operation, so do not attempt to rotate sprites every game loop; only do it when necessary.</strong></p>
<pre><code>DynamicSprite* sprite = DynamicSprite.CreateFromFile(&quot;CustomAvatar.bmp&quot;);
sprite.Rotate(90);
DrawingSurface *surface = Room.GetDrawingSurfaceForBackground();
surface.DrawImage(100, 100, sprite.Graphic);
surface.Release();
sprite.Delete();</code></pre>
<p>will load the CustomAvatar.bmp image, rotate it 90 degrees clockwise, draw the result onto the screen, and then delete the image.</p>
<p><em>See Also: , , ,</em></p>
<h3 id="savetofile-dynamic-sprite">SaveToFile (dynamic sprite)</h3>
<pre><code>DynamicSprite.SaveToFile(string filename)</code></pre>
<p>Saves the dynamic sprite to the specified file.</p>
<p>The filename you supply must have a .PCX or .BMP extension; they are the only two file types that the engine supports.</p>
<p>Returns 1 if the sprite was saved successfully, or 0 if it failed.</p>
<pre><code>DynamicSprite* sprite = DynamicSprite.CreateFromFile(&quot;CustomAvatar.bmp&quot;);
sprite.Rotate(90);
sprite.SaveToFile(&quot;RotatedAvatar.bmp&quot;);
sprite.Delete();</code></pre>
<p>will load the CustomAvatar.bmp image, rotate it 90 degrees clockwise, then save the result back to the disk.</p>
<p><em>See Also: ,</em></p>
<h3 id="tint-dynamic-sprite">Tint (dynamic sprite)</h3>
<pre><code>DynamicSprite.Tint(int red, int green, int blue, int saturation, int luminance)</code></pre>
<p>Tints the dynamic sprite to (RED, GREEN, BLUE) with SATURATION percent saturation. For the meaning of all the parameters, see .</p>
<p>The tint set by this function is permanent for the dynamic sprite &#8211; after the tint has been set, it is not possible to remove it. If you call Tint again with different parameters, it will apply the new tint to the already tinted sprite from the first call.</p>
<p><strong>NOTE: This function only works with hi-colour sprites.</strong></p>
<pre><code>DynamicSprite* sprite = DynamicSprite.CreateFromExistingSprite(object[0].Graphic);
sprite.Tint(255, 0, 0, 100, 100);
DrawingSurface *surface = Room.GetDrawingSurfaceForBackground();
surface.DrawImage(100, 80, sprite.Graphic);
surface.Release();
sprite.Delete();</code></pre>
<p>creates a copy of object 0&#8217;s sprite, tints it red, and draws it onto the room background.</p>
<p><em>See Also: , , ,</em></p>
<h3 id="colordepth-property-dynamic-sprite">ColorDepth property (dynamic sprite)</h3>
<pre><code>readonly int DynamicSprite.ColorDepth;</code></pre>
<p>Gets the colour depth of this dynamic sprite. This can be 8, 16 or 32 and is not necessarily the same as the game colour depth (though this usually will be the case).</p>
<pre><code>DynamicSprite* sprite = DynamicSprite.CreateFromFile(&quot;CustomAvatar.bmp&quot;);
if (sprite != null) {
  Display(&quot;The image is %d x %d pixels, at %d-bit depth.&quot;, sprite.Width, sprite.Height, sprite.ColorDepth);
  sprite.Delete();
}</code></pre>
<p>displays the colour depth of the CustomAvatar.bmp image.</p>
<p><em>See Also: ,</em></p>
<h3 id="graphic-property-dynamic-sprite">Graphic property (dynamic sprite)</h3>
<pre><code>readonly int DynamicSprite.Graphic;</code></pre>
<p>Gets the sprite slot number in which this dynamic sprite is stored. This value can then be passed to other functions and properties, such as .</p>
<pre><code>DynamicSprite* ds = DynamicSprite.CreateFromScreenShot(50, 50);
DrawingSurface *surface = Room.GetDrawingSurfaceForBackground();
surface.DrawImage(100, 100, ds.Graphic);
surface.Release();
ds.Delete();</code></pre>
<p>takes a screen shot, and draws it onto the background scene at (100,100).</p>
<p><em>See Also: ,</em></p>
<h3 id="height-property-dynamic-sprite">Height property (dynamic sprite)</h3>
<pre><code>readonly int DynamicSprite.Height;</code></pre>
<p>Gets the height of this dynamic sprite. The height is always returned in 320x200-resolution units.</p>
<pre><code>DynamicSprite* sprite = DynamicSprite.CreateFromFile(&quot;CustomAvatar.bmp&quot;);
if (sprite != null) {
  Display(&quot;The image is %d x %d pixels.&quot;, sprite.Width, sprite.Height);
  sprite.Delete();
}</code></pre>
<p>displays the size of the CustomAvatar.bmp image.</p>
<p><em>See Also: ,</em></p>
<h3 id="width-property-dynamic-sprite">Width property (dynamic sprite)</h3>
<pre><code>readonly int DynamicSprite.Width;</code></pre>
<p>Gets the width of this dynamic sprite. The width is always returned in 320x200-resolution units.</p>
<pre><code>DynamicSprite* sprite = DynamicSprite.CreateFromFile(&quot;CustomAvatar.bmp&quot;);
if (sprite != null) {
  Display(&quot;The image is %d x %d pixels.&quot;, sprite.Width, sprite.Height);
  sprite.Delete();
}</code></pre>
<p>displays the size of the CustomAvatar.bmp image.</p>
<p><em>See Also: ,</em></p>
<h2 id="file-functions-and-properties">File functions and properties</h2>
<h3 id="open">Open</h3>
<p><em>(Formerly known as FileOpen, which is now obsolete)</em></p>
<pre><code>static File* File.Open(string filename, FileMode)</code></pre>
<p>Opens a disk file for reading or writing. These disk I/O functions are only intended for simple tasks like the way the QFG series export the character when you complete it.</p>
<p>MODE is either eFileRead, eFileWrite or eFileAppend, depending on whether you want to write to or read from the file. If you pass eFileWrite and a file called FILENAME already exists, it will be overwritten.</p>
<p>eFileAppend opens an existing file for writing and starts adding information at the end (ie. the existing contents are not deleted).</p>
<p>This function returns a File object, which you use to perform operations on the file. <em>null is returned if there was a problem (eg. file not existing when MODE is eFileRead).</em></p>
<p>When specifying file path you may use special location tags: ILBRK <code>$INSTALLDIR$</code>, which allows you to explicitly read files in the game installation directory. ILBRK <code>$SAVEGAMEDIR$</code>, which allows you to write/read files in the save game directory. ILBRK <code>$APPDATADIR$</code>, which allows you to write/read files to a folder on the system which is accessible by and shared by all users. The example of their use is below.</p>
<p><strong>IMPORTANT: For security reasons, if you open the file for writing, then you can ONLY work with files in either <code>$SAVEGAMEDIR$</code> or <code>$APPDATADIR$</code> locations. An attempt to write file in <code>$INSTALLDIR$</code> will result in failure, and <em>null is returned. An attempt to write file into relative path without specifying any location tag will make AGS to automatically remap such path into <code>$APPDATADIR$</code>. This is done for backwards-compatibility. On other hand, if you open file for writing using an absolute path, or relative path that points to location outside of game directory, it will automatically be rejected, and </em>null is returned.</strong>**</p>
<p><strong>NOTE: You </strong>MUST close the file with the Close function when you have finished using it. There are only a limited number of file handles, and forgetting to close the file can lead to problems later on.****</p>
<p><strong>NOTE: Open file pointers are not persisted across save games. That is, if you open a file, then save the game; then when you restore the game, the File will not be usable and you&#8217;ll have to open it again to continue any I/O. The safest practice is not to declare any global File variables.</strong></p>
<pre><code>File *output = File.Open(&quot;$SAVEGAMEDIR$/temp.tmp&quot;, eFileWrite);
if (output == null)
  Display(&quot;Error opening file.&quot;);
else {
  output.WriteString(&quot;test string&quot;);
  output.Close();
}</code></pre>
<p>will open the file temp.tmp in the save game folder for writing. An error message is displayed if the file could not be created. Otherwise, it will write the string &#8220;test string&#8221; to the file and close it.</p>
<p><em>See Also: , , ,</em></p>
<h3 id="close">Close</h3>
<p><em>(Formerly known as FileClose, which is now obsolete)</em></p>
<pre><code>File.Close()</code></pre>
<p>Closes the file, and commits all changes to disk. You <strong>must call this function when you have finished reading/writing the file.</strong></p>
<pre><code>File *output = File.Open(&quot;test.dat&quot;, eFileWrite);
output.WriteString(&quot;test string&quot;);
output.Close();</code></pre>
<p>will open the file test.dat, write the string &#8220;test string&#8221;, and close it.</p>
<p><em>See Also:</em></p>
<h3 id="delete-file">Delete (file)</h3>
<pre><code>static File.Delete(string filename)</code></pre>
<p>Deletes the specified file from the disk.</p>
<p>For security reasons this command only works with files in the <code>$SAVEGAMEDIR$</code> and <code>$APPDATADIR$</code> directories.</p>
<p><strong>NOTE: This is a static function, therefore you don&#8217;t need an open File pointer to use it. See the example below.</strong></p>
<pre><code>File.Delete(&quot;$APPDATADIR$/temp.tmp&quot;);</code></pre>
<p>will delete the file &#8220;temp.tmp&#8221; from the app data directory, if it exists.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.0.1 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="exists">Exists</h3>
<pre><code>static bool File.Exists(string filename)</code></pre>
<p>Checks if the specified file exists on the file system.</p>
<p>When specifying file path you may use special location tags: ILBRK <code>$INSTALLDIR$</code>, which allows you to explicitly read files in the game installation directory. ILBRK <code>$SAVEGAMEDIR$</code>, which allows you to access files in the save game directory. ILBRK <code>$APPDATADIR$</code>, which allows you to write/read files to a folder on the system which is accessible by and shared by all users.</p>
<p><strong>NOTE: This is a static function, therefore you don&#8217;t need an open File pointer to use it. See the example below.</strong></p>
<pre><code>if (!File.Exists(&quot;temp.tmp&quot;))
{
  File *output = File.Open(&quot;temp.tmp&quot;, eFileWrite);
  output.WriteString(&quot;some text&quot;);
  output.Close();
}</code></pre>
<p>will create the file &#8220;temp.tmp&#8221; if it doesn&#8217;t exist</p>
<p><em>Compatibility: Supported by <strong>AGS 3.0.1 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="readint">ReadInt</h3>
<p><em>(Formerly known as FileReadInt, which is now obsolete)</em></p>
<pre><code>File.ReadInt()</code></pre>
<p>Reads an integer from the file, and returns it to the script. Only integers written with File.WriteInt can be read back.</p>
<pre><code>int number;
File *input = File.Open(&quot;stats.dat&quot;, eFileRead);
number = input.ReadInt();
input.Close();</code></pre>
<p>will open the file stats.dat, read an integer into number and then close the file.</p>
<p><em>See Also: ,</em></p>
<h3 id="readrawchar">ReadRawChar</h3>
<p><em>(Formerly known as FileReadRawChar, which is now obsolete)</em></p>
<pre><code>File.ReadRawChar()</code></pre>
<p>Reads a raw character from the input file and returns it. This function allows you to read from files that weren&#8217;t created by your game, however it is recommended for expert users only.</p>
<pre><code>File *input = File.Open(&quot;stats.txt&quot;, eFileRead);
String buffer = String.Format(&quot;%c&quot;, input.ReadRawChar());
input.Close();</code></pre>
<p>will read a raw character from file stats.txt and writes it to the string &#8216;buffer&#8217;.</p>
<p><em>See Also: , ,</em></p>
<h3 id="readrawint">ReadRawInt</h3>
<p><em>(Formerly known as FileReadRawInt, which is now obsolete)</em></p>
<pre><code>File.ReadRawInt()</code></pre>
<p>Reads a raw 32-bit integer from the input file and returns it to the script. This allows you to read from files created by other programs - however, it should only be used by experts as no error-checking is performed.</p>
<pre><code>int number;
File *input = File.Open(&quot;stats.txt&quot;, eFileRead);
number = input.ReadRawInt();
input.Close();</code></pre>
<p>will read a raw integer from file stats.txt and put it into the integer number.</p>
<p><em>See Also: ,</em></p>
<h3 id="readrawlineback">ReadRawLineBack</h3>
<p><em>(Formerly known as File.ReadRawLine, which is now obsolete)</em></p>
<pre><code>String File.ReadRawLineBack()</code></pre>
<p>Reads a line of text back in from the file and returns it. This enables you to read in lines from text files and use them in your game.</p>
<p><strong>NOTE: this command can only read back plain text lines from text files. If you attempt to use it with binary files or files written with commands like WriteString, WriteInt, etc then the results are unpredictable.</strong></p>
<pre><code>File *input = File.Open(&quot;error.log&quot;, eFileRead);
if (input != null) {
  while (!input.EOF) {
    String line = input.ReadRawLineBack();
    Display(&quot;%s&quot;, line);
  }
  input.Close();
}</code></pre>
<p>will display the contents of the &#8216;error.log&#8217; file, if it exists</p>
<p><em>See Also:</em></p>
<h3 id="readstringback">ReadStringBack</h3>
<p><em>(Formerly known as FileRead, which is now obsolete) ILBRK </em>(Formerly known as File.ReadString, which is now obsolete)**</p>
<pre><code>String File.ReadStringBack()</code></pre>
<p>Reads a string back in from a file previously opened with File.Open, and returns it. You should only use this with files which you previously wrote out with File.WriteString. Do NOT use this function with any other files, even text files.</p>
<pre><code>File *input = File.Open(&quot;test.dat&quot;, eFileRead);
String buffer = input.ReadStringBack();
input.Close();</code></pre>
<p>will open the file test.dat (which you have previously written with File.WriteString) and read a string into the buffer. Then close the file.</p>
<p><em>See Also: ,</em></p>
<h3 id="seek-file">Seek (file)</h3>
<pre><code>int Seek(int offset, optional FileSeek origin);</code></pre>
<p>Moves read/write position by <em>offset bytes related to </em>origin. Returns new read/write position. This is usually used when you are reading file and want to skip over some data, or writing a file and want to move back and overwrite a piece of data in the previous section for some reason.**</p>
<p>The <em>origin is determined by one of the FileSeek types: eSeekBegin - counts </em>offset bytes starting from the file&#8217;s beginning; <em>offset must be positive. ILBRK eSeekCurrent - counts </em>offset bytes starting from the current position; <em>offset may be either positive or negative. ILBRK eSeekEnd - counts </em>offset bytes starting from the file&#8217;s end, going backwards; <em>offset must be positive.</em>******</p>
<p>If optional <em>origin parameter is not specified, eSeekCurrent type is used by default.</em></p>
<p><strong>IMPORTANT: Do not use Seek on files which you have written with safe data writing functions, such as WriteInt and WriteString. These functions add additional data for the purpose of protection against incorrect reading, and Seek ignores that protection. If you use Seek and then try to ReadIntBack, for example, most probably you will receive a reading error. Only use it on files that contain &#8220;raw&#8221; data, or when you know written format precisely.</strong></p>
<pre><code>File *input = File.Open(&quot;test.dat&quot;, eFileRead);
int first_value = input.ReadRawInt();
input.Seek(256);
int second_value = input.ReadRawInt();
input.Close();</code></pre>
<p>will open the file test.dat, read <code>first_value</code>, skip 256 bytes, read <code>second_value</code>, and close the file.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.4.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="writeint">WriteInt</h3>
<p><em>(Formerly known as FileWriteInt, which is now obsolete)</em></p>
<pre><code>File.WriteInt(int value)</code></pre>
<p>Writes VALUE to the file. This allows you to save the contents of variables to disk. The file must have been previously opened with File.Open, and you can read the value back later with File.ReadInt.</p>
<pre><code>int number = 6;
File *output = File.Open(&quot;stats.dat&quot;, eFileWrite);
output.WriteInt(number);
output.Close();</code></pre>
<p>will open the file stats.dat and write the integer number in it.</p>
<p><em>See Also: ,</em></p>
<h3 id="writerawchar">WriteRawChar</h3>
<p><em>(Formerly known as FileWriteRawChar, which is now obsolete)</em></p>
<pre><code>File.WriteRawChar(int value)</code></pre>
<p>Writes a single character to the specified file, in raw mode so that other applications can read it back. If you are just creating a file for your game to read back in, use File.WriteInt instead because it offers additional protection. Only use this function if you need other applications to be able to read the file in.</p>
<p>This command writes a single byte to the output file - therefore, VALUE can contain any value from 0 to 255.</p>
<pre><code>File *output = File.Open(&quot;output.txt&quot;, eFileWrite);
output.WriteRawChar(&#39;A&#39;);
output.WriteRawChar(&#39;B&#39;);
output.WriteRawChar(13);
output.Close();</code></pre>
<p>will write the text &#8220;AB&#8221;, followed by a carriage return character, to the file.</p>
<p><em>See Also: ,</em></p>
<h3 id="writerawline">WriteRawLine</h3>
<p><em>(Formerly known as FileWriteRawLine, which is now obsolete)</em></p>
<pre><code>File.WriteRawLine(string text)</code></pre>
<p>Writes a string of text to the file in plain text format. This enables you to read it back in Notepad or any text editor. This is useful for generating logs and such like.</p>
<p>The TEXT will be printed to the file, followed by the standard newline characters.</p>
<pre><code>File *output = File.Open(&quot;error.log&quot;, eFileAppend);
output.WriteRawLine(&quot;There was an error playing sound1.wav&quot;);
output.Close();</code></pre>
<p>will write an error line in the file error.log.</p>
<p><em>See Also: ,</em></p>
<h3 id="writestring">WriteString</h3>
<p><em>(Formerly known as FileWrite, which is now obsolete)</em></p>
<pre><code>File.WriteString(string text)</code></pre>
<p>Writes TEXT to the file, which must have been previously opened with File.Open for writing. The string is written using a custom format to the file, which can only be read back by using File.ReadStringBack.</p>
<pre><code>File *output = File.Open(&quot;temp.tmp&quot;, eFileWrite);
if (output == null) Display(&quot;Error opening file.&quot;);
else {
  output.WriteString(&quot;test string&quot;);
  output.Close();
}</code></pre>
<p>will open the file temp.tmp for writing. If it cannot create the file, it will display an error message. Otherwise, it will write the string &#8220;test string&#8221; and close it.</p>
<p><em>See Also: , ,</em></p>
<h3 id="eof-property">EOF property</h3>
<p><em>(Formerly known as FileIsEOF, which is now obsolete)</em></p>
<pre><code>readonly bool File.EOF</code></pre>
<p>Checks whether the specified file has had all its data read. This is only useful with files opened for <strong>reading. It returns 1 if the entire contents of the file has now been read, or 0 if not.</strong></p>
<pre><code>File *output = File.Open(&quot;test.dat&quot;, eFileRead);
while (!output.EOF) {
  int temp = output.ReadRawChar();
  Display(&quot;%c&quot;, temp);
}
output.Close();</code></pre>
<p>will display every character in the file test.dat, one by one, to the screen.</p>
<p><em>See Also: , ,</em></p>
<h3 id="error-property">Error property</h3>
<p><em>(Formerly known as FileIsError, which is now obsolete)</em></p>
<pre><code>readonly bool File.Error</code></pre>
<p>Checks whether an error has occurred reading from or writing to the specified file.</p>
<p>An error can occur if, for example, you run out of disk space or the user removes the disk that is being read from.</p>
<p>This function only checks for errors while actually reading/writing data. The File.Open function will return null if there was an error actually opening or creating the file.</p>
<p>To find out whether all data has been read from a file, use instead.</p>
<pre><code>File *output = File.Open(&quot;test.dat&quot;, eFileWrite);
output.WriteInt(51);
if (output.Error) {
  Display(&quot;Error writing the data!&quot;);
}
output.Close();</code></pre>
<p>will write a number to the file &#8216;test.dat&#8217;, and display a message if there was a problem.</p>
<p><em>See Also: ,</em></p>
<h3 id="position-property-file">Position property (file)</h3>
<pre><code>readonly int File.Position</code></pre>
<p>Gets current File&#8217;s reading or writing position. This value means number of bytes between file&#8217;s beginning and current place you are reading from or writing to.</p>
<p>This may be useful, for example, if you are passing the file pointer to another script module function and want to know how much data that function has read or written.</p>
<pre><code>File *output = File.Open(&quot;test.dat&quot;, eFileWrite);
int old_pos = output.Position;
WriteCustomModuleData(output);
int new_pos = output.Position;
Display(&quot;Custom module has written %d bytes&quot;, new_pos - old_pos);
output.Close();</code></pre>
<p>will open file, pass the file pointer to some custom function, then display amount of data that function wrote.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.4.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h2 id="game-global-functions">Game / Global functions</h2>
<h3 id="abortgame">AbortGame</h3>
<pre><code>AbortGame(string message, ...)</code></pre>
<p>Aborts the game and returns to the operating system.</p>
<p>The standard AGS error dialog is displayed, with the script line numbers and call stack, along with <em>message (which can include <code>%d</code> and <code>%s</code> Display-style tokens).</em></p>
<p>You can use this function rather than QuitGame if you are writing some debugging checks into your script, to make sure that the user calls your functions in the correct way.</p>
<p>This command should ideally never be called in the final release of a game.</p>
<pre><code>function MakeWider(int newWidth) {
  if (newWidth &lt; 10)
    AbortGame(&quot;newWidth expects a width of at least 10!&quot;);
}</code></pre>
<p>will abort the game if MakeWider is called with a parameter less than 10.</p>
<p>SeeAlso:</p>
<h3 id="callroomscript">CallRoomScript</h3>
<pre><code>CallRoomScript (int value)</code></pre>
<p>Calls the <code>on_call</code> function in the current room script. This is useful for things like the text parser, where you want to check for general game sentences, and then ask the current room if the sentence was relevant to it.</p>
<p>The on_call function will be called in the current room script, with its <code>value</code> parameter having the value you pass here. This allows it to distinguish between different tasks, and saves you having to use a GlobalInt to tell it what to do.</p>
<p>If the current room has no on_call function, nothing will happen. No error will occur.</p>
<p>You write the on_call function into the room script (&#8220;Edit script&#8221; button on Room Settings pane), similar to the way you do dialog_request in the global script:</p>
<pre><code>function on_call (int value) {
  if (value == 1) {
    // Check text input
    if (Parser.Said(&quot;get apple&quot;))
      Display(&quot;No, leave the tree alone.&quot;);
  }
}</code></pre>
<p>The function doesn&#8217;t get called immediately; instead, the engine will run it in due course, probably during the next game loop, so you can&#8217;t use any values set by it immediately.</p>
<p>Once the on_call function has executed (or not if there isn&#8217;t one), the game.roomscript_finished variable will be set to 1, so you can check for that in your repeatedly_execute script if you need to do something afterwards.</p>
<p>SeeAlso:</p>
<h3 id="changetranslation">ChangeTranslation</h3>
<pre><code>static bool Game.ChangeTranslation(string newTranslationName)</code></pre>
<p>Changes the active translation to <em>newTranslationName. This must be the file name without the extension, for example &#8220;French&#8221; or &#8220;Spanish&#8221;. It can also be a blank string, in which case the current translation will be switched off and the game will revert to the default language.</em></p>
<p>Returns <em>true if the translation was changed successfully, or </em>false if there was a problem (for example, you specified an invalid translation).**</p>
<p><strong>NOTE: This is a static function, and thus need to be called with <code>Game.</code> in front of it. See the example below.</strong></p>
<pre><code>if (Game.ChangeTranslation(&quot;Spanish&quot;) == true)
{
  Display(&quot;Changed the translation to Spanish!&quot;);
}
else
{
  Display(&quot;Unable to change the translation&quot;);
}</code></pre>
<p>will attempt to change the translation to Spanish</p>
<p><em>Compatibility: Supported by <strong>AGS 3.1.0 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="claimevent">ClaimEvent</h3>
<pre><code>ClaimEvent()</code></pre>
<p>This command is used in a room script or script module&#8217;s <em>on_key_press or </em>on_mouse_click function, and it tells AGS not to run the global script afterwards.**</p>
<p>For example, if your room script responds to the player pressing the space bar, and you don&#8217;t want the global script&#8217;s on_key_press to handle it as well, then use this command.</p>
<p>This is useful if you have for example a mini-game in the room, and you want to use some keys for a different purpose to what they normally do.</p>
<p>The normal order in which scripts are called for <em>on_key_press and </em>on_mouse_click is as follows:**</p>
<ul>
<li><p>room script</p></li>
<li><p>script modules, in order</p></li>
<li><p>global script</p></li>
</ul>
<p>If any of these scripts calls ClaimEvent, then the chain is aborted at that point.</p>
<pre><code>if (keycode == &#39; &#39;) {
  Display(&quot;You pressed space in this room!&quot;);
  ClaimEvent();
}</code></pre>
<p>prevents the global script on_key_press from running if the player pressed the space bar.</p>
<p>SeeAlso:</p>
<h3 id="debug">Debug</h3>
<pre><code>Debug (int command, int data)</code></pre>
<p>This function provides all the debug services in the system. It performs various different tasks, depending on the value of the COMMAND parameter. If debug mode is off, then this function does nothing. This allows you to leave your script unaltered when you distribute your game, so you just have to turn off debug mode in the AGS Editor.</p>
<p>The DATA parameter depends on the command - pass 0 if it is not used. All the valid values for the COMMAND parameter are listed below along with what they do:</p>
<pre><code>0   All inventory - gives the current player character one of every
    inventory item. This is useful for testing so that you don&#39;t have to
    go and pick up items every time you test part of the game where they
    are required.
1   Display interpreter version - the engine will display its version
    number and build date.
2   Walkable from here - fills in the parts of the screen where the player
    can walk from their current location. This is useful if you think the
    path-finder is not working properly. All walkable areas are drawn in
    their respective colours, but with blocking areas at characters feet
    removed.
3   Teleport - displays a dialog box asking for what room you want to go
    to, and then calls ChangeRoom to teleport you there. Useful for skipping
    parts of the game or going to a specific point to test something.
4   Show FPS - toggles whether the current frames per second is displayed
    on the screen. Pass DATA as 1 to turn this on, 0 to turn it off.</code></pre>
<p><em>See Also: ,</em></p>
<h3 id="deletesaveslot">DeleteSaveSlot</h3>
<pre><code>DeleteSaveSlot (int slot)</code></pre>
<p>Deletes the save game in save slot number SLOT.</p>
<p>NOTE: if you specify one of the standard slots (1-50), then AGS will rearrange the other save games to make sure there is a sequence of slots from 1 upwards. Therefore, you will need to refresh any save game lists you have after calling this function.</p>
<pre><code>DeleteSaveSlot (130);</code></pre>
<p>deletes save game slot 130 (which we should have saved earlier).</p>
<p><em>See Also: ,</em></p>
<h3 id="disableinterface">DisableInterface</h3>
<pre><code>DisableInterface ()</code></pre>
<p>Disables the player interface. This works the same way as it is disabled while an animation is running: the mouse cursor is changed to the Wait cursor, and mouse clicks will not be sent through to the &#8220;on_mouse_click&#8221; function. Also, all interface buttons will be disabled.</p>
<p><strong>NOTE: AGS keeps a count of the number of times DisableInterface is called. Every call to DisableInterface must be matched by a later call to EnableInterface, otherwise the interface will get permanently disabled.</strong></p>
<pre><code>DisableInterface();</code></pre>
<p>will disable the user&#8217;s interface.</p>
<p><em>See Also: ,</em></p>
<h3 id="doonceonly">DoOnceOnly</h3>
<pre><code>static bool Game.DoOnceOnly(const string token)</code></pre>
<p>This function gives you an easy way of making some code run only the first time that the player encounters it. It is commonly used for awarding points.</p>
<p>The <em>token parameter is an arbitrary string. You can pass whatever you like in for this, but <strong>IT MUST BE UNIQUE. It is this string that allows AGS to determine whether this section of code has been run before, therefore you should make sure that </strong>you do not use the same token string in two different places in your game.</em>****</p>
<p>Returns <em>true the first time that it is called with this token, and </em>false thereafter.**</p>
<p><strong>NOTE: This is a static function, and thus need to be called with <code>Game.</code> in front of it. See the example below.</strong></p>
<pre><code>if (Game.DoOnceOnly(&quot;open cupboard&quot;)) {
  GiveScore(5);
}</code></pre>
<p>will give the player 5 points the first time this script is run.</p>
<p><em>See Also:</em></p>
<h3 id="enableinterface">EnableInterface</h3>
<pre><code>EnableInterface ()</code></pre>
<p>Re-enables the player interface, which was previously disabled with the DisableInterface function. Everything which was disabled is returned to normal.</p>
<pre><code>EnableInterface();</code></pre>
<p>will enable the user&#8217;s interface.</p>
<p><em>See Also: ,</em></p>
<h3 id="endcutscene">EndCutscene</h3>
<pre><code>EndCutscene()</code></pre>
<p>Marks the end of a cutscene. If the player skips the cutscene, the game will fast-forward to this point. This function returns 0 if the player watched the cutscene, or 1 if they skipped it.</p>
<p><em>See Also: , ,</em></p>
<h3 id="getcolorfromrgb">GetColorFromRGB</h3>
<p><em>(Formerly known as RawSetColorRGB, which is now obsolete)</em></p>
<pre><code>static int Game.GetColorFromRGB(int red, int green, int blue)</code></pre>
<p>Gets the AGS Colour Number for the specified RGB colour. The red, green and blue components are values from 0 to 255. This function gives you a run-time equivalent to the Colour Finder in the editor.</p>
<p>This command is slow in 256-colour games, since the palette has to be scanned to find the nearest matching colour.</p>
<p><strong>NOTE: This is a static function, and thus need to be called with <code>Game.</code> in front of it. See the example below.</strong></p>
<pre><code>DrawingSurface *surface = Room.GetDrawingSurfaceForBackground();
surface.DrawingColor = Game.GetColorFromRGB(0, 255, 0);
surface.DrawLine(0, 0, 50, 50);
surface.Release();</code></pre>
<p>will draw a bright green line onto the room background</p>
<p><em>See Also:</em></p>
<h3 id="getframecountforloop">GetFrameCountForLoop</h3>
<p><em>(Formerly part of GetGameParameter, which is now obsolete)</em></p>
<pre><code>static int Game.GetFrameCountForLoop(int view, int loop)</code></pre>
<p>Returns the number of frames in the specified loop of the specified view.</p>
<p><strong>NOTE: This is a static function, and thus need to be called with <code>Game.</code> in front of it. See the example for more.</strong></p>
<pre><code>int frameCount = Game.GetFrameCountForLoop(SWIMMING, 2);
Display(&quot;Loop 2 in SWIMMING view has %d frames.&quot;, frameCount);</code></pre>
<p><em>See Also: , ,</em></p>
<h3 id="getgameoption">GetGameOption</h3>
<pre><code>GetGameOption (option)</code></pre>
<p>Gets the current setting of one of the game options, originally set in the AGS Editor Game Settings pane.</p>
<p>OPTION specifies which option to get, and its current value is returned.</p>
<p>The valid values for OPTION are listed in .</p>
<pre><code>if (GetGameOption(OPT_PIXELPERFECT) == 1) {
  Display(&quot;pixel-perfect click deteciton is on!&quot;);
}</code></pre>
<p><em>See Also:</em></p>
<h3 id="getgameparameter">GetGameParameter</h3>
<p>The <em>GetGameParameter function is now obsolete.</em></p>
<p>It has been replaced with the following functions and properties:</p>
<p>(was GP_SPRITEWIDTH) ILBRK (was GP_SPRITEHEIGHT) ILBRK (was GP_NUMLOOPS) ILBRK (was GP_NUMFRAMES) ILBRK (was GP_ISRUNNEXTLOOP) ILBRK (was GP_FRAMExxx, GP_ISFRAMEFLIPPED) ILBRK (was GP_NUMGUIS) ILBRK (was GP_NUMOBJECTS) ILBRK (was GP_NUMCHARACTERS) ILBRK (was GP_NUMINVITEMS)</p>
<h3 id="getgamespeed">GetGameSpeed</h3>
<pre><code>GetGameSpeed ()</code></pre>
<p>Returns the current game speed (number of cycles per second).</p>
<pre><code>if (GetGameSpeed() &gt; 40) {
  SetGameSpeed(40);
}</code></pre>
<p>will always keep the game speed at 40 cycles per second (in case the user has raised it )</p>
<p><em>See Also:</em></p>
<h3 id="getglobalint">GetGlobalInt</h3>
<pre><code>GetGlobalInt (int index)</code></pre>
<p>Returns the value of global int INDEX.</p>
<p><strong>NOTE: GlobalInts are now considered obsolete. Consider using instead, which allow you to name the variables.</strong></p>
<pre><code>if (GetGlobalInt(20) == 1) {
  // code here
}</code></pre>
<p>will execute the code only if Global Integer 20 is 1.</p>
<p><em>See Also: ,</em></p>
<h3 id="getgraphicalvariable">GetGraphicalVariable</h3>
<pre><code>GetGraphicalVariable (string variable_name);</code></pre>
<p>Returns the value of the interaction editor VARIABLE_NAME variable. This allows your script to access the values of variables set in the interaction editor.</p>
<p><strong>NOTE: This command is obsolete, and is only provided for backwards compatibility with AGS 2.x. When writing new code, use instead.</strong></p>
<pre><code>if (GetGraphicalVariable(&quot;climbed rock&quot;)==1)
   { code here }</code></pre>
<p>will execute the code only if interaction variable &#8220;climbed rock&#8221; is 1.</p>
<p><em>See Also: ,</em></p>
<h3 id="getlocationname">GetLocationName</h3>
<p><em>(Formerly known as global function GetLocationName, which is now obsolete)</em></p>
<pre><code>static String Game.GetLocationName(int x, int y)</code></pre>
<p>Returns the name of whatever is on the screen at (X,Y). This allows you to create the Lucasarts-style status lines reading &#8220;Look at xxx&#8221; as the player moves the cursor over them.</p>
<p><strong>NOTE: Unlike Room.ProcessClick, this function actually works on what the player can see on the screen - therefore, if the co-ordinates are on a GUI, a blank string is returned.</strong></p>
<p><strong>NOTE: The co-ordinates are SCREEN co-ordinates, NOT ROOM co-ordinates. This means that with a scrolling room, the co-ordinates you pass are relative to the screen&#8217;s current position, and NOT absolute room co-ordinates. This means that this function is suitable for use with the mouse cursor position variables.</strong></p>
<pre><code>String location = Game.GetLocationName(mouse.x, mouse.y);</code></pre>
<p>will get the name of whatever the mouse is over into the string variable.</p>
<p><em>See Also: , , ,</em></p>
<h3 id="getlocationtype">GetLocationType</h3>
<pre><code>GetLocationType(int x, int y)</code></pre>
<p>Returns what type of thing is at location (X,Y); whether it is a character, object, hotspot or nothing at all. This may be useful if you want to process a mouse click differently depending on what the player clicks on.</p>
<p><strong>NOTE: The co-ordinates are screen co-ordinates, NOT room co-ordinates. See description of GetLocationName for more info.</strong></p>
<p>The value returned is one of the following:</p>
<pre><code>eLocationNothing    nothing, GUI or inventory
eLocationHotspot    a hotspot
eLocationCharacter  a character
eLocationObject     an object

if (GetLocationType(mouse.x,mouse.y) == eLocationCharacter)
    mouse.Mode = eModeTalk;</code></pre>
<p>will set the cursor mode to talk if the cursor is over a character.</p>
<p><em>See Also: , ,</em></p>
<h3 id="getloopcountforview">GetLoopCountForView</h3>
<p><em>(Formerly part of GetGameParameter, which is now obsolete)</em></p>
<pre><code>static int Game.GetLoopCountForView(int view)</code></pre>
<p>Returns the number of loops in the specified view.</p>
<p><strong>NOTE: This is a static function, and thus need to be called with <code>Game.</code> in front of it. See the example for more.</strong></p>
<pre><code>int loops = Game.GetLoopCountForView(SWIMMING);
Display(&quot;The SWIMMING view (view %d) has %d loops.&quot;, SWIMMING, loops);</code></pre>
<p><em>See Also: , ,</em></p>
<h3 id="getrunnextsettingforloop">GetRunNextSettingForLoop</h3>
<p><em>(Formerly part of GetGameParameter, which is now obsolete)</em></p>
<pre><code>static bool Game.GetRunNextSettingForLoop(int view, int loop)</code></pre>
<p>Returns whether the specified loop in the specified view has the &#8220;Run the next loop after this one&#8221; option checked.</p>
<p><strong>NOTE: This is a static function, and thus need to be called with <code>Game.</code> in front of it. See the example for more.</strong></p>
<pre><code>if (Game.GetRunNextSettingForLoop(SWIMMING, 5) == true) {
  Display(&quot;Loop 5 in view SWIMMING does have Run Next Loop set.&quot;);
}
else {
  Display(&quot;Loop 5 in view SWIMMING does not have Run Next Loop set.&quot;);
}</code></pre>
<p><em>See Also: , ,</em></p>
<h3 id="getsaveslotdescription">GetSaveSlotDescription</h3>
<p><em>(Formerly known as global function GetSaveSlotDescription, which is now obsolete)</em></p>
<pre><code>static String Game.GetSaveSlotDescription(int slot)</code></pre>
<p>Gets the text description of save game slot SLOT.</p>
<p>If the slot number provided does not exist, returns <em>null.</em></p>
<pre><code>String description = Game.GetSaveSlotDescription(10);</code></pre>
<p>will get the description of save slot 10 into the variable.</p>
<p><em>See Also: , ,</em></p>
<h3 id="gettextheight">GetTextHeight</h3>
<pre><code>GetTextHeight(string text, FontType font, int width)</code></pre>
<p>Calculates the height on the screen that drawing TEXT in FONT within an area of WIDTH would take up.</p>
<p>This allows you to work out how tall a message displayed with a command like will be. WIDTH is the width of the area in which the text will be displayed.</p>
<p>The height is returned in normal 320-resolution pixels, so it can be used with the screen display commands.</p>
<pre><code>int height = GetTextHeight(&quot;The message on the GUI!&quot;, Game.NormalFont, 100);
gBottomLine.SetPosition(0, 200 - height);</code></pre>
<p>will move the BOTTOMLINE GUI so that it can display the text within the screen.</p>
<p><em>See Also: ,</em></p>
<h3 id="gettextwidth">GetTextWidth</h3>
<pre><code>GetTextWidth(string text, FontType font)</code></pre>
<p>Returns the width on the screen that drawing TEXT in FONT on one line would take up.</p>
<p>This could be useful if you manually need to centre or right-align some text, for example with the raw drawing routines.</p>
<p>The width is returned in normal 320-resolution pixels, so it can be used with the screen display commands.</p>
<pre><code>DrawingSurface *surface = Room.GetDrawingSurfaceForBackground();
surface.DrawingColor = 14;
int width = GetTextWidth(&quot;Hello!&quot;, Game.NormalFont);
surface.DrawString(160 - (width / 2), 100, Game.NormalFont, &quot;Hello!&quot;);
surface.Release();</code></pre>
<p>will print &#8220;Hello!&#8221; onto the middle of the background scene.</p>
<p><em>See Also: ,</em></p>
<h3 id="gettranslation">GetTranslation</h3>
<pre><code>String GetTranslation(string original)</code></pre>
<p>Gets the translated equivalent of the supplied string. You do not normally need to use this since the game translates most things for you. However, if you have used an InputBox or other form of user input, and want to compare the user&#8217;s input to a particular string, it cannot be translated automatically. So, you can do this instead.</p>
<pre><code>String buffer = Game.InputBox(&quot;Enter the password:&quot;);
if (buffer.CompareTo(GetTranslation(&quot;secret&quot;)) == 0) {
  // it matched the current translation of &quot;secret&quot;
}</code></pre>
<p>If there is no translation for the supplied string, it will be returned unchanged, so it is always safe to use this function.</p>
<p><em>See Also:</em></p>
<h3 id="getviewframe">GetViewFrame</h3>
<p><em>(Formerly part of GetGameParameter, which is now obsolete)</em></p>
<pre><code>static ViewFrame* Game.GetViewFrame(int view, int loop, int frame)</code></pre>
<p>Returns a <em>ViewFrame instance for the specified frame in the specified loop of the specified view.</em></p>
<p>This instance allows you to query properties of the frame itself, such as its graphic, its frame-linked sound setting, and so forth.</p>
<p><strong>NOTE: This is a static function, and thus need to be called with <code>Game.</code> in front of it. See the example for more.</strong></p>
<pre><code>ViewFrame *frame = Game.GetViewFrame(SWIMMING, 2, 3);
Display(&quot;Frame 3 in loop 2 of view SWIMMING has sprite slot %d.&quot;, frame.Graphic);</code></pre>
<p><em>See Also: , , , ,</em></p>
<h3 id="givescore">GiveScore</h3>
<pre><code>GiveScore (int score)</code></pre>
<p>Adds SCORE to the player&#8217;s score. This is preferable to directly modifying the variable since it will play the score sound, update any status lines and call the GOT_SCORE on_event function.</p>
<p>Note that SCORE can be negative, in which case the score sound is NOT played.</p>
<pre><code>GiveScore(5);</code></pre>
<p>will give 5 points to the player.</p>
<p><em>See Also:</em></p>
<h3 id="inputbox">InputBox</h3>
<p><em>(Formerly known as global function InputBox, which is now obsolete)</em></p>
<pre><code>static String Game.InputBox(string prompt)</code></pre>
<p>Pops up a window asking the user to type in a string, with PROMPT as the text in the window. Whatever they type in will be returned from this function.</p>
<p>This command displays a very basic input box, mainly useful for debugging purposes. Due to the size of the window, only small strings up to about 20 characters can be typed in.</p>
<p>The recommended way to obtain user input is to create your own GUI with a text box on it, which allows you full customization of the look of the window.</p>
<p><strong>TIP: If you add a &#8216;!&#8217; character to the start of the prompt, then a Cancel button will be available in the input box. If the player presses this Cancel button (or the ESC key), a blank string is returned.</strong></p>
<pre><code>String name = Game.InputBox(&quot;!What is your name?&quot;);</code></pre>
<p>will prompt the user for his name and store it in the string NAME. If the user presses Cancel, the NAME string will be blank.</p>
<p><em>See Also:</em></p>
<h3 id="inventoryscreen">InventoryScreen</h3>
<pre><code>InventoryScreen ()</code></pre>
<p>This command is obsolete.</p>
<p><strong>This command was used for displaying a default inventory window in previous versions of AGS, but is no longer supported.</strong></p>
<p>Instead of using this command, you should create your own Inventory GUI. The Default Game template comes with an example.</p>
<h3 id="isgamepaused">IsGamePaused</h3>
<pre><code>IsGamePaused ()</code></pre>
<p>Returns <em>true if the game is currently paused, or </em>false otherwise. The game is paused when either the icon bar interface has been popped up, or a &#8220;script-only&#8221; interface has been displayed with GUI.Visible=true. While the game is paused, no animations or other updates take place.**</p>
<pre><code>if (IsGamePaused()) UnPauseGame();</code></pre>
<p>will unpause the game if it&#8217;s paused.</p>
<p><em>See Also:</em></p>
<h3 id="isinterfaceenabled">IsInterfaceEnabled</h3>
<pre><code>IsInterfaceEnabled()</code></pre>
<p>Returns 1 if the player interface is currently enabled, 0 if it is disabled. The user interface is disabled while the cursor is set to the Wait cursor - ie. while the character is performing a blocking Walk, or other blocking action.</p>
<pre><code>if (IsInterfaceEnabled())
    DisableInterface();</code></pre>
<p>will disable the user interface if it&#8217;s enabled.</p>
<p><em>See Also: ,</em></p>
<h3 id="isinteractionavailable">IsInteractionAvailable</h3>
<pre><code>IsInteractionAvailable (int x, int y, int mode)</code></pre>
<p>Checks whether there is an interaction defined for clicking on the screen at (X,Y) in cursor mode MODE.</p>
<p>This function is very similar to Room.ProcessClick, except that rather than carry out any interactions it encounters, it simply returns 1 if something would have happened, or 0 if unhandled_event would have been run.</p>
<p>This is useful for enabling options on a verb-coin style GUI, for example.</p>
<pre><code>if (IsInteractionAvailable(mouse.x,mouse.y, eModeLookat) == 0)
  Display(&quot;looking here would not do anything.&quot;);</code></pre>
<p><em>See Also: , , , ,</em></p>
<h3 id="iskeypressed">IsKeyPressed</h3>
<pre><code>IsKeyPressed(eKeyCode)</code></pre>
<p>Tests whether the supplied key on the keyboard is currently pressed down or not. You could use this to move an object while the player holds an arrow key down, for instance.</p>
<p>KEYCODE is one of the , with some limitations: since it tests the raw state of the key, you CANNOT pass the Ctrl+(A-Z) or Alt+(A-Z) codes (since they are key combinations). You can, however, use some extra codes which are listed at the bottom of the section.</p>
<p>Returns 1 if the key is currently pressed, 0 if not.</p>
<p><strong>NOTE: The numeric keypad can have inconsistent keycodes between IsKeyPressed and on_key_press. With IsKeyPressed, the numeric keypad always uses keycodes in the 370-381 range. on_key_press, however, passes different values if Num Lock is on since the key presses are interpreted as the number key rather than the arrow key.</strong></p>
<pre><code>if (IsKeyPressed(eKeyUpArrow) == 1)
  cEgo.Walk(cEgo.x, cEgo.y+3);</code></pre>
<p>will move the character EGO upwards 3 pixels when the up arrow is pressed.</p>
<p><em>See Also:</em></p>
<h3 id="ispluginloaded">IsPluginLoaded</h3>
<pre><code>static bool Game.IsPluginLoaded(const string name)</code></pre>
<p>Checks whether the plugin of the given <em>name was present and loaded for the game.</em></p>
<p><strong>IMPORTANT: If the plugin exports its own script functions that you used in your game script, and not found when the game is launched, then the game won&#8217;t start up at all, exiting with error. IsPluginLoaded may therefore be useful to check for plugins that are not interacted with from game script, but just run on their own.</strong></p>
<pre><code>if (Game.IsPluginLoaded(&quot;my_plugin&quot;)) {
  Display(&quot;My plugin is found and running!&quot;);
}</code></pre>
<p>will display a message if plugin is present.</p>
<h3 id="istimerexpired">IsTimerExpired</h3>
<pre><code>bool IsTimerExpired(int timer_id)</code></pre>
<p>Checks whether the timer TIMER_ID has expired. If the timeout set with SetTimer has elapsed, returns <em>true. Otherwise, returns </em>false.**</p>
<p>Note that this function will only return <em>true once - after that, the timer is placed into an OFF state where it will always return </em>false until restarted.**</p>
<pre><code>if (IsTimerExpired(1)) {
  Display(&quot;Timer 1 expired&quot;);
}</code></pre>
<p>will display a message when timer 1 expires.</p>
<p><em>See Also:</em></p>
<h3 id="istranslationavailable">IsTranslationAvailable</h3>
<pre><code>IsTranslationAvailable ()</code></pre>
<p>Finds out whether the player is using a game translation or not.</p>
<p>Returns 1 if a translation is in use, 0 if not.</p>
<p><em>See Also: , ,</em></p>
<h3 id="movecharactertohotspot">MoveCharacterToHotspot</h3>
<p><strong>This function is now obsolete. Use Character.Walk instead</strong></p>
<pre><code>MoveCharacterToHotspot (CHARID, int hotspot)</code></pre>
<p>Moves the character CHARID from its current location to the walk-to point for the specified hotspot. If the hotspot has no walk-to point, nothing happens.</p>
<p>This is a blocking call - control is not returned to the script until the character has reached its destination.</p>
<pre><code>MoveCharacterToHotspot(EGO,6);</code></pre>
<p>will move the character EGO to the hotspot&#8217;s 6 &#8220;walk to point&#8221;.</p>
<p><em>See Also: , , ,</em></p>
<h3 id="movecharactertoobject">MoveCharacterToObject</h3>
<p><strong>This function is now obsolete. Use Character.Walk instead</strong></p>
<pre><code>MoveCharacterToObject (CHARID, int object)</code></pre>
<p>Moves the character CHARID from its current location to a position just below the object OBJECT. This is useful for example, if you want the man to pick up an object. This is a blocking call - control is not returned to the script until the character has reached its destination.</p>
<pre><code>MoveCharacterToObject (EGO, 0);
object[0].Visible = false;</code></pre>
<p>Will move the character EGO below object number 0, then turn off object 0.</p>
<p><em>See Also: ,</em></p>
<h3 id="pausegame">PauseGame</h3>
<pre><code>PauseGame ()</code></pre>
<p>Stops AGS processing character movement and animations. This has the same effect on the game as happens when a modal GUI is popped up. Game processing will not resume until you call the UnPauseGame function.</p>
<p><strong>NOTE: When the game is paused, game cycles will continue to run but no animations or movement will be performed, and timers will not count down. Apart from that, your scripts will continue to run as normal.</strong></p>
<p><strong>NOTE: GUI button animations will not be paused by this command, so that you can run animations on a pop-up GUI while the rest of the game is paused.</strong></p>
<pre><code>if (IsKeyPressed(32)==1) PauseGame();</code></pre>
<p>will pause the game if the player presses the space bar</p>
<p><em>See Also:</em></p>
<h3 id="quitgame">QuitGame</h3>
<pre><code>QuitGame(int ask_first)</code></pre>
<p>Exits the game and returns to the operating system.</p>
<p>If ASK_FIRST is zero, it will exit immediately. If ASK_FIRST is not zero, it will first display a message box asking the user if they are sure they want to quit.</p>
<pre><code>QuitGame(0);</code></pre>
<p>will quit the game without asking the player to confirm.</p>
<p><em>See Also:</em></p>
<h3 id="random">Random</h3>
<pre><code>Random (int max)</code></pre>
<p>Returns a random number between 0 and MAX. This could be useful to do various effects in your game. MAX must be a positive value in range 0-32767.</p>
<p><strong>NOTE: Because of the way Random is implemented in AGS, the return value will never be higher than 32767.</strong></p>
<p><strong>NOTE: The range returned is inclusive - ie. if you do Random(3); then it can return 0, 1, 2 or 3.</strong></p>
<pre><code>int ran=Random(2);
if (ran==0) cEgo.ChangeRoom(1);
else if (ran==1) cEgo.ChangeRoom(2);
else cEgo.ChangeRoom(3);</code></pre>
<p>will change the current room to room 1,2 or 3 depending on a random result.</p>
<h3 id="restartgame">RestartGame</h3>
<pre><code>RestartGame ()</code></pre>
<p>Restarts the game from the beginning.</p>
<pre><code>if (IsKeyPressed(365) == 1) RestartGame();</code></pre>
<p>will restart the game if the player presses the F7 key.</p>
<p><em>SeeAlso:</em></p>
<h3 id="restoregamedialog">RestoreGameDialog</h3>
<pre><code>RestoreGameDialog ()</code></pre>
<p>Displays the restore game dialog, where the player can select a previously saved game position to restore.</p>
<p>The dialog is not displayed immediately; instead, it will be displayed when the script function finishes executing.</p>
<pre><code>if (IsKeyPressed(363) == 1) RestoreGameDialog();</code></pre>
<p>will bring up the restore game dialog if the player presses the F5 key.</p>
<p><em>See Also: ,</em></p>
<h3 id="restoregameslot">RestoreGameSlot</h3>
<pre><code>RestoreGameSlot (int slot)</code></pre>
<p>Restores the game position saved into slot number SLOT. You might want to use these specific slot functions if for example you only want to allow the player to have one save game position rather than the usual 20. If this slot number does not exist, an error message is displayed to the player but the game continues. To avoid the error, use the GetSaveSlotDescription function to see if the position exists before restoring it.</p>
<p><strong>NOTE: The game will not be restored immediately; instead, it will be restored when the script function finishes executing.</strong></p>
<pre><code>RestoreGameSlot(30);</code></pre>
<p>will restore game slot 30 if this slot number exists.</p>
<p><em>See Also: , ,</em></p>
<h3 id="runagsgame">RunAGSGame</h3>
<pre><code>RunAGSGame (string filename, int mode, int data)</code></pre>
<p>Quits the current game, and loads up FILENAME instead. FILENAME must be an AGS game EXE or AC2GAME.AGS file, and it must be in the current directory.</p>
<p>MODE specifies various options about how you want to run the game. Currently the supported values are:</p>
<pre><code>0   Current game is completely exited, new game runs as if it had been launched separately
1   GlobalInt values are preserved and are not set to 0 for the new game.</code></pre>
<p>DATA allows you to pass an integer through to the next game. The value you pass here will be accessible to the loaded game by it reading the game.previous_game_data variable.</p>
<p>The save game slots are shared between the two games, and if you load a save slot that was saved in the other game, it will automatically be loaded.</p>
<p>Bear in mind that because the games must be in the same folder, they will also share the audio.vox, speech.vox and so forth. This is a limitation of this command.</p>
<p><strong>NOTE: The game you run will be loaded at the same resolution and colour depth as the current game; if you mismatch colour depths some nasty results will occur.</strong></p>
<p><strong>NOTE: Make sure that the game you want to run has a filename of 8 characters or less, or this command will fail in the DOS engine.</strong></p>
<p><strong>NOTE: The game you want to launch must have been created with the same point-version of AGS as the one you are launching it from. (version 2.xy - the X must be the same version between the two games).</strong></p>
<pre><code>RunAGSGame (&quot;MyGame.exe&quot;, 0, 51);</code></pre>
<p>will run the MyGame game, passing it the value 51.</p>
<h3 id="savegamedialog">SaveGameDialog</h3>
<pre><code>SaveGameDialog ()</code></pre>
<p>Displays the save game dialog, where the player can save their current game position. If they select to save, then the game position will be saved.</p>
<p><strong>NOTE: The dialog will not be displayed immediately; instead, it will be shown when the script function finishes executing.</strong></p>
<pre><code>if (keycode == 361) SaveGameDialog();</code></pre>
<p>will bring up the save game dialog if the player presses the F3 key.</p>
<p><em>See Also: ,</em></p>
<h3 id="savegameslot">SaveGameSlot</h3>
<pre><code>SaveGameSlot (int slot, string description)</code></pre>
<p>Saves the current game position to the save game number specified by SLOT, using DESCRIPTION as the textual description of the save position. Be careful using this function, because you could overwrite one of the player&#8217;s save slots if you aren&#8217;t careful.</p>
<p>The SaveGameDialog function uses slots numbered from 1 to 20, so if you don&#8217;t want to interfere with the player&#8217;s saves, I would recommend saving to slot numbers of 100 and above.</p>
<p><strong>NOTE: The game will not be saved immediately; instead, it will be saved when the script function finishes executing.</strong></p>
<pre><code>SaveGameSlot(30, &quot;save game&quot;);</code></pre>
<p>will save the current game position to slot 30 with the description &#8220;Save game&#8221;.</p>
<p><em>See Also: , ,</em></p>
<h3 id="savescreenshot">SaveScreenShot</h3>
<pre><code>SaveScreenShot (string filename)</code></pre>
<p>Takes a screen capture and saves it to disk. The FILENAME must end in either &#8220;.BMP&#8221; or &#8220;.PCX&#8221;, as those are the types of files which can be saved. Returns 1 if the shot was successfully saved, or 0 if an invalid file extension was provided.</p>
<p><strong>NOTE: The screenshot will be saved to the Saved Games folder.</strong></p>
<p><strong>NOTE: This command can be slow when using the Direct3D graphics driver.</strong></p>
<pre><code>String input = Game.InputBox(&quot;Type the filename:&quot;);
input = input.Append(&quot;.pcx&quot;);
SaveScreenShot(input);</code></pre>
<p>will prompt the player for a filename and then save the screenshot with the filename the player typed.</p>
<p><em>See Also:</em></p>
<h3 id="setambientlightlevel">SetAmbientLightLevel</h3>
<pre><code>void SetAmbientTint(int light_level);</code></pre>
<p>Sets an ambient light level that affects all objects and characters in the room.</p>
<p>The light level is from <strong>-100 to 100, where 0 means that no adjustment will be applied to sprites.</strong></p>
<p>In 8-bit games you cannot use positive light level for brightening effect, but you may still use negative values to produce darkening effect.</p>
<p>To turn light level off, call this command again but pass the <em>light_level as 0.</em></p>
<p><strong>NOTE: This function overrides any specific region light levels or tints on the screen, but does NOT override individual character and object light levels.</strong></p>
<p><strong>NOTE: Setting an ambient light level will disable ambient RGB tint, if there one was previously set.</strong></p>
<pre><code>SetAmbientLightLevel(50);</code></pre>
<p>will apply light level 50 to every character and object on screen (which do not have individual light levels).</p>
<p><em>Compatibility: Supported by <strong>AGS 3.4.0 and later versions.</strong></em></p>
<p><em>See Also: , , ,</em></p>
<h3 id="setambienttint">SetAmbientTint</h3>
<pre><code>SetAmbientTint(int red, int green, int blue, int saturation, int luminance)</code></pre>
<p>Tints all objects and characters on the screen to (RED, GREEN, BLUE) with SATURATION percent saturation.</p>
<p>This allows you to apply a global tint to everything on the screen. The RED, GREEN and BLUE parameters are from 0-255, and specify the colour of the tint.</p>
<p>The SATURATION parameter defines how much the tint is applied, and is from 0-100. A saturation of 100 will completely re-colourize the sprites to the supplied colour, and a saturation of 1 will give them a very minor tint towards the specified colour.</p>
<p>The LUMINANCE parameter allows you to adjust the brightness of the sprites at the same time. It ranges from 0-100. Passing 100 will draw the sprites at normal brightness. Lower numbers will darken the images accordingly, right down to 0 which will draw everything black.</p>
<p>The tint applied by this function is global. To turn it off, call this command again but pass the saturation as 0.</p>
<p><strong>NOTE: This function only works in hi-colour games and with hi-colour sprites.</strong></p>
<p><strong>NOTE: This function overrides any specific region light levels or tints on the screen.</strong></p>
<pre><code>SetAmbientTint(0, 0, 250, 30, 100);</code></pre>
<p>will tint everything on the screen with a hint of blue.</p>
<p><em>See Also: , , ,</em></p>
<h3 id="setgameoption">SetGameOption</h3>
<pre><code>SetGameOption (option, int value)</code></pre>
<p>Changes one of the game options, originally set in the AGS Editor Game Settings pane.</p>
<p>OPTION specifies which option to change, and VALUE is its new value. Valid OPTIONs are listed below:</p>
<p>|l|l|</p>
<p>The game settings which are not listed here either have a separate command to change them (such as Speech.Style), or simply cannot be changed at run-time.</p>
<p>This command returns the old value of the setting.</p>
<pre><code>SetGameOption (OPT_PIXELPERFECT, 0);</code></pre>
<p>will disable pixel-perfect click detection.</p>
<p><em>See Also: , ,</em></p>
<h3 id="setgamespeed">SetGameSpeed</h3>
<pre><code>SetGameSpeed (int new_speed)</code></pre>
<p>Sets the maximum game frame rate to NEW_SPEED frames per second, or as near as possible to that speed. The default frame rate is 40 fps, but you can speed up or slow down the game by using this function. Note that this speed is also the rate at which the Repeatedly_Execute functions are triggered.</p>
<p>The NEW_SPEED must lie between 10 and 1000. If it does not, it will be rounded to 10 or 1000. Note that if you set a speed which the player&#8217;s computer cannot handle (for example, a 486 will not be able to manage 80 fps), then it will go as fast as possible.</p>
<p>NOTE: Because the mouse cursor is repainted at the game frame rate, at very low speeds, like 10 to 20 fps, the mouse will appear to be jumpy and not very responsive.</p>
<p>NOTE: If you set the property to <em>true, the game speed will be capped at the screen&#8217;s refresh rate, so you will be unable to set it higher than 60-85 (depending on the player&#8217;s screen refresh).</em></p>
<pre><code>SetGameSpeed(80);</code></pre>
<p>will set the game speed to 80.</p>
<p><em>See Also:</em></p>
<h3 id="setglobalint">SetGlobalInt</h3>
<pre><code>SetGlobalInt (int index, int value)</code></pre>
<p>Sets the global int INDEX to VALUE. You can then retrieve this value from any other script using GetGlobalInt.</p>
<p>There are 500 available global variables, from index 0 to 499.</p>
<p><strong>NOTE: GlobalInts are now considered obsolete. Consider using instead, which allow you to name the variables.</strong></p>
<pre><code>SetGlobalInt(10,1);</code></pre>
<p>will set the Global Integer 10 to 1.</p>
<p><em>See Also:</em></p>
<h3 id="setgraphicalvariable">SetGraphicalVariable</h3>
<pre><code>SetGraphicalVariable(string variable_name, int value);</code></pre>
<p>Sets the interaction editor VARIABLE_NAME variable to VALUE. This allows your script to change the values of variables set in the interaction editor.</p>
<p><strong>NOTE: This command is obsolete, and is only provided for backwards compatibility with AGS 2.x. When writing new code, use instead.</strong></p>
<pre><code>SetGraphicalVariable(&quot;climbed rock&quot;, 1);</code></pre>
<p>will set the interaction editor &#8220;climbed rock&#8221; variable to 1.</p>
<p><em>See Also:</em></p>
<h3 id="setmultitaskingmode">SetMultitaskingMode</h3>
<pre><code>SetMultitaskingMode (int mode)</code></pre>
<p>Allows you to set what happens when the user switches away from your game.</p>
<p>If MODE is 0 (the default), then if the user Alt+Tabs out of your game, or clicks on another window, the game will pause and not continue until they switch back into the game.</p>
<p>If MODE is 1, then the game will continue to run in the background if the user switches away (useful if, for example, you are just making some sort of jukebox music player with AGS).</p>
<p>Note that mode 1 does not work with some graphics cards in full-screen mode, so you should only rely on it working when your game is run in windowed mode.</p>
<p><strong>Cross-Platform Support</strong></p>
<p>Windows: ** Yes ILBRK MS-DOS: ** No ILBRK Linux: ** Yes ILBRK MacOS: ** Yes ********</p>
<pre><code>SetMultitaskingMode (1);</code></pre>
<p>will mean that the game continues to run in the background.</p>
<h3 id="setrestartpoint">SetRestartPoint</h3>
<pre><code>SetRestartPoint ()</code></pre>
<p>Changes the game restart point to the current position. This means that from now on, if the player chooses the Restart Game option, it will return here.</p>
<p>This function is useful if the default restart point doesn&#8217;t work properly in your game - just use this function to move it.</p>
<p><strong>NOTE: The restart point cannot be set while a script is running &#8211; therefore, when you call this it will actually set the restart point at the next game loop where there is not a blocking script running in the background.</strong></p>
<p><em>SeeAlso:</em></p>
<h3 id="setsavegamedirectory">SetSaveGameDirectory</h3>
<pre><code>static bool Game.SetSaveGameDirectory(string directory)</code></pre>
<p>Changes the directory where save game files are stored to the supplied <em>directory. If the directory does not exist, AGS will attempt to create it.</em></p>
<p>You cannot use fully qualified directories with this command (eg. <code>C:\Games\Cool\Saves</code>), because the player might have installed your game to any folder, and they might not be running Windows.</p>
<p>Therefore, only two types of path are supported: ILBRK 1. Relative paths (eg. &#8220;Saves&#8221;). This will create a subfolder inside <strong>default game save folder ILBRK 2. The special tag <code>$MYDOCS$</code> which allows you to explicitly create a different folder for your save games inside the user&#8217;s documents folder.</strong></p>
<p>The actual folder referenced with <code>$MYDOCS$</code> is different on every platform: Windows XP: &#8220;My Documents&#8221;ILBRK Windows Vista and later: &#8220;Saved Games&#8221;ILBRK Linux: <code>$XDG_DATA_HOME</code>/agsILBRK MacOS: game installation folder.</p>
<p>Returns <em>true if the save game directory has been changed successfully; </em>false if not.**</p>
<p><strong>NOTE: We advise you against using this function without strong need. In the most cases setting the &#8220;Save games folder name&#8221; property in the General Settings of the editor should be sufficient.</strong></p>
<pre><code>Game.SetSaveGameDirectory(&quot;$MYDOCS$/My Cool Game Saves&quot;);</code></pre>
<p>will change the save game directory to &#8220;My Cool Game Saves&#8221; in My Documents, and create the folder if it does not exist (might be useful to do this in game_start).</p>
<p><em>See Also: ,</em></p>
<h3 id="settextwindowgui">SetTextWindowGUI</h3>
<pre><code>SetTextWindowGUI (int gui)</code></pre>
<p>Changes the GUI used for text windows to the specified GUI. This overrides the &#8220;text windows use GUI&#8221; setting in the editor.</p>
<p>You can pass -1 as the GUI number to go back to using the default white text box.</p>
<pre><code>SetTextWindowGUI (4);</code></pre>
<p>will change Textwindow GUI 4 to be used for displaying text windows in future.</p>
<h3 id="settimer">SetTimer</h3>
<pre><code>SetTimer (int timer_id, int timeout)</code></pre>
<p>Starts timer TIMER_ID ticking - it will tick once every game loop (normally 40 times per second), until TIMEOUT loops, after which it will stop. You can check whether the timer has finished by calling the IsTimerExpired function.</p>
<p>Pass TIMEOUT as 0 to disable a currently running timer.</p>
<p>There are 20 available timers, with TIMER_IDs from 1 to 20.</p>
<p><strong>NOTE: the timer will not tick while the game is paused.</strong></p>
<pre><code>SetTimer(1,1000);</code></pre>
<p>will set the timer 1 to expire after 1000 game cycles.</p>
<p><em>See Also:</em></p>
<h3 id="skipuntilcharacterstops">SkipUntilCharacterStops</h3>
<pre><code>SkipUntilCharacterStops(CHARID)</code></pre>
<p>Skips through the game until the specified character stops walking, a blocking script runs, or a message box is displayed.</p>
<p>The purpose of this command is to mimic the functionality in games such as The Longest Journey, where the player can press ESC to instantly get the character to its destination. It serves as a handy feature to allow you to give the player character a relatively slow walking speed, without annoying the player by making them wait ages just to get from A to B.</p>
<p>If the specified character is not moving when this function is called, nothing happens.</p>
<pre><code>if (keycode == eKeyEscape) SkipUntilCharacterStops(EGO);</code></pre>
<p>This means that if the player presses ESC, the game will skip ahead until EGO finishes moving, or is interrupted by a Display command or a blocking cutscene.</p>
<p><em>See Also:</em></p>
<h3 id="startcutscene">StartCutscene</h3>
<pre><code>StartCutscene(CutsceneSkipType)</code></pre>
<p>Marks the start of a cutscene. Once your script passes this point, the player can choose to skip a portion by pressing a key or the mouse button. This is useful for things like introduction sequences, where you want the player to be able to skip over an intro that they&#8217;ve seen before.</p>
<p>The CutsceneSkipType determines how they can skip the cutscene:</p>
<pre><code>eSkipESCOnly
  by pressing ESC only
eSkipAnyKey
  by pressing any key
eSkipMouseClick
  by clicking a mouse button
eSkipAnyKeyOrMouseClick
  by pressing any key or clicking a mouse button
eSkipESCOrRightButton
  by pressing ESC or clicking the right mouse button</code></pre>
<p>You need to mark the end of the cutscene with the EndCutscene command.</p>
<p>Be <strong>very careful with where you place the corresponding EndCutscene command. The script </strong>must pass through EndCutscene in its normal run in order for the skipping to work - otherwise, when the player presses ESC the game could appear to hang.****</p>
<p><em>See Also: , , ,</em></p>
<h3 id="updateinventory">UpdateInventory</h3>
<pre><code>UpdateInventory ()</code></pre>
<p>Updates the on-screen inventory display. If you add or remove inventory items manually (ie. by using the InventoryQuantity array rather than the AddInventory/LoseInventory functions), the display may not get updated. In this case call this function after making your changes, to update what is displayed to the player.</p>
<p>Note that using this function will reset the order that items are displayed in the inventory window to the same order they were created in the editor.</p>
<p><em>See Also: , ,</em></p>
<h3 id="unpausegame">UnPauseGame</h3>
<pre><code>UnPauseGame ()</code></pre>
<p>Resumes the game.</p>
<pre><code>if (IsGamePaused() == 1)
    UnPauseGame();</code></pre>
<p>will unpause the game if it is paused.</p>
<p><em>See Also:</em></p>
<h3 id="wait">Wait</h3>
<pre><code>Wait (int time)</code></pre>
<p>Pauses the script and lets the game continue for TIME loops. There are normally 40 loops/second (unless you change it with SetGameSpeed), so using a value of 80 will wait 2 seconds. Note that no other scripts can run while the Wait function is in the background.</p>
<pre><code>cEgo.Walk(120, 140, eBlock, eWalkableAreas);
Wait(80);
cEgo.FaceLocation(1000,100);</code></pre>
<p>will move the character EGO to 120,140, wait until he gets there then wait for 2 seconds (80 game cycles) and then face right.</p>
<p><em>See Also: ,</em></p>
<h3 id="waitkey">WaitKey</h3>
<pre><code>WaitKey (int time)</code></pre>
<p>Pauses the script and lets the game continue until EITHER:</p>
<p>(a) TIME loops have elapsed, or</p>
<p>(b) the player presses a key</p>
<p>Returns 0 if the time elapsed, or 1 if the player interrupted it.</p>
<pre><code>WaitKey(200);</code></pre>
<p>will pause the script and wait until 5 seconds have passed or the player presses a key.</p>
<p><em>See Also: ,</em></p>
<h3 id="waitmousekey">WaitMouseKey</h3>
<pre><code>WaitMouseKey (int time)</code></pre>
<p>Pauses the script and lets the game continue until EITHER:</p>
<p>(a) TIME loops have elapsed, or</p>
<p>(b) the player presses a key, or</p>
<p>(c) the player clicks a mouse button</p>
<p>Returns 0 if the time elapsed, or 1 if the player interrupted it.</p>
<pre><code>WaitMouseKey(200);</code></pre>
<p>will pause the script and wait until 5 seconds have passed or the player presses a key or clicks the mouse.</p>
<p><em>See Also: ,</em></p>
<h3 id="audioclipcount-property">AudioClipCount property</h3>
<pre><code>readonly static int Game.AudioClipCount</code></pre>
<p>Returns the number of audio clips in the game.</p>
<p>This is useful for script modules if you need to iterate through all the audio clips for some reason.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.4.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="audioclips-property">AudioClips property</h3>
<pre><code>readonly static int Game.AudioClips[int slot]</code></pre>
<p>Returns the AudioClip* pointer by its index in game resources.</p>
<pre><code>int i = 0;
int music_count = 0;
while (i &lt; Game.AudioClipCount)
{
  if (Game.AudioClips[i].Type == eAudioTypeMusic)
    music_count++;
  i++;
}
Display(&quot;We have %d musical clips in our game&quot;, music_count);</code></pre>
<p><em>Compatibility: Supported by <strong>AGS 3.4.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="charactercount-property">CharacterCount property</h3>
<p><em>(Formerly part of GetGameParameter, which is now obsolete)</em></p>
<pre><code>readonly static int Game.CharacterCount</code></pre>
<p>Returns the number of characters in the game.</p>
<p>This is useful for script modules if you need to iterate through all the characters for some reason.</p>
<pre><code>Display(&quot;The game has %d characters.&quot;, Game.CharacterCount);</code></pre>
<h3 id="dialogcount-property">DialogCount property</h3>
<pre><code>readonly static int Game.DialogCount</code></pre>
<p>Returns the number of dialogs in the game.</p>
<p>This is useful for script modules if you need to iterate through all the dialogs for some reason. Valid dialogs are numbered from 0 to DialogCount - 1.</p>
<pre><code>Display(&quot;The game has %d dialogs.&quot;, Game.DialogCount);</code></pre>
<p><em>Compatibility: Supported by <strong>AGS 3.0.2 and later versions.</strong></em></p>
<h3 id="filename-property">FileName property</h3>
<pre><code>readonly static String Game.FileName</code></pre>
<p>Gets the filename that the game is running from. This will usually be the name of the EXE file, but could also be &#8220;ac2game.dat&#8221; if you are just running the game using ACWIN.EXE.</p>
<pre><code>Display(&quot;The main game file is: %s&quot;, Game.FileName);</code></pre>
<p>will display the game filename.</p>
<p><em>See Also:</em></p>
<h3 id="fontcount-property">FontCount property</h3>
<pre><code>readonly static int Game.FontCount</code></pre>
<p>Returns the number of fonts in the game.</p>
<p>This is useful for script modules if you need to iterate through all the fonts for some reason.</p>
<pre><code>Display(&quot;The game has %d fonts.&quot;, Game.FontCount);</code></pre>
<h3 id="globalmessages-property">GlobalMessages property</h3>
<p><em>(Formerly known as global function GetMessageText, which is now obsolete)</em></p>
<pre><code>readonly static String Game.GlobalMessages[int message]</code></pre>
<p>Gets the text of the specified global message. The message number is one of the global message numbers from 500 to 999.</p>
<p>If an invalid message number is supplied, <em>null will be returned. Otherwise, the message contents will be returned.</em></p>
<p><strong>NOTE: Global Messages were a feature of AGS 2.x and are now obsolete. You will not need to use this property in new games.</strong></p>
<pre><code>String message = Game.GlobalMessages[997];
Display(&quot;Global message 997 says: %s&quot;, message);</code></pre>
<p>will display global message 997.</p>
<h3 id="globalstrings-property">GlobalStrings property</h3>
<p><em>(Formerly known as GetGlobalString, which is now obsolete) ILBRK </em>(Formerly known as SetGlobalString, which is now obsolete)**</p>
<pre><code>static String Game.GlobalStrings[index]</code></pre>
<p>Gets/sets global string <em>index. Global strings provide you with an easy way to share string variables between scripts. There are 50 available global strings, with </em>index values from 0 to 49.**</p>
<pre><code>Game.GlobalStrings[15] = &quot;Joe&quot;;
Display(&quot;Global string 15 is now: %s&quot;, Game.GlobalStrings[15]);</code></pre>
<p>will set global string 15 to contain &#8220;Joe&#8221;.</p>
<p><em>See Also: ,</em></p>
<h3 id="guicount-property">GUICount property</h3>
<p><em>(Formerly part of GetGameParameter, which is now obsolete)</em></p>
<pre><code>readonly static int Game.GUICount</code></pre>
<p>Returns the number of GUIs in the game.</p>
<p>This is useful for script modules if you need to iterate through all the GUIs for some reason. Valid GUIs are numbered from 0 to GUICount minus 1.</p>
<pre><code>Display(&quot;The game has %d GUIs.&quot;, Game.GUICount);</code></pre>
<h3 id="ignoreuserinputaftertexttimeoutms-property">IgnoreUserInputAfterTextTimeoutMs property</h3>
<pre><code>static int Game.IgnoreUserInputAfterTextTimeoutMs;</code></pre>
<p>Gets/sets the length of time for which user input is ignored after some text is automatically removed from the screen.</p>
<p>When AGS is configured to automatically remove text after a certain time on the screen, sometimes the player might try to manually skip the text by pressing a key just as it is removed automatically, and thus they end up skipping the next text line by accident. This property is designed to eliminate this problem.</p>
<p>This property is specified in milliseconds (1000 = 1 second), and is set to 500 by default.</p>
<pre><code>Game.IgnoreUserInputAfterTextTimeoutMs = 1000;</code></pre>
<p>will tell AGS to ignore mouse clicks and key presses for 1 second after text is automatically removed from the screen.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.0 and later versions.</strong></em></p>
<p><em>See Also: , ,</em></p>
<h3 id="inskippablecutscene-property">InSkippableCutscene property</h3>
<p><em>(Formerly known as game.in_cutscene, which is now obsolete)</em></p>
<pre><code>static bool Game.InSkippableCutscene</code></pre>
<p>Returns whether the game is currently between a StartCutscene and EndCutscene, and therefore whether the player is able to skip over this part of the game.</p>
<p>When the player chooses to skip a cutscene all of the script code is run as usual, but any blocking commands are run through without the usual game cycle delays. Therefore, you should never normally need to use this property since cutscenes should all be handled automatically, but it could be useful for script modules.</p>
<p><strong>NOTE: This is a static function, and thus need to be called with <code>Game.</code> in front of it. See the example below.</strong></p>
<pre><code>if (Game.InSkippableCutscene)
{
  Display(&quot;The player might never see this message!&quot;);
}</code></pre>
<p>will display a message if we are within a cutscene</p>
<p><em>Compatibility: Supported by <strong>AGS 3.0.1 and later versions.</strong></em></p>
<p><em>See Also: , ,</em></p>
<h3 id="inventoryitemcount-property">InventoryItemCount property</h3>
<p><em>(Formerly part of GetGameParameter, which is now obsolete)</em></p>
<pre><code>readonly static int Game.InventoryItemCount</code></pre>
<p>Returns the number of inventory items in the game. This is the total number of items that you created in the Inventory Items pane of the editor, not how many the player is currently carrying.</p>
<pre><code>Display(&quot;The game has %d inventory items.&quot;, Game.InventoryItemCount);</code></pre>
<h3 id="minimumtextdisplaytimems-property">MinimumTextDisplayTimeMs property</h3>
<pre><code>static int Game.MinimumTextDisplayTimeMs;</code></pre>
<p>Gets/sets the minimum length of time that text is displayed on the screen. AGS automatically adjusts the length of time that text is displayed for depending on the length of the text (and you can customize this calculation with ), but for very short statements like &#8220;Hi!&#8221;, you might want the text to remain for longer.</p>
<p>This property is specified in milliseconds (1000 = 1 second), and is set to 1000 by default.</p>
<p><strong>NOTE: This property is ignored if lip-sync is enabled, or if the General Settings are set not to allow text to be automatically removed.</strong></p>
<pre><code>Game.MinimumTextDisplayTimeMs = 2000;</code></pre>
<p>will ensure that even the shortest &#8220;Hi!&#8221; text line will be displayed for at least 2 seconds</p>
<p><em>Compatibility: Supported by <strong>AGS 3.1.2 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="mousecursorcount-property">MouseCursorCount property</h3>
<pre><code>readonly static int Game.MouseCursorCount</code></pre>
<p>Returns the number of mouse cursors in the game.</p>
<p>This is useful for script modules if you need to iterate through all the cursors for some reason.</p>
<pre><code>Display(&quot;The game has %d cursors.&quot;, Game.MouseCursorCount);</code></pre>
<h3 id="name-property-game">Name property (game)</h3>
<pre><code>static String Game.Name</code></pre>
<p>Gets/sets the game&#8217;s name. This is initially set in the General Settings pane of the editor, but you can change it at run-time in order to change the window title of your game.</p>
<pre><code>Display(&quot;The game name is: %s&quot;, Game.Name);</code></pre>
<p>will display the game name.</p>
<p><em>See Also:</em></p>
<h3 id="normalfont-property">NormalFont property</h3>
<p><em>(Formerly known as global function SetNormalFont, which is now obsolete)</em></p>
<pre><code>static FontType Game.NormalFont</code></pre>
<p>Gets/sets the font used for all in-game text, except speech. The font number must be a valid number from the Fonts pane of the editor.</p>
<p>More specifically, AGS uses the Normal Font for the following:</p>
<ul>
<li><p>Display</p></li>
<li><p>DisplayTopBar</p></li>
<li><p>dialog options text</p></li>
<li><p>the built-in save and restore dialogs</p></li>
</ul>
<p>The Normal Font is font 0 by default.</p>
<pre><code>Game.NormalFont = eFontSpecial;</code></pre>
<p>will change the normal font to the font &#8220;Special&#8221;.</p>
<p><em>See Also:</em></p>
<h3 id="skippingcutscene-property">SkippingCutscene property</h3>
<p><em>(Formerly known as game.skipping_cutscene, which is now obsolete)</em></p>
<pre><code>static bool Game.SkippingCutscene</code></pre>
<p>Returns whether the player has elected to skip the current cutscene. This will return true if the game is between a StartCutscene and EndCutscene command, and the player has chosen to skip it.</p>
<p>Although cutscene skipping is handled automatically by AGS, you can use this property to optimise the process by bypassing any lengthy blocks of code that don&#8217;t need to be run if the cutscene is being skipped over.</p>
<p><strong>NOTE: This is a static function, and thus need to be called with <code>Game.</code> in front of it. See the example below.</strong></p>
<pre><code>if (!Game.SkippingCutscene)
{
  aScaryMusic.Play();
  Wait(100);
  Game.StopAudio();
}</code></pre>
<p>will only attempt to play the music if the player is not skipping the cutscene.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.0.1 and later versions.</strong></em></p>
<p><em>See Also: , ,</em></p>
<h3 id="speechfont-property">SpeechFont property</h3>
<p><em>(Formerly known as global function SetSpeechFont, which is now obsolete)</em></p>
<pre><code>static FontType Game.SpeechFont;</code></pre>
<p>Gets/sets the font used for character speech. The font number you supply must be a valid number from the Fonts pane of the editor.</p>
<p>The Speech Font is font 1 by default.</p>
<pre><code>Game.SpeechFont = eFontStandard;</code></pre>
<p>will change the speech font to &#8220;Standard&#8221;.</p>
<p><em>See Also:</em></p>
<h3 id="spriteheight-property">SpriteHeight property</h3>
<p><em>(Formerly part of GetGameParameter, which is now obsolete)</em></p>
<pre><code>readonly static int Game.SpriteHeight[int slot]</code></pre>
<p>Returns the height of the specified sprite.</p>
<p>The height will be returned in the usual 320x200-resolution co-ordinates. If an invalid sprite slot is supplied, 0 will be returned.</p>
<pre><code>Display(&quot;Object 0&#39;s sprite is sized %d x %d.&quot;, Game.SpriteWidth[object[0].Graphic],
                                               Game.SpriteHeight[object[0].Graphic]);</code></pre>
<p><em>See Also:</em></p>
<h3 id="spritewidth-property">SpriteWidth property</h3>
<p><em>(Formerly part of GetGameParameter, which is now obsolete)</em></p>
<pre><code>readonly static int Game.SpriteWidth[int slot]</code></pre>
<p>Returns the width of the specified sprite.</p>
<p>The width will be returned in the usual 320x200-resolution co-ordinates. If an invalid sprite slot is supplied, 0 will be returned.</p>
<pre><code>Display(&quot;Object 0&#39;s sprite is sized %d x %d.&quot;, Game.SpriteWidth[object[0].Graphic],
                                               Game.SpriteHeight[object[0].Graphic]);</code></pre>
<p><em>See Also:</em></p>
<h3 id="textreadingspeed-property">TextReadingSpeed property</h3>
<p><em>(Formerly known as game.text_speed, which is now obsolete)</em></p>
<pre><code>static int Game.TextReadingSpeed;</code></pre>
<p>Gets/sets the speed at which AGS assumes the player can read text, and therefore how long speech stays on the screen before it is automatically removed.</p>
<p>Specifically, the TextReadingSpeed is the number of characters of text that the player can read in a second. It is 15 by default. A higher number will therefore lead to the text being removed more quickly.</p>
<p>It is useful to link this setting to a GUI Slider on some sort of Control Panel GUI so that the player can adjust it depending on their reading speed.</p>
<p><strong>NOTE: This property is ignored if lip-sync is enabled, or if the General Settings are set not to allow text to be automatically removed.</strong></p>
<pre><code>Game.TextReadingSpeed = 7;</code></pre>
<p>sets the text reading speed to half the default, which will leave speech on-screen for twice as long as usual.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.1.2 and later versions.</strong></em></p>
<p><em>See Also: , ,</em></p>
<h3 id="translationfilename-property">TranslationFilename property</h3>
<p><em>(Formerly known as GetTranslationName, which is now obsolete)</em></p>
<pre><code>readonly static String Game.TranslationFilename;</code></pre>
<p>Gets the name of the current translation filename (without the &#8220;.tra&#8221; extension). This may be useful if you want to use a different graphic somewhere depending on which translation is being used.</p>
<p>If no translation is in use, a blank string is returned.</p>
<pre><code>if (Game.TranslationFilename == &quot;German&quot;) {
  Display(&quot;You are using the German translation.&quot;);
}</code></pre>
<p><em>See Also: ,</em></p>
<h3 id="usenativecoordinates-property">UseNativeCoordinates property</h3>
<pre><code>readonly static bool Game.UseNativeCoordinates</code></pre>
<p>Returns whether the game is using native co-ordinates. If native co-ordinates are in use, then all X, Y, Top, Bottom, Width and Height variables in the game will be expected to reflect the resolution of the game.</p>
<p>If this is <em>false, then the game is operating in backwards-compatible mode where all co-ordinates are low-res.</em></p>
<p>If the game resolution is 320x200 or 320x240, this setting has no effect.</p>
<p>This property is read-only; it is not possible to change this setting at run-time.</p>
<pre><code>if (Game.UseNativeCoordinates)
{
  Display(&quot;The player is at %d, %d -- REALLY!&quot;, player.x, player.y);
}
else
{
  Display(&quot;The player is at %d, %d in the old-school system&quot;, player.x, player.y);
}</code></pre>
<p><em>Compatibility: Supported by <strong>AGS 3.1.0 and later versions.</strong></em></p>
<h3 id="viewcount-property">ViewCount property</h3>
<p><em>(Formerly part of GetGameParameter, which is now obsolete)</em></p>
<pre><code>readonly static int Game.ViewCount</code></pre>
<p>Returns the number of views in the game.</p>
<p>This is useful for script modules if you need to iterate through all the views for some reason. Valid views are numbered from 1 to ViewCount.</p>
<pre><code>Display(&quot;The game has %d views.&quot;, Game.ViewCount);</code></pre>
<h2 id="gui-functions-and-properties">GUI functions and properties</h2>
<h3 id="centre">Centre</h3>
<p><em>(Formerly known as CentreGUI, which is now obsolete)</em></p>
<pre><code>GUI.Centre()</code></pre>
<p>Centres the specified GUI in the middle of the screen. Useful if you&#8217;ve been moving it around with SetPosition and just want to return it to the centre.</p>
<pre><code>gControlpanel.Centre();</code></pre>
<p>will centre the CONTROLPANEL GUI in the middle of the screen.</p>
<p><em>See Also:</em></p>
<h3 id="click-gui">Click (gui)</h3>
<pre><code>GUI.Click()</code></pre>
<p>Forces GUI&#8217;s OnClick event. If there is a script function bound to that event it will be run, otherwise nothing happens.</p>
<p><strong>NOTE: GUI.Click should not to be confused with </strong>static function GUI.ProcessClick. GUI.Click is called for specific GUI and does not impose any other conditions, while GUI.ProcessClick is called for &#8220;any GUI element that happen to be at the given coordinates&#8221;.****</p>
<pre><code>gMainMenu.Click();</code></pre>
<p>triggers OnClick event for gMainMenu.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.4.0 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="getatscreenxy-gui">GetAtScreenXY (GUI)</h3>
<p><em>(Formerly known as GetGUIAt, which is now obsolete)</em></p>
<pre><code>static GUI* GUI.GetAtScreenXY(int x, int y)</code></pre>
<p>Checks whether there is currently a GUI at screen co-ordinates (X,Y). If there is, returns its GUI. If two GUIs overlap, the frontmost one will be returned - this can be changed with the GUI.ZOrder property.</p>
<p>If there is not currently a displayed, clickable GUI at the location then <em>null is returned. If null is returned, do NOT attempt to call any methods or use any properties of the GUI (since it does not actually exist).</em></p>
<p><strong>NOTE: This command will not find any GUIs that are set as Non-Clickable (ie. the &#8220;Clickable&#8221; checkbox not checked).</strong></p>
<pre><code>GUI *theGui = GUI.GetAtScreenXY(mouse.x, mouse.y);
if (theGui == gInventory) {
  Display(&quot;Inventory GUI at mouse location.&quot;);
}
else if (theGui == null) {
  Display(&quot;No GUI at mouse location&quot;);
}
else {
  Display(&quot;GUI %d at mouse location.&quot;, theGui.ID);
}</code></pre>
<p>will display the number of the GUI that the mouse is over.</p>
<p><em>See Also: , ,</em></p>
<h3 id="processclick-gui">ProcessClick (GUI)</h3>
<pre><code>static void GUI.ProcessClick(int x, int y, CursorMode)</code></pre>
<p>Simulates clicking the mouse on the location (X,Y) on the screen, in the specified cursor mode. This &#8220;click&#8221; has special behavior in that it <strong>only affects GUI and GUI controls under given coordinates. Any conditions attached to the first interface elements on given coordinates will be executed. Other game elements (room objects, hotspots, characters) will be </strong>ignored.****</p>
<p>The available cursor modes are the ones you define on your Cursors tab (but with eMode prepended to them). Usually these are eModeWalkto, eModeLookat, etc.</p>
<pre><code>ProcessClick(100, 50, eModePointer);</code></pre>
<p>will simulate clicking the mouse on co-ordinates (100, 50) in the Pointer mode, which will ignore anything but interface.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.4.0 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="setposition-gui">SetPosition (GUI)</h3>
<p><em>(Formerly known as SetGUIPosition, which is now obsolete)</em></p>
<pre><code>GUI.SetPosition(int x, int y)</code></pre>
<p>Moves the top-left corner of GUI to the new location (X,Y) on the screen. This allows you to dynamically move GUIs around on the screen while the game is running. The co-ordinates are screen co-ordinates, not room co-ordinates, and use the same scale as in the editor.</p>
<pre><code>gVerbcoin.SetPosition(mouse.x, mouse.y);</code></pre>
<p>will move the VERBCOIN GUI to the position where the cursor is.</p>
<p><em>See Also: , , , , ,</em></p>
<h3 id="setsize-gui">SetSize (GUI)</h3>
<p><em>(Formerly known as SetGUISize, which is now obsolete)</em></p>
<pre><code>GUI.SetSize(int width, int height)</code></pre>
<p>Changes the GUI to have the new size WIDTH x HEIGHT</p>
<p>This could be useful for initially hiding an &#8216;Advanced&#8217; part of an options screen and such like.</p>
<p>The size is in the normal 320x200-resolution pixels. Setting the size to 320, 200 will cause the GUI to take up the entire screen.</p>
<pre><code>gIconbar.SetSize(160, 100);</code></pre>
<p>changes the ICONBAR GUI to be the size of half the screen</p>
<p><em>See Also: , , , ,</em></p>
<h3 id="backgroundgraphic-property-gui">BackgroundGraphic property (GUI)</h3>
<p><em>(Formerly known as SetGUIBackgroundPic, which is now obsolete)</em></p>
<pre><code>int GUI.BackgroundGraphic</code></pre>
<p>Gets/sets the background image of the GUI.</p>
<p>You can set this to 0 to remove the background image from the GUI.</p>
<p><em>See Also: ,</em></p>
<h3 id="clickable-property-gui">Clickable property (GUI)</h3>
<p><em>(Formerly known as SetGUIClickable, which is now obsolete)</em></p>
<pre><code>bool GUI.Clickable</code></pre>
<p>Gets/sets whether the GUI is clickable or not. This allows you to modify the &#8220;Clickable&#8221; checkbox from the GUI Editor.</p>
<p>If this is set to 1, then the GUI will respond to mouse clicks as normal.</p>
<p>If this is set to 0, then this GUI cannot be clicked on by the mouse. This might be useful for a transparent overlay GUI which displays information, and you want the player to be able to click on whatever is underneath.</p>
<pre><code>gStatusline.Clickable = false;</code></pre>
<p>sets the STATUSLINE GUI to no longer respond to mouse clicks.</p>
<p><em>See Also:</em></p>
<h3 id="controlcount-property">ControlCount property</h3>
<pre><code>readonly int GUI.ControlCount;</code></pre>
<p>Gets the number of controls on the GUI. You won&#8217;t normally need to use this property, but in some circumstances you may wish to iterate through all the GUI&#8217;s controls, and this allows you to determine where to stop.</p>
<pre><code>int i = 0;
while (i &lt; gInventory.ControlCount) {
  gInventory.Controls[i].Enabled = false;
  i++;
}</code></pre>
<p>disables all controls on the INVENTORY GUI.</p>
<p><em>See Also:</em></p>
<h3 id="controls-property-gui">Controls property (GUI)</h3>
<pre><code>GUIControl* GUI.Controls[index]</code></pre>
<p>Provides an array which allows you to access controls on the GUI by their index. You should not normally need to do this, since accessing the controls by their name is far easier; however, if you need to interoperate with legacy code that uses the control number, this can come in useful.</p>
<p>Returns the GUIControl object for the specified control index, or <em>null if you give an invalid control index.</em></p>
<p>You can cast the GUIControl to the appropriate type using the AsButton, AsListBox, etc methods on it.</p>
<pre><code>GUIControl *control = gInventory.Controls[4];
if (control == null) {
  Display(&quot;The inventory GUI doesn&#39;t have a control number 4.&quot;);
}
else {
  control.Enabled = true;
  control.AsListBox.AddItem(&quot;New item!!&quot;);
}</code></pre>
<p>gets list box number 4 from the INVENTORY GUI, and then adds an item to it. If control 4 isn&#8217;t a listbox, you will get a Null Reference error.</p>
<p><em>See Also: ,</em></p>
<h3 id="height-property-gui">Height property (GUI)</h3>
<pre><code>int GUI.Height</code></pre>
<p>Gets/sets the height of the GUI. This allows you to dynamically change the size of the GUI on the screen.</p>
<p>The height is specified in the normal 320-resolution style.</p>
<pre><code>Display(&quot;The icon bar GUI is %d pixels high.&quot;, gIconbar.Height);</code></pre>
<p>displays the height of the ICONBAR GUI.</p>
<p><em>See Also: ,</em></p>
<h3 id="id-property-gui">ID property (GUI)</h3>
<pre><code>readonly int GUI.ID</code></pre>
<p>Gets the GUI&#8217;s ID number. This is the GUI&#8217;s number from the editor, and is useful if you need to interoperate with legacy code that uses the GUI&#8217;s number rather than object name.</p>
<pre><code>SetGUIClickable(gIconbar.ID, 1);
gIconbar.Clickable = false;</code></pre>
<p>uses the obsolete SetGUIClickable function to make the ICONBAR GUI clickable, and then uses the equivalent modern property to stop it being clickable.</p>
<p><em>See Also:</em></p>
<h3 id="transparency-property-gui">Transparency property (GUI)</h3>
<p><em>(Formerly known as SetGUITransparency, which is now obsolete)</em></p>
<pre><code>int GUI.Transparency</code></pre>
<p>Gets/sets the GUI translucency, in percent.</p>
<p>Setting this to 100 means the GUI is totally invisible, and lower values represent varying levels of translucency. Set it to 0 to stop the GUI being translucent.</p>
<p><strong>NOTE: Transparency only works in 16-bit and 32-bit colour games.</strong></p>
<p><strong>NOTE: When using the DirectX 5 driver, a large transparent GUI can significantly slow down AGS.</strong></p>
<p>Some rounding is done internally when the transparency is stored &#8211; therefore, if you get the transparency after setting it, the value you get back might be one out. Therefore, using a loop with <code>gInventory.Transparency++;</code> is not recommended as it will probably end too quickly.</p>
<p>In order to fade a GUI in/out, the best approach is shown in the example below:</p>
<pre><code>int trans = gInventory.Transparency;
while (trans &lt; 100) {
  trans++;
  gInventory.Transparency = trans;
  Wait(1);
}</code></pre>
<p>will gradually fade the INVENTORY GUI out until it is invisible.</p>
<p><em>See Also:</em></p>
<h3 id="visible-property-gui">Visible property (GUI)</h3>
<p><em>(Formerly known as GUIOff, which is now obsolete)ILBRK </em>(Formerly known as GUIOn, which is now obsolete)ILBRK <em>(Formerly known as InterfaceOff, which is now obsolete)ILBRK </em>(Formerly known as InterfaceOn, which is now obsolete)ILBRK <em>(Formerly known as IsGUIOn, which is now obsolete)</em>****</p>
<pre><code>bool GUI.Visible</code></pre>
<p>Gets/sets whether the GUI is visible or not. This property has behaves differently depending on the GUI popup style.</p>
<p>For &#8220;Normal&#8221; and &#8220;Persistent&#8221; GUIs, this property simply switches the GUI on and off, and has no further effects.</p>
<p>For &#8220;Popup modal&#8221; GUIs, setting Visible to true causes the game to become paused until the GUI is removed by setting Visible back to false (eg. when the user presses an OK button or something similar).</p>
<p>For &#8220;Mouse Ypos&#8221; GUIs, the Visible property does not actually determine whether the GUI can be seen, but instead it controls whether the GUI <strong>is allowed to pop up. If Visible is <em>false, then moving the mouse to the top of the screen will not activate the GUI; if it is </em>true, then the GUI will be allowed to be popped up.</strong>**</p>
<pre><code>gSettings.Visible = true;</code></pre>
<p>will turn on the SETTINGS GUI.</p>
<p><em>See Also:</em></p>
<h3 id="width-property-gui">Width property (GUI)</h3>
<pre><code>int GUI.Width</code></pre>
<p>Gets/sets the width of the GUI. This allows you to dynamically change the size of the GUI on the screen.</p>
<p>The width is specified in the normal 320-resolution style.</p>
<pre><code>gInventory.Width += 5;</code></pre>
<p>makes the INVENTORY GUI 5 pixels wider.</p>
<p><em>See Also: ,</em></p>
<h3 id="x-property-gui">X property (GUI)</h3>
<pre><code>int GUI.X</code></pre>
<p>Gets/sets the X position of the GUI. This allows you to dynamically change the position of the GUI on the screen.</p>
<p>The X position is the left-hand side of the GUI, and can be between 0 and 320. The co-ordinates used are screen co-ordinates, not room co-ordinates, and are in the normal 320-resolution style.</p>
<pre><code>gVerbcoin.X += 5;</code></pre>
<p>moves the VERBCOIN GUI right 5 pixels.</p>
<p><em>See Also: ,</em></p>
<h3 id="y-property-gui">Y property (GUI)</h3>
<pre><code>int GUI.Y</code></pre>
<p>Gets/sets the Y position of the GUI. This allows you to dynamically change the position of the GUI on the screen.</p>
<p>The Y position is the top edge of the GUI, and can be between 0 and 200 (or 240, depending on room height). The co-ordinates used are screen co-ordinates, not room co-ordinates, and are in the normal 320x200-resolution style.</p>
<pre><code>gVerbcoin.Y += 5;</code></pre>
<p>moves the VERBCOIN GUI down 5 pixels.</p>
<p><em>See Also: ,</em></p>
<h3 id="zorder-property-gui">ZOrder property (gui)</h3>
<p><em>(Formerly known as SetGUIZOrder, which is now obsolete)</em></p>
<pre><code>int GUI.ZOrder</code></pre>
<p>Gets/sets the z-order of the GUI. This allows you to dynamically change the ordering of GUIs on the screen.</p>
<p>The Z-order setting is an arbitrary number between 0 and 1000. AGS draws the GUIs in order, from the lowest numbered at the back to the highest numbered at the front.</p>
<pre><code>gStatusline.ZOrder = 0;</code></pre>
<p>sets the STATUSLINE GUI to be behind all other GUIs.</p>
<p><em>See Also:</em></p>
<h2 id="gui-control-functions-and-properties">GUI control functions and properties</h2>
<p>This section lists the functions and properties common to all types of GUI control. Each individual control type (Button, ListBox, etc) also has its own specific section.</p>
<h3 id="getatscreenxy-gui-control">GetAtScreenXY (GUI control)</h3>
<p><em>(Formerly known as GetGUIObjectAt, which is now obsolete)</em></p>
<pre><code>static GUIControl* GUIControl.GetAtScreenXY(int x, int y)</code></pre>
<p>Checks whether there is a GUI control at screen co-ordinates (X,Y). Returns the control object if there is, or null if there is not. You probably want to use this in conjunction with GetGUIAtLocation.</p>
<pre><code>GUIControl *theControl = GUIControl.GetAtScreenXY(mouse.x, mouse.y);
if (theControl == lstSaveGames) {
  Display(&quot;The mouse is over the Save Games list box.&quot;);
}
else if (theControl == null) {
  Display(&quot;The mouse is not over a control.&quot;);
}
else {
  GUI *onGui = theControl.OwningGUI;
  Display(&quot;The mouse is over control %d on GUI %d.&quot;, theControl.ID, onGui.ID);
}</code></pre>
<p>will display what control the mouse is over.</p>
<p><em>See Also:</em></p>
<h3 id="astype-properties-gui-controls">AsType properties (GUI controls)</h3>
<pre><code>Button*  GUIControl.AsButton;
InvWindow* GUIControl.AsInvWindow;
Label*   GUIControl.AsLabel;
ListBox* GUIControl.AsListBox;
Slider*  GUIControl.AsSlider;
TextBox* GUIControl.AsTextBox;</code></pre>
<p>Converts a generic GUIControl* pointer into a variable of the correct type, and returns it. If the control is not of the requested type, returns <em>null.</em></p>
<pre><code>Button *theButton = gIconbar.Controls[2].AsButton;
if (theButton == null) {
  Display(&quot;Control 2 is not a button!!!!&quot;);
}
else {
  theButton.NormalGraphic = 44;
}</code></pre>
<p>attempts to set Button 2 on GUI ICONBAR to have NormalGraphic 44, but if that control is not a button, prints a message.</p>
<p><em>See Also:</em></p>
<h3 id="bringtofront-gui-controls">BringToFront (GUI controls)</h3>
<pre><code>GUIControl.BringToFront()</code></pre>
<p>Brings this control to the front of the Z-order. This allows you to rearrange the display order of controls within the GUI.</p>
<p><strong>Applies To</strong></p>
<p>Inherited by the Button, InvWindow, Label, ListBox, Slider and TextBox.</p>
<pre><code>btnBigButton.BringToFront();</code></pre>
<p>will move the <em>btnBigButton button to be in front of all other controls on the GUI.</em></p>
<p><em>See Also: ,</em></p>
<h3 id="clickable-property-gui-controls">Clickable property (GUI controls)</h3>
<pre><code>bool GUIControl.Clickable</code></pre>
<p>Gets/sets whether the GUI control is clickable.</p>
<p>This property determines whether the player can click the mouse on the control. If it is set to <em>false, then any mouse clicks will go straight through the control onto whatever is behind it. Unlike the Enabled property though, setting Clickable to false does not alter the appearance of the control.</em></p>
<p>Note that disabling the control by setting Enabled to false overrides this setting &#8211; that is, if Enabled is false then the control will not be clickable, regardless of the <em>Clickable setting.</em></p>
<p>Also, bear in mind that if you set <em>Clickable to false then any mouse clicks will go through the control onto whatever is behind. On the other hand, if </em>Enabled is set to false then the control &#8220;absorbs&#8221; the mouse click but does not do anything with it.**</p>
<p><strong>Applies To</strong></p>
<p>Inherited by the Button, InvWindow, Label, ListBox, Slider and TextBox.</p>
<pre><code>btnSaveGame.Clickable = false;</code></pre>
<p>will make the <em>btnSaveGame button non-clickable.</em></p>
<p><em>See Also:</em></p>
<h3 id="enabled-property-gui-controls">Enabled property (GUI controls)</h3>
<p><em>(Formerly known as SetGUIObjectEnabled, which is now obsolete)</em></p>
<pre><code>bool GUIControl.Enabled</code></pre>
<p>Enables or disables a GUI control.</p>
<p>Normally, all your GUI controls (such as buttons, sliders, etc) are enabled at all times except during a cutscene, when they are disabled. This command allows you to explicitly disable a control at your script&#8217;s discretion.</p>
<p>If you set this to true, the control will be enabled; set to false to disable it.</p>
<p>Whether you set it as enabled or not, it will <strong>always be disabled during a blocking cutscene, along with all the other controls.</strong></p>
<p>While a control is disabled, it will not respond to mouse clicks. If it is a button, its mouseover and pushed pictures will not be shown. The control will be drawn according to the game &#8220;When GUI Disabled&#8221; settings, as usual.</p>
<p><strong>Applies To</strong></p>
<p>Inherited by the Button, InvWindow, Label, ListBox, Slider and TextBox.</p>
<pre><code>btnSaveGame.Enabled = false;</code></pre>
<p>will disable the <em>btnSaveGame button.</em></p>
<p><em>See Also: ,</em></p>
<h3 id="height-property-gui-controls">Height property (GUI controls)</h3>
<pre><code>int GUIControl.Height;</code></pre>
<p>Gets/sets the height of the GUI control. This allows you to dynamically resize GUI controls while the game is running.</p>
<p><strong>Applies To</strong></p>
<p>Inherited by the Button, InvWindow, Label, ListBox, Slider and TextBox.</p>
<pre><code>btnConfirm.Height = 20;</code></pre>
<p>makes the <em>btnConfirm button 20 pixels high.</em></p>
<p><em>See Also: ,</em></p>
<h3 id="id-property-gui-controls">ID property (GUI controls)</h3>
<pre><code>readonly int GUIControl.ID</code></pre>
<p>Gets the GUI control&#8217;s ID number. This is the control&#8217;s object number from the GUI editor, and is useful if you need to interoperate with legacy code that uses the control&#8217;s number rather than object name.</p>
<p><strong>Applies To</strong></p>
<p>Inherited by the Button, InvWindow, Label, ListBox, Slider and TextBox.</p>
<pre><code>SetGUIObjectEnabled(lstSaves.OwningGUI.ID, lstSaves.ID, 1);
lstSaves.Enabled = false;</code></pre>
<p>uses the obsolete SetGUIObjectEnabled function to enable the lstSaves list box, and then uses the equivalent modern property to disable it.</p>
<p><em>See Also: ,</em></p>
<h3 id="owninggui-property-gui-controls">OwningGUI property (GUI controls)</h3>
<pre><code>readonly GUI* GUIControl.OwningGUI</code></pre>
<p>Gets the GUI control&#8217;s owning GUI, which is the GUI that contains the control.</p>
<p>Returns a GUI, which allows you to use all the usual .</p>
<p><strong>Applies To</strong></p>
<p>Inherited by the Button, InvWindow, Label, ListBox, Slider and TextBox.</p>
<pre><code>GUI *thegui = lstSaves.OwningGUI;
thegui.Visible = false;

lstSaves.OwningGUI.Visible = true;</code></pre>
<p>turns off the GUI that contains the lstSaves list box, then turns it on again using the niftier full pathing approach.</p>
<p><em>See Also: ,</em></p>
<h3 id="sendtoback-gui-controls">SendToBack (GUI controls)</h3>
<pre><code>GUIControl.SendToBack()</code></pre>
<p>Sends this control to the back of the Z-order. This allows you to rearrange the display order of controls within the GUI.</p>
<p><strong>Applies To</strong></p>
<p>Inherited by the Button, InvWindow, Label, ListBox, Slider and TextBox.</p>
<pre><code>btnBigButton.SendToBack();</code></pre>
<p>will move the <em>btnBigButton button to be behind all other controls on the GUI.</em></p>
<p><em>See Also: ,</em></p>
<h3 id="setposition-gui-controls">SetPosition (GUI controls)</h3>
<p><em>(Formerly known as SetGUIObjectPosition, which is now obsolete)</em></p>
<pre><code>GUIControl.SetPosition(int x, int y)</code></pre>
<p>Moves the top-left corner of the GUI control to be at (X,Y). These co-ordinates are relative to the GUI which contains the control.</p>
<p>This allows you to dynamically move GUI controls around on the screen while the game is running, and this may well be useful in conjunction with GUI.SetSize if you want to create dynamically resizable GUIs.</p>
<p><strong>Applies To</strong></p>
<p>Inherited by the Button, InvWindow, Label, ListBox, Slider and TextBox.</p>
<pre><code>btnConfirm.SetPosition(40, 10);</code></pre>
<p>will move the <em>btnConfirm button to be positioned at (40,10) within the GUI.</em></p>
<p><em>See Also: , , , ,</em></p>
<h3 id="setsize-gui-controls">SetSize (GUI controls)</h3>
<p><em>(Formerly known as SetGUIObjectSize, which is now obsolete)</em></p>
<pre><code>GUIControl.SetSize(int width, int height)</code></pre>
<p>Adjusts the specified GUI control to have the new size WIDTH x HEIGHT.</p>
<p>This allows you to dynamically resize GUI controls on the screen while the game is running, and this may well be useful in conjunction with GUI.SetSize and GUIControl.SetPosition if you want to create dynamically resizable GUIs.</p>
<p><strong>Applies To</strong></p>
<p>Inherited by the Button, InvWindow, Label, ListBox, Slider and TextBox.</p>
<pre><code>invMain.SetSize(160, 100);</code></pre>
<p>will resize the <em>invMain control to have a size of 160 x 100.</em></p>
<p><em>See Also: , , , ,</em></p>
<h3 id="visible-property-gui-controls">Visible property (GUI controls)</h3>
<pre><code>bool GUIControl.Visible</code></pre>
<p>Gets/sets whether the GUI control is visible. This is <em>true by default, but you can set it to </em>false in order to temporarily remove the GUI control from the GUI.**</p>
<p>While the control is invisible, it will not be drawn on the screen, and will not register clicks or otherwise respond to any user input.</p>
<p><strong>Applies To</strong></p>
<p>Inherited by the Button, InvWindow, Label, ListBox, Slider and TextBox.</p>
<pre><code>btnSaveGame.Visible = false;</code></pre>
<p>will make the <em>btnSaveGame button invisible.</em></p>
<p><em>See Also:</em></p>
<h3 id="width-property-gui-controls">Width property (GUI controls)</h3>
<pre><code>int GUIControl.Width;</code></pre>
<p>Gets/sets the width of the GUI control. This allows you to dynamically resize GUI controls while the game is running.</p>
<p><strong>Applies To</strong></p>
<p>Inherited by the Button, InvWindow, Label, ListBox, Slider and TextBox.</p>
<pre><code>btnConfirm.Width = 110;</code></pre>
<p>makes the <em>btnConfirm button 110 pixels wide.</em></p>
<p><em>See Also: ,</em></p>
<h3 id="x-property-gui-controls">X property (GUI controls)</h3>
<pre><code>int GUIControl.X;</code></pre>
<p>Gets/sets the X position of the GUI control. This specifies its left edge, and is relative to the GUI which contains the control.</p>
<p>This allows you to dynamically move GUI controls around on their parent GUI while the game is running.</p>
<p><strong>Applies To</strong></p>
<p>Inherited by the Button, InvWindow, Label, ListBox, Slider and TextBox.</p>
<pre><code>btnConfirm.X = 10;</code></pre>
<p>will move the <em>btnConfirm button to be positioned 10 pixels from the left of its GUI.</em></p>
<p><em>See Also: ,</em></p>
<h3 id="y-property-gui-controls">Y property (GUI controls)</h3>
<pre><code>int GUIControl.Y;</code></pre>
<p>Gets/sets the Y position of the GUI control. This specifies its top edge, and is relative to the GUI which contains the control.</p>
<p>This allows you to dynamically move GUI controls around on their parent GUI while the game is running.</p>
<p><strong>Applies To</strong></p>
<p>Inherited by the Button, InvWindow, Label, ListBox, Slider and TextBox.</p>
<pre><code>btnConfirm.Y = 20;</code></pre>
<p>will move the <em>btnConfirm button to be positioned 20 pixels from the top of its GUI.</em></p>
<p><em>See Also: ,</em></p>
<h3 id="zorder-property-gui-controls">ZOrder property (GUI controls)</h3>
<pre><code>int GUIControl.ZOrder;</code></pre>
<p>Gets/sets the control&#8217;s Z-order relative to other controls within the same owning GUI. This allows you to precisely arrange the display order of controls at runtime and to know which position the control had at certain moment in time.</p>
<p>For AGS GUI Z-order means the order in wich controls are displayed from bottom to top. That means that control at the bottom has Z-order equal to 0, and control at the top has highest Z-order, equal to (number of controls - 1).</p>
<p>Setting <code>GUIControl.ZOrder = 0;</code> will do same thing as calling <code>GUIControl.SendToBack()</code>, and setting <code>GUIControl.ZOrder = GUIControl.OwningGUI.ControlCount - 1;</code> will do same thing as calling <code>GUIControl.BringToFront()</code>.</p>
<p>If you try to set inappropriate ZOrder, the nearest acceptable one will be applied instead.</p>
<p><strong>Applies To</strong></p>
<p>Inherited by the Button, InvWindow, Label, ListBox, Slider and TextBox.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.4.0 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h2 id="gui-button-functions-and-properties">GUI Button functions and properties</h2>
<p>ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK</p>
<h3 id="click-button">Click (button)</h3>
<pre><code>Button.Click()</code></pre>
<p>Forces Button&#8217;s OnClick event. If there is a script function bound to that event it will be run, otherwise nothing happens.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.4.0 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="animate-button">Animate (button)</h3>
<p><em>(Formerly known as AnimateButton, which is now obsolete)</em></p>
<pre><code>Button.Animate(int view, int loop, int delay, RepeatStyle)</code></pre>
<p>Animates a GUI button by playing the specified view loop on it. This could be useful for Sierra-style death animations and other effects.</p>
<p>LOOP from VIEW will be played on the button. The DELAY specifies the speed of the animation - larger numbers are slower. This has the same values you use with the Character.Animate and Object.Animate commands.</p>
<p>REPEAT determines whether the animation will loop repeatedly, or just play once and stop with the last frame showing (eOnce or eRepeat are the possible values).</p>
<p>You can abort an animation at any time by setting the button&#8217;s NormalGraphic property, or starting a new animation on the same button.</p>
<p><strong>NOTE: This command destroys the button&#8217;s normal, pushed and mouseover images. If you want to return the button to normal usage after playing an animation, you will have to set the Graphic properties to restore the images.</strong></p>
<p><strong>NOTE: This command does not support flipped view frames. Any frames marked as &#8220;Flipped&#8221; will in fact be drawn normally when on a button.</strong></p>
<pre><code>btnDeathAnim.Animate(6, 2, 4, eRepeat);</code></pre>
<p>will animate the &#8216;btnDeathAnim&#8217; button using loop 2 of view 6, with a delay of 4 cycles per frame, and repeat the animation continually.</p>
<p><em>See Also:</em></p>
<h3 id="clipimage-property">ClipImage property</h3>
<pre><code>bool Button.ClipImage;</code></pre>
<p>Gets/sets whether the button clips its image to the button boundaries.</p>
<p>For example, if the button is sized 30x30, but its Graphic is a 50x50 image, then this property controls whether the image is allowed to spill over the edge of the button.</p>
<p>The default is false, ie. the image is not clipped.</p>
<p>Setting this to true can be useful in that it ensures that the button&#8217;s image is not larger than the button&#8217;s clickable area, which can cause confusion when it happens.</p>
<pre><code>btnOK.ClipImage = true;</code></pre>
<p>sets the <em>btnOK button so that its image will be restrained to the button&#8217;s clickable area.</em></p>
<p><em>See Also:</em></p>
<h3 id="font-property-button">Font property (button)</h3>
<pre><code>FontType Button.Font</code></pre>
<p>Gets/sets the font used by the button to display text.</p>
<p>The font number must correspond to one of the fonts from the Fonts pane in the AGS Editor.</p>
<pre><code>btnOK.Font = eFontMain;</code></pre>
<p>will change the <em>btnOK button to use Font &#8220;Main&#8221;.</em></p>
<p><em>See Also: ,</em></p>
<h3 id="graphic-property-button">Graphic property (button)</h3>
<p><em>(Formerly part of GetButtonPic, which is now obsolete)</em></p>
<pre><code>readonly int Button.Graphic;</code></pre>
<p>Gets the current image on a GUI button. If a value less than 1 is returned, then no image is currently displayed on the button.</p>
<p>This property is read-only; in order to set the image, you must use one of the , or properties.</p>
<pre><code>Display(&quot;The button is currently using sprite %d.&quot;, btnPlay.Graphic);</code></pre>
<p>will display btnPlay&#8217;s current sprite number.</p>
<p><em>See Also: , , ,</em></p>
<h3 id="mouseovergraphic-property-button">MouseOverGraphic property (button)</h3>
<p><em>(Formerly part of GetButtonPic, which is now obsolete) ILBRK </em>(Formerly part of SetButtonPic, which is now obsolete)**</p>
<pre><code>int Button.MouseOverGraphic;</code></pre>
<p>Gets/sets the button&#8217;s mouse-over sprite. This can be -1, which indicates that the button does not have a mouse-over graphic.</p>
<pre><code>Display(&quot;The button&#39;s mouse-over image is sprite %d.&quot;, btnPlay.MouseOverGraphic);</code></pre>
<p>will display btnPlay&#8217;s mouse-over sprite number.</p>
<p><em>See Also: , ,</em></p>
<h3 id="normalgraphic-property-button">NormalGraphic property (button)</h3>
<p><em>(Formerly part of GetButtonPic, which is now obsolete) ILBRK </em>(Formerly part of SetButtonPic, which is now obsolete)**</p>
<pre><code>int Button.NormalGraphic;</code></pre>
<p>Gets/sets the button&#8217;s normal sprite (ie. the graphic used when the button is not pushed and the mouse is not over it).</p>
<p>Note that setting this to a different sprite will change the button&#8217;s size to match the size of the new sprite.</p>
<pre><code>Display(&quot;The button&#39;s normal image is sprite %d.&quot;, btnPlay.NormalGraphic);</code></pre>
<p>will display btnPlay&#8217;s normal sprite number.</p>
<p><em>See Also: , , ,</em></p>
<h3 id="pushedgraphic-property-button">PushedGraphic property (button)</h3>
<p><em>(Formerly part of GetButtonPic, which is now obsolete) ILBRK </em>(Formerly part of SetButtonPic, which is now obsolete)**</p>
<pre><code>int Button.PushedGraphic;</code></pre>
<p>Gets/sets the button&#8217;s pushed sprite (ie. the graphic used when the button is pushed in by the user). This can be -1, which indicates that the button does not have a pushed image.</p>
<pre><code>Display(&quot;The button&#39;s pushed image is sprite %d.&quot;, btnPlay.PushedGraphic);</code></pre>
<p>will display btnPlay&#8217;s pushed sprite number.</p>
<p><em>See Also: , ,</em></p>
<h3 id="text-property-button">Text property (button)</h3>
<p><em>(Formerly known as SetButtonText, which is now obsolete) ILBRK </em>(Formerly known as Button.GetText, which is now obsolete) ILBRK <em>(Formerly known as Button.SetText, which is now obsolete)</em>**</p>
<pre><code>String Button.Text;</code></pre>
<p>Gets/sets the text displayed on the button.</p>
<pre><code>Display(&quot;Button displayed: %s&quot;, btnController.Text);
btnController.Text = &quot;Enable jibble&quot;;</code></pre>
<p>will display the old text, then change button btnController to read &#8216;Enable jibble&#8217;.</p>
<p><em>See Also: ,</em></p>
<h3 id="textcolor-property-button">TextColor property (button)</h3>
<pre><code>int Button.TextColor;</code></pre>
<p>Gets/sets the text colour used to display the button&#8217;s text.</p>
<p>If the button is displaying an image rather than text, then this property has no effect.</p>
<pre><code>btnRestart.TextColor = 15;</code></pre>
<p>will change button &#8216;btnRestart&#8217; to have white text.</p>
<p><em>See Also:</em></p>
<h2 id="gui-invwindow-functions-and-properties">GUI InvWindow functions and properties</h2>
<p>ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK</p>
<h3 id="scrolldown-inv-window">ScrollDown (inv window)</h3>
<pre><code>InvWindow.ScrollDown()</code></pre>
<p>Scrolls the inventory window down one line, if there are more items to display. If the inventory window is already at the bottom, then nothing happens.</p>
<p>You would usually use this in response to a GUI button press on a Down arrow button on your GUI.</p>
<pre><code>invMain.ScrollDown();</code></pre>
<p>will scroll the <em>invMain inv window down one row.</em></p>
<p><em>See Also: ,</em></p>
<h3 id="scrollup-inv-window">ScrollUp (inv window)</h3>
<pre><code>InvWindow.ScrollUp()</code></pre>
<p>Scrolls the inventory window up one line, if there are more items to display. If the inventory window is already at the top, then nothing happens.</p>
<p>You would usually use this in response to a GUI button press on an Up arrow button on your GUI.</p>
<pre><code>invMain.ScrollUp();</code></pre>
<p>will scroll the <em>invMain inv window up one row.</em></p>
<p><em>See Also: ,</em></p>
<h3 id="charactertouse-property">CharacterToUse property</h3>
<pre><code>Character* InvWindow.CharacterToUse;</code></pre>
<p>Gets/sets which character the inventory window is currently displaying the inventory for. This is either set to a specific character, or it can be set to <em>null, in which case the inventory window will track the current player character (this is the default).</em></p>
<pre><code>invMain.CharacterToUse = cJack;</code></pre>
<p>will change the <em>invMain inventory window to display character JACK&#8217;s inventory.</em></p>
<h3 id="itematindex-property">ItemAtIndex property</h3>
<pre><code>readonly InventoryItem* InvWindow.ItemAtIndex[];</code></pre>
<p>Gets the inventory item that is currently displayed at the specified index in this inventory window. The number of items in the window can be retrieved with the property. Indexes range from 0 to ItemCount - 1.</p>
<p>If an invalid index is supplied, <em>null is returned.</em></p>
<pre><code>String firstOne = invMain.ItemAtIndex[0].Name;
Display(&quot;First item is %s.&quot;, firstOne);</code></pre>
<p>will display the name of the first item displayed in the <em>invMain inventory window.</em></p>
<p><em>See Also:</em></p>
<h3 id="itemcount-property-inv-window">ItemCount property (inv window)</h3>
<p><em>(Formerly known as game.num_inv_items, which is now obsolete)</em></p>
<pre><code>readonly int InvWindow.ItemCount;</code></pre>
<p>Gets the total number of items contained in the inventory window. This will tend to equal the total number of items that the character has (though it may not if the &#8220;Display multiple items multiple times&#8221; game setting is not checked).</p>
<pre><code>if (invMain.ItemCount &gt; (invMain.ItemsPerRow * invMain.RowCount)) {
  btnInvUp.Enabled = true;
  btnInvDown.Enabled = false;
}</code></pre>
<p>will enable the GUI buttons <em>btnInvUp and </em>btnInvDown if there are more inventory items than will fit in the inventory window.**</p>
<p><em>See Also: , ,</em></p>
<h3 id="itemheight-property">ItemHeight property</h3>
<p><em>(Formerly known as SetInvDimensions, which is now obsolete)</em></p>
<pre><code>int InvWindow.ItemHeight;</code></pre>
<p>Gets/sets the height of the rows in the inventory window. You should generally set this up in game_start to the height of your largest inventory item. The default is 22.</p>
<pre><code>invMain.ItemWidth = 50;
invMain.ItemHeight = 30;</code></pre>
<p>sets the <em>invMain inventory window to use item cells 50x30 large.</em></p>
<p><em>See Also: ,</em></p>
<h3 id="itemwidth-property">ItemWidth property</h3>
<p><em>(Formerly known as SetInvDimensions, which is now obsolete)</em></p>
<pre><code>int InvWindow.ItemWidth;</code></pre>
<p>Gets/sets the width of the items in the inventory window. You should generally set this up in game_start to the width of your largest inventory item. The default is 40.</p>
<pre><code>invMain.ItemWidth = 50;
invMain.ItemHeight = 30;</code></pre>
<p>sets the <em>invMain inventory window to use item cells 50x30 large.</em></p>
<p><em>See Also: ,</em></p>
<h3 id="itemsperrow-property">ItemsPerRow property</h3>
<p><em>(Formerly known as game.items_per_line, which is now obsolete)</em></p>
<pre><code>readonly int InvWindow.ItemsPerRow;</code></pre>
<p>Gets the number of items that can be displayed in each row of the inventory window. This is calculated by the width of the inventory window divided by the individual ItemWidth.</p>
<pre><code>Display(&quot;The inventory window can show %d items at a time&quot;, invMain.ItemsPerRow * invMain.RowCount);</code></pre>
<p>displays how many items can be visible in the invMain window at once.</p>
<p><em>See Also: ,</em></p>
<h3 id="rowcount-property-inv-window">RowCount property (inv window)</h3>
<pre><code>readonly int InvWindow.RowCount;</code></pre>
<p>Gets the number of rows that can be displayed within the inventory window. This is calculated by dividing the height of the window by the individual ItemHeight.</p>
<pre><code>Display(&quot;The inventory window can show %d items at a time&quot;, invMain.ItemsPerRow * invMain.RowCount);</code></pre>
<p>displays how many items can be visible in the invMain window at once.</p>
<p><em>See Also: ,</em></p>
<h3 id="topitem-property-inv-window">TopItem property (inv window)</h3>
<p><em>(Formerly known as game.top_inv_item, which is now obsolete)</em></p>
<pre><code>int InvWindow.TopItem;</code></pre>
<p>Gets/sets the index of the first item currently displayed in the inventory window. The first item is represented by 0, and the last item is has an index of - 1.</p>
<p>You can use this to work out whether to display scroll arrows or not.</p>
<pre><code>if (invMain.TopItem &gt; 0) {
  btnScrollUp.Visible = true;
}
else {
  btnScrollUp.Visible = false;
}</code></pre>
<p>makes the <em>btnScrollUp button visible or invisible depending on whether the inventory list can be scrolled up.</em></p>
<p><em>See Also:</em></p>
<h2 id="gui-label-functions-and-properties">GUI Label functions and properties</h2>
<p>ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK</p>
<h3 id="font-property-label">Font property (label)</h3>
<p><em>(Formerly known as SetLabelFont, which is now obsolete)</em></p>
<pre><code>FontType Label.Font;</code></pre>
<p>Gets/sets the font used to display the label&#8217;s text. This is useful if you have a standard SCI font for your English version, but want to change to a TTF font for foreign language versions.</p>
<pre><code>if (IsTranslationAvailable()) {
  lblStatus.Font = eFontForeign;
}</code></pre>
<p>will change label &#8216;lblStatus&#8217; to use font &#8220;Foreign&#8221; if a game translation is in use.</p>
<p><em>See Also: , ,</em></p>
<h3 id="text-property-label">Text property (label)</h3>
<p><em>(Formerly known as SetLabelText, which is now obsolete) ILBRK </em>(Formerly known as Label.GetText, which is now obsolete) ILBRK <em>(Formerly known as Label.SetText, which is now obsolete)</em>**</p>
<pre><code>String Label.Text;</code></pre>
<p>Gets/sets the text displayed in the specified label. This allows you to change the text during the game, for example to create a Lucasarts-style status line.</p>
<pre><code>lblStatus.Text = Game.GetLocationName(mouse.x, mouse.y);</code></pre>
<p>will display the name of the location the cursor is over on label &#8216;lblStatus&#8217;</p>
<p><em>See Also: , , ,</em></p>
<h3 id="textcolor-property-label">TextColor property (label)</h3>
<p><em>(Formerly known as SetLabelColor, which is now obsolete)</em></p>
<pre><code>int Label.TextColor;</code></pre>
<p>Gets/sets the text colour used to display the label&#8217;s text.</p>
<pre><code>lblStatus.TextColor = 14;</code></pre>
<p>will change label &#8216;lblStatus&#8217; to have yellow text.</p>
<p><em>See Also: ,</em></p>
<h2 id="gui-list-box-functions-and-properties">GUI List Box functions and properties</h2>
<p>ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK</p>
<h3 id="additem">AddItem</h3>
<p><em>(Formerly known as ListBoxAdd, which is now obsolete)</em></p>
<pre><code>ListBox.AddItem(string newitem)</code></pre>
<p>Adds NEWITEM to the specified list box. The item will be appended to the end of the list.</p>
<p><strong>NOTE: List boxes have a limit of 200 items. If you try to add more than that, this function will return <em>false and the item will not be added.</em></strong></p>
<pre><code>String input = txtUserInput.Text;
lstChoices.AddItem(input);</code></pre>
<p>will take the input from the user and add it to the listbox.</p>
<p><em>See Also: , , , ,</em></p>
<h3 id="clear-list-box">Clear (list box)</h3>
<p><em>(Formerly known as ListBoxClear, which is now obsolete)</em></p>
<pre><code>ListBox.Clear()</code></pre>
<p>Removes all items from the specified list box.</p>
<pre><code>lstNoteBook.Clear();</code></pre>
<p>will remove all the items from listbox <em>lstNoteBook.</em></p>
<p><em>See Also:</em></p>
<h3 id="filldirlist">FillDirList</h3>
<p><em>(Formerly known as ListBoxDirList, which is now obsolete)</em></p>
<pre><code>ListBox.FillDirList(string filemask)</code></pre>
<p>Fills the list box with a list of filenames matching FILEMASK in the current directory. This could be useful if you have various data files and the player can choose which one to load.</p>
<p>FILEMASK is a standard DOS/Windows search expression such as &#8220;*.dat&#8221; or &#8220;data*.*&#8221;</p>
<p>When specifying file path you may use special location tags: ILBRK <code>$INSTALLDIR$</code>, which allows you to explicitly access files in the game installation directory. ILBRK <code>$SAVEGAMEDIR$</code>, which allows you to access files in the save game directory. ILBRK <code>$APPDATADIR$</code>, which allows you to access files to a folder on the system which is accessible by and shared by all users.</p>
<pre><code>lstSaveGames.FillDirList(&quot;agssave.*&quot;);</code></pre>
<p>will fill the listbox with the list of the saved games. Note that actually for this task you would use FillSaveGameList instead.</p>
<p><em>See Also: , ,</em></p>
<h3 id="fillsavegamelist">FillSaveGameList</h3>
<p><em>(Formerly known as ListBoxSaveGameList, which is now obsolete)</em></p>
<pre><code>ListBox.FillSaveGameList()</code></pre>
<p>Fills the specified listbox with the save game list, sorted correctly with the most recent game at the top of the list.</p>
<p>The property is updated to contain the save game slot number for each index in the list, so that you can do:</p>
<pre><code>int index = lstSaveGames.SelectedIndex;
RestoreGameSlot(lstSaveGames.SaveGameSlots[index]);</code></pre>
<p><strong>NOTE: The save game list can only hold 50 save games. If ListBox.ItemCount returns 50 and you are doing a Save dialog box, you may want to make the user replace an existing file rather than saving a new one.</strong></p>
<pre><code>lstSaveGames.FillSaveGameList();</code></pre>
<p>will fill listbox <em>lstSaveGames with the list of the saved games.</em></p>
<p><em>See Also: , , ,</em></p>
<h3 id="getitematlocation">GetItemAtLocation</h3>
<pre><code>ListBox.GetItemAtLocation(int x, int y)</code></pre>
<p>Determines which item in the list box is at the screen co-ordinates (X,Y). This allows you to find out which item the mouse is hovering over, for instance.</p>
<p>Returns the item index (where the first item is 0), or -1 if the specified co-ordinates are not over any item or are outside the list box.</p>
<pre><code>int index = lstOptions.GetItemAtLocation(mouse.x, mouse.y);
if (index &lt; 0) {
  Display(&quot;The mouse is not over an item!&quot;);
}
else {
  String selectedItem = lstOptions.Items[index];
  Display(&quot;The mouse is over item &#39;%s&#39;.&quot;, selectedItem);
}</code></pre>
<p>will display the item text that the mouse is currently hovering over.</p>
<p><em>See Also:</em></p>
<h3 id="insertitemat">InsertItemAt</h3>
<pre><code>ListBox.InsertItemAt(int index, string newitem)</code></pre>
<p>Inserts NEWITEM into the specified list box. The item will be inserted <strong>before the specified index.</strong></p>
<p>Listbox indexes go from 0 (the first item) to ItemCount - 1 (the last item). The new item will be inserted before the index you specify.</p>
<p><strong>NOTE: List boxes have a limit of 200 items. If you try to add more than that, this function will return <em>false and the item will not be added.</em></strong></p>
<pre><code>lstChoices.AddItem(&quot;First item&quot;);
lstChoices.AddItem(&quot;Second item&quot;);
lstChoices.InsertItemAt(1, &quot;Third item&quot;);</code></pre>
<p>will insert the Third Item in between the First and Second items.</p>
<p><em>See Also: ,</em></p>
<h3 id="removeitem">RemoveItem</h3>
<p><em>(Formerly known as ListBoxRemove, which is now obsolete)</em></p>
<pre><code>ListBox.RemoveItem(int item)</code></pre>
<p>Removes ITEM from the specified list box. ITEM is the list index of the item to remove, starting with 0 for the top item.</p>
<p>If you want to remove all items from the list, then use instead.</p>
<p><strong>NOTE: Calling this function causes other items in the list to get re-numbered, so make sure you don&#8217;t keep around any references from ListBox.SelectedIndex and related functions while using this command.</strong></p>
<pre><code>lstTest.AddItem(&quot;First item&quot;);
lstTest.AddItem(&quot;Second item&quot;);
lstTest.RemoveItem(0);</code></pre>
<p>the list box will now just contain &#8220;Second item&#8221;.</p>
<p><em>See Also: ,</em></p>
<h3 id="scrolldown-list-box">ScrollDown (list box)</h3>
<pre><code>ListBox.ScrollDown()</code></pre>
<p>Scrolls the list box down one row. If it is already at the bottom, nothing happens.</p>
<pre><code>lstTest.ScrollDown();</code></pre>
<p>will scroll the <em>lstTest list box down one row.</em></p>
<p><em>See Also:</em></p>
<h3 id="scrollup-list-box">ScrollUp (list box)</h3>
<pre><code>ListBox.ScrollUp()</code></pre>
<p>Scrolls the list box up one row. If it is already at the top, nothing happens.</p>
<pre><code>lstTest.ScrollUp();</code></pre>
<p>will scroll the <em>lstTest list box up one row.</em></p>
<p><em>See Also:</em></p>
<h3 id="font-property-list-box">Font property (list box)</h3>
<pre><code>FontType ListBox.Font</code></pre>
<p>Gets/sets the font used by the specified list box.</p>
<pre><code>lstSaveGames.Font = eFontSpeech;</code></pre>
<p>will change the <em>lstSaveGames list box to use Font &#8220;Speech&#8221;.</em></p>
<p><em>See Also: ,</em></p>
<h3 id="hideborder-property-list-box">HideBorder property (list box)</h3>
<pre><code>bool ListBox.HideBorder</code></pre>
<p>Gets/sets whether the list box&#8217;s border is hidden.</p>
<p>Note that hiding the border will also implicitly hide the up/down scroll arrows for the list box.</p>
<pre><code>lstSaveGames.HideBorder = true;</code></pre>
<p>will hide the border around the Save Games list box.</p>
<p><em>See Also:</em></p>
<h3 id="hidescrollarrows-property-list-box">HideScrollArrows property (list box)</h3>
<pre><code>bool ListBox.HideScrollArrows</code></pre>
<p>Gets/sets whether the built-in up/down scroll arrows are hidden.</p>
<p>Because the appearance of the scroll arrows is not customizable, you may wish to use this to hide them and provide your own arrows using GUI Button controls.</p>
<p><strong>NOTE: If the list box&#8217;s &#8220;Hide Border&#8221; setting is enabled, then the scroll arrows will also be hidden, since &#8220;Hide Border&#8221; supersedes &#8220;Hide Scroll Arrows&#8221;. You only need to use this HideScrollArrows property if you want the border to be shown but the arrows hidden.</strong></p>
<pre><code>lstSaveGames.HideScrollArrows = true;</code></pre>
<p>will hide the built-in scroll arrows on the list box.</p>
<p><em>See Also:</em></p>
<h3 id="itemcount-property-list-box">ItemCount property (list box)</h3>
<p><em>(Formerly known as ListBoxGetNumItems, which is now obsolete)</em></p>
<pre><code>readonly int ListBox.ItemCount</code></pre>
<p>Gets the number of items in the specified listbox. Valid item indexes range from 0 to (numItems - 1).</p>
<p>This property is read-only. To change the item count, use the AddItem and RemoveItem methods.</p>
<pre><code>int saves = lstSaveGames.ItemCount;</code></pre>
<p>will pass the number of saved games to the int saves.</p>
<p><em>See Also:</em></p>
<h3 id="items-property">Items property</h3>
<p><em>(Formerly known as ListBoxGetItemText, which is now obsolete) ILBRK </em>(Formerly known as ListBox.GetItemText, which is now obsolete) ILBRK <em>(Formerly known as ListBox.SetItemText, which is now obsolete)</em>**</p>
<pre><code>String ListBox.Items[index]</code></pre>
<p>Gets/sets the text of the list box item at INDEX.</p>
<p>List box items are numbered starting from 0, so the first item is 0, the second is 1, and so on. The highest allowable index is ItemCount minus 1.</p>
<p>If you want to add a new item to the listbox, use the method.</p>
<pre><code>String selectedItemText = lstOptions.Items[lstOptions.SelectedIndex];</code></pre>
<p>will get the text of the selected item in the list box.</p>
<p><em>See Also: , ,</em></p>
<h3 id="rowcount-property-list-box">RowCount property (list box)</h3>
<pre><code>readonly int ListBox.RowCount</code></pre>
<p>Gets the number of rows that can be shown within the list box. This depends on the size of the list box, and <strong>does not depend on how many items are actually stored in the list box.</strong></p>
<p>This property is read-only. To change the row count, adjust the height of the list box.</p>
<pre><code>Display(&quot;You can currently see %d items from the listbox&#39;s contents&quot;, lstSaveGames.RowCount);</code></pre>
<p>will display the number of rows that the listbox can display.</p>
<p><em>See Also: , ,</em></p>
<h3 id="savegameslots-property">SaveGameSlots property</h3>
<p><em>(Formerly known as global array savegameindex, which is now obsolete)</em></p>
<pre><code>readonly int ListBox.SaveGameSlots[];</code></pre>
<p>Contains the corresponding save game slot for each item in the list.</p>
<p>This is necessary because the FillSaveGameList command sorts the list of save games to put the most recent first. Therefore, you can use this array to map the list box indexes back to the corresponding save game slot.</p>
<p><strong>NOTE: You must use the FillSaveGameList command in order to populate this array.</strong></p>
<pre><code>int index = lstSaveGames.SelectedIndex;
RestoreGameSlot(lstSaveGames.SaveGameSlots[index]);</code></pre>
<p>will restore the currently selected game in the list, assuming FillSaveGameList had been used previously.</p>
<p><em>See Also: ,</em></p>
<h3 id="selectedindex-property">SelectedIndex property</h3>
<p><em>(Formerly known as ListBoxGetSelected, which is now obsolete) ILBRK </em>(Formerly known as ListBoxSetSelected, which is now obsolete)**</p>
<pre><code>int ListBox.SelectedIndex</code></pre>
<p>Gets/sets the index into the list of the currently selected item. The first item is 0, second is 1, and so on. If no item is selected, this is set to -1.</p>
<p>You can set this to -1 to remove the highlight (ie. un-select all items).</p>
<pre><code>String selectedText = lstOptions.Items[lstOptions.SelectedIndex];</code></pre>
<p>will get the text of the selected item in the listbox.</p>
<h3 id="topitem-property-list-box">TopItem property (list box)</h3>
<p><em>(Formerly known as ListBoxSetTopItem, which is now obsolete)</em></p>
<pre><code>int ListBox.TopItem</code></pre>
<p>Gets/sets the top item in the list box. The top item is the first item that is visible within the list box, so changing this effectively scrolls the list up and down.</p>
<p>Indexes for TopItem start from 0 for the first item in the list.</p>
<pre><code>lstSaveGames.TopItem = 0;</code></pre>
<p>will automatically scroll listbox <em>lstSaveGames back to the top of the list.</em></p>
<h3 id="translated-property-list-box">Translated property (list box)</h3>
<pre><code>bool ListBox.Translated</code></pre>
<p>Gets/sets whether the list box&#8217;s items are translated to the selected game language at runtime.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.3.0 and later versions.</strong></em></p>
<h2 id="gui-slider-properties">GUI Slider properties</h2>
<p>ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK</p>
<h3 id="backgroundgraphic-property-slider">BackgroundGraphic property (slider)</h3>
<pre><code>int Slider.BackgroundGraphic;</code></pre>
<p>Gets/sets the sprite used to draw the slider background. This image is tiled along the length of the slider.</p>
<p>The background graphic can be set to 0, which will draw the default grey slider background.</p>
<pre><code>Display(&quot;sldHealth&#39;s background is sprite %d&quot;, sldHealth.BackgroundGraphic);</code></pre>
<p>displays the <em>sldHealth slider&#8217;s background image</em></p>
<p><em>Compatibility: Supported by <strong>AGS 3.1.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="handlegraphic-property">HandleGraphic property</h3>
<pre><code>int Slider.HandleGraphic;</code></pre>
<p>Gets/sets the sprite used to draw the handle on the slider. The handle represents the slider&#8217;s current position, and can be dragged around by the player.</p>
<p>The handle graphic can be set to 0, which will draw the default grey handle.</p>
<pre><code>Display(&quot;sldHealth&#39;s handle is sprite %d&quot;, sldHealth.HandleGraphic);</code></pre>
<p>displays the <em>sldHealth slider&#8217;s handle image</em></p>
<p><em>Compatibility: Supported by <strong>AGS 3.1.0 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="handleoffset-property">HandleOffset property</h3>
<pre><code>int Slider.HandleOffset;</code></pre>
<p>Gets/sets the offset at which the handle image is drawn. This value is initially set up in the editor.</p>
<pre><code>sldHealth.HandleOffset = 2;</code></pre>
<p>sets the <em>sldHealth slider&#8217;s handle to be drawn an extra 2 pixels to the right.</em></p>
<p><em>Compatibility: Supported by <strong>AGS 3.1.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="max-property">Max property</h3>
<pre><code>int Slider.Max;</code></pre>
<p>Gets/sets the maximum value of the specified GUI slider.</p>
<p>When changing the maximum, the slider&#8217;s Value will be adjusted if necessary so that it lies within the Min - Max range.</p>
<p>An error occurs if you try to set the Max to a lower value than the Min.</p>
<pre><code>sldHealth.Max = 200;</code></pre>
<p>sets the maximum value of the <em>sldHealth slider to 200.</em></p>
<p><em>See Also: ,</em></p>
<h3 id="min-property">Min property</h3>
<pre><code>int Slider.Min;</code></pre>
<p>Gets/sets the minimum value of the specified GUI slider.</p>
<p>When changing the minimum, the slider&#8217;s Value will be adjusted if necessary so that it lies within the Min - Max range.</p>
<p>An error occurs if you try to set the Min to a higher value than the Max.</p>
<pre><code>sldHealth.Min = 0;</code></pre>
<p>sets the minimum value of the <em>sldHealth slider to 0.</em></p>
<p><em>See Also: ,</em></p>
<h3 id="value-property">Value property</h3>
<p><em>(Formerly known as GetSliderValue, which is now obsolete) ILBRK </em>(Formerly known as SetSliderValue, which is now obsolete)**</p>
<pre><code>int Slider.Value;</code></pre>
<p>Gets/sets the value of the specified GUI slider. You would usually use this in the slider&#8217;s OnChange event handler to find out what value the player has changed the slider to, in order to process their command.</p>
<p>When setting the value, the new value must lie between the MIN and MAX settings for the slider, as set up in the GUI editor.</p>
<pre><code>System.Volume = sldVolume.Value;</code></pre>
<p>will set the audio volume to the value of the slider <em>sldVolume.</em></p>
<p><em>See Also:</em></p>
<h2 id="gui-text-box-functions-and-properties">GUI Text Box functions and properties</h2>
<p>ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK ILBRK</p>
<h3 id="font-property-text-box">Font property (text box)</h3>
<p><em>(Formerly known as SetTextBoxFont, which is now obsolete)</em></p>
<pre><code>FontType TextBox.Font</code></pre>
<p>Gets/sets the font used by the specified text box. This might be useful if you need a player input text box to use a different font with foreign language translations, for example.</p>
<pre><code>txtUserInput.Font = eFontNormal;</code></pre>
<p>will change the <em>txtUserInput text box to use Font &#8220;Normal&#8221;.</em></p>
<p><em>See Also: ,</em></p>
<h3 id="text-property-text-box">Text property (text box)</h3>
<p><em>(Formerly known as GetTextBoxText, which is now obsolete) ILBRK </em>(Formerly known as SetTextBoxText, which is now obsolete) ILBRK <em>(Formerly known as TextBox.GetText, which is now obsolete) ILBRK </em>(Formerly known as TextBox.SetText, which is now obsolete)****</p>
<pre><code>String TextBox.Text;</code></pre>
<p>Gets/sets the text box contents. This might be useful to reset the text box to blank after the user has typed something in, or to fill in a default value.</p>
<pre><code>txtUserInput.Text = &quot;&quot;;</code></pre>
<p>will clear the txtUserInput text box.</p>
<p><em>See Also: , ,</em></p>
<h3 id="textcolor-property-text-box">TextColor property (text box)</h3>
<pre><code>int TextBox.TextColor;</code></pre>
<p>Gets/sets the text colour used to draw the text box. This affects both the text in the text box, and also the text box&#8217;s border.</p>
<pre><code>txtInput.TextColor = 14;</code></pre>
<p>will change text box &#8216;txtInput&#8217; to have yellow text.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.1.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h2 id="hotspot-functions-and-properties">Hotspot functions and properties</h2>
<h3 id="getatscreenxy-hotspot">GetAtScreenXY (hotspot)</h3>
<p><em>(Formerly known as global function GetHotspotAt, which is now obsolete)</em></p>
<pre><code>static Hotspot* Hotspot.GetAtScreenXY(int x, int y)</code></pre>
<p>Returns the hotspot at SCREEN co-ordinates (X,Y). If there is no hotspot there, or if invalid co-ordinates are specified, the Hotspot* representing hotspot 0 will be returned.</p>
<p><strong>NOTE: The co-ordinates are SCREEN co-ordinates, NOT ROOM co-ordinates. This means that with a scrolling room, the co-ordinates you pass are relative to the screen&#8217;s current position, and NOT absolute room co-ordinates. This means that this function is suitable for use with the mouse cursor position variables.</strong></p>
<pre><code>if (Hotspot.GetAtScreenXY(mouse.x, mouse.y) == hDoor)
  Display(&quot;Mouse on the door&quot;);
else if (Hotspot.GetAtScreenXY(mouse.x, mouse.y) != hotspot[0])
  Display(&quot;Mouse is on something (but not the door)!&quot;);
else
  Display(&quot;Mouse not on a hotspot&quot;);</code></pre>
<p>will display a message depending on what the mouse is on.</p>
<p><em>See Also: ,</em></p>
<h3 id="getproperty-hotspot">GetProperty (hotspot)</h3>
<p><em>(Formerly known as GetHotspotProperty, which is now obsolete)</em></p>
<pre><code>Hotspot.GetProperty(string property)</code></pre>
<p>Returns the custom property setting of the PROPERTY for the hotspot.</p>
<p>This command works with Number properties (it returns the number), and with Boolean properties (returns 1 if the box was checked, 0 if not).</p>
<p>Use the equivalent GetTextProperty function to get a text property.</p>
<pre><code>if (hotspot[1].GetProperty(&quot;Value&quot;) &gt; 200)
  Display(&quot;Hotspot 1&#39;s value is over 200!&quot;);</code></pre>
<p>will print the message if hotspot 1 has its &#8220;Value&#8221; property set to more than 200.</p>
<p><em>See Also:</em></p>
<h3 id="gettextproperty-hotspot">GetTextProperty (hotspot)</h3>
<p><em>(Formerly known as GetHotspotPropertyText, which is now obsolete) ILBRK </em>(Formerly known as Hotspot.GetPropertyText, which is now obsolete)**</p>
<pre><code>String Hotspot.GetTextProperty(string property)</code></pre>
<p>Returns the custom property setting of the PROPERTY for the hotspot.</p>
<p>This command works with Text properties only. The property&#8217;s text will be returned from this function.</p>
<p>Use the equivalent GetProperty function to get a non-text property.</p>
<pre><code>String description = hotspot[2].GetTextProperty(&quot;Description&quot;);
Display(&quot;Hotspot 2&#39;s description: %s&quot;, description);</code></pre>
<p>will retrieve hotspot 2&#8217;s &#8220;description&#8221; property and display it.</p>
<p><em>See Also:</em></p>
<h3 id="setproperty-hotspot">SetProperty (hotspot)</h3>
<pre><code>bool Hotspot.SetProperty(const string property, int value)</code></pre>
<p>Sets the new <em>value for the custom </em>property for the specified hotspot. Returns TRUE if such property exists and FALSE on failure.**</p>
<p>This command works with Number properties (it sets the numeric value), and with Boolean properties (sets FALSE is value is equal to 0, or TRUE otherwise).</p>
<p>Use the equivalent SetTextProperty function to set new text property value.</p>
<pre><code>hDoor.SetProperty(&quot;LockDifficulty&quot;, 5);</code></pre>
<p>will change Door hotspot&#8217;s &#8220;LockDifficulty&#8221; custom property to 5.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.4.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="settextproperty-hotspot">SetTextProperty (hotspot)</h3>
<pre><code>bool Hotspot.SetTextProperty(const string property, const string value)</code></pre>
<p>Sets the new <em>value text for the custom </em>property for the specified hotspot. Returns TRUE if such property exists and FALSE on failure.**</p>
<p>This command works with Text properties only. The property&#8217;s text will be changed to new value.</p>
<p>Use the equivalent SetProperty function to set a non-text property.</p>
<pre><code>hDoor.SetTextProperty(&quot;Description&quot;, &quot;The sturdy door&quot;);</code></pre>
<p>will change Door&#8217;s &#8220;description&#8221; property.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.4.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="isinteractionavailable-hotspot">IsInteractionAvailable (hotspot)</h3>
<pre><code>Hotspot.IsInteractionAvailable(CursorMode)</code></pre>
<p>Checks whether there is an event handler defined for activating the hotspot in cursor mode MODE.</p>
<p>This function is very similar to RunInteraction, except that rather than run the event handler script function, it simply returns <em>true if something would have happened, or </em>false if unhandled_event would have been run.**</p>
<pre><code>if (hTable.IsInteractionAvailable(eModeLookat) == 0)
  Display(&quot;looking on this table would not do anything.&quot;);</code></pre>
<p><em>Compatibility: Supported by <strong>AGS 3.4.0 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="runinteraction-hotspot">RunInteraction (hotspot)</h3>
<p><em>(Formerly known as RunHotspotInteraction, which is now obsolete)</em></p>
<pre><code>Hotspot.RunInteraction(CursorMode)</code></pre>
<p>Processes the event handler as if the player had clicked the mouse on the hotspot using the specified cursor mode.</p>
<pre><code>hDoor.RunInteraction(eModeLookat);</code></pre>
<p>will run the code defined in the &#8220;LOOK AT HOTSPOT&#8221; event for hotspot hDoor.</p>
<p><em>See Also: , , ,</em></p>
<h3 id="enabled-property-hotspot">Enabled property (hotspot)</h3>
<p><em>(Formerly known as DisableHotspot, which is now obsolete) ILBRK </em>(Formerly known as EnableHotspot, which is now obsolete)**</p>
<pre><code>bool Hotspot.Enabled</code></pre>
<p>Enables/disables the specified hotspot. If you set this to false, then all areas of the screen that were previously made up of the hotspot now act as type 0 (no hotspot). You can turn the hotspot back on later by setting this back to true.</p>
<p>This setting is persisted in-game; that is, it will not be reset when the player re-enters the room.</p>
<p>The default value of this property is always <em>true.</em></p>
<pre><code>hBrownTree.Enabled = false;</code></pre>
<p>will disable the hBrownTree hotspot.</p>
<p><em>See Also: , ,</em></p>
<h3 id="id-property-hotspot">ID property (hotspot)</h3>
<pre><code>readonly int Hotspot.ID</code></pre>
<p>Gets the hotspot number of this hotspot. This allows you to interoperate with old script using the number-based hotspot functions.</p>
<pre><code>Display(&quot;Hotspot hDoor is hotspot number %d.&quot;, hDoor.ID);
Display(&quot;Hotspot 3 is number %d.&quot;, hotspot[3].ID);</code></pre>
<p>displays hDoor&#8217;s hotspot number, and then displays hotspot 3&#8217;s number (which will be 3).</p>
<p><em>See Also:</em></p>
<h3 id="name-property-hotspot">Name property (hotspot)</h3>
<p><em>(Formerly known as GetHotspotName, which is now obsolete) ILBRK </em>(Formerly known as Hotspot.GetName, which is now obsolete)**</p>
<pre><code>readonly String Hotspot.Name;</code></pre>
<p>Gets the name of the hotspot.</p>
<p>This property is read-only; it is currently not possible to change hotspot names at run-time.</p>
<pre><code>Display(&quot;Hotspot 3&#39;s name is %s.&quot;, hotspot[3].Name);</code></pre>
<p>will retrieve and then display hotspot 3&#8217;s name.</p>
<p><em>See Also:</em></p>
<h3 id="walktox-property">WalkToX property</h3>
<p><em>(Formerly known as GetHotspotPointX, which is now obsolete)</em></p>
<pre><code>readonly int Hotspot.WalkToX</code></pre>
<p>Gets the X room co-ordinate of the hotspot&#8217;s walk-to point. If the hotspot does not have a walk-to point, returns -1.</p>
<pre><code>player.Walk(hTable.WalkToX, hTable.WalkToY, eBlock, eWalkableAreas);</code></pre>
<p>will move the character to hotspot hTable&#8217;s walk-to point.</p>
<p><em>See Also: ,</em></p>
<h3 id="walktoy-property">WalkToY property</h3>
<p><em>(Formerly known as GetHotspotPointY, which is now obsolete)</em></p>
<pre><code>readonly int Hotspot.WalkToY</code></pre>
<p>Gets the Y room co-ordinate of the hotspot&#8217;s walk-to point. If the hotspot does not have a walk-to point, returns -1.</p>
<pre><code>player.Walk(hTable.WalkToX, hTable.WalkToY, eBlock, eWalkableAreas);</code></pre>
<p>will move the character to hotspot hTable&#8217;s walk-to point.</p>
<p><em>See Also: ,</em></p>
<h2 id="inventory-item-functions-and-properties">Inventory item functions and properties</h2>
<h3 id="getatscreenxy-inventory">GetAtScreenXY (inventory)</h3>
<p><em>(Formerly known as global function GetInvAt, which is now obsolete)</em></p>
<pre><code>static InventoryItem* InventoryItem.GetAtScreenXY(int x, int y)</code></pre>
<p>Returns the inventory item at SCREEN co-ordinates (X,Y). Note that this only detects inventory items on custom Inventory windows (that are switched on when this function is called), and is intended to allow you to do Verb Coin style GUIs and so on.</p>
<p>If there is no inventory item there, or if invalid co-ordinates are specified, returns null.</p>
<p><strong>NOTE: The co-ordinates are SCREEN co-ordinates, NOT ROOM co-ordinates. This means that with a scrolling room, the co-ordinates you pass are relative to the screen&#8217;s current position, and NOT absolute room co-ordinates. This means that this function is suitable for use with the mouse cursor position variables.</strong></p>
<pre><code>InventoryItem *item = InventoryItem.GetAtScreenXY(mouse.x, mouse.y);
if (item == null) {
  Display(&quot;No inventory item at the mouse co-ordinates&quot;);
}
else {
  Display(&quot;Inventory item number %d at the mouse.&quot;, item.ID);
}</code></pre>
<p>will display the number of the inv item that the mouse is over</p>
<p><em>See Also: ,</em></p>
<h3 id="getproperty-inventory">GetProperty (inventory)</h3>
<p><em>(Formerly known as GetInvProperty, which is now obsolete)</em></p>
<pre><code>InventoryItem.GetProperty(string property)</code></pre>
<p>Returns the custom property setting PROPERTY for the inventory item.</p>
<p>This command works with Number properties (it returns the number), and with Boolean properties (returns 1 if the box was checked, 0 if not).</p>
<p>Use the equivalent GetTextProperty function to get a text property.</p>
<pre><code>if (inventory[1].GetProperty(&quot;Value&quot;) &gt; 200)
  Display(&quot;Inventory item 1&#39;s value is over 200!&quot;);</code></pre>
<p>will print the message if inventory item 1 has its &#8220;Value&#8221; property set to more than 200.</p>
<p><em>See Also:</em></p>
<h3 id="gettextproperty-inventory">GetTextProperty (inventory)</h3>
<p><em>(Formerly known as GetInvPropertyText, which is now obsolete) ILBRK </em>(Formerly known as InventoryItem.GetPropertyText, which is now obsolete)**</p>
<pre><code>String InventoryItem.GetTextProperty(string property)</code></pre>
<p>Returns the custom property setting PROPERTY for the inventory item.</p>
<p>This command works with Text properties only. The property&#8217;s text will be returned from this function.</p>
<p>Use the equivalent GetProperty function to get a non-text property.</p>
<pre><code>String description = inventory[2].GetTextProperty(&quot;Description&quot;);
Display(&quot;Inv item 2&#39;s description: %s&quot;, description);</code></pre>
<p>will retrieve inv item 2&#8217;s &#8220;description&#8221; property and display it.</p>
<p><em>See Also:</em></p>
<h3 id="setproperty-inventory">SetProperty (inventory)</h3>
<pre><code>bool InventoryItem.SetProperty(const string property, int value)</code></pre>
<p>Sets the new <em>value for the custom </em>property for the specified inventory item. Returns TRUE if such property exists and FALSE on failure.**</p>
<p>This command works with Number properties (it sets the numeric value), and with Boolean properties (sets FALSE is value is equal to 0, or TRUE otherwise).</p>
<p>Use the equivalent SetTextProperty function to set new text property value.</p>
<pre><code>iStone.SetProperty(&quot;Weight&quot;, 120);</code></pre>
<p>will change Stone&#8217;s &#8220;weight&#8221; custom property to 120.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.4.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="settextproperty-inventory">SetTextProperty (inventory)</h3>
<pre><code>bool InventoryItem.SetTextProperty(const string property, const string value)</code></pre>
<p>Sets the new <em>value text for the custom </em>property for the specified inventory item. Returns TRUE if such property exists and FALSE on failure.**</p>
<p>This command works with Text properties only. The property&#8217;s text will be changed to new value.</p>
<p>Use the equivalent SetProperty function to set a non-text property.</p>
<pre><code>iKey.SetTextProperty(&quot;Description&quot;, &quot;A rusty key&quot;);</code></pre>
<p>will change key&#8217;s &#8220;description&#8221; property.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.4.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="isinteractionavailable-inventory">IsInteractionAvailable (inventory)</h3>
<p><em>(Formerly known as IsInventoryInteractionAvailable, which is now obsolete)</em></p>
<pre><code>InventoryItem.IsInteractionAvailable(CursorMode)</code></pre>
<p>Checks whether there is an event handler defined for activating the inventory item in cursor mode MODE.</p>
<p>This function is very similar to RunInteraction, except that rather than run the event handler script function, it simply returns <em>true if something would have happened, or </em>false if unhandled_event would have been run.**</p>
<p>This is useful for enabling options on a verb-coin style GUI, for example.</p>
<pre><code>if (iKeyring.IsInteractionAvailable(eModeLookat) == 0)
  Display(&quot;looking at this item would not do anything.&quot;);</code></pre>
<p><em>See Also: ,</em></p>
<h3 id="runinteraction-inventory">RunInteraction (inventory)</h3>
<p><em>(Formerly known as RunInventoryInteraction, which is now obsolete)</em></p>
<pre><code>InventoryItem.RunInteraction(CursorMode)</code></pre>
<p>Runs the event handler as if the player had clicked the mouse on the inventory item, using the specified cursor mode.</p>
<pre><code>if (button == eMouseLeftInv)
  inventory[game.inv_activated].RunInteraction(mouse.Mode);</code></pre>
<p>will run the inventory event handler for the current cursor mode when the player clicks on the item (Handle Inv Clicks needs to be enabled for this to work)</p>
<p><em>See Also: , ,</em></p>
<h3 id="cursorgraphic-property-inventory">CursorGraphic property (inventory)</h3>
<pre><code>int InventoryItem.CursorGraphic</code></pre>
<p>Gets/sets the sprite slot number of the inventory item&#8217;s mouse cursor. This is the sprite used as the mouse cursor when this inventory item is selected.</p>
<p><strong>NOTE: This property is only used if the &#8220;Use selected inventory graphic for cursor&#8221; setting in General Settings is turned on.</strong></p>
<pre><code>Display(&quot;The key&#39;s cursor graphic is %d&quot;, iKey.CursorGraphic);</code></pre>
<p>will display inventory item <em>iKey&#8217;s cursor graphic.</em></p>
<p><em>Compatibility: Supported by <strong>AGS 3.1.2 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="graphic-property-inventory">Graphic property (inventory)</h3>
<p><em>(Formerly known as GetInvGraphic, which is now obsolete)ILBRK </em>(Formerly known as SetInvItemPic, which is now obsolete)**</p>
<pre><code>int InventoryItem.Graphic</code></pre>
<p>Gets/sets the sprite slot number of the inventory item. You could use this with the Object.Graphic property as a means of the player &#8216;dropping&#8217; an inventory item, or it may be useful if you want to do a Raw Drawn inventory window.</p>
<p><strong>NOTE: For backwards compatibility, if you change this property and the CursorGraphic currently has the same sprite as the main Graphic, then the CursorGraphic will be changed too.</strong></p>
<pre><code>int slot = player.ActiveInventory.Graphic;</code></pre>
<p>will place the sprite number of the player&#8217;s current inventory item into slot.</p>
<p><em>See Also: , ,</em></p>
<h3 id="id-property-inventory">ID property (inventory)</h3>
<pre><code>readonly int InventoryItem.ID</code></pre>
<p>Gets the inventory item&#8217;s ID number. This is the item&#8217;s number from the editor, and is useful with commands such as Character.AddInventory which require an inventory number to add.</p>
<pre><code>AddInventory(EGO, iShovel.ID);</code></pre>
<p>uses the obsolete AddInventory command to add the shovel to EGO&#8217;s inventory</p>
<p><em>See Also: ,</em></p>
<h3 id="name-property-inventory">Name property (inventory)</h3>
<p><em>(Formerly known as GetInvName, which is now obsolete) ILBRK </em>(Formerly known as SetInvItemName, which is now obsolete) ILBRK <em>(Formerly known as InventoryItem.GetName, which is now obsolete) ILBRK </em>(Formerly known as InventoryItem.SetName, which is now obsolete)****</p>
<pre><code>String InventoryItem.Name;</code></pre>
<p>Gets/sets the name of the inventory item. This is the name which is initially set under the Game tab, Inventory mode of the AGS Editor.</p>
<p>You can change this property if for example you want to change a &#8216;bowl&#8217; to a &#8216;bowl with water in&#8217; but want to use the same inventory item for it.</p>
<p>Note that the maximum length for the name of an inventory item is 24 characters - if the name you set is longer than this, it will be truncated.</p>
<pre><code>Display(&quot;Active inventory: %s&quot;, player.ActiveInventory.Name);</code></pre>
<p>will display the name of the player&#8217;s current inventory item.</p>
<p><em>See Also: , ,</em></p>
<h2 id="maths-functions-and-properties">Maths functions and properties</h2>
<h3 id="floattoint">FloatToInt</h3>
<pre><code>int FloatToInt(float value, optional RoundDirection)</code></pre>
<p>Converts the supplied floating point value into an integer.</p>
<p>This function is necessary because implicit conversions in the script are not supported.</p>
<p>RoundDirection can be either <em>eRoundDown (the default), </em>eRoundUp or <em>eRoundNearest, which specifies what direction to round the floating point number in.</em>**</p>
<pre><code>Display(&quot;Round down: %d&quot;, FloatToInt(10.7));
Display(&quot;Round up: %d&quot;, FloatToInt(10.7, eRoundUp));
Display(&quot;Round nearest: %d&quot;, FloatToInt(10.7, eRoundNearest));</code></pre>
<p>displays the integer value of 10.7, rounded in the three different ways.</p>
<p><em>See Also:</em></p>
<h3 id="inttofloat">IntToFloat</h3>
<pre><code>float IntToFloat(int value)</code></pre>
<p>Converts the supplied integer value into a floating point number.</p>
<p>This function is necessary because implicit conversions in the script are not supported.</p>
<pre><code>float number = IntToFloat(10);</code></pre>
<p>loads 10.0 into the variable <em>number.</em></p>
<p><em>See Also:</em></p>
<h3 id="arccos">ArcCos</h3>
<pre><code>float Maths.ArcCos(float value)</code></pre>
<p>Calculates the arc-cosine, in radians, of the specified value.</p>
<p>To convert an angle in radians to degrees, use .</p>
<pre><code>float angle = Maths.ArcCos(1.0);</code></pre>
<p>calculates the arc-cosine of 1.0 and places it into variable <em>angle.</em></p>
<p><em>See Also: , ,</em></p>
<h3 id="arcsin">ArcSin</h3>
<pre><code>float Maths.ArcSin(float value)</code></pre>
<p>Calculates the arc-sine, in radians, of the specified value.</p>
<p>To convert an angle in radians to degrees, use .</p>
<pre><code>float angle = Maths.ArcSin(0.5);</code></pre>
<p>calculates the arc-sine of 0.5 and places it into variable <em>angle.</em></p>
<p><em>See Also: , ,</em></p>
<h3 id="arctan">ArcTan</h3>
<pre><code>float Maths.ArcTan(float value)</code></pre>
<p>Calculates the arc-tan, in radians, of the specified value.</p>
<p>To convert an angle in radians to degrees, use .</p>
<pre><code>float angle = Maths.ArcTan(0.5);</code></pre>
<p>calculates the arc-tan of 0.5 and places it into variable <em>angle.</em></p>
<p><em>See Also: , ,</em></p>
<h3 id="arctan2">ArcTan2</h3>
<pre><code>float Maths.ArcTan2(float y, float x)</code></pre>
<p>Calculates the arctangent of y/x. This is well defined for every point other than the origin, even if x equals 0 and y does not equal 0. The result is returned in radians.</p>
<p>To convert an angle in radians to degrees, use .</p>
<pre><code>float angle = Maths.ArcTan2(-862.42, 78.5149);</code></pre>
<p>calculates the arc-tan of -862.42 / 78.5149 and places it into variable <em>angle.</em></p>
<p><em>See Also: ,</em></p>
<h3 id="cos">Cos</h3>
<pre><code>float Maths.Cos(float radians)</code></pre>
<p>Calculates the cosine of the specified angle (in radians).</p>
<p>To convert an angle in degrees to radians, use .</p>
<pre><code>float cosine = Maths.Cos(Maths.DegreesToRadians(360.0));</code></pre>
<p>calculates the cosine of 360 degrees (which is 1.0) and places it into variable <em>cosine.</em></p>
<p><em>See Also: , , , ,</em></p>
<h3 id="cosh">Cosh</h3>
<pre><code>float Maths.Cosh(float radians)</code></pre>
<p>Calculates the hyperbolic cosine of the specified angle (in radians).</p>
<p>To convert an angle in degrees to radians, use .</p>
<pre><code>float hcos = Maths.Cosh(Maths.DegreesToRadians(360.0));</code></pre>
<p>calculates the hyperbolic cosine of 360 degrees and places it into variable <em>hcos.</em></p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.0 and later versions.</strong></em></p>
<p><em>See Also: , , ,</em></p>
<h3 id="degreestoradians">DegreesToRadians</h3>
<pre><code>float Maths.DegreesToRadians(float degrees)</code></pre>
<p>Converts the supplied angle in degrees, to the equivalent angle in radians.</p>
<p>Since the trigonometric functions such as Sin, Cos and Tan work in radians, this function is handy if you know the angle you want in degrees.</p>
<pre><code>float cosine = Maths.Cos(Maths.DegreesToRadians(360.0));</code></pre>
<p>calculates the cosine of 360 degrees (which is 1.0) and places it into variable <em>cosine.</em></p>
<p><em>See Also: , , ,</em></p>
<h3 id="exp">Exp</h3>
<pre><code>float Maths.Exp(float x)</code></pre>
<p>Returns the exponential value of the floating-point parameter, x</p>
<p>The result is e to the power x, where e is the base of the natural logarithm. On overflow, the function returns infinite and on underflow, returns 0.</p>
<pre><code>float expValue = Maths.Exp(2.302585093);</code></pre>
<p>calculates Exp of 2.302585093 (which should be 10) and places it into the variable.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.0 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="log">Log</h3>
<pre><code>float Maths.Log(float x)</code></pre>
<p>Returns the natural logarithm (base e) of x.</p>
<p>x must be a positive non-zero number.</p>
<pre><code>float logVal = Maths.Log(9000.0);</code></pre>
<p>calculates Log of 9000 (which should be 9.104980) and places it into the variable.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.0 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="log10">Log10</h3>
<pre><code>float Maths.Log10(float x)</code></pre>
<p>Returns the base-10 logarithm of x.</p>
<p>x must be a positive non-zero number.</p>
<pre><code>float logVal = Maths.Log(9000.0);</code></pre>
<p>calculates Log10 of 9000 (which should be 3.954243) and places it into the variable.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.0 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="radianstodegrees">RadiansToDegrees</h3>
<pre><code>float Maths.RadiansToDegrees(float radians)</code></pre>
<p>Converts the supplied angle in radians, to the equivalent angle in degrees.</p>
<p>Since the trigonometic functions such as Sin, Cos and Tan work in radians, this function is handy to convert the results of one of those functions back to degrees.</p>
<pre><code>float halfCircle = Maths.RadiansToDegrees(Maths.Pi);</code></pre>
<p>converts <em>PI radians into degrees (which is 180).</em></p>
<p><em>See Also: , , ,</em></p>
<h3 id="raisetopower">RaiseToPower</h3>
<pre><code>float Maths.RaiseToPower(float base, float exponent)</code></pre>
<p>Calculates the value of <em>base raised to the power </em>exponent.**</p>
<p>This means that <em>base is multiplied by itself </em>exponent times.**</p>
<pre><code>float value = Maths.RaiseToPower(4.0, 3.0);</code></pre>
<p>calculates 4 to the power 3 (which is 64).</p>
<p><em>See Also:</em></p>
<h3 id="sin">Sin</h3>
<pre><code>float Maths.Sin(float radians)</code></pre>
<p>Calculates the sine of the specified angle (in radians).</p>
<p>To convert an angle in degrees to radians, use .</p>
<pre><code>float sine = Maths.Sin(Maths.DegreesToRadians(360.0));</code></pre>
<p>calculates the sine of 360 degrees (which is 0) and places it into variable <em>sine.</em></p>
<p><em>See Also: , , , ,</em></p>
<h3 id="sinh">Sinh</h3>
<pre><code>float Maths.Sinh(float radians)</code></pre>
<p>Calculates the hyperbolic sine of the specified angle (in radians).</p>
<p>To convert an angle in degrees to radians, use .</p>
<pre><code>float hsine = Maths.Sinh(Maths.DegreesToRadians(360.0));</code></pre>
<p>calculates the hyperbolic sine of 360 degrees and places it into variable <em>hsine.</em></p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.0 and later versions.</strong></em></p>
<p><em>See Also: , , , ,</em></p>
<h3 id="sqrt">Sqrt</h3>
<pre><code>float Maths.Sqrt(float value)</code></pre>
<p>Calculates the square root of the supplied value.</p>
<p>The square root is the number which, when multiplied by itself, equals <em>value.</em></p>
<pre><code>Display(&quot;The square root of 4 is %d!&quot;, FloatToInt(Maths.Sqrt(4.0)));</code></pre>
<p>displays the square root of 4 (rounded down to the nearest integer).</p>
<p><em>See Also: , , ,</em></p>
<h3 id="tan">Tan</h3>
<pre><code>float Maths.Tan(float radians)</code></pre>
<p>Calculates the tangent of the specified angle (in radians).</p>
<p>To convert an angle in degrees to radians, use .</p>
<pre><code>float tan = Maths.Tan(Maths.DegreesToRadians(45.0));</code></pre>
<p>calculates the tan of 45 degrees (which is 1.0) and places it into variable <em>tan.</em></p>
<p><em>See Also: , , , ,</em></p>
<h3 id="tanh">Tanh</h3>
<pre><code>float Maths.Tanh(float radians)</code></pre>
<p>Calculates the hyperbolic tangent of the specified angle (in radians).</p>
<p>To convert an angle in degrees to radians, use .</p>
<pre><code>float htan = Maths.Tanh(Maths.DegreesToRadians(45.0));</code></pre>
<p>calculates the hyperbolic tan of 45 degrees and places it into variable <em>htan.</em></p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.0 and later versions.</strong></em></p>
<p><em>See Also: , , , ,</em></p>
<h3 id="pi-property">Pi property</h3>
<pre><code>readonly float Maths.Pi</code></pre>
<p>Gets the value of Pi (defined as 3.14159265358979323846).</p>
<pre><code>Display(&quot;Pi is %f!&quot;, Maths.Pi);</code></pre>
<p>displays the value of Pi.</p>
<p><em>See Also: , ,</em></p>
<h2 id="mouse-functions-and-properties">Mouse functions and properties</h2>
<h3 id="changemodegraphic">ChangeModeGraphic</h3>
<p><em>(Formerly known as ChangeCursorGraphic, which is now obsolete)</em></p>
<pre><code>Mouse.ChangeModeGraphic(CursorMode, int slot)</code></pre>
<p>Changes the specified mouse cursor mode&#8217;s cursor graphic to SLOT. This allows you to dynamically change what a mouse cursor looks like.</p>
<p><strong>NOTE: To change what the Use Inventory cursor looks like, you should change the active inventory item&#8217;s property instead of using this function.</strong></p>
<pre><code>mouse.ChangeModeGraphic(eModeLookat, 120);</code></pre>
<p>will change the cursor&#8217;s graphic for look mode to the image that&#8217;s imported in the sprite&#8217;s manager slot 120.</p>
<p><em>See Also: , , ,</em></p>
<h3 id="changemodehotspot">ChangeModeHotspot</h3>
<p><em>(Formerly known as ChangeCursorHotspot, which is now obsolete)</em></p>
<pre><code>Mouse.ChangeModeHotspot(CursorMode, int x, int y)</code></pre>
<p>Permanently changes the specified mouse cursor mode&#8217;s hotspot on the cursor graphic to (X,Y). This is the offset into the graphic where the click takes effect. (0,0) is the upper left corner of the cursor graphic.</p>
<pre><code>mouse.ChangeModeHotspot(eModeWalkto, 10, 10);</code></pre>
<p>will change the cursor&#8217;s hotspot for walk mode to coordinates 10,10.</p>
<p><em>See Also: ,</em></p>
<h3 id="changemodeview">ChangeModeView</h3>
<pre><code>Mouse.ChangeModeView(CursorMode, int view)</code></pre>
<p>Changes the specified mouse cursor mode&#8217;s animation view to VIEW.</p>
<p>You can pass <em>view as -1 to stop the cursor from animating.</em></p>
<p>This allows you to dynamically change the view used for the cursor&#8217;s animation while the game is running.</p>
<pre><code>mouse.ChangeModeView(eModeLookat, ROLLEYES);</code></pre>
<p>will change the Look cursor&#8217;s view to ROLLEYES.</p>
<p><em>See Also: ,</em></p>
<h3 id="click-mouse">Click (mouse)</h3>
<pre><code>static void Click(MouseButton)</code></pre>
<p>Fires mouse click event at current mouse position (at mouse.x / mouse.y). This is in all aspects identical to what would happen if a player clicked actual mouse button. This function may be useful to simulate player actions in game, or create automatic demonstrations (like tutorials).</p>
<pre><code>Mouse.SetPosition(100, 100);
Mouse.Click(eMouseLeft);</code></pre>
<p>This will simulate user click at (100,100).</p>
<p><em>Compatibility: Supported by <strong>AGS 3.4.0 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="controlenabled-property">ControlEnabled property</h3>
<pre><code>readonly static bool Mouse.ControlEnabled;</code></pre>
<p>Tells if the mouse cursor movement is currently being controlled by AGS engine; otherwise it is controlled by operation system. This is usually true only when game is run in fullscreen mode.</p>
<p>This property may be useful to know if custom mouse speed setting is applied or not.</p>
<pre><code>sldMouseSpeed.Visible = Mouse.ControlEnabled;</code></pre>
<p>makes mouse speed slider visible only if the mouse is controlled by the game.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.3.5 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="disablemode">DisableMode</h3>
<p><em>(Formerly known as DisableCursorMode, which is now obsolete)</em></p>
<pre><code>Mouse.DisableMode(int mode)</code></pre>
<p>Disables the mouse cursor MODE. Any attempts to set the cursor to this mode while it is disabled (such as using UseModeGraphic) will fail. This function also greys out and disables any interface buttons whose left-click command is set as &#8220;Set mode X&#8221;, where X is equal to MODE.</p>
<p>If the current cursor mode is MODE, then the engine will change it to the next enabled standard cursor.</p>
<pre><code>mouse.DisableMode(eModeWalkto);</code></pre>
<p>will make the walk mode unavailable until it&#8217;s enabled again.</p>
<p><em>See Also:</em></p>
<h3 id="enablemode">EnableMode</h3>
<p><em>(Formerly known as EnableCursorMode, which is now obsolete)</em></p>
<pre><code>Mouse.EnableMode(int mode)</code></pre>
<p>Re-enables the mouse cursor mode MODE. This function also enables any interface buttons which were disabled by the DisableMode command.</p>
<pre><code>mouse.EnableMode(eModeWalkto);</code></pre>
<p>will enable cursor mode walk which was disabled before.</p>
<p><em>See Also:</em></p>
<h3 id="getmodegraphic">GetModeGraphic</h3>
<pre><code>static int Mouse.GetModeGraphic(CursorMode)</code></pre>
<p>Returns the sprite slot number of the specified mouse cursor mode.</p>
<p>This could be useful if you want to change it manually with ChangeModeGraphic but be able to remember what it was before.</p>
<pre><code>Display(&quot;The current mouse cursor sprite is %d.&quot;, mouse.GetModeGraphic(mouse.Mode));</code></pre>
<p>will display the sprite slot number of the current mouse cursor.</p>
<p><em>See Also:</em></p>
<h3 id="isbuttondown">IsButtonDown</h3>
<p><em>(Formerly known as global function IsButtonDown, which is now obsolete)</em></p>
<pre><code>Mouse.IsButtonDown(MouseButton)</code></pre>
<p>Tests whether the user has the specified mouse button down. BUTTON must either be eMouseLeft, eMouseRight or eMouseMiddle.</p>
<p>Returns <em>true if the button is currently pressed, </em>false if not. This could be used to test the length of a mouse click and similar effects.**</p>
<pre><code>int timer=0;  // (at top of script file)
if (mouse.IsButtonDown(eMouseRight)) {
  if (timer == 40) {
    Display(&quot;You pressed the right button for 1 sec&quot;);
    timer = 0;
  }
  else {
    timer++;
  }
}</code></pre>
<p>will display the message if the player presses the right button for 1 sec.</p>
<p><em>Compatibility: </em>eMouseMiddle supported by <strong>AGS 3.2.0 and later versions. ILBRK <em>eMouseLeft and </em>eMouseRight supported by all versions.</strong>****</p>
<p><em>See Also:</em></p>
<h3 id="savecursoruntilitleaves">SaveCursorUntilItLeaves</h3>
<p><em>(Formerly known as SaveCursorForLocationChange, which is now obsolete)</em></p>
<pre><code>Mouse.SaveCursorUntilItLeaves()</code></pre>
<p>Saves the current mouse cursor, and restores it when the mouse leaves the current hotspot, object or character.</p>
<p>This allows you to temporarily change the mouse cursor when the mouse moves over a hotspot, and have it automatically change back to the old cursor when the player moves the mouse away.</p>
<p><strong>NOTE: You must call this </strong>BEFORE you change to your new temporary cursor, or the new cursor will be saved by this command.****</p>
<pre><code>mouse.SaveCursorUntilItLeaves();
mouse.Mode = eModeTalk;</code></pre>
<p>will change the cursor mode to Talk for as long as the mouse is over the current object</p>
<p><em>See Also:</em></p>
<h3 id="selectnextmode">SelectNextMode</h3>
<p><em>(Formerly known as SetNextCursorMode, which is now obsolete)</em></p>
<pre><code>Mouse.SelectNextMode()</code></pre>
<p>Selects the next enabled mouse cursor mode. This is useful for Sierra-style right-click cycling through modes. This function will choose the next mode marked as a Standard Mode, and will also use the Use Inventory mode if the player has an active inventory item.</p>
<p><em>See Also:</em></p>
<h3 id="setbounds">SetBounds</h3>
<p><em>(Formerly known as SetMouseBounds, which is now obsolete)</em></p>
<pre><code>Mouse.SetBounds(int left, int top, int right, int bottom)</code></pre>
<p>Restricts the area where the mouse can move on screen. The four parameters are the relevant pixel co-ordinates of that edge of the bounding rectangle. They are in the usual range (0,0) - (320,200).</p>
<p>You can pass (0,0,0,0) to disable the bounding rectangle and allow the mouse to move everywhere, as usual.</p>
<p><em>NOTE: The effect of this function only lasts until the player leaves the screen, at which point the cursor bounds will be reset.</em></p>
<pre><code>mouse.SetBounds(160, 100, 320, 200);</code></pre>
<p>will restrict the mouse cursor to the bottom-right quarter of the screen.</p>
<p><em>See Also:</em></p>
<h3 id="setposition-mouse">SetPosition (mouse)</h3>
<p><em>(Formerly known as SetMousePosition, which is now obsolete)</em></p>
<pre><code>Mouse.SetPosition(int x, int y)</code></pre>
<p>Moves the mouse pointer to screen co-ordinates (X,Y). They are in the usual range (0,0) - (320,200/240). The mouse.x and mouse.y variables will be updated to reflect the new position.</p>
<p><strong>NOTE: Only use this command when absolutely necessary. Moving the mouse cursor for the player is a sure way to irritate them if you do it too often during the game.</strong></p>
<pre><code>mouse.SetPosition(160, 100);</code></pre>
<p>will place the mouse cursor in the centre of the screen.</p>
<p><em>See Also:</em></p>
<h3 id="speed-property-mouse">Speed property (mouse)</h3>
<pre><code>static float Mouse.Speed;</code></pre>
<p>Gets/sets in-game mouse cursor speed. 1.0 is default, values in the range 0-1 make cursor movement slower, values higher than 1 make cursor movement faster.</p>
<p>Mouse speed changed this way will be saved to the configuration file when player exits the game. Next time game starts it will restore the last value you applied, unless player has modified it in the setup program.</p>
<p>The custom mouse speed is only applied if mouse cursor movement is currently being controlled by the game, which is usually true only when game is run in fullscreen mode. Setting this property has no effect otherwise. You can use to know if speed will be applied.</p>
<p><strong>NOTE: It is strongly advised to </strong>NEVER use this parameter to achieve gameplay effect (such as character&#8217;s loss of coordination, and so forth).****</p>
<pre><code>Mouse.Speed = IntToFloat(sldMouseSpeed.Value) / 10.0;</code></pre>
<p>converts slider control&#8217;s position into mouse speed.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.3.5 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="update-1">Update</h3>
<p><em>(Formerly known as RefreshMouse, which is now obsolete)</em></p>
<pre><code>Mouse.Update();</code></pre>
<p>Updates the global variables &#8220;mouse.x&#8221; and &#8220;mouse.y&#8221; with the current position of the mouse. Normally, these variables are set just before each script function is executed. However, if you have a very long script where the mouse may have moved since the start of the function, and you need the exact current location, then this command will update the variables.</p>
<pre><code>Display(&quot;The mouse was at: %d, %d.&quot;, mouse.x, mouse.y);
mouse.Update();
Display(&quot;The mouse is now at: %d, %d.&quot;, mouse.x, mouse.y);</code></pre>
<p>will display the mouse position just before each dialog box is displayed</p>
<h3 id="usedefaultgraphic">UseDefaultGraphic</h3>
<p><em>(Formerly known as SetDefaultCursor, which is now obsolete)</em></p>
<pre><code>Mouse.UseDefaultGraphic()</code></pre>
<p>Changes the appearance of the mouse cursor to the default for the current cursor mode. Use this to restore the cursor picture after you changed it with the UseModeGraphic function.</p>
<p><em>See Also:</em></p>
<h3 id="usemodegraphic">UseModeGraphic</h3>
<p><em>(Formerly known as SetMouseCursor, which is now obsolete)</em></p>
<pre><code>Mouse.UseModeGraphic(CursorMode)</code></pre>
<p>Changes the appearance of the mouse cursor to use the specified cursor. Unlike the Mouse.Mode property, this does not change the mode used if the user clicks on a hotspot. This is useful for displaying a &#8220;wait&#8221; cursor temporarily.</p>
<pre><code>mouse.UseModeGraphic(eModeWait);</code></pre>
<p>will change the mouse cursor to the cursor &#8216;Wait&#8217; specified in the Cursors tab.</p>
<p><em>See Also: , ,</em></p>
<h3 id="mode-property-mouse">Mode property (mouse)</h3>
<p><em>(Formerly known as GetCursorMode, which is now obsolete)ILBRK </em>(Formerly known as SetCursorMode, which is now obsolete)**</p>
<pre><code>int Mouse.Mode;</code></pre>
<p>Gets/sets the current mode of the mouse cursor. This is one of the cursor modes from your Cursors tab (but with eMode prepended). For example, a cursor mode called &#8220;Walk to&#8221; on your cursors tab would be eModeWalkto.</p>
<p>Setting this changes both the appearance of the cursor and the Cursor Mode used if the player clicks on a hotspot.</p>
<pre><code>if (mouse.Mode == eModeWalkto)
{
   // code here
}</code></pre>
<p>will execute the code only if the current cursor mode is MODE 0 (WALK).</p>
<p><em>See Also: , ,</em></p>
<h3 id="visible-property-mouse">Visible property (mouse)</h3>
<p><em>(Formerly known as HideMouseCursor, which is now obsolete)ILBRK </em>(Formerly known as ShowMouseCursor, which is now obsolete)**</p>
<pre><code>bool Mouse.Visible;</code></pre>
<p>Gets/sets whether the mouse cursor is visible. This is initially true by default, but setting this to false is useful for briefly hiding the cursor on occasions when you don&#8217;t want it around.</p>
<p>If you want the Lucasarts-style where the mouse cursor is never visible during cutscenes then a much easier solution is simply to import a transparent graphic over the default wait cursor, so that the Wait cursor becomes invisible.</p>
<pre><code>mouse.Visible = false;
Wait(40);
mouse.Visible = true;</code></pre>
<p>hides the mouse, waits for a second, then turns it back on again</p>
<p><em>See Also:</em></p>
<h2 id="multimedia-functions">Multimedia functions</h2>
<h3 id="cdaudio">CDAudio</h3>
<pre><code>CDAudio (eCDAudioFunction, int param)</code></pre>
<p>This function allows you to play and control an audio CD in your game. Different tasks are performed, depending on the value of the AudioFunction parameter. If there is no CD-ROM drive on the system, the function does nothing.</p>
<p>The PARAM parameter is used by some of the functions for various reasons; if it is not needed for the particular function you are calling, pass zero instead.</p>
<p>The tasks performed are as follows depending on the COMMAND parameter:</p>
<pre><code>eCDIsDriverPresent - checks if there is a CD-ROM driver available on
   the system. Returns 1 if there is, and 0 if there is not.
eCDGetPlayingStatus - checks whether the CD drive is currently playing
   an audio track. Returns 1 if it is, and 0 if it is not.
eCDPlayTrack - starts playback from track PARAM on the CD. If the track
   does not exist, or if it is a data track, nothing happens.
eCDPausePlayback - pauses the currently playing audio track.
eCDResumePlayback - continues from where the track was paused.
eCDGetNumTracks - returns the number of tracks on the CD
   currently in the drive. If the drive is empty, returns 0.
eCDEject - ejects the drive tray if the drive has the ability. This is
   a feature you&#39;ll play with to start off because it&#39;s neat, and then
   realize that it has no real use in your game.
   Your script does not continue until the drive is fully ejected.
eCDCloseTray - the reverse of Eject. This will pull the drive tray back
   in again. Your script does not continue until the drive has been
   fully closed.
eCDGetCDDriveCount - returns the number of CD drives in the
   system, normally 1.
eCDSelectActiveCDDrive - changes the current CD drive to PARAM,
   where PARAM ranges from 1 to (number of CD drives). All the other
   CD Audio functions operate on the current CD drive.</code></pre>
<p>NOTE: These CD Audio functions are slow compared to all the other script functions. This will not be noticeable if you call them from most scripts, but using CDAudio in a repeatedly_execute script will noticeably slow down the game.</p>
<p><strong>Cross-Platform Support</strong></p>
<p>Windows: ** Yes, but supports 1 CD-ROM drive only ILBRK MS-DOS: ** Yes, if CD-ROM device driver loaded ILBRK Linux: ** Yes, but supports 1 CD-ROM drive only ILBRK MacOS: ** No ********</p>
<pre><code>CDAudio(eCDPlayTrack, 3);</code></pre>
<p>will play track 3 of the CD that&#8217;s in the CD ROM drive.</p>
<h3 id="isaudioplaying">IsAudioPlaying</h3>
<p><em>(Formerly known as IsMusicPlaying, which is now obsolete) ILBRK </em>(Formerly known as IsSoundPlaying, which is now obsolete)**</p>
<pre><code>static bool Game.IsAudioPlaying(optional AudioType)</code></pre>
<p>Returns <em>true if there is currently audio playing of the specified type. If you don&#8217;t supply an audio type, then </em>true will be returned if there is any audio at all playing in the game.**</p>
<p>If no audio of the specified type is playing, returns <em>false. You can use this to wait for some music to finish playing, for example.</em></p>
<pre><code>while (Game.IsAudioPlaying(eAudioTypeMusic))
{
  Wait(1);
}</code></pre>
<p>waits for any currently playing music to finish.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="isspeechvoxavailable">IsSpeechVoxAvailable</h3>
<pre><code>IsSpeechVoxAvailable()</code></pre>
<p>Returns whether the SPEECH.VOX file is being used by the game. This could be useful if you have an optional speech download pack, and you want to know whether the player has it or not.</p>
<p>Returns 1 if the speech files are available, 0 if not.</p>
<pre><code>if (IsSpeechVoxAvailable()==0)
    Display (&quot;You don&#39;t have the voice pack&quot;);</code></pre>
<p>will display a message if the voice pack is not available.</p>
<p><strong>NOTE: This function used to be called IsVoxAvailable, but has now been renamed to avoid confusion.</strong></p>
<p><em>See Also:</em></p>
<h3 id="playflic">PlayFlic</h3>
<pre><code>PlayFlic (int flic_number, int options)</code></pre>
<p>Plays a FLI or FLC animation. The game checks for FLICx.FLC and FLICx.FLI (where X is FLIC_NUMBER) and if it finds one, plays it.</p>
<p>OPTIONS has these meanings:</p>
<pre><code>0  player can&#39;t skip animation
1  player can press ESC to skip animation
2  player can press any key or click mouse to skip animation
+10 (ie.10,11,12) do not stretch to full-screen, just play at flc size
+100 do not clear the screen before starting playback</code></pre>
<p>The game is paused while the animation plays.</p>
<pre><code>PlayFlic(2, 1);</code></pre>
<p>will play flic2 and the player will be able to skip the flic by pressing the ESC key.</p>
<p><em>See Also:</em></p>
<h3 id="playsilentmidi">PlaySilentMIDI</h3>
<pre><code>PlaySilentMIDI (int music_number)</code></pre>
<p>This command is obsolete.</p>
<p>Use the AudioClip.Play command and set its Volume property to 0 to simulate this effect.</p>
<p><em>See Also: ,</em></p>
<h3 id="playvideo">PlayVideo</h3>
<pre><code>PlayVideo (string filename, VideoSkipStyle, int flags)</code></pre>
<p>Plays an AVI, MPG or OGG Theora file, or any other file type supported by Media Player. The game is paused while the video plays.</p>
<p><em>VideoSkipStyle defines how the player can skip the video:</em></p>
<pre><code>eVideoSkipNotAllowed     player can&#39;t skip video
eVideoSkipEscKey         player can press ESC to skip video
eVideoSkipAnyKey         player can press any key to skip video
eVideoSkipAnyKeyOrMouse  player can press any key or click mouse to skip</code></pre>
<p>FLAGS can be one of the following:</p>
<pre><code>0: the video will be played at original size, with AVI audio
1: the video will be stretched to full screen, with appropriate
   black borders to maintain its aspect ratio and AVI audio.
10: original size, with game audio continuing (AVI audio muted)
11: stretched to full screen, with game audio continuing (AVI audio muted)</code></pre>
<p>There are two distinct type of videos that the PlayVideo function can play.</p>
<p>The first is OGG Theora, which is a recently introduced video file format. AGS has built-in support for playing these videos, so everyone who plays your game will be able to see the video. OGG Theora videos are also built into the game EXE file when you compile the game (just make sure the file has a .OGV extension and is placed in your main game folder).</p>
<p>The second type of files that AGS can play is anything supported by Windows Media Player. This includes AVI, MPG and more. However, in order for these to work on the player&#8217;s system, they will need to have the correct codecs installed. For example, if you create your video with the XVid codec, the player will need to have XVid installed to be able to view it. These types of video cannot be included into the game EXE, so you will have to place them separately in the Compiled folder for them to work.</p>
<p><strong>NOTE: In 256-colour games, PlayVideo is not supported. Please use a FLC/FLI video with the command instead.</strong></p>
<p><strong>Cross-Platform Support</strong></p>
<p>Windows: ** Yes ILBRK MS-DOS: ** No ILBRK Linux: ** No ILBRK MacOS: ** Yes ********</p>
<pre><code>PlayVideo(&quot;intro.mpg&quot;, eVideoSkipEscKey, 1);</code></pre>
<p>will play the video Intro.mpg, allowing the player to skip with ESC if they&#8217;ve seen it before.</p>
<p><em>Compatibility: OGG Theora supported by <strong>AGS 3.1.1 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="setaudiotypespeechvolumedrop">SetAudioTypeSpeechVolumeDrop</h3>
<p><em>(Formerly known as game.speech_music_drop, which is now obsolete)</em></p>
<pre><code>static Game.SetAudioTypeSpeechVolumeDrop(AudioType, int volumeReduction)</code></pre>
<p>Changes the VolumeReductionWhileSpeechPlaying of the specified <em>AudioType. This changes the setting, initially set in the Audio Types part of the editor. It specifies how much the volume of clips of this type will be reduced by while speech is playing.</em></p>
<p>Specify 0 for no volume adjustment, up to 100 which will completely silence these audio clips while speech is playing.</p>
<pre><code>Game.SetAudioTypeSpeechVolumeDrop(eAudioTypeMusic, 25);</code></pre>
<p>will reduce the volume of Music audio clips by 25 percentage points while speech is playing.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="setaudiotypevolume">SetAudioTypeVolume</h3>
<p><em>(Formerly known as SetSoundVolume, which is now obsolete)</em></p>
<pre><code>static Game.SetAudioTypeVolume(AudioType, int volume, ChangeVolumeType)</code></pre>
<p>Changes the default volume of the specified <em>AudioType. This allows you to change the volume of all audio clips of a particular type, so that you can easily control sound and music volume separately, for example.</em></p>
<p>VOLUME ranges from 0-100, where 100 is the loudest, and 0 will mute sound of that type completely.</p>
<p>Possible values for <em>ChangeVolumeType are:</em></p>
<pre><code>eVolChangeExisting      change the volume of currently playing audio clips
eVolSetFutureDefault    change the default volume for clips of this type
eVolExistingAndFuture   change both currently playing and future audio</code></pre>
<p>Initially general AudioType volume is not set, meaning that all future audio will be playing using their own custom volumes. If you use the <em>eVolSetFutureDefault or </em>eVolExistingAndFuture, then the DefaultVolume property for all audio clips of this type will be overridden. This means that any DefaultVolume set up in the editor will be lost.**</p>
<pre><code>Game.SetAudioTypeVolume(eAudioTypeMusic, 20, eVolExistingAndFuture);</code></pre>
<p>will change the volume of all currently playing and future music to <code>20%</code>.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.0 and later versions.</strong></em></p>
<p><em>See Also: , ,</em></p>
<h3 id="setspeechvolume">SetSpeechVolume</h3>
<pre><code>SetSpeechVolume (int volume)</code></pre>
<p>Sets the volume for in-game speech. VOLUME ranges from 0-255, where 255 is the loudest. The default speech volume is 255 so this function can only be used to reduce the volume.</p>
<pre><code>SetSpeechVolume(200);</code></pre>
<p>will set the speech volume to 200.</p>
<p><em>See Also:</em></p>
<h3 id="stopaudio">StopAudio</h3>
<p><em>(Formerly known as Game.StopSound, which is now obsolete) ILBRK </em>(Formerly known as StopMusic, which is now obsolete)**</p>
<pre><code>static Game.StopAudio(optional AudioType)</code></pre>
<p>Stops all currently playing audio. If you pass no parameters, then all audio will be stopped. Alternatively, you can pass one of the AudioTypes which will only stop audio clips of that type.</p>
<p>If there are any audio clips queued up with PlayQueued, they will also be cancelled.</p>
<pre><code>Game.StopAudio();</code></pre>
<p>will stop all currently playing audio.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.0 and later versions.</strong></em></p>
<p><em>See Also: , ,</em></p>
<h2 id="object-functions-and-properties">Object functions and properties</h2>
<h3 id="animate-object">Animate (object)</h3>
<p><em>(Formerly known as AnimateObject, which is now obsolete) ILBRK </em>(Formerly known as AnimateObjectEx, which is now obsolete)**</p>
<pre><code>Object.Animate(int loop, int delay, optional RepeatStyle,
               optional BlockingStyle, optional Direction)</code></pre>
<p>Starts the object animating, using loop number LOOP of its current view. The overall speed of the animation is set with DELAY, where 0 is the fastest, and increasing numbers mean slower. The delay for each frame is worked out as DELAY + FRAME SPD, so the individual frame speeds are relative to this overall speed.</p>
<p>The <em>RepeatStyle parameter sets whether the animation will continuously repeat the cycling through the frames. This can be </em>eOnce (or zero), in which case the animation will start from the first frame of LOOP, and go through each frame in turn until the last frame, where it will stop. If RepeatStyle is <em>eRepeat (or 1), then when the last frame is reached, it will go back to the first frame and start over again with the animation. If RepeatStyle is 2 then it will do the animation once, but then return the graphic to the first frame and stop (whereas repeat=0 will leave the graphic on the last frame).</em>**</p>
<p>For <em>blocking you can pass either eBlock (in which case the function will wait for the animation to finish before returning), or eNoBlock (in which case the animation will start to play, but your script will continue). The default is eBlock.</em></p>
<p><em>direction specifies which way the animation plays. You can either pass eForwards (the default) or eBackwards.</em></p>
<p>You need to use SetView at some stage before this command, in order to set up the object&#8217;s current view.</p>
<pre><code>object[0].Animate(2, 5);
object[1].Animate(1, 3, eOnce, eBlock, eBackwards);</code></pre>
<p>will animate object 0 using loop 2 of its current view, at speed 5, and play the animation once only. This happens in the background. Then, object 1 will animate backwards using loop 1 of its current view, at speed 3. The function won&#8217;t return until the animation is finished.</p>
<p><em>See Also: , , ,</em></p>
<h3 id="getatscreenxy-object">GetAtScreenXY (object)</h3>
<p><em>(Formerly known as global function GetObjectAt, which is now obsolete)</em></p>
<pre><code>static Object* Object.GetAtScreenXY(int x, int y)</code></pre>
<p>Checks if there is a room object at SCREEN co-ordinates (X,Y). Returns the object if there is, or <em>null if there is not.</em></p>
<p>See the description of GetLocationName for more on screen co-ordinates.</p>
<pre><code>if (Object.GetAtScreenXY(211,145) == oRock) {
  // code here
}</code></pre>
<p>will execute the code only if object oRock is on the screen coordinates 211,145.</p>
<p><em>See Also: ,</em></p>
<h3 id="getproperty-object">GetProperty (object)</h3>
<p><em>(Formerly known as GetObjectProperty, which is now obsolete)</em></p>
<pre><code>Object.GetProperty(string property)</code></pre>
<p>Returns the custom property setting of the PROPERTY for the specified object.</p>
<p>This command works with Number properties (it returns the number), and with Boolean properties (returns 1 if the box was checked, 0 if not).</p>
<p>Use the equivalent GetTextProperty function to get a text property.</p>
<pre><code>if (object[0].GetProperty(&quot;Value&quot;) &gt; 200)
  Display(&quot;Object 0&#39;s value is over 200!&quot;);</code></pre>
<p>will print the message if object 0 has its &#8220;Value&#8221; property set to more than 200.</p>
<p><em>See Also:</em></p>
<h3 id="gettextproperty-object">GetTextProperty (object)</h3>
<p><em>(Formerly known as GetObjectPropertyText, which is now obsolete) ILBRK </em>(Formerly known as Object.GetPropertyText, which is now obsolete)**</p>
<pre><code>String Object.GetTextProperty(string property)</code></pre>
<p>Returns the custom property setting of the PROPERTY for the specified object.</p>
<p>This command works with Text properties only. The property&#8217;s text will be returned from this function.</p>
<p>Use the equivalent GetProperty function to get a non-text property.</p>
<pre><code>String description = object[0].GetTextProperty(&quot;Description&quot;);
Display(&quot;Object 0&#39;s description: %s&quot;, description);</code></pre>
<p>will retrieve Object 0&#8217;s &#8220;description&#8221; property then display it.</p>
<p><em>See Also:</em></p>
<h3 id="setproperty-object">SetProperty (object)</h3>
<pre><code>bool Object.SetProperty(const string property, int value)</code></pre>
<p>Sets the new <em>value for the custom </em>property for the specified room object. Returns TRUE if such property exists and FALSE on failure.**</p>
<p>This command works with Number properties (it sets the numeric value), and with Boolean properties (sets FALSE is value is equal to 0, or TRUE otherwise).</p>
<p>Use the equivalent SetTextProperty function to set new text property value.</p>
<pre><code>oTable.SetProperty(&quot;ItemCapacity&quot;, 5);</code></pre>
<p>will change Table&#8217;s &#8220;ItemCapacity&#8221; custom property to 5.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.4.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="settextproperty-object">SetTextProperty (object)</h3>
<pre><code>void Object.SetTextProperty(const string property, const string value)</code></pre>
<p>Sets the new <em>value text for the custom </em>property for the specified room object.**</p>
<p>This command works with Text properties only. The property&#8217;s text will be changed to new value.</p>
<p>Use the equivalent SetProperty function to set a non-text property.</p>
<pre><code>oTable.SetTextProperty(&quot;Description&quot;, &quot;A dull furniture&quot;);</code></pre>
<p>will change table&#8217;s &#8220;description&#8221; property.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.4.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="iscollidingwithobject-object">IsCollidingWithObject (object)</h3>
<p><em>(Formerly known as AreObjectsColliding, which is now obsolete)</em></p>
<pre><code>bool Object.IsCollidingWithObject(Object* obj2)</code></pre>
<p>Checks if the specified object and OBJ2 are touching each other. Returns <em>true if they are, and </em>false if they are not.**</p>
<p><strong>NOTE: This function only performs a rectangular check, even when pixel-perfect click detection is turned on.</strong></p>
<pre><code>if (object[2].IsCollidingWithObject(object[3]))
{
  Display(&quot;object 2 and 3 are colliding!&quot;);
}</code></pre>
<p>will display the message if the objects 2 and 3 are colliding.</p>
<p><em>See Also:</em></p>
<h3 id="mergeintobackground">MergeIntoBackground</h3>
<p><em>(Formerly known as MergeObject, which is now obsolete)</em></p>
<pre><code>Object.MergeIntoBackground()</code></pre>
<p>Merges the object into the background scene for this room. By doing this, the object becomes part of the background and so does not slow the game down. This is a 1-way operation - once the object has been merged, it cannot be changed back and the state of the room is permanently altered. Therefore you should only use this function if a game event has occurred that means the room is permanently changed.</p>
<p><strong>NOTE: after calling this function, you cannot use the object any more and it is permanently removed from the game.</strong></p>
<p><strong>NOTE: objects can only be merged if the object graphic was imported at the same colour depth as the background graphic.</strong></p>
<pre><code>object[3].MergeIntoBackground();</code></pre>
<p>will merge the object&#8217;s image into the room&#8217;s background image and make the object unusable.</p>
<h3 id="move-object">Move (object)</h3>
<p><em>(Formerly known as MoveObject, which is now obsolete) ILBRK </em>(Formerly known as MoveObjectDirect, which is now obsolete)**</p>
<pre><code>Object.Move(int x, int y, int speed, optional BlockingStyle,
            optional WalkWhere);</code></pre>
<p>Starts the object moving from its current location to (X,Y). It will move at speed SPEED, which uses the same scale as the character Walk Speed values in the AGS Editor.</p>
<p>If <em>BlockingStyle is eNoBlock (the default), then control returns to the script immediately, and the object will move in the background.</em></p>
<p>If <em>BlockingStyle is eBlock then this command will wait for the object to finish moving before your script resumes.</em></p>
<p>If <em>WalkWhere is eWalkableAreas (the default), then the object will attempt to get as close a possible to (X,Y) by using the room&#8217;s walkable areas.</em></p>
<p>If <em>WalkWhere is eAnywhere, then the object will simply walk directly from its current location to (X,Y), ignoring the room walkable areas.</em></p>
<pre><code>object[2].Move(125, 40, 4, eBlock);</code></pre>
<p>will move object 2 to 125,40 and return control to the player when the object gets there.</p>
<p><em>See Also: , ,</em></p>
<h3 id="removetint-object">RemoveTint (object)</h3>
<p><em>(Formerly known as RemoveObjectTint, which is now obsolete)</em></p>
<pre><code>Object.RemoveTint()</code></pre>
<p>Undoes the effects of calling Tint, and returns the object to using the room&#8217;s ambient tint.</p>
<pre><code>object[1].Tint(0, 250, 0, 30, 100);
Wait(40);
object[1].RemoveTint();</code></pre>
<p>will tint object 1 green for a second, then turn it back to normal.</p>
<p><em>See Also:</em></p>
<h3 id="isinteractionavailable-object">IsInteractionAvailable (object)</h3>
<pre><code>Object.IsInteractionAvailable(CursorMode)</code></pre>
<p>Checks whether there is an event handler defined for activating the room object in cursor mode MODE.</p>
<p>This function is very similar to RunInteraction, except that rather than run the event handler script function, it simply returns <em>true if something would have happened, or </em>false if unhandled_event would have been run.**</p>
<pre><code>if (oDoor.IsInteractionAvailable(eModeInteract) == 0)
  Display(&quot;interacting with this door would not do anything.&quot;);</code></pre>
<p><em>Compatibility: Supported by <strong>AGS 3.4.0 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="runinteraction-object">RunInteraction (object)</h3>
<p><em>(Formerly known as RunObjectInteraction, which is now obsolete)</em></p>
<pre><code>Object.RunInteraction(CursorMode)</code></pre>
<p>Runs the event handler as if the player had clicked the mouse on the object in the current room, using the specified cursor mode.</p>
<pre><code>object[3].RunInteraction(eModeInteract);</code></pre>
<p>will execute the code defined in object 3&#8217;s &#8220;Interact with object&#8221; event handler.</p>
<p><em>See Also: , , ,</em></p>
<h3 id="setlightlevel-object">SetLightLevel (object)</h3>
<pre><code>void Object.SetLightLevel(int light_level)</code></pre>
<p>Sets individual light level for this room object.</p>
<p>The light level is from <strong>-100 to 100.</strong></p>
<p>In 8-bit games you cannot use positive light level for brightening effect, but you may still use negative values to produce darkening effect.</p>
<p>To disable object lighting and tinting effects, call SetLightLevel with parameter <em>light_level 0.</em></p>
<p><strong>NOTE: Setting a light level will disable any RGB tint set for the object.</strong></p>
<p><strong>NOTE: Object&#8217;s individual light level OVERRIDES both ambient light level and local region light level.</strong></p>
<pre><code>oLamp.LightLevel = 100;</code></pre>
<p>This will give the lamp maximal individual brightness.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.4.0 and later versions.</strong></em></p>
<p><em>See Also: , , ,</em></p>
<h3 id="setposition-object">SetPosition (object)</h3>
<p><em>(Formerly known as SetObjectPosition, which is now obsolete)</em></p>
<pre><code>Object.SetPosition(int x, int y)</code></pre>
<p>Changes the object&#8217;s position to (X,Y). These co-ordinates specify the lower-left hand corner of the object.</p>
<p>This command is equivalent to setting the object.X and object.Y separately, but provides a more convenient way of doing so.</p>
<p><strong>NOTE: This command cannot be used while the object is moving.</strong></p>
<pre><code>object[2].SetPosition(50, 100);</code></pre>
<p>will change object&#8217;s 2 position to 50,100.</p>
<p><em>See Also: ,</em></p>
<h3 id="setview">SetView</h3>
<p><em>(Formerly known as SetObjectFrame, which is now obsolete) ILBRK </em>(Formerly known as SetObjectView, which is now obsolete)**</p>
<pre><code>Object.SetView(int view, optional int loop, optional int frame)</code></pre>
<p>Sets the object&#8217;s view to VIEW, and changes the object&#8217;s graphic to FRAME of LOOP in VIEW. If you do not supply the loop or frame, they will be left unchanged.</p>
<p>You must use this command before calling Animate, so that AGS knows which view to animate the object with.</p>
<pre><code>object[3].SetView(14);
object[1].SetView(5, 2, 0);</code></pre>
<p>will change object 3&#8217;s view to view number 14, and change object 1 to view 5, loop 2, frame 0.</p>
<p><em>See Also:</em></p>
<h3 id="stopanimating-object">StopAnimating (object)</h3>
<pre><code>Object.StopAnimating()</code></pre>
<p>Stops the object from animating. It will remain on its current frame until you change it or start a new animation.</p>
<pre><code>if (object[2].Animating) {
  object[2].StopAnimating();
}</code></pre>
<p>will stop object 2 animating if it currently is doing so.</p>
<p><em>See Also: ,</em></p>
<h3 id="stopmoving-object">StopMoving (object)</h3>
<p><em>(Formerly known as StopObjectMoving, which is now obsolete)</em></p>
<pre><code>Object.StopMoving()</code></pre>
<p>Stops the object from moving. It will remain in its current position until any further commands are issued.</p>
<pre><code>if (object[2].Moving) {
  object[2].StopMoving();
}</code></pre>
<p>will stop object 2 moving if it currently is doing so.</p>
<p><em>See Also: , ,</em></p>
<h3 id="tint-object">Tint (object)</h3>
<p><em>(Formerly known as SetObjectTint, which is now obsolete)</em></p>
<pre><code>Object.Tint(int red, int green, int blue,
            int saturation, int luminance)</code></pre>
<p>Tints the object on the screen to (RED, GREEN, BLUE) with SATURATION percent saturation.</p>
<p>This function applies a tint to a specific object. For the meaning of all the parameters, see .</p>
<p>The tint set by this function overrides any ambient tint set for the room. For this reason, passing the SATURATION as 0 to this function does not turn it off - rather, it ensures that no tint is applied to the object (even if an ambient tint is set).</p>
<p>To remove the tint set by this function and return to using the ambient tint for this object, call .</p>
<p><strong>NOTE: This function only works in hi-colour games and with hi-colour sprites.</strong></p>
<pre><code>object[1].Tint(0, 250, 0, 30, 100);</code></pre>
<p>will tint object 1 green.</p>
<p><em>See Also: ,</em></p>
<h3 id="animating-property-object">Animating property (object)</h3>
<p><em>(Formerly known as IsObjectAnimating, which is now obsolete)</em></p>
<pre><code>readonly bool Object.Animating</code></pre>
<p>Returns 1 if the specified object is currently animating. ILBRK Returns 0 if the object has finished its animation.</p>
<p>This property is read-only. To change object animation, use the command.</p>
<pre><code>object[2].Animate(5, 0);
while (object[2].Animating) Wait(1);</code></pre>
<p>will animate object 2 and wait until the animation finishes.</p>
<p>In reality, you would simply use the Blocking parameter of Animate so you wouldn&#8217;t need to do this.</p>
<p><em>See Also: , , , ,</em></p>
<h3 id="baseline-property-object">Baseline property (object)</h3>
<p><em>(Formerly known as GetObjectBaseline, which is now obsolete) ILBRK </em>(Formerly known as SetObjectBaseline, which is now obsolete)**</p>
<pre><code>int Object.Baseline</code></pre>
<p>Gets/sets the object&#8217;s baseline. This allows you to modify the line you can set in the editor. You can disable the baseline (and revert to using the base of the object&#8217;s image on the screen) by setting it to 0.</p>
<p>Otherwise, set it to the Y screen co-ordinate you want to use, normally from 1 to 200 unless you have a taller than usual room.</p>
<p>If you want to get the baseline and it returns 0, then the baseline is the object&#8217;s Y co-ordinate.</p>
<pre><code>object[4].Baseline = 100;</code></pre>
<p>will change object&#8217;s 4 baseline to a line positioned at y coordinate 100.</p>
<p><em>See Also: , ,</em></p>
<h3 id="blockingheight-property-object">BlockingHeight property (object)</h3>
<pre><code>int Object.BlockingHeight</code></pre>
<p>Gets/sets the object&#8217;s blocking height.</p>
<p>The blocking height determines how large of a blocking rectangle the object exerts to stop characters walking through it. If this is set to 0 (the default), then the blocking rectangle is automatically calculated to be the object&#8217;s width, and 5 pixels high.</p>
<p>You can manually change the setting by entering a blocking height in pixels, which is the size of walkable area that the object effectively removes by being there.</p>
<p><strong>NOTE: This property has no effect unless the property is set to <em>true.</em></strong></p>
<pre><code>oRock.BlockingHeight = 20;</code></pre>
<p>will make the Rock object block 20 pixels high (10 above and 10 below its baseline)</p>
<p><em>See Also: ,</em></p>
<h3 id="blockingwidth-property-object">BlockingWidth property (object)</h3>
<pre><code>int Character.BlockingWidth</code></pre>
<p>Gets/sets the object&#8217;s blocking width.</p>
<p>The blocking width determines how large of a blocking rectangle the object exerts to stop characters walking through it. If this is set to 0 (the default), then the blocking rectangle is automatically calculated to be the object&#8217;s width, and 5 pixels high.</p>
<p>You can manually change the setting by entering a blocking width in pixels, which is the size of walkable area that the object effectively removes by being there.</p>
<p><strong>NOTE: This property has no effect unless the property is set to <em>true.</em></strong></p>
<pre><code>oRock.BlockingWidth = 50;</code></pre>
<p>will make the Rock object block 50 pixels wide (25 pixels to the left of his centre, and 25 to the right)</p>
<p><em>See Also: ,</em></p>
<h3 id="clickable-property-object">Clickable property (object)</h3>
<p><em>(Formerly known as SetObjectClickable, which is now obsolete)</em></p>
<pre><code>bool Object.Clickable</code></pre>
<p>Gets/sets whether the object is recognised as something which the player can interact with.</p>
<p>If this is set to 1, then the player can look at, speak to, and so on the object. If it is set to 0, then the object will not respond to clicks and the mouse will activate whatever is behind the object. This is useful if you are using the object for visual effects and don&#8217;t want it to be clicked on by the player.</p>
<pre><code>object[2].Clickable = 0;</code></pre>
<p>will make object 2 ignore clicks from the player.</p>
<p><em>See Also: ,</em></p>
<h3 id="frame-property-object">Frame property (object)</h3>
<pre><code>readonly int Object.Frame</code></pre>
<p>Gets the frame number that the object is currently set to. If the object is not currently assigned a view, this will be 0 (in which case the Graphic property will hold its sprite number).</p>
<p>This property is read-only. To change the frame, use the animation functions.</p>
<pre><code>Display(&quot;Object oDoor&#39;s frame is currently %d.&quot;, oDoor.Frame);</code></pre>
<p>will display the oDoor object&#8217;s current frame number</p>
<p><em>SeeAlso: , ,</em></p>
<h3 id="graphic-property-object">Graphic property (object)</h3>
<p><em>(Formerly known as GetObjectGraphic, which is now obsolete) ILBRK </em>(Formerly known as SetObjectGraphic, which is now obsolete)**</p>
<pre><code>int Object.Graphic</code></pre>
<p>Gets/sets the sprite slot number that the object is currently displayed as. You can get the slot number from the Sprite Manager. If the object is currently animating (from an Animate command) and you change the Graphic, then the animation will be stopped.</p>
<pre><code>object[2].Graphic = 100;</code></pre>
<p>will change the object 2&#8217;s image to the image stored in the sprite manager&#8217;s slot 100.</p>
<p><em>See Also:</em></p>
<h3 id="id-property-object">ID property (object)</h3>
<pre><code>readonly int Object.ID</code></pre>
<p>Gets the object&#8217;s ID number. This is the object&#8217;s number from the editor, and is useful if you need to interoperate with legacy code that uses the object&#8217;s number rather than name.</p>
<pre><code>MoveObject(oRock.ID, 100, 50, 5);</code></pre>
<p>uses the obsolete MoveObject function to move the Rock object to (100, 50) at speed 5.</p>
<h3 id="ignorescaling-property-object">IgnoreScaling property (object)</h3>
<pre><code>bool Object.IgnoreScaling</code></pre>
<p>Gets/sets whether the object is affected by walkable area scaling. This is equivalent, <strong>though opposite, to the &#8220;Use walkable area scaling&#8221; checkbox in the Objects pane of the editor.</strong></p>
<p>If this is set to true, the object will always be the same size. If it is set to false, then the object will be stretched or shrunk as appropriate on walkable areas.</p>
<pre><code>oDoor.IgnoreScaling = true;</code></pre>
<p>will tell the Door object not to be scaled on walkable areas.</p>
<p><em>See Also:</em></p>
<h3 id="ignorewalkbehinds-property-object">IgnoreWalkbehinds property (object)</h3>
<p><em>(Formerly known as SetObjectIgnoreWalkbehinds, which is now obsolete)</em></p>
<pre><code>bool Object.IgnoreWalkbehinds</code></pre>
<p>Sets whether the object is affected by walkbehind areas. Setting this to <em>false (the default setting) means that the object will be placed behind walk-behind areas according to the relevant baselines.</em></p>
<p>If this is set to <em>true, then the object will never be placed behind a walk-behind area. This is useful if for example you want an object to be a picture on a wall, and the wall can be walked behind - but you also want it to act correctly in relation to characters, so changing its baseline wouldn&#8217;t work.</em></p>
<p><strong>NOTE: enabling this property does not currently work properly when using the Direct3D driver.</strong></p>
<pre><code>object[1].IgnoreWalkbehinds = true;</code></pre>
<p>will make object 1 ignore walk behinds.</p>
<p><em>See Also: , ,</em></p>
<h3 id="loop-property-object">Loop property (object)</h3>
<pre><code>readonly int Object.Loop</code></pre>
<p>Gets the loop that the object is currently set to. If the object is not currently assigned a view, this will be 0 (in which case the Graphic property will hold its sprite number).</p>
<p>This property is read-only. To change the loop, use the animation functions.</p>
<pre><code>Display(&quot;Object oDoor&#39;s loop is currently %d.&quot;, oDoor.Loop);</code></pre>
<p>will display the oDoor object&#8217;s current loop number</p>
<p><em>SeeAlso: , ,</em></p>
<h3 id="moving-property-object">Moving property (object)</h3>
<p><em>(Formerly known as IsObjectMoving, which is now obsolete)</em></p>
<pre><code>readonly bool Object.Moving</code></pre>
<p>Returns 1 if the object is currently moving, or 0 if not.</p>
<p>This property is read-only; to change the object&#8217;s movement, use the and commands.</p>
<pre><code>object[2].Move(125,40,3);
while (object[2].Moving) Wait(1);</code></pre>
<p>will move object 2 to 125,40 and return control to the player when the object gets there.</p>
<p><em>See Also: ,</em></p>
<h3 id="name-property-object">Name property (object)</h3>
<p><em>(Formerly known as GetObjectName, which is now obsolete) ILBRK </em>(Formerly known as Object.GetName, which is now obsolete)**</p>
<pre><code>readonly String Object.Name;</code></pre>
<p>Gets the name of the object.</p>
<p><strong>NOTE: This property is read-only. It is not currently possible to change the name of an object at run-time.</strong></p>
<pre><code>Display(&quot;Object 0&#39;s name is %s.&quot;, object[0].Name);</code></pre>
<p>will retrieve and then display object 0&#8217;s name.</p>
<p><em>See Also:</em></p>
<h3 id="solid-property-object">Solid property (object)</h3>
<pre><code>bool Object.Solid</code></pre>
<p>Gets/sets whether the object can be walked through by characters.</p>
<p>If this is set to true, then the object is solid and will block the path of solid characters. If this is set to false, then the object can be walked through by characters.</p>
<p><strong>NOTE: solid objects only block characters, they don&#8217;t block other objects from moving through them.</strong></p>
<pre><code>oSmallrock.Solid = true;</code></pre>
<p>will mean that the Smallrock object blocks the path of characters.</p>
<p><em>See Also: ,</em></p>
<h3 id="transparency-property-object">Transparency property (object)</h3>
<p><em>(Formerly known as SetObjectTransparency, which is now obsolete)</em></p>
<pre><code>int Object.Transparency</code></pre>
<p>Gets/sets the object&#8217;s transparency level.</p>
<p>If this is set to 100, it means that the object is totally invisible, and lower values represent varying levels of transparency. Set this to 0 to stop the object being transparent.</p>
<p><strong>NOTE: Transparency only works in 16-bit and 32-bit colour games.</strong></p>
<p><strong>NOTE: When using the DirectX 5 driver, a large transparent object can significantly slow down AGS.</strong></p>
<p>Some rounding is done internally when the transparency is stored &#8211; therefore, if you get the transparency after setting it, the value you get back might be one out. Therefore, using a loop with <code>object[0].Transparency++;</code> is not recommended as it will probably end too quickly.</p>
<p>In order to fade an object in/out, the best approach is shown in the example below:</p>
<pre><code>int trans = object[0].Transparency;
while (trans &lt; 100) {
  trans++;
  object[0].Transparency = trans;
  Wait(1);
}</code></pre>
<p>will gradually fade out the object from its current transparency level to being fully invisible.</p>
<p><em>See Also: ,</em></p>
<h3 id="view-property-object">View property (object)</h3>
<pre><code>readonly int Object.View</code></pre>
<p>Gets the view that the object is currently set to. This is either the view number, or 0 if the object is not currently assigned a view (in which case the Graphic property will hold its sprite number instead).</p>
<p>This property is read-only. To change the view, use the SetView function. To remove the view, set the Graphic property to a sprite slot.</p>
<pre><code>Display(&quot;Object oDoor&#39;s view is currently view %d.&quot;, oDoor.View);</code></pre>
<p>will display the oDoor object&#8217;s current view number</p>
<p><em>SeeAlso: , , ,</em></p>
<h3 id="visible-property-object">Visible property (object)</h3>
<p><em>(Formerly known as IsObjectOn, which is now obsolete) ILBRK </em>(Formerly known as ObjectOff, which is now obsolete) ILBRK <em>(Formerly known as ObjectOn, which is now obsolete)</em>**</p>
<pre><code>bool Object.Visible</code></pre>
<p>Gets/sets the visible state of the object. If this is 1 (true), the object is switched on and visible in the room. If you set this to 0 (false), the object disappears and no longer appears in the room.</p>
<pre><code>object[5].Visible = false;</code></pre>
<p>will make object number 5 in the current room disappear.</p>
<h3 id="x-property-object">X property (object)</h3>
<p><em>(Formerly known as GetObjectX, which is now obsolete)</em></p>
<pre><code>int Object.X</code></pre>
<p>Gets/sets the X co-ordinate of the object.</p>
<p><strong>NOTE: This property cannot be changed while the object is moving.</strong></p>
<pre><code>Display(&quot;Object 1&#39;s X co-ordinate is %d.&quot;, object[1].X);</code></pre>
<p>will display the X co-ordinate of object 1.</p>
<p><em>See Also: , , ,</em></p>
<h3 id="y-property-object">Y property (object)</h3>
<p><em>(Formerly known as GetObjectY, which is now obsolete)</em></p>
<pre><code>int Object.Y</code></pre>
<p>Gets/sets the Y co-ordinate of the object, which is the bottom of the object&#8217;s image.</p>
<p><strong>NOTE: This property cannot be changed while the object is moving.</strong></p>
<p><strong>NOTE: If you try to use this co-ordinate with Object.GetAtScreenXY, you will find that the object does not get picked up. The object&#8217;s sprite is drawn from the Y co-ordinate at (Object.Y - Height) to (Object.Y - 1).</strong></p>
<pre><code>Display(&quot;Object 1&#39;s Y co-ordinate is %d.&quot;, object[1].Y);</code></pre>
<p>will display the Y co-ordinate of object 1.</p>
<p><em>See Also: , , ,</em></p>
<h2 id="overlay-functions-and-properties">Overlay functions and properties</h2>
<h3 id="creategraphical">CreateGraphical</h3>
<p><em>(Formerly known as CreateGraphicOverlay, which is now obsolete)</em></p>
<pre><code>static Overlay* Overlay.CreateGraphical(int x, int y, int slot, bool transparent)</code></pre>
<p>Creates a screen overlay containing a copy of the image from SLOT in the Sprite Manager. The image is placed at (X,Y) on the screen (these are screen co-ordinates, not room co-ordinates).</p>
<p>If <em>transparent is true then the overlay will be drawn in the same way as characters/objects, if it is false then a black rectangle will be painted behind the sprite.</em></p>
<p>See the description of for more on overlays.</p>
<pre><code>Overlay* myOverlay = Overlay.CreateGraphical(100, 100, 300, true);
Wait(40);
myOverlay.Remove();</code></pre>
<p>will create an overlay of the image stored in sprite manager&#8217;s slot 300, at the coordinates 100,100. It will display for 1 second, then remove it.</p>
<p><em>See Also: ,</em></p>
<h3 id="createtextual">CreateTextual</h3>
<p><em>(Formerly known as CreateTextOverlay, which is now obsolete)</em></p>
<pre><code>static Overlay* Overlay.CreateTextual(int x, int y, int width,
                                      FontType font, int color, string text)</code></pre>
<p>Creates a screen overlay containing the text you pass at the position specified. A screen overlay looks identical to the way speech text is displayed in conversations, except that with this command the text stays on the screen until either you remove it with the Remove command, or the player goes to a different room, in which case it is automatically removed.</p>
<p>The X and Y parameters specify the upper-left corner of where the text will be written. WIDTH is the width, in pixels, of the text area. FONT is the font number from the editor to use (0 is the normal font, 1 is the speech font). COLOR is the text color - use one of the colours from 1 to 15. Finally, TEXT is obviously the text that gets displayed.</p>
<p>The function returns the Overlay, which you use later to reposition and remove the overlay.</p>
<p>You can insert the value of variables into the message. For more information, see the section.</p>
<p><strong>NOTE: large overlays, in the same way as objects, can impact performance while displayed.</strong></p>
<p><strong>NOTE: there is currently a maximum of 10 overlays displayed at any one time. Some other commands such as Say and SayBackground create overlays internally, so don&#8217;t rely on being able to create 10 with CreateTextual.</strong></p>
<p><strong>NOTE: if the Overlay object goes out of scope, the overlay will be removed. Hence, if you want the overlay to last on-screen outside of the script function where it was created, the <code>Overlay*</code> variable declaration needs to be at the top of the script and outside any script functions.</strong></p>
<pre><code>Overlay* myOverlay = Overlay.CreateTextual(50,80,120, Game.SpeechFont, 15,&quot;This is a text overlay&quot;);
Wait(40);
myOverlay.Remove();</code></pre>
<p>will display a 120 pixels text area with its upper left corner at coordinates 50,80 containing the string &#8220;This is a text overlay&#8221; using the speech font and white color. It will be displayed for 1 second, then removed.</p>
<p><em>See Also: , , ,</em></p>
<h3 id="remove-overlay">Remove (overlay)</h3>
<p><em>(Formerly known as RemoveOverlay, which is now obsolete)</em></p>
<pre><code>Overlay.Remove()</code></pre>
<p>Removes the specified overlay from the screen. Use this when you are done using the overlay.</p>
<pre><code>Overlay* myOverlay = Overlay.CreateTextual(50,80,120,2,15,&quot;This is a text overlay&quot;);
Wait(200);
myOverlay.Remove();</code></pre>
<p>will create a text overlay , wait for 200 game cycles (about 5 seconds) and then remove the overlay from the screen.</p>
<p><em>See Also:</em></p>
<h3 id="settext-overlay">SetText (overlay)</h3>
<p><em>(Formerly known as SetTextOverlay, which is now obsolete)</em></p>
<pre><code>Overlay.SetText(int width, FontType font, int color, string text, ...)</code></pre>
<p>Replaces the specified overlay with a new one, at the same co-ordinates but with the new specified text, width, font and colour.</p>
<p>You can insert the value of variables into the message. For more information, see the section.</p>
<pre><code>Overlay* myOverlay = Overlay.CreateTextual(50,80,120,Game.SpeechFont,15,&quot;This is a text overlay&quot;);
Wait(200);
myOverlay.SetText(120,Game.SpeechFont,15,&quot;This is another text overlay&quot;);</code></pre>
<p>will create a text overlay , wait for 200 game cycles (about 5 seconds) and then replace the overlay with another one.</p>
<p><em>See Also: ,</em></p>
<h3 id="valid-property-overlay">Valid property (overlay)</h3>
<p><em>(Formerly known as IsOverlayValid, which is now obsolete)</em></p>
<pre><code>readonly bool Overlay.Valid;</code></pre>
<p>Checks whether the overlay is a current overlay or not. Returns 1 if it is, 0 if it isn&#8217;t.</p>
<pre><code>Overlay* myOverlay = Overlay.CreateTextual(50,80,120,2,15,&quot;This is a text overlay&quot;);
Display(&quot;Overlay valid before: %d&quot;, myOverlay.Valid);
myOverlay.Remove();
Display(&quot;Overlay valid after: %d&quot;, myOverlay.Valid);</code></pre>
<p>creates an overlay, and prints out the Valid property (which will be 1). Then, removes the overlay and prints Valid again (which will now be 0).</p>
<p><em>See Also: ,</em></p>
<h3 id="x-property-overlay">X property (overlay)</h3>
<p><em>(Formerly known as MoveOverlay, which is now obsolete)</em></p>
<pre><code>int Overlay.X;</code></pre>
<p>Gets/sets the X co-ordinate of the overlay (ie. the left hand side of the overlay).</p>
<p>This allows you to dynamically move overlays around the screen.</p>
<pre><code>Overlay* testOverlay = Overlay.CreateTextual(50,80,120,2,15,&quot;This is a text overlay&quot;);
while (testOverlay.X &lt; 100) {
  testOverlay.X++;
  Wait(1);
}
testOverlay.Remove();</code></pre>
<p>creates a text overlay, then gradually slides it across the screen.</p>
<p><em>See Also: , ,</em></p>
<h3 id="y-property-overlay">Y property (overlay)</h3>
<p><em>(Formerly known as MoveOverlay, which is now obsolete)</em></p>
<pre><code>int Overlay.Y;</code></pre>
<p>Gets/sets the Y co-ordinate of the overlay (ie. the top edge of the overlay).</p>
<p>This allows you to dynamically move overlays around the screen.</p>
<pre><code>Overlay* testOverlay = Overlay.CreateTextual(50,50,120,2,15,&quot;This is a text overlay&quot;);
while (testOverlay.Y &lt; 100) {
  testOverlay.Y++;
  Wait(1);
}
testOverlay.Remove();</code></pre>
<p>creates a text overlay, then gradually slides it down the screen.</p>
<p><em>See Also: , ,</em></p>
<h2 id="palette-functions">Palette functions</h2>
<h3 id="cyclepalette">CyclePalette</h3>
<pre><code>CyclePalette (int start, int end)</code></pre>
<p>This is used for special effects, like the flowing colours on the Space Quest 4 title screen, and the Sierra logo of the later Sierra games. The palette indexes from START to END are cycled around one slot. Using this call in a repeatedly_execute function gives the effect of animation.</p>
<p>By default, the colours rotate leftwards through the palette. If you pass the arguments the other way round (ie. START being larger than END) then the colours will rotate in the opposite direction.</p>
<p><strong>NOTE: This command only works in 256-colour games.</strong></p>
<pre><code>CyclePalette(10,200);</code></pre>
<p>will cause the palette indexes from 10 to 200 cycle around one slot and give a color effect.</p>
<p><em>See Also: , ,</em></p>
<h3 id="setpalrgb">SetPalRGB</h3>
<pre><code>SetPalRGB (int slot, int red, int green, int blue)</code></pre>
<p>Changes the RGB components of one of the palette slots. The palette is initially set up in the Palette Editor, but you can override it during the game using this function for special effects. The RED, GREEN and BLUE parameters each range from 0 to 63 (as used in the Palette Editor).</p>
<p>If SLOT is a background slot, then this function&#8217;s effect will last until the player changes screen, when the palette is changed to the new room&#8217;s palette. If SLOT is not a background slot, the effect of this function is permanent.</p>
<p>NOTE: This function will allow you to change the colours which are &#8220;locked&#8221; in the AGS Editor. However, you should not normally do this as it can cause strange colours in the game.</p>
<pre><code>SetPalRGB(10,63,63,21);</code></pre>
<p>will change palette slot number 10 from light green to yellow</p>
<p><em>See Also: , , ,</em></p>
<h3 id="updatepalette">UpdatePalette</h3>
<pre><code>UpdatePalette()</code></pre>
<p>Commits the changes you made to the game palette. The script global variable palette[] stores the state of all the colours of the palette. You can access the red, green and blue components with .r, .g and .b. The values range from 0 to 63.</p>
<pre><code>palette[16].r = 60;
UpdatePalette();</code></pre>
<p>will make the black colour turn bright red. When you actually change the variable, nothing happens. Call this function to update the screen.</p>
<p><em>See Also:</em></p>
<h2 id="parser-functions">Parser functions</h2>
<h3 id="findwordid">FindWordID</h3>
<pre><code>static int Parser.FindWordID(string wordToFind)</code></pre>
<p>Looks up <em>wordToFind in the text parser dictionary, and returns the ID number.</em></p>
<p>If the word is not found, returns -1. ILBRK Otherwise, the Word Group number is returned, as seen in the Text Parser tab in the editor.</p>
<p>You can determine if two words are synonyms by looking them both up and seeing if the returned IDs are the same.</p>
<p>Ignore words are returned as ID 0.</p>
<p>This function is useful if you want to use the AGS Text Parser dictionary, but implement some custom parsing functionality instead of using the standard ParseText function.</p>
<pre><code> if (Parser.FindWordID(&quot;machine&quot;) &gt; 0)
 {
   Display(&quot;machine is in the game dictionary&quot;);
 }</code></pre>
<p>will display a message if the game dictionary includes &#8220;machine&#8221;</p>
<p><em>Compatibility: Supported by <strong>AGS 3.1.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="parsetext">ParseText</h3>
<pre><code>static Parser.ParseText(string text)</code></pre>
<p>Stores the supplied user text string for later use by Said. You need to call this command first with the user&#8217;s input before using the Said command. You would usually call this inside the text box&#8217;s OnActivate event handler.</p>
<pre><code> String command = txtParser.Text;
 Parser.ParseText(command);</code></pre>
<p>will get the players input and store it in string &#8220;command&#8221; for use with the said command.</p>
<p><em>See Also: ,</em></p>
<h3 id="said">Said</h3>
<pre><code>static bool Parser.Said(string text)</code></pre>
<p>Checks whether the player typed in TEXT in their input passed to ParseText. Returns <em>true if it matches, </em>false otherwise.**</p>
<p>See for a more detailed description.</p>
<pre><code>String input = txtParserInput.Text;
Parser.ParseText(input);
if (Parser.Said(&quot;load&quot;)) {
  txtParserInput.Text = &quot;&quot;;
  RestoreGameDialog();
}</code></pre>
<p>will bring up the restore game dialogue if the player types &#8220;load&#8221; in the text parser.</p>
<p><em>See Also: ,</em></p>
<h3 id="saidunknownword">SaidUnknownWord</h3>
<pre><code>static String Parser.SaidUnknownWord()</code></pre>
<p>If a word not in the game dictionary was submitted to the last ParseText call, then the word is returned by this command. This allows you to display a message like &#8220;Sorry, this game doesn&#8217;t recognise &#8216;XXXX&#8217;.&#8221;</p>
<p>If all the words were recognised, this returns null.</p>
<pre><code>String badWord = Parser.SaidUnknownWord();
if (badWord != null)
   Display(&quot;You can&#39;t use &#39;%s&#39; in this game.&quot;, badWord);</code></pre>
<p>will display the message if the player types a word that&#8217;s not in the vocabulary.</p>
<p><em>See Also: ,</em></p>
<h2 id="region-functions-and-properties">Region functions and properties</h2>
<h3 id="getatroomxy-region">GetAtRoomXY (region)</h3>
<p><em>(Formerly known as global function GetRegionAt, which is now obsolete)</em></p>
<pre><code>static Region* Region.GetAtRoomXY(int x, int y)</code></pre>
<p>Returns the region at ROOM co-ordinates (X,Y). If there is no region there, or if invalid co-ordinates are specified, the Region* representing region 0 will be returned.</p>
<p><strong>NOTE: Unlike GetHotspotAtLocation, the co-ordinates specified are ROOM co-ordinates. This means that if you want to use the mouse cursor location, you have to add the screen offset to make it work in scrolling rooms.</strong></p>
<pre><code>if (Region.GetAtRoomXY(player.x, player.y) == region[0])
  Display(&quot;The player is not currently standing on a region.&quot;);</code></pre>
<p><em>See Also:</em></p>
<h3 id="runinteraction-region">RunInteraction (region)</h3>
<p><em>(Formerly known as RunRegionInteraction, which is now obsolete)</em></p>
<pre><code>Region.RunInteraction(int event)</code></pre>
<p>Runs the event handler as if the EVENT for the region had been activated.</p>
<p><strong>NOTE: Unlike the other RunInteraction commands, this one does not take a cursor mode. Instead, it uses an event type as follows:</strong></p>
<p>0 While player stands on region ILBRK 1 Player walks onto region ILBRK 2 Player walks off region</p>
<pre><code>region[4].RunInteraction(1);</code></pre>
<p>will run the actions defined in the event handler script for &#8220;Player walks onto region&#8221; for region 4.</p>
<p><em>See Also: ,</em></p>
<h3 id="tint-region">Tint (region)</h3>
<p><em>(Formerly known as SetRegionTint, which is now obsolete)</em></p>
<pre><code>Region.Tint(int red, int green, int blue, int amount, optional int luminance)</code></pre>
<p>Changes the region to have RGB tint (RED, GREEN, BLUE) with AMOUNT percent saturation.</p>
<p>The red, green and blue values are between 0 and 255, and you supply the same values that you would use in the editor.</p>
<p>For the meaning of all the parameters, see .</p>
<p><strong>NOTE: The tint will be reset when the player leaves the room, so you need to use it in Player Enters Room if you want a permanent change.</strong></p>
<p><strong>NOTE: This function only works in hi-colour games.</strong></p>
<p><strong>NOTE: To remove the region tint, set the LightLevel property to 0.</strong></p>
<pre><code>region[2].Tint(180, 20, 20, 50);</code></pre>
<p>will set region 2&#8217;s RGB tint to (180, 20, 20) with 50<code>%</code> opacity.</p>
<p><em>Compatibility: Optional </em>luminance parameter is supported only by <strong>AGS 3.4.0 and later versions.</strong>**</p>
<p><em>See Also: ,</em></p>
<h3 id="enabled-property-region">Enabled property (region)</h3>
<p><em>(Formerly known as DisableRegion, which is now obsolete) ILBRK </em>(Formerly known as EnableRegion, which is now obsolete)**</p>
<pre><code>bool Region.Enabled</code></pre>
<p>Enables/disables the specified region. If you set this to false, then all areas of the screen that were previously part of the region now act as type 0 (no region). You can turn the region back on later by setting this to true.</p>
<p>While a region is disabled, it will not be returned by Region.GetAtRoomXY, and if the character walks onto the region then its events will not get run.</p>
<pre><code>region[3].Enabled = false;</code></pre>
<p>will disable region number 3.</p>
<p><em>See Also: , ,</em></p>
<h3 id="id-property-region">ID property (region)</h3>
<pre><code>readonly int Region.ID</code></pre>
<p>Gets the region number of this region. This allows you to interoperate with old script using the number-based region functions.</p>
<pre><code>Display(&quot;Region 3 is number %d.&quot;, region[3].ID);</code></pre>
<p>displays region 3&#8217;s number (which will be 3).</p>
<p><em>See Also:</em></p>
<h3 id="lightlevel-property">LightLevel property</h3>
<p><em>(Formerly known as SetAreaLightLevel, which is now obsolete)</em></p>
<pre><code>int Region.LightLevel</code></pre>
<p>Gets/sets the region&#8217;s light level. This does the same thing as the Light Level textbox in the editor, but allows you to change it at run-time.</p>
<p>The light level is from <strong>-100 to 100. This is different from the editor, which takes values from 0 to 200. Subtract 100 from the value you would use in the editor when calling this function. The reason for this discrepancy is legacy reasons from the DOS editor days.</strong></p>
<p>In 8-bit games you cannot use positive light level for brightening effect, but you may still use negative values to produce darkening effect.</p>
<p>To disable region lighting and tinting effects, set LightLevel to 0.</p>
<p><strong>NOTE: The light level will be reset to the editor settings when the player leaves the room, so you need to use it in Player Enters Room if you want a permanent change.</strong></p>
<p><strong>NOTE: Setting a light level will disable any RGB tint set for the region.</strong></p>
<p><strong>NOTE: Region&#8217;s light level does NOT override individual character and object light levels.</strong></p>
<pre><code>if (GetGlobalInt(10)==1)
    region[2].LightLevel = 100;</code></pre>
<p>will set region 2&#8217;s level light to 100 if the Global Integer 10 is 1.</p>
<p><em>See Also: , , ,</em></p>
<h3 id="tintenabled-property">TintEnabled property</h3>
<pre><code>readonly bool Region.TintEnabled</code></pre>
<p>Gets whether the region currently has an RGB tint enabled for it.</p>
<p>Returns <em>true if it does, and </em>false if it does not. If it does not, then the LightLevel property reflects the region lighting.**</p>
<p>If this property is <em>false, then the TintRed, TintGreen, TintBlue, TintSaturation and TintLuminance properties are invalid.</em></p>
<pre><code>if (region[4].TintEnabled) {
  Display(&quot;Region 4 is tinted!!&quot;);
}</code></pre>
<p>will display a message if region 4 is tinted</p>
<p><em>See Also:</em></p>
<h3 id="tintblue-property">TintBlue property</h3>
<pre><code>readonly int Region.TintBlue</code></pre>
<p>Gets the <em>Blue setting for the region&#8217;s current tint.</em></p>
<p>This property is read-only; to change it, use the command.</p>
<p><strong>NOTE: If the property is false, then this value is meaningless.</strong></p>
<pre><code>if (region[4].TintEnabled) {
  Display(&quot;Region 4 is tinted RGB (%d,%d,%d) Saturation %d.&quot;,
          region[4].TintRed, region[4].TintGreen,
          region[4].TintBlue, region[4].TintSaturation);
}</code></pre>
<p>will display a message with the region&#8217;s tints.</p>
<p><em>See Also: , , , ,</em></p>
<h3 id="tintgreen-property">TintGreen property</h3>
<pre><code>readonly int Region.TintGreen</code></pre>
<p>Gets the <em>Green setting for the region&#8217;s current tint.</em></p>
<p>This property is read-only; to change it, use the command.</p>
<p><strong>NOTE: If the property is false, then this value is meaningless.</strong></p>
<pre><code>if (region[4].TintEnabled) {
  Display(&quot;Region 4 is tinted RGB (%d,%d,%d) Saturation %d.&quot;,
          region[4].TintRed, region[4].TintGreen,
          region[4].TintBlue, region[4].TintSaturation);
}</code></pre>
<p>will display a message with the region&#8217;s tints.</p>
<p><em>See Also: , , , , ,</em></p>
<h3 id="tintred-property">TintRed property</h3>
<pre><code>readonly int Region.TintRed</code></pre>
<p>Gets the <em>Red setting for the region&#8217;s current tint.</em></p>
<p>This property is read-only; to change it, use the command.</p>
<p><strong>NOTE: If the property is false, then this value is meaningless.</strong></p>
<pre><code>if (region[4].TintEnabled) {
  Display(&quot;Region 4 is tinted RGB (%d,%d,%d) Saturation %d.&quot;,
          region[4].TintRed, region[4].TintGreen,
          region[4].TintBlue, region[4].TintSaturation);
}</code></pre>
<p>will display a message with the region&#8217;s tints.</p>
<p><em>See Also: , , , , ,</em></p>
<h3 id="tintsaturation-property">TintSaturation property</h3>
<pre><code>readonly int Region.TintSaturation</code></pre>
<p>Gets the <em>saturation setting for the region&#8217;s current tint.</em></p>
<p>This property is read-only; to change it, use the command.</p>
<p><strong>NOTE: If the property is false, then this value is meaningless.</strong></p>
<pre><code>if (region[4].TintEnabled) {
  Display(&quot;Region 4 is tinted RGB (%d,%d,%d) Saturation %d.&quot;,
          region[4].TintRed, region[4].TintGreen,
          region[4].TintBlue, region[4].TintSaturation);
}</code></pre>
<p>will display a message with the region&#8217;s tints.</p>
<p><em>See Also: , , , , ,</em></p>
<h3 id="tintluminance-property">TintLuminance property</h3>
<pre><code>readonly int Region.TintLuminance</code></pre>
<p>Gets the <em>luminance setting for the region&#8217;s current tint.</em></p>
<p>This property is read-only; to change it, use the command.</p>
<p><strong>NOTE: If the property is false, then this value is meaningless.</strong></p>
<p><em>See Also: , , , , ,</em></p>
<h2 id="room-functions">Room functions</h2>
<h3 id="arethingsoverlapping">AreThingsOverlapping</h3>
<pre><code>AreThingsOverlapping(int thing1, int thing2)</code></pre>
<p>Checks whether two characters or objects are overlapping each other on screen. This simply carries out a quick rectangular check on the two things to decide - so if they have large transparent regions around the edges, it may seem to be overlapping too soon.</p>
<p>THING1 and THING2 can either be a CHARID, or can be an object number PLUS 1000. So for example, passing EGO as THING1, and 1004 as THING2, will compare the character EGO with Object 4 in the current room.</p>
<p>Returns 0 if they are not overlapping, or the overlapping amount if they are. This amount is an arbitrary scale, but 1 means they are just about touching, all the way up to higher numbers for more overlappingness.</p>
<p>Calling this function with both the parameters as objects is the same as calling Object.IsCollidingWithObject.</p>
<pre><code>if (AreThingsOverlapping(1002, EGO)) {
  // code here
}</code></pre>
<p>will run the code if object 2 is overlapping EGO. This could be useful if object 2 was a bullet, for instance.</p>
<p><em>See Also: ,</em></p>
<h3 id="disablegroundlevelareas">DisableGroundLevelAreas</h3>
<pre><code>DisableGroundLevelAreas(int disableTints)</code></pre>
<p>Disables all ground-level events. This means that all Region events, the Player Stands On Hotspot event, and the room edges become disabled.</p>
<p>This command is useful in conjunction with the character[].z variable, if you want the player to be able to temporarily fly or levitate, for example. It allows you to stop the character from triggering Player Stands On events while they are in the air.</p>
<p>This command is also useful during some cutscenes, if you don&#8217;t want the player to trigger events as they walk around the room while in the cutscene.</p>
<p>The DISABLETINTS parameter specifies whether the visual effects of the regions (ie. light levels and tints) are also disabled. If you pass this as 0, then just the events will be turned off.</p>
<pre><code>DisableGroundLevelAreas(0);</code></pre>
<p>will disable all ground-level events, but leave light levels working</p>
<p><em>See Also: , ,</em></p>
<h3 id="enablegroundlevelareas">EnableGroundLevelAreas</h3>
<pre><code>EnableGroundLevelAreas()</code></pre>
<p>Re-enables all ground-level events. This is used to reverse the effects of using the DisableGroundLevelAreas command, and will return things to normal.</p>
<pre><code>EnableGroundLevelAreas();</code></pre>
<p>will re-enable all ground-level events.</p>
<p><em>See Also: , ,</em></p>
<h3 id="getbackgroundframe">GetBackgroundFrame</h3>
<pre><code>GetBackgroundFrame()</code></pre>
<p>Returns the number of the current background being displayed. In a room without animating backgrounds, this will always return 0. Otherwise, the current frame number is returned from 0 to 4.</p>
<pre><code>if (GetBackgroundFrame()==4)
  object[2].Visible = true;</code></pre>
<p>will turn on object 2 if the background frame of the room is frame 4.</p>
<p><em>See Also:</em></p>
<h3 id="getdrawingsurfaceforbackground">GetDrawingSurfaceForBackground</h3>
<pre><code>static DrawingSurface* Room.GetDrawingSurfaceForBackground(optional int backgroundNumber)</code></pre>
<p>Gets a drawing surface for a room background, which allows you to directly draw onto the room&#8217;s background image. You can provide a background frame number if you want to modify a specific frame; otherwise, the current background&#8217;s surface will be returned.</p>
<p>After calling this method, use the various to modify the background, then call Release on the surface when you are finished.</p>
<p>Any changes you make will only last until the player leaves the room, at which point they will be lost. If you need to make long-lasting changes, you can either use this method in the Player Enters Room event, or consider using an alternate background frame for the changed image.</p>
<p><strong>NOTE: Drawing onto the room background can be slow, especially when using the Direct3D driver. Do not use this command in repeatedly_execute; make sure you only use this command when absolutely necessary.</strong></p>
<pre><code>DrawingSurface *surface = Room.GetDrawingSurfaceForBackground();
surface.DrawingColor = 14;
surface.DrawLine(0, 0, 50, 50);
surface.Release();</code></pre>
<p>draws a yellow diagonal line across the top-left of the current room background, then releases the image.</p>
<p><em>See Also: ,</em></p>
<h3 id="getplayercharacter">GetPlayerCharacter</h3>
<pre><code>GetPlayerCharacter ()</code></pre>
<p><strong>THIS COMMAND IS NOW OBSOLETE. ILBRK The recommended replacement is to use the player character&#8217;s ID property, as follows:</strong></p>
<pre><code>Display(&quot;The player character number is %d&quot;, player.ID);</code></pre>
<p><em>See Also:</em></p>
<h3 id="getproperty-room">GetProperty (room)</h3>
<p><em>(Formerly known as global function GetRoomProperty, which is now obsolete)</em></p>
<pre><code>Room.GetProperty(string property)</code></pre>
<p>Returns the custom property setting of the PROPERTY for the current room.</p>
<p>This command works with Number properties (it returns the number), and with Boolean properties (returns 1 if the box was checked, 0 if not).</p>
<p>Use the equivalent Room.GetTextProperty function to get a text property.</p>
<p>Note that you cannot retrieve room properties of other rooms - only the current room can be checked.</p>
<pre><code>if (Room.GetProperty(&quot;CanBeAttackedHere&quot;))
  Display(&quot;An evil monster lunges at you!&quot;);</code></pre>
<p>will print the message if the current room has its &#8220;CanBeAttackedHere&#8221; box ticked.</p>
<p><em>See Also:</em></p>
<h3 id="gettextproperty-room">GetTextProperty (room)</h3>
<p><em>(Formerly known as global function GetRoomPropertyText, which is now obsolete)</em></p>
<pre><code>static String Room.GetTextProperty(string property)</code></pre>
<p>Returns the custom property setting of the PROPERTY for the current room.</p>
<p>This command works with Text properties only. The property&#8217;s text will be returned from this function.</p>
<p>Use the equivalent Room.GetProperty function to get a non-text property.</p>
<p>Note that you cannot retrieve room properties of other rooms - only the current room can be checked.</p>
<pre><code>String description = Room.GetTextProperty(&quot;Description&quot;);
Display(&quot;The room&#39;s description: %s&quot;, description);</code></pre>
<p>will retrieve the room&#8217;s &#8220;description&#8221; property then display it.</p>
<p><em>See Also:</em></p>
<h3 id="setproperty-room">SetProperty (room)</h3>
<pre><code>static bool Room.SetProperty(const string property, int value)</code></pre>
<p>Sets the new <em>value for the custom </em>property for the specified room. Returns TRUE if such property exists and FALSE on failure.**</p>
<p>This command works with Number properties (it sets the numeric value), and with Boolean properties (sets FALSE is value is equal to 0, or TRUE otherwise).</p>
<p>Use the equivalent SetTextProperty function to set new text property value.</p>
<p>Note that you cannot set room properties of other rooms - only the current room.</p>
<pre><code>Room.SetProperty(&quot;Darkness&quot;, 10);</code></pre>
<p>will change room&#8217;s &#8220;Darkness&#8221; custom property to 10.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.4.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="settextproperty-room">SetTextProperty (room)</h3>
<pre><code>bool Room.SetTextProperty(const string property, const string value)</code></pre>
<p>Sets the new <em>value text for the custom </em>property for the specified room. Returns TRUE if such property exists and FALSE on failure.**</p>
<p>This command works with Text properties only. The property&#8217;s text will be changed to new value.</p>
<p>Use the equivalent SetProperty function to set a non-text property.</p>
<p>Note that you cannot set room properties of other rooms - only the current room.</p>
<pre><code>Room.SetTextProperty(&quot;Description&quot;, &quot;The Throne Room&quot;);</code></pre>
<p>will change room&#8217;s &#8220;description&#8221; property.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.4.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="getscalingat">GetScalingAt</h3>
<pre><code>GetScalingAt (int x, int y)</code></pre>
<p>Returns the room area scaling at room co-ordinates (X,Y).</p>
<p>The value returned is from 1 to 200, with 100 being the normal un-scaled setting.</p>
<pre><code>if (GetScalingAt(player.x, player.y) == 100)
    Display (&quot;The player is currently at normal size.&quot;);</code></pre>
<p><em>See Also: ,</em></p>
<h3 id="getviewportx">GetViewportX</h3>
<pre><code>GetViewportX ()</code></pre>
<p>Returns the X-offset of the current viewport in a scrolling room. This allows you to find out what part of the room the player is looking at. The co-ordinate returned is the left edge of the screen, and so it can have a value between 0 and (ROOM WIDTH - 320).</p>
<p>If the room is a non-scrolling room, returns 0.</p>
<p>See the SetViewport function description for more information.</p>
<pre><code>if (GetViewportX()&gt;100)
    object[2].Visible = true;</code></pre>
<p>will turn object 2 on if the player has scrolled the room by 100 pixels to the right.</p>
<p><em>See Also: ,</em></p>
<h3 id="getviewporty">GetViewportY</h3>
<pre><code>GetViewportY ()</code></pre>
<p>Returns the Y-offset of the current viewport in a scrolling room. This allows you to find out what part of the room the player is looking at. The co-ordinate returned is the top edge of the screen, and so it can have a value between 0 and (ROOM HEIGHT - 200).</p>
<p>If the room is a non-scrolling room, returns 0.</p>
<pre><code>if (GetViewportY()&gt;20)
    object[2].Visible = true;</code></pre>
<p>will turn object 2 on if the player has scrolled the room by 20 pixels to the bottom.</p>
<p><em>See Also: ,</em></p>
<h3 id="getwalkableareaat">GetWalkableAreaAt</h3>
<pre><code>GetWalkableAreaAt (int x, int y)</code></pre>
<p>Returns the number of the walkable area at SCREEN co-ordinates (X,Y). If there is no walkable area there, or if invalid co-ordinates are specified, returns 0.</p>
<p>NOTE: The co-ordinates are SCREEN co-ordinates, NOT ROOM co-ordinates. This means that with a scrolling room, the co-ordinates you pass are relative to the screen&#8217;s current position, and NOT absolute room co-ordinates. This means that this function is suitable for use with the mouse cursor position variables.</p>
<pre><code>if (GetWalkableAreaAt(mouse.x,mouse.y) == 0)
    Display (&quot;You can&#39;t walk there.&quot;);</code></pre>
<p><em>See Also: , ,</em></p>
<h3 id="hasplayerbeeninroom">HasPlayerBeenInRoom</h3>
<pre><code>HasPlayerBeenInRoom(int room_number)</code></pre>
<p>Checks whether the player has ever been in ROOM_NUMBER (ie. has the &#8216;First Time Player Enters Room&#8217; event there ever been run). Returns 1 if they have, and 0 if they haven&#8217;t.</p>
<p>You can use this function to determine whether the player has been to a particular location previously. If you reset the room with ResetRoom, then this command will return 0 until they enter the room again.</p>
<p>This command will always return 1 if you ask it about the current room; and it will always return 0 if you ask it about a non-state saving room (ie. rooms numbered &gt; 300).</p>
<pre><code>if (HasPlayerBeenInRoom(14)) {
  Display(&quot;The player has been to room 14 before.&quot;);
}</code></pre>
<p>will display a message if the player has been to room 14.</p>
<p><em>See Also:</em></p>
<h3 id="processclick-room">ProcessClick (Room)</h3>
<p><em>(Formerly known as global function ProcessClick, which is now obsolete)</em></p>
<pre><code>static void Room.ProcessClick(int x, int y, CursorMode)</code></pre>
<p>Simulates clicking the mouse on the location (X,Y) on the screen, in the specified cursor mode. This &#8220;click&#8221; has special behavior in that it <strong>only affects Room elements and characters under given coordinates. Any conditions attached to the first object found on given coordinates will be executed. Game interface (buttons, sliders, and so on) will be </strong>ignored. Even if the coordinates happen to lie on a button, the simulated click will &#8220;pass through&#8221; that button as if it was not present.****</p>
<p>The available cursor modes are the ones you define on your Cursors tab (but with eMode prepended to them). Usually these are eModeWalkto, eModeLookat, etc.</p>
<pre><code>Room.ProcessClick(100, 50, eModeLookat);</code></pre>
<p>will simulate a click in the Look mode on co-ordinates (100, 50).</p>
<p><em>See Also: , , ,</em></p>
<h3 id="releaseviewport">ReleaseViewport</h3>
<pre><code>ReleaseViewport ()</code></pre>
<p>Releases the lock on the screen viewport, allowing it to automatically scroll around following the player character as normal.</p>
<pre><code>int x;
while (x&lt;100) {
   SetViewport(x,0);
   x++;
   Wait(1);
}
ReleaseViewport();</code></pre>
<p>will scroll the room 100 pixels to the right and then return the screen to its original position and unlock the screen viewport.</p>
<p><em>See Also:</em></p>
<h3 id="removewalkablearea">RemoveWalkableArea</h3>
<pre><code>RemoveWalkableArea (int areanum)</code></pre>
<p>Removes the walkable areas in colour AREANUM from the current room. You can put the area back with RestoreWalkableArea.</p>
<p>NOTE: When the player leaves the screen, all the walkable areas are reset. Therefore, if you want an area to remain off when they leave the screen, you will need to set a flag, then run the RemoveWalkableArea command in the &#8220;Player enters room&#8221; event when they return.</p>
<pre><code>RemoveWalkableArea(5);</code></pre>
<p>will make the walking area 5 unwalkable.</p>
<p><em>See Also:</em></p>
<h3 id="resetroom">ResetRoom</h3>
<pre><code>ResetRoom (int room_number)</code></pre>
<p>Discards all the data that the engine has in memory about when the player last visited ROOM_NUMBER, and resets it as if they&#8217;d never been there. The next time the player goes to that room, all the objects and scripts will be in their initial state (as set up in the editor), and not how they were when the player left the room. The &#8220;First time enters room&#8221; event will be run when they enter this room again.</p>
<p>This function is useful if you want to have a &#8220;View intro&#8221; option to allow the player to watch an intro again - this function can reset all the objects in the intro rooms to their starting positions.</p>
<p>NOTE: You cannot reset the current room (ie. the room that the player is in).</p>
<pre><code>ResetRoom(0);</code></pre>
<p>will reset the intro room so it can be played again if the player wants to.</p>
<p><em>See Also:</em></p>
<h3 id="restorewalkablearea">RestoreWalkableArea</h3>
<pre><code>RestoreWalkableArea (int areanum)</code></pre>
<p>Makes the area AREANUM walkable again.</p>
<pre><code>RestoreWalkableArea(4);</code></pre>
<p>will make the walking area 4 walkable again.</p>
<p><em>See Also:</em></p>
<h3 id="setareascaling">SetAreaScaling</h3>
<pre><code>SetAreaScaling(int area, int min, int max)</code></pre>
<p>Changes walkable area number AREA&#8217;s scaling.</p>
<p>There are two ways to use this command: ILBRK 1. Pass the same value for MIN and MAX. This will give the walkable area fixed scaling (same as setting it in the editor with &#8220;Use continuous scaling&#8221; un-ticked). ILBRK 2. Pass different values for MIN and MAX. In this case, continuous scaling is enabled for the walkable area, and will go from MIN at the top to MAX at the bottom.</p>
<p>MIN and MAX have ranges from 5 to 200, the same as in the editor. Pass 100 for both values to revert to the normal zoom level (100<code>%</code>) for that area.</p>
<pre><code>SetAreaScaling(5, 120, 170);</code></pre>
<p>will set walkable area 5 to use continuous scaling from 120 to 170 percent.</p>
<p><em>See Also: ,</em></p>
<h3 id="setbackgroundframe">SetBackgroundFrame</h3>
<pre><code>SetBackgroundFrame (int frame)</code></pre>
<p>Locks the background to frame number FRAME of an animating-background screen. (Values for FRAME are from 0 to 4). This allows you to use the animating backgrounds feature for another purpose - you can have two frames of the background, one for example with a spaceship crashed on it. Then, once the right event has happened, call SetBackgroundFrame in the Player Enters Room event to set the background before the screen fades in.</p>
<p>Pass the <em>frame as -1 to return to the default behaviour of automatically cycling through all the background frames.</em></p>
<p>The frame lock is released when the game changes rooms.</p>
<pre><code>if (GetGlobalInt(20)==1)
    SetBackgroundFrame(4);</code></pre>
<p>will change the current room&#8217;s background frame to 4 if the global integer 20 is 1.</p>
<p><em>See Also:</em></p>
<h3 id="setviewport">SetViewport</h3>
<pre><code>SetViewport (int x, int y)</code></pre>
<p>Locks the screen viewport to having the top-left hand corner at (X,Y) in a scrolling room. This allows you to manually pan across a scrolling room or to have the screen follow a non-player character.</p>
<p>The lock is released when you either call ReleaseViewport or the player changes rooms.</p>
<p><strong>NOTE: The co-ordinates supplied are 320x200-scale co-ordinates, and will be automatically multiplied up by the engine.</strong></p>
<p><strong>NOTE: This function has no effect if the current room isn&#8217;t a scrolling room.</strong></p>
<pre><code>int ypos = 0;
while (ypos &lt; 60) {
  SetViewport(0, ypos);
  Wait(1);
  ypos++;
}
ReleaseViewport();</code></pre>
<p>will scroll the screen down from the top 60 pixels, then release it back to follow the player around.</p>
<p><em>See Also: , ,</em></p>
<h3 id="setwalkbehindbase">SetWalkBehindBase</h3>
<pre><code>SetWalkBehindBase (int area, int baseline)</code></pre>
<p>Changes the walk-behind AREA to have new BASELINE. This effectively allows you to turn walk-behinds on and off, although you can do other tricks with it as well. BASELINE is from 1 to the height of the room (normally 200) and moves the line which you set originally in the editor.</p>
<p>Passing BASELINE as 0 disables the walk-behind area, so that the player will always walk in front of it.</p>
<p>Basically, if the character&#8217;s feet are below BASELINE, he will be drawn in front of it, otherwise he will be drawn behind it.</p>
<pre><code>SetWalkBehindBase (3,0);</code></pre>
<p>will disable the walkbehind area number 3.</p>
<p><em>See Also:</em></p>
<h3 id="bottomedge-property">BottomEdge property</h3>
<pre><code>readonly static int Room.BottomEdge</code></pre>
<p>Returns the Y co-ordinate of the bottom edge of the room, as set in the Room Settings pane of the editor.</p>
<pre><code>Display(&quot;The current room&#39;s bottom edge is at %d.&quot;, Room.BottomEdge);</code></pre>
<p><em>See Also: , ,</em></p>
<h3 id="colordepth-property-room">ColorDepth property (room)</h3>
<pre><code>readonly static int Room.ColorDepth</code></pre>
<p>Returns the colour depth of the room&#8217;s background scene. This is important if you want to use DrawImage, since any sprites that you draw must be the same colour depth as the room itself.</p>
<pre><code>Display(&quot;The current room background is %d-bit colour.&quot;, Room.ColorDepth);</code></pre>
<p><em>See Also:</em></p>
<h3 id="height-property-room">Height property (room)</h3>
<p><em>(Formerly known as game.room_height, which is now obsolete)</em></p>
<pre><code>readonly static int Room.Height</code></pre>
<p>Returns the height of the room, in 320x200-style co-ordinates. This is the same height as is displayed as the &#8220;Relative size&#8221; in the Editor.</p>
<pre><code>Display(&quot;The current room size is %d x %d.&quot;, Room.Width, Room.Height);</code></pre>
<p><em>See Also:</em></p>
<h3 id="leftedge-property">LeftEdge property</h3>
<pre><code>readonly static int Room.LeftEdge</code></pre>
<p>Returns the X co-ordinate of the left edge of the room, as set in the Room Settings pane of the editor.</p>
<pre><code>Display(&quot;The current room&#39;s left edge is at %d.&quot;, Room.LeftEdge);</code></pre>
<p><em>See Also: , ,</em></p>
<h3 id="messages-property">Messages property</h3>
<p><em>(Formerly known as global function GetMessageText, which is now obsolete)</em></p>
<pre><code>readonly static String Room.Messages[int message]</code></pre>
<p>Gets the text of the specified room message. This is useful if you want to store, for example, a room description in Message 1 in each room &#8211; this property allows you to retrieve the text for that message from the current room.</p>
<p>If an invalid message number is supplied, <em>null will be returned. Otherwise, the message contents will be returned.</em></p>
<pre><code>String message1 = Room.Messages[1];
Display(&quot;Message 1 says: %s&quot;, message1);</code></pre>
<p>will print the contents of room message 1.</p>
<h3 id="musiconload-property">MusicOnLoad property</h3>
<pre><code>readonly static int Room.MusicOnLoad</code></pre>
<p><strong>This property is now obsolete. It is still accessible for backwards compatibility with old games.</strong></p>
<p>Returns the music number that is set to play when the player enters this room, as set in the &#8220;Room Settings&#8221; pane in the editor. If no music is set for this room, returns 0.</p>
<pre><code>Display(&quot;The current room plays music %d when the player enters.&quot;, Room.MusicOnLoad);</code></pre>
<h3 id="objectcount-property">ObjectCount property</h3>
<p><em>(Formerly part of GetGameParameter, which is now obsolete)</em></p>
<pre><code>readonly static int Room.ObjectCount</code></pre>
<p>Returns the number of objects in the room.</p>
<pre><code>Display(&quot;The current room contains %d objects.&quot;, Room.ObjectCount);</code></pre>
<h3 id="rightedge-property">RightEdge property</h3>
<pre><code>readonly static int Room.RightEdge</code></pre>
<p>Returns the X co-ordinate of the right edge of the room, as set in the Room Settings pane of the editor.</p>
<pre><code>Display(&quot;The current room&#39;s right edge is at %d.&quot;, Room.RightEdge);</code></pre>
<p><em>See Also: , ,</em></p>
<h3 id="topedge-property">TopEdge property</h3>
<pre><code>readonly static int Room.TopEdge</code></pre>
<p>Returns the Y co-ordinate of the top edge of the room, as set in the Room Settings pane of the editor.</p>
<pre><code>Display(&quot;The current room&#39;s top edge is at %d.&quot;, Room.TopEdge);</code></pre>
<p><em>See Also: , ,</em></p>
<h3 id="width-property-room">Width property (room)</h3>
<p><em>(Formerly known as game.room_width, which is now obsolete)</em></p>
<pre><code>readonly static int Room.Width</code></pre>
<p>Returns the width of the room, in 320x200-style co-ordinates. This is the same width as is displayed as the &#8220;Relative size&#8221; in the Editor.</p>
<pre><code>Display(&quot;The current room size is %d x %d.&quot;, Room.Width, Room.Height);</code></pre>
<p><em>See Also:</em></p>
<h2 id="screen-functions">Screen functions</h2>
<h3 id="fadein">FadeIn</h3>
<pre><code>FadeIn (int speed)</code></pre>
<p>Fades in from a black screen to the current palette. This is used to restore the screen after a FadeOut call. SPEED is from 1 (slowest) to 64 (fastest).</p>
<p><em>NOTE: This is a blocking function.</em></p>
<pre><code>FadeOut(30);
Wait(40);
FadeIn(10);</code></pre>
<p>will fade the screen to black, wait 1 sec (40 game cycles) and then fade in again.</p>
<p><em>See Also: , ,</em></p>
<h3 id="fadeout">FadeOut</h3>
<pre><code>FadeOut (int speed)</code></pre>
<p>Fades the screen out to black. SPEED is the speed of the fade, from 1 (slowest) to 64 (instant). You can restore the screen with FadeIn.</p>
<p><em>NOTE: This is a blocking function.</em></p>
<pre><code>FadeOut(30);
Wait(40);
FadeIn(10);</code></pre>
<p>will fade the screen to black, wait 1 sec (40 game cycles) and then fade in again.</p>
<p><em>See Also: , ,</em></p>
<h3 id="flipscreen">FlipScreen</h3>
<pre><code>FlipScreen (int way)</code></pre>
<p>Flips the screen round either the horizontal or vertical axis, or both. This function is for special effects only - all co-ordinates remain the same and it doesn&#8217;t effect any other script functions.</p>
<p>The value of WAY selects:</p>
<pre><code>0  normal
1  horizontal-flip (upside-down)
2  vertical-flip  (left-to-right)
3  both (upside-down and backwards)</code></pre>
<p><strong>NOTE: This function is still a bit buggy - black parts of the screen may show up wrong, and and pop-up messages will flip the screen back to normal.</strong></p>
<pre><code>FlipScreen(1);</code></pre>
<p>will flip the screen upside down.</p>
<h3 id="setfadecolor">SetFadeColor</h3>
<pre><code>SetFadeColor(int red, int green, int blue)</code></pre>
<p>Changes the colour which the screen fades out to, to have the specified RGB value. Each of the parameters can range from 0-255. The default is black, ie. (0, 0, 0)</p>
<p>The colour that you set here will be used in all future calls to FadeIn/FadeOut, and also for the screen transition if it is set to Fade In/Out.</p>
<pre><code>SetFadeColor(200, 0, 0);</code></pre>
<p>will mean that next time the screen fades out, it fades to red instead of black.</p>
<p>SeeAlso: , ,</p>
<h3 id="setnextscreentransition">SetNextScreenTransition</h3>
<pre><code>SetNextScreenTransition(TransitionStyle)</code></pre>
<p>Sets the room transition type to <em>TransitionStyle, but ONLY for the next room change. After that, it will revert back to the normal transition type specified in the editor or with SetScreenTransition.</em></p>
<p>For the possible values for TransitionStyle, see .</p>
<pre><code>SetNextScreenTransition(eTransitionBoxout);
cEgo.ChangeRoom(10);</code></pre>
<p>will go to room 10 with a box-out effect, but then return to the normal transition type from then on.</p>
<p>SeeAlso:</p>
<h3 id="setscreentransition">SetScreenTransition</h3>
<pre><code>SetScreenTransition(TransitionStyle)</code></pre>
<p>Changes the default screen transition. TransitionStyle can be one of the following:</p>
<pre><code>eTransitionFade
eTransitionInstant
eTransitionDissolve
eTransitionBoxout
eTransitionCrossfade</code></pre>
<p>All future transitions will be done as specified until you call this function again.</p>
<pre><code>SetScreenTransition(eTransitionFade);</code></pre>
<p>will change the room transitions to Fade.</p>
<p>SeeAlso:</p>
<h3 id="shakescreen">ShakeScreen</h3>
<pre><code>ShakeScreen (int amount)</code></pre>
<p>Shakes the screen to simulate, for example, an earthquake. AMOUNT is how much the screen shakes: 1 is hardly anything, and 25 is a lot.</p>
<pre><code>ShakeScreen(5);</code></pre>
<p>will shake the screen a little.</p>
<p><em>See Also:</em></p>
<h3 id="shakescreenbackground">ShakeScreenBackground</h3>
<pre><code>ShakeScreenBackground (int delay, int amount, int length)</code></pre>
<p>Shakes the screen to simulate, for example, an earthquake. The game is not paused while the screen shakes - it will continue in the background.</p>
<p>DELAY specifies the &#8216;shakiness&#8217; of the shake - 2 is the lowest you can pass for this, and will create the most shaky screen.</p>
<p>AMOUNT specifies the ferociousness of the shake - ie. how much the screen moves by when it does shake. Here, 1 is a very tiny shake, up to about 30 for a ferocious shake.</p>
<p>LENGTH specifies how long the shake lasts for, in game loops. For example, 80 would be equivalent to 2 seconds at the default game speed.</p>
<p>You can abort any current background shake that is in progress by calling this command with the LENGTH parameter as zero.</p>
<pre><code>ShakeScreenBackground (4, 10, 80);</code></pre>
<p>will shake the screen a little for 2 seconds.</p>
<p><em>See Also:</em></p>
<h3 id="tintscreen">TintScreen</h3>
<pre><code>TintScreen (int red, int green, int blue)</code></pre>
<p>Tints the screen with the specified RGB values. RED, GREEN and BLUE range from 1 to 100.</p>
<p>Pass (0, 0, 0) to turn off the tinting and go back to how the screen normally looks.</p>
<p>For historical reasons, the tint works by applying a 50<code>%</code>-transparent layer of the specified colour to the screen after everything else has been drawn. Therefore, it may not lead to the sort of results you might expect.</p>
<p><strong>NOTE: This command is currently experimental, since it causes a massive slowdown in the engine, especially at high resolutions. If you use it, you should provide an option for the player to turn it off.</strong></p>
<p><strong>NOTE: This feature does not work in 256-colour games.</strong></p>
<pre><code>TintScreen (100, 50, 50);</code></pre>
<p>will tint a heavy dose of red.</p>
<h2 id="speech-functions-and-properties">Speech functions and properties</h2>
<h3 id="animationstoptimemargin">AnimationStopTimeMargin</h3>
<p><em>(Formerly known as game.close_mouth_end_speech_time, which is now obsolete)</em></p>
<pre><code>static int Speech.AnimationStopTimeMargin</code></pre>
<p>Gets/sets the time margin at which the character talking animation should stop before before speech time ends. This property is specified in <strong>game loops and is set to 10 by default.</strong></p>
<p><strong>NOTE: This property only affects the animation if voice mode is disabled.</strong></p>
<pre><code>Speech.AnimationStopTimeMargin = 40;</code></pre>
<p>will stop talking animation 40 game loops (1 second with the default game speed) before speech time ends.</p>
<p><em>See Also:</em></p>
<h3 id="customportraitplacement">CustomPortraitPlacement</h3>
<pre><code>static bool Speech.CustomPortraitPlacement</code></pre>
<p>Enables/disables the custom speech portrait placement. When set to <strong>true the character portraits are positioned at screen coordinates defined by and . When set to </strong>false the portraits will be automatically aligned again.****</p>
<p><strong>NOTE: This property has no effect if the Lucas-Arts speech style is used.</strong></p>
<p><em>Compatibility: Supported by <strong>AGS 3.3.0 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="displayposttimems">DisplayPostTimeMs</h3>
<pre><code>static int Speech.DisplayPostTimeMs</code></pre>
<p>Gets/sets the extra time the speech will stay on screen after its base time runs out. Commonly the time the speech lines and portrait stay on screen is calculated based on the text length - if the text mode is on, or voice clip length - if the voice mode is on. This property prolongs the time the speech text and/or portrait is displayed. This property does not interfere with speech skipping by key or mouse click: players will still be able to skip speech any time they want (if appropriate skip mode is enabled). This property is specified in <strong>milliseconds and is set to zero by default.</strong></p>
<p><em>Compatibility: Supported by <strong>AGS 3.3.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="globalspeechanimationdelay">GlobalSpeechAnimationDelay</h3>
<p><em>(Formerly known as game.talkanim_speed, which is now obsolete)</em></p>
<pre><code>static int Speech.GlobalSpeechAnimationDelay</code></pre>
<p>Gets/sets global speech animation delay which affects every character in game. This property is specified in <strong>game loops and is set to 5 by default.</strong></p>
<p><strong>NOTE: This property is ignored if lip sync is enabled.</strong></p>
<p><strong>NOTE: The property is only used when the </strong>Speech.UseGlobalSpeechAnimationDelay is set to <strong>true. This property </strong>cannot be used if the global speech animation delay is disabled. In that case, the individual character&#8217;s animation delay is used instead.********</p>
<p><em>See Also: ,</em></p>
<h3 id="portraitxoffset">PortraitXOffset</h3>
<pre><code>static int Speech.PortraitXOffset</code></pre>
<p>Gets/sets the character&#8217;s speech portrait <strong>horizontal offset relative to screen side. The actual x coordinate of the portrait is calculated based on whether portrait is to be displayed at the left or right side of the screen. This property specifies the distance between the screen side and respected portrait&#8217;s border.</strong></p>
<p><strong>NOTE:The property is only used when the </strong>Speech.CustomPortraitPlacement is set to <strong>true.</strong>****</p>
<p><em>Compatibility: Supported by <strong>AGS 3.3.0 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="portraity">PortraitY</h3>
<pre><code>static int Speech.PortraitY</code></pre>
<p>Gets/sets the character&#8217;s speech portrait <strong>y coordinate on screen.</strong></p>
<p><strong>NOTE:The property is only used when the </strong>Speech.CustomPortraitPlacement is set to <strong>true.</strong>****</p>
<p><em>Compatibility: Supported by <strong>AGS 3.3.0 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="skipkey">SkipKey</h3>
<p><em>(Formerly known as game.skip_speech_specific_key, which is now obsolete)</em></p>
<pre><code>static eKeyCode Speech.SkipKey</code></pre>
<p>Gets/sets special key which can skip speech text. This makes all other keys ignored when speech is displayed on screen, unless eKeyNone is assigned, in which case any key can be used again.</p>
<p><strong>NOTE:The specified key will only skip speech if the appropriate speech skip style is enabled.</strong></p>
<pre><code>Speech.SkipKey = eKeySpace;</code></pre>
<p>will assign the &#8220;space&#8221; key to skip the speech.</p>
<p><em>See Also:</em></p>
<h3 id="skipstyle">SkipStyle</h3>
<p><em>(Formerly known as SetSkipSpeech, which is now obsolete) ILBRK</em></p>
<pre><code>static SkipSpeechStyle Speech.SkipStyle</code></pre>
<p>Gets/sets how the player can skip speech lines.</p>
<p>The accepted values are</p>
<pre><code>eSkipKeyMouseTime  player can skip text by clicking mouse or pressing key
eSkipKeyTime       player can skip text by pressing key only, not by clicking mouse
eSkipTime          player cannot skip text with mouse or keyboard
eSkipKeyMouse      text does not time-out; player must click mouse or press key each time
eSkipMouseTime     player can skip text by clicking mouse only, not by pressing key
eSkipKey           text does not time-out; player can skip text by pressing key only
eSkipMouse         text does not time-out; player can skip text by clicking mouse only

Speech.SkipStyle = eSkipTime;</code></pre>
<p>will make the player unable to skip the text by pressing a mouse button or a key.</p>
<p><em>See Also: , ,</em></p>
<h3 id="style">Style</h3>
<p><em>(Formerly known as SetSpeechStyle, which is now obsolete) ILBRK</em></p>
<pre><code>static eSpeechStyle Speech.Style</code></pre>
<p>Gets/sets theway in which speech text is displayed. This modifies the setting originally set in the editor. SpeechStyle can be:</p>
<pre><code>eSpeechLucasarts
  speech text over character&#39;s head
eSpeechSierra
  close-up portrait of character
eSpeechSierraWithBackground
  close-up portrait + background window for text
eSpeechFullScreen
  QFG4-style full screen dialog pictures

Speech.Style = eSpeechSierra;</code></pre>
<p>will change the speech style to a close up portrait of the character.</p>
<h3 id="textalignment">TextAlignment</h3>
<p><em>(Formerly known as game.speech_text_align, which is now obsolete)</em></p>
<pre><code>static Alignment Speech.TextAlignment</code></pre>
<p>Sets how text in Lucasarts-style speech is aligned.</p>
<p>The accepted values are</p>
<pre><code>eAlignLeft
eAlignCentre
eAlignRight</code></pre>
<p>The default is eAlignCentre.</p>
<pre><code>Speech.TextAlignment = eAlignRight;</code></pre>
<p>will align the speech text at the right side.</p>
<h3 id="useglobalspeechanimationdelay">UseGlobalSpeechAnimationDelay</h3>
<pre><code>static bool Speech.UseGlobalSpeechAnimationDelay</code></pre>
<p>Gets/sets whether speech animation delay should use global setting, as opposed to individual character&#8217;s setting. The actual global delay value is specified with <strong>Speech.GlobalSpeechAnimationDelay.</strong></p>
<pre><code>Speech.UseGlobalSpeechAnimationDelay = true;</code></pre>
<p>will make the game use global speech animation delay.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.3.0 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="voicemode">VoiceMode</h3>
<p><em>(Formerly known as SetVoiceMode, which is now obsolete)</em></p>
<pre><code>static eVoiceMode Speech.VoiceMode</code></pre>
<p>Gets/sets whether voice and/or text captions are used in the game.</p>
<p>Valid values for VoiceMode are:</p>
<pre><code>eSpeechTextOnly      no voice, text only
eSpeechVoiceAndText  both voice and text
eSpeechVoiceOnly     voice only, no text</code></pre>
<p>The default is <em>eSpeechVoiceAndText if in-game speech is enabled, and </em>eSpeechTextOnly if it is not. Changing this setting changes the behaviour of all and commands which have a speech file assigned to them.**</p>
<p><strong>WARNING: you should only ever use <em>eSpeechVoiceOnly at the player&#8217;s request to do so, because there is no guarantee that they even have a sound card and so may not understand what is going on.</em></strong></p>
<pre><code>if (IsSpeechVoxAvailable()==1)
    Speech.VoiceMode = eSpeechVoiceAndText;</code></pre>
<p>will set the voice mode to voice and text if the voice pack is available.</p>
<h2 id="string-functions">String functions</h2>
<h3 id="append">Append</h3>
<p><em>(Formerly known as global function StrCat, which is now obsolete)</em></p>
<pre><code>String.Append(string str2)</code></pre>
<p>Appends the string STR2 to the end of the specified string, and returns the result.</p>
<p><strong>IMPORTANT: The result of joining the strings together is returned as a new string from this command. The original string will </strong>NOT be changed. For example, the following script will not do anything: ILBRK <code>mytext.Append(&quot;World&quot;);</code> ILBRK what you probably want instead is: ILBRK <code>mytext = mytext.Append(&quot;World&quot;);</code>****</p>
<pre><code>String mytext = &quot;Hello&quot;;
mytext = mytext.Append(&quot;World&quot;);
Display(mytext);</code></pre>
<p>will display &#8220;HelloWorld&#8221;.</p>
<p><em>See Also: , ,</em></p>
<h3 id="appendchar">AppendChar</h3>
<pre><code>String.AppendChar(char extraChar)</code></pre>
<p>Appends a single character to the end of the specified string, and returns the result.</p>
<p><strong>IMPORTANT: The newly extended text is returned as a new string from this command. The original string will </strong>NOT be changed. For example, the following script will not do anything: ILBRK <code>mytext.AppendChar('o');</code> ILBRK what you probably want instead is: ILBRK <code>mytext = mytext.AppendChar('o');</code>****</p>
<pre><code>String mytext = &quot;Hell&quot;;
mytext = mytext.AppendChar(&#39;o&#39;);
Display(mytext);</code></pre>
<p>will display &#8220;Hello&#8221;.</p>
<p><em>See Also:</em></p>
<h3 id="compareto">CompareTo</h3>
<p><em>(Formerly known as global function StrCaseComp, which is now obsolete) ILBRK </em>(Formerly known as global function StrComp, which is now obsolete)**</p>
<pre><code>String.CompareTo(string str2, optional bool caseSensitive)</code></pre>
<p>Compares the specified string to STR2. <em>caseSensitive determines whether &#8220;Dog&#8221; and &#8220;dog&#8221; are equivalent; case sensitivity is off by default.</em></p>
<p>Returns 0 if the strings match, a number less than 0 if this string is earlier in the alphabet than STR2, and a number greater than 0 if this string is later in the alphabet than STR2.</p>
<p><strong>TIP: To do a case-sensitive comparison of two strings, it&#8217;s easier to just use the == operator.</strong></p>
<pre><code>String mytext = &quot;Hello&quot;;
if (mytext.CompareTo(&quot;hello&quot;) == 0) {
  Display(&quot;Strings match with case sensitivity off!&quot;);
}
else {
  Display(&quot;Strings don&#39;t match with case sensitivity off!&quot;);
}

if (mytext == &quot;hello&quot;) {
  Display(&quot;Strings match with case sensitivity on!&quot;);
}
else {
  Display(&quot;Strings don&#39;t match with case sensitivity on!&quot;);
}</code></pre>
<p>will display &#8220;Strings match with case sensitivity off!&#8221;, and then &#8220;Strings don&#8217;t match with case sensitivity on!&#8221;.</p>
<h3 id="copy">Copy</h3>
<p><em>(Formerly known as global function StrCopy, which is now obsolete)</em></p>
<pre><code>String.Copy()</code></pre>
<p>Returns a new copy of the specified string. You should not normally need to use this, since strings can be assigned using the = operator.</p>
<pre><code>String mystring = &quot;This is a test string.&quot;;
String newstring = mystring.Copy();
Display(newstring);</code></pre>
<p>will display &#8220;This is a test string&#8221;.</p>
<h3 id="endswith">EndsWith</h3>
<pre><code>bool String.EndsWith(string lookForText, optional bool caseSensitive)</code></pre>
<p>Returns <em>true if this string ends with </em>lookForText, or <em>false if not.</em>**</p>
<p><em>caseSensitive is </em>false by default, but you can set it to true so that the function will only return <em>true for an exact-case match.</em>**</p>
<pre><code>String myString = &quot;Hello from the script!&quot;;
if (myString.EndsWith(&quot;script!&quot;))
{
  Display(&quot;Ends with script!&quot;);
}</code></pre>
<p>will display the &#8220;Ends with script!&#8221; message.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.1.0 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="format">Format</h3>
<p><em>(Formerly known as global function StrFormat, which is now obsolete)</em></p>
<pre><code>static String.Format(string fmt, ...)</code></pre>
<p>Processes the string FMT in the same way as the Display function does but instead of displaying it on the screen, returns the result as a new string.</p>
<p>You can insert the value of variables into the message. For more information, see the section.</p>
<p><strong>NOTE: This function is static, which means you do not call it on an existing string variable, but use <code>String.Format()</code> instead.</strong></p>
<pre><code>int health=10;
String text = String.Format(&quot;%d&quot;, health);</code></pre>
<p>will create a text string containing &#8220;10&#8221;.</p>
<p><em>See Also:</em></p>
<h3 id="indexof">IndexOf</h3>
<p><em>(Formerly known as global function StrContains, which is now obsolete) ILBRK </em>(Formerly known as String.Contains, which is now obsolete)**</p>
<pre><code>String.IndexOf(string needle)</code></pre>
<p>Checks to see if NEEDLE is contained within the specified string. Returns the character position of the match if it is, or -1 if it is not.</p>
<p>This function is not case sensitive; ie. testing &#8220;test string&#8221; for &#8220;sTRiN&#8221; would match.</p>
<pre><code>String haystack = &quot;The haystack had a needle in it somewhere.&quot;;
int result = haystack.IndexOf(&quot;a needle&quot;);

if (result == -1) {
  Display(&quot;The string didn&#39;t contain the needle.&quot;);
}
else {
  Display(&quot;a needle was found starting at character %d in the string.&quot;, result);
}</code></pre>
<p><em>See Also: ,</em></p>
<h3 id="isnullorempty">IsNullOrEmpty</h3>
<pre><code>static bool String.IsNullOrEmpty(String stringToCheck)</code></pre>
<p>Returns whether the supplied string is null or empty. This is simply shorthand for the following:</p>
<pre><code>if ((stringToCheck == null) || (stringToCheck == &quot;&quot;))</code></pre>
<p>in other words, you can easily use this to check whether a string has any text in it or not.</p>
<p><strong>NOTE: This function is static, which means you do not call it on an existing string variable, but use <code>String.IsNullOrEmpty()</code> instead. See the example.</strong></p>
<pre><code>String myString;
if (String.IsNullOrEmpty(myString))
{
  myString = &quot;Some text&quot;;
}</code></pre>
<p>will set the myString variable to &#8220;Some text&#8221; if it is null or empty (which it is).</p>
<p><em>Compatibility: Supported by <strong>AGS 3.0.1 and later versions.</strong></em></p>
<h3 id="lowercase">LowerCase</h3>
<p><em>(Formerly known as global function StrToLowerCase, which is now obsolete)</em></p>
<pre><code>String.LowerCase()</code></pre>
<p>Returns a lower case version of the specified string.</p>
<p><strong>NOTE: The new string is returned from this function; it does </strong>NOT modify the original string.****</p>
<pre><code>String mystring = &quot;THIS is a test string&quot;;
String lowercased = mystring.LowerCase();
Display(&quot;Old: %s, new: %s&quot;, mystring, lowercased);</code></pre>
<p>will display &#8220;Old: THIS is a test string, new: this is a test string&#8221;.</p>
<p><em>See Also:</em></p>
<h3 id="replace">Replace</h3>
<pre><code>String.Replace(string lookForText, string replaceWithText,
               optional bool caseSensitive)</code></pre>
<p>Creates a copy of this string, with all instances of <em>lookForText replaced with the </em>replaceWithText.**</p>
<p><em>caseSensitive is </em>false by default, but you can set it to true so that only case-sensitive matches of the <em>lookForText will be replaced.</em>**</p>
<p><strong>NOTE: The new string is returned from this function; it does </strong>NOT modify the original string.****</p>
<pre><code>String original = &quot;Hello from the script!&quot;;
String changed = original.Replace(&quot;hello&quot;, &quot;goodbye&quot;);
Display(&quot;Old: %s, new: %s&quot;, original, changed);</code></pre>
<p>will display &#8220;Old: Hello from the script!, new: goodbye from the script!&#8221;.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.1.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="replacecharat">ReplaceCharAt</h3>
<p><em>(Formerly known as global function StrSetCharAt, which is now obsolete)</em></p>
<pre><code>String.ReplaceCharAt(int index, char newChar)</code></pre>
<p>Changes the character at INDEX in the string to NEWCHAR.</p>
<p>INDEX is the character index into the string (where 0 is the first character, and the last allowable value is the string&#8217;s Length minus 1).</p>
<p><strong>NOTE: The new string is returned from this function; it does </strong>NOT modify the original string.****</p>
<pre><code>String mystring = &quot;Hello&quot;;
String changed = mystring.ReplaceCharAt(2, &#39;m&#39;);
Display(&quot;Old: %s, new: %s&quot;, newstring, changed);</code></pre>
<p>will display &#8220;Old: Hello, new: Hemlo&#8221;.</p>
<p><em>See Also: ,</em></p>
<h3 id="startswith">StartsWith</h3>
<pre><code>bool String.StartsWith(string lookForText, optional bool caseSensitive)</code></pre>
<p>Returns <em>true if this string starts with </em>lookForText, or <em>false if not.</em>**</p>
<p><em>caseSensitive is </em>false by default, but you can set it to true so that the function will only return <em>true for an exact-case match.</em>**</p>
<pre><code>String myString = &quot;Hello from the script!&quot;;
if (myString.StartsWith(&quot;hello&quot;))
{
  Display(&quot;Starts with hello!&quot;);
}</code></pre>
<p>will display the &#8220;Starts with hello!&#8221; message.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.1.0 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="substring">Substring</h3>
<pre><code>String.Substring(int index, int length)</code></pre>
<p>Returns part of the string, starting from character <em>index and </em>length characters long.**</p>
<p><em>index is the initial character index, where 0 is the first character and (Length - 1) is the last. </em>length specifies how many characters to retrieve.**</p>
<pre><code>String mystring = &quot;Hello World!&quot;;
String substring = mystring.Substring(3, 5);
Display(&quot;Original: %s, Substring: %s&quot;, mystring, substring);</code></pre>
<p>will display &#8220;Original: Hello World!, Substring: lo Wo&#8221;.</p>
<p><em>See Also: ,</em></p>
<h3 id="truncate">Truncate</h3>
<pre><code>String.Truncate(int length)</code></pre>
<p>Returns a version of the string that has been truncated down to <em>length characters.</em></p>
<p><strong>NOTE: The new string is returned from this function; it does </strong>NOT modify the original string.****</p>
<pre><code>String mystring = &quot;Hello World!&quot;;
String truncated = mystring.Truncate(4);
Display(&quot;Original: %s, Truncated: %s&quot;, mystring, truncated);</code></pre>
<p>will display &#8220;Original: Hello World!, Truncated: Hell&#8221;.</p>
<p><em>See Also: ,</em></p>
<h3 id="uppercase">UpperCase</h3>
<p><em>(Formerly known as global function StrToUpperCase, which is now obsolete)</em></p>
<pre><code>String.UpperCase()</code></pre>
<p>Returns an upper case version of the specified string.</p>
<p><strong>NOTE: The new string is returned from this function; it does </strong>NOT modify the original string.****</p>
<pre><code>String mystring = &quot;THIS is a test string&quot;;
String uppercased = mystring.UpperCase();
Display(&quot;Old: %s, new: %s&quot;, mystring, uppercased);</code></pre>
<p>will display &#8220;Old: THIS is a test string, new: THIS IS A TEST STRING&#8221;.</p>
<p><em>See Also:</em></p>
<h3 id="asfloat-property">AsFloat property</h3>
<pre><code>readonly float String.AsFloat;</code></pre>
<p>Converts the string into a float, and returns that value. Returns 0.0 if the string does not contain a number.</p>
<pre><code>String text1, text2;
float number1,number2;
text1 = &quot;57.362&quot;;
text2 = &quot;Hello&quot;;
number1 = text1.AsFloat;
number2 = text2.AsFloat;</code></pre>
<p>will set number1 value to 57.362 and number2 value to 0.0 This function is useful for processing strings input from the user.</p>
<p><strong>NOTE: To convert a float to a string, you can use the command.</strong></p>
<p><em>See Also: , ,</em></p>
<h3 id="asint-property">AsInt property</h3>
<p><em>(Formerly known as global function StringToInt, which is now obsolete)</em></p>
<pre><code>readonly int String.AsInt;</code></pre>
<p>Converts the string into an integer, and returns that value. Returns zero if the string does not present a number.</p>
<p><strong>NOTE: This operation takes just the leading sequence of the characters from the string, if it contains digits and other symbols which could be a part of number. If the string has the valid number only in the middle, it will not work.</strong></p>
<pre><code>String text1, text2;
int number1,number2;
text1 = &quot;53&quot;;
text2 = &quot;Hello&quot;;
number1 = text1.AsInt;
number2 = text2.AsInt;</code></pre>
<p>will set number1 value to 53 and number2 value to 0. This function is useful for processing strings input from the user.</p>
<p><strong>NOTE: To convert an integer to a string, you can use the command.</strong></p>
<p><em>See Also: , ,</em></p>
<h3 id="chars-property">Chars property</h3>
<p><em>(Formerly known as global function StrGetCharAt, which is now obsolete)</em></p>
<pre><code>readonly char String.Chars[position];</code></pre>
<p>Returns the character at POSITION within the string.</p>
<p>POSITION is the character index (where 0 is the first character, and the last allowable value is the Length minus 1).</p>
<p>If POSITION is outside the string, this function returns 0.</p>
<p><strong>NOTE: The <em>Chars array is read-only. If you want to change one of the characters in the string, use .</em></strong></p>
<pre><code>String text = &quot;This is my string.&quot;;
Display(&quot;The 4th character is: %c&quot;, text.Chars[3]);</code></pre>
<p>will display &#8220;The 4th character is: s&#8221;.</p>
<p><em>See Also: ,</em></p>
<h3 id="length-property">Length property</h3>
<p><em>(Formerly known as global function StrLen, which is now obsolete)</em></p>
<pre><code>readonly int String.Length;</code></pre>
<p>Returns the length of the string, in characters.</p>
<pre><code>String text = &quot;This is my string.&quot;;
Display(&quot;Length: %d&quot;, text.Length);</code></pre>
<p>will display &#8220;Length: 18&#8221;.</p>
<h2 id="system-functions-and-properties">System functions and properties</h2>
<h3 id="audiochannelcount-property">AudioChannelCount property</h3>
<pre><code>readonly static int System.AudioChannelCount;</code></pre>
<p>Gets the number of Audio Channels available to the game (in the current version of AGS this is 8).</p>
<p>This is useful if you want to loop through all the audio channels and check what is playing on them.</p>
<pre><code>Display(&quot;There are %d audio channels.&quot;, System.AudioChannelCount);</code></pre>
<p>will display a message with the number of audio channels.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="audiochannels-property">AudioChannels property</h3>
<pre><code>readonly static AudioChannel* System.AudioChannels[];</code></pre>
<p>Gets the AudioChannel instance for the specified channel number. This allows you to query the audio channel and find out what is playing on it.</p>
<pre><code>AudioChannel *channel = System.AudioChannels[2];
Display(&quot;Channel 2&#39;s current volume is %d.&quot;, channel.Volume);</code></pre>
<p>will display a message with Audio Channel 2&#8217;s current volume.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.0 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="capslock-property">CapsLock property</h3>
<pre><code>readonly static bool System.CapsLock;</code></pre>
<p>Gets whether Caps Lock is active on the player&#8217;s system.</p>
<p>You might want to use this to warn the player to switch it off before typing a password in, for example.</p>
<pre><code>if (System.CapsLock)
{
  Display(&quot;The CAPS LOCK light is on.&quot;);
}</code></pre>
<p>will display a message if Caps Lock is on.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.0.1 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="colordepth-property-system">ColorDepth property (system)</h3>
<p><em>(Formerly known as system.color_depth, which is now obsolete)</em></p>
<pre><code>readonly static int System.ColorDepth;</code></pre>
<p>Returns the colour depth at which the game is running. This is the overall game colour depth setting, and it is possible for individual sprites or backgrounds to be different.</p>
<pre><code>Display(&quot;Game is running at: %d x %d, %d-bit colour&quot;, System.ScreenWidth,
                                  System.ScreenHeight, System.ColorDepth);</code></pre>
<p>will display the current resolution and colour depth</p>
<p><em>See Also: ,</em></p>
<h3 id="gamma-property">Gamma property</h3>
<pre><code>static int System.Gamma;</code></pre>
<p>Gets/sets the current screen Gamma level. This is 100 by default, and you can set it anywhere from 0 (pitch black) to 200 (double normal brightness).</p>
<p>must return <em>true in order for this property to have any effect.</em></p>
<p>Because every player&#8217;s monitor will be different, you should normally use this property linked to a GUI Slider in order to allow the player to adjust it to suit their system.</p>
<pre><code>if (System.SupportsGammaControl) {
  System.Gamma = 150;
}</code></pre>
<p>will turn the screen brightness up to <code>50%</code> higher than normal</p>
<p><em>See Also:</em></p>
<h3 id="hardwareacceleration-property">HardwareAcceleration property</h3>
<pre><code>readonly static bool System.HardwareAcceleration;</code></pre>
<p>Returns whether the game is running with hardware acceleration (eg. Direct3D). If this is the case then RawDrawing is likely to be slower, but alpha blending and large sprites are likely to be faster, than when the non-accelerated driver is used.</p>
<p><strong>Cross-Platform Support</strong></p>
<p>Windows: ** Direct3D driver ILBRK MS-DOS: ** No ILBRK Linux: ** No ILBRK MacOS: ** No ********</p>
<pre><code>if (System.HardwareAcceleration) {
  Display(&quot;Yay, we can draw loads of alpha blended sprites fast!&quot;);
}</code></pre>
<p>will display a message if the game is being run with hardware acceleration</p>
<p>See Also:</p>
<h3 id="hasinputfocus-property">HasInputFocus property</h3>
<pre><code>readonly static bool System.HasInputFocus;</code></pre>
<p>Tells whether the game window currently has input focus, meaning it is active and player can control the game.</p>
<p>If your game is made to continue running in the background, when the user switches out from game, you may use this property in scripts to know if that actually happened.</p>
<pre><code>if (!System.HasInputFocus)
  return;</code></pre>
<p>skips the rest of the function if player has switched out from the game.</p>
<pre><code>function repeatedly_execute()
{
  if (!System.HasInputFocus &amp;&amp; IsGamePaused() == 0) {
    PauseGame();
  } else if (System.HasInputFocus &amp;&amp; IsGamePaused() == 1) {
    UnPauseGame();
  }
}</code></pre>
<p>pauses game when player switches out, and unpauses it when player switches back to game.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.3.5 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="numlock-property">NumLock property</h3>
<pre><code>readonly static bool System.NumLock;</code></pre>
<p>Gets whether Num Lock is active on the player&#8217;s system.</p>
<p>You might want to use this to warn the player to switch it off before using the numeric keypad arrow keys, for example.</p>
<pre><code>if (System.NumLock)
{
  Display(&quot;The NUM LOCK light is on.&quot;);
}</code></pre>
<p>will display a message if Num Lock is on.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.0.1 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="operatingsystem-property">OperatingSystem property</h3>
<p><em>(Formerly known as system.os, which is now obsolete)</em></p>
<pre><code>readonly static eOperatingSystem System.OperatingSystem;</code></pre>
<p>Returns which operating system the game is currently running under. It can be one of the following values:</p>
<pre><code>eOSDOS
eOSWindows
eOSLinux
eOSMacOS
eOSAndroid
eOSiOS
eOSPSP

if (System.OperatingSystem == eOSWindows) {
  Display(&quot;Running on Windows!&quot;);
}
else {
  Display(&quot;Not running on Windows!&quot;);
}</code></pre>
<h3 id="runtimeinfo-property">RuntimeInfo property</h3>
<pre><code>readonly static String System.RuntimeInfo;</code></pre>
<p>Returns the string containing short description of the enviroment the game is currently running in, such as engine version, graphics mode, and available game resources.</p>
<p>This is meant mainly for debug purposes.</p>
<p><strong>NOTE: System.RuntimeInfo is a more convenient analogue of Debug(1, 0) command, being more explicit and working on both release and debug modes of the game.</strong></p>
<pre><code>function on_key_press(eKeyCode keycode) {
  if (keycode == eKeyCtrlV) {
    Display(System.RuntimeInfo);
}</code></pre>
<p><em>Compatibility: Supported by <strong>AGS 3.4.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="screenheight-property">ScreenHeight property</h3>
<p><em>(Formerly known as system.screen_height, which is now obsolete)</em></p>
<pre><code>readonly static int System.ScreenHeight;</code></pre>
<p>Returns the actual screen height that the game is running at. If a graphic filter is in use, the resolution returned will be that before any stretching by the filter has been applied. If letterbox borders are enabled, the screen size reported will include the size of these borders.</p>
<p><strong>NOTE: Do </strong>NOT use this to calculate the centre of the screen when working with co-ordinates. Co-ordinates are relative to the viewport, so you should use instead. Use the ScreenHeight property only for reporting purposes.****</p>
<pre><code>Display(&quot;Game is running at: %d x %d, %d-bit colour&quot;, System.ScreenWidth,
                                  System.ScreenHeight, System.ColorDepth);</code></pre>
<p>will display the current resolution and colour depth</p>
<p><em>See Also: , ,</em></p>
<h3 id="screenwidth-property">ScreenWidth property</h3>
<p><em>(Formerly known as system.screen_width, which is now obsolete)</em></p>
<pre><code>readonly static int System.ScreenWidth;</code></pre>
<p>Returns the actual screen width that the game is running at. If a graphic filter is in use, the resolution returned will be that before any stretching by the filter has been applied. If widescreen side borders are enabled, the screen width reported will include the size of these borders.</p>
<p><strong>NOTE: Do </strong>NOT use this to calculate the centre of the screen when working with co-ordinates. Co-ordinates are relative to the viewport, so you should use instead. Use the ScreenWidth property only for reporting purposes.****</p>
<pre><code>Display(&quot;Game is running at: %d x %d, %d-bit colour&quot;, System.ScreenWidth,
                                  System.ScreenHeight, System.ColorDepth);</code></pre>
<p>will display the current resolution and colour depth</p>
<p><em>See Also: ,</em></p>
<h3 id="scrolllock-property">ScrollLock property</h3>
<pre><code>readonly static bool System.ScrollLock;</code></pre>
<p>Gets whether Scroll Lock is active on the player&#8217;s system.</p>
<p>Note that when running your game under the debugger, the Scroll Lock key will break out of the game into the debugger, so it is not advised that you use it for any other purpose in your game.</p>
<pre><code>if (System.ScrollLock)
{
  Display(&quot;The SCROLL LOCK light is on.&quot;);
}</code></pre>
<p>will display a message if Scroll Lock is on.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.0.1 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="supportsgammacontrol-property">SupportsGammaControl property</h3>
<pre><code>readonly static bool System.SupportsGammaControl;</code></pre>
<p>Gets whether the player&#8217;s PC supports changing the screen&#8217;s gamma control settings.</p>
<p>This must return <em>true before you try and change the property. The situations in which this will be supported are listed below.</em></p>
<p><strong>Cross-Platform Support</strong></p>
<p>Windows: ** Full-screen only ILBRK MS-DOS: ** No ILBRK Linux: ** No ILBRK MacOS: ** No ********</p>
<pre><code>if (System.SupportsGammaControl) {
  Display(&quot;We can change the system gamma level!&quot;);
}</code></pre>
<p>will display a message if the system supports changing the gamma</p>
<p><em>See Also:</em></p>
<h3 id="version-property">Version property</h3>
<p><em>(Formerly known as system.version, which is now obsolete)</em></p>
<pre><code>readonly static String System.Version;</code></pre>
<p>Returns the AGS engine version number. This could be useful from within script modules in order to use features available on a particular engine version, or work around any known bugs.</p>
<p>The string returned is the full version number, for example &#8220;2.71.833&#8221;.</p>
<pre><code>Display(&quot;AGS version: %s&quot;, System.Version);</code></pre>
<p>will display the AGS version number</p>
<h3 id="viewportheight-property">ViewportHeight property</h3>
<p><em>(Formerly known as system.viewport_height, which is now obsolete)</em></p>
<pre><code>readonly static int System.ViewportHeight;</code></pre>
<p>Returns the height of the current viewport. This is reported in the same co-ordinate system that the game is using, so you can use this to find out what the maximum possible Y co-ordinate is within the screen.</p>
<pre><code>Display(&quot;Game viewport: %d x %d&quot;, System.ViewportWidth, System.ViewportHeight);</code></pre>
<p>will display the current viewport size</p>
<p><em>See Also: ,</em></p>
<h3 id="viewportwidth-property">ViewportWidth property</h3>
<p><em>(Formerly known as system.viewport_width, which is now obsolete)</em></p>
<pre><code>readonly static int System.ViewportWidth;</code></pre>
<p>Returns the width of the current viewport. This is reported in the same co-ordinate system that the game is using, so you can use this to find out what the maximum possible X co-ordinate is within the screen.</p>
<pre><code>Display(&quot;Game viewport: %d x %d&quot;, System.ViewportWidth, System.ViewportHeight);</code></pre>
<p>will display the current viewport size</p>
<p><em>See Also: ,</em></p>
<h3 id="volume-property-system">Volume property (system)</h3>
<p><em>(Formerly known as SetDigitalMasterVolume, which is now obsolete) ILBRK </em>(Formerly known as SetMusicMasterVolume, which is now obsolete)**</p>
<pre><code>static int System.Volume;</code></pre>
<p>Gets/sets the overall system volume, from 0 to 100. This is the master volume control, that affects all audio in the game. You would usually attach this to a GUI Slider to enable the player to control the volume from some sort of Control Panel GUI.</p>
<pre><code>System.Volume = 80;</code></pre>
<p>will set the overall output volume to 80.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.0 and later versions.</strong></em></p>
<p><em>See Also: ,</em></p>
<h3 id="vsync-property">VSync property</h3>
<p><em>(Formerly known as system.vsync, which is now obsolete)</em></p>
<pre><code>static bool System.VSync;</code></pre>
<p>Gets/sets whether AGS waits for the vertical retrace before rendering each frame. This is off by default.</p>
<p>If you switch this on, it can help to reduce the &#8220;tearing&#8221; effect that you can get when the screen scrolls. However, doing so will lock the game frame rate to the monitor&#8217;s refresh rate, which will mean you cannot reliably set a game speed higher than 60 fps.</p>
<p><strong>NOTE: This property has no effect with the Direct3D driver.</strong></p>
<pre><code>if (System.VSync) {
  Display(&quot;Vertical retrace sync is enabled!&quot;);
}</code></pre>
<p>will display a message if vsync is on</p>
<h3 id="windowed-property">Windowed property</h3>
<p><em>(Formerly known as system.windowed, which is now obsolete)</em></p>
<pre><code>readonly static bool System.Windowed;</code></pre>
<p>Returns whether the game is currently running in a window (<em>true) or full-screen (</em>false).**</p>
<pre><code>if (System.Windowed) {
  Display(&quot;Game is running in a window!&quot;);
}</code></pre>
<p>will display a message if the game is running in a window</p>
<h2 id="text-display-speech-functions">Text display / Speech functions</h2>
<h3 id="display">Display</h3>
<pre><code>Display (string message, ...)</code></pre>
<p>Displays a message to the screen. It will be displayed in the standard message box, and centred in the middle of the screen.</p>
<p>You can insert the value of variables into the message. For more information, see the section.</p>
<pre><code>int my_counter;
Display (&quot;The counter is currently set to %d.&quot;, my_counter);</code></pre>
<p>will replace the &#8216;<code>%d</code>&#8217; with the value of the variable &#8220;my_counter&#8221;.</p>
<p>NOTE: Display is a blocking function - that is, control will not return to the script until the player has removed the text window (by pressing a key or clicking the mouse). While the window is displayed, all other processing, like animations and interface display, are disabled. This is usually used for responses to the player LOOKing at things.</p>
<p><em>See Also: , , , ,</em></p>
<h3 id="displayat">DisplayAt</h3>
<pre><code>DisplayAt(int x, int y, int width, string message, ...)</code></pre>
<p>Identical to the &#8220;Display&#8221; function, only this allows you to define the position and size of the window where the text is displayed. The X and Y variables define the co-ordinates of the upper-left corner of the window.</p>
<p>The WIDTH variable defines the maximum width of the window. The height is then automatically calculated so that the message fits into the window.</p>
<p>You can insert the value of variables into the message. For more information, see the section.</p>
<p>Note: This is a blocking call. See the &#8220;Display&#8221; help for more information.</p>
<pre><code>DisplayAt (50,50,100, &quot;This is a message&quot;);</code></pre>
<p>will display the message at coordinates 50,50 in a box 100 pixels wide.</p>
<p><em>See Also: ,</em></p>
<h3 id="displayaty">DisplayAtY</h3>
<pre><code>DisplayAtY (int y, string message)</code></pre>
<p>Similar to the Display function, except that this will display the message box at the specified Y location on the screen. The Y defines the co-ordinate of the top of the message box. The horizontal positioning will be automatically calculated as usual.</p>
<pre><code>DisplayAt (50, &quot;This is a message&quot;);</code></pre>
<p>will display the message at y coordinate 50.</p>
<p><em>See Also: ,</em></p>
<h3 id="displaymessage">DisplayMessage</h3>
<pre><code>DisplayMessage (int message_number)</code></pre>
<p>Identical to the Display function, but this uses a message text defined in the AGS Editor rather than in the script. It will either use a message from the current room, or a global message (if message_number &gt;= 500).</p>
<pre><code>DisplayMessage(220);</code></pre>
<p>will display the message 220 of the Room message editor.</p>
<p><em>See Also: ,</em></p>
<h3 id="displaymessageaty">DisplayMessageAtY</h3>
<pre><code>DisplayMessageAtY (int message_number, int yposition)</code></pre>
<p>Identical to the DisplayMessage function, except that the text box is positioned with its top at YPOSITION, the same way as DisplayAtY works.</p>
<p>This is useful if you have an important graphic in the middle of the screen that the text box would normally cover up - with this function you can place the message above or below it.</p>
<pre><code>DisplayMessageAtY(527, 200);</code></pre>
<p>will display global message 527, in the lower half of the screen.</p>
<p><em>See Also: ,</em></p>
<h3 id="displaytopbar">DisplayTopBar</h3>
<pre><code>DisplayTopBar(int y, int text_color, int back_color, string titleText, string message, ...)</code></pre>
<p>Displays a message in a text window, with a caption bar on top of it.</p>
<p>This displays MESSAGE in a similar way to the normal Display command, but above the text window a caption bar will be displayed with TITLETEXT in it. This method was used in some early Sierra games to indicate who was talking by having their name in the caption, and can be handy if you don&#8217;t want to draw a talking view for a character.</p>
<p>You can insert the value of variables into the message. For more information, see the section.</p>
<p>The Y parameter specifies the Y location on the screen where the message box will appear. The default is 25.</p>
<p>The TEXT_COLOR parameter specifies the text colour of the top bar, and the BACK_COLOR specifies the background colour of the top bar.</p>
<p>You can pass 0 for Y, TEXT_COLOR or BACK_COLOR - if you do, it will use the setting you used last time.</p>
<p>There are a couple of game variables available which can further customize the look of the bar. You can change these before calling DisplayTopBar.</p>
<p><strong>game.top_bar_bordercolor sets the colour used for the bar&#8217;s border (set to the same colour as the backcolor if you don&#8217;t want a border) ILBRK </strong>game.top_bar_borderwidth sets the width of the bar&#8217;s border, in pixels (default 1) ILBRK <strong>game.top_bar_font sets the font to use for the top bar. The default is -1, which means that the current Normal font is used. Set it to a specific number to use that font instead.</strong>****</p>
<pre><code>DisplayTopBar(25, 8, 7, &quot;Evil wizard&quot;, &quot;Get out of my house and never return!&quot;);</code></pre>
<p>will display &#8220;Get out of my house and never return!&#8221; in the message box, with the caption bar reading &#8220;Evil wizard&#8221;. The message box will have dark grey text on a light gray background.</p>
<p><em>See Also: ,</em></p>
<h2 id="viewframe-functions-and-properties">ViewFrame functions and properties</h2>
<h3 id="flipped-property">Flipped property</h3>
<p><em>(Formerly part of GetGameParameter, which is now obsolete)</em></p>
<pre><code>readonly bool ViewFrame.Flipped</code></pre>
<p>Gets whether the frame was set to Flipped in the editor.</p>
<pre><code>ViewFrame *frame = Game.GetViewFrame(WALKING, 2, 4);
if (frame.Flipped) {
  Display(&quot;This frame is flipped&quot;);
}
else {
  Display(&quot;This frame is not flipped&quot;);
}</code></pre>
<p><em>See Also: ,</em></p>
<h3 id="frame-property-view-frame">Frame property (view frame)</h3>
<p><em>(Formerly part of GetGameParameter, which is now obsolete)</em></p>
<pre><code>readonly int ViewFrame.Frame</code></pre>
<p>Returns the frame number represented by this ViewFrame.</p>
<pre><code>ViewFrame *frame = Game.GetViewFrame(WALKING, 2, 4);
Display(&quot;This ViewFrame is view %d, loop %d, frame %d&quot;,
  frame.View, frame.Loop, frame.Frame);</code></pre>
<p><em>See Also: , ,</em></p>
<h3 id="graphic-property-view-frame">Graphic property (view frame)</h3>
<p><em>(Formerly part of GetGameParameter, which is now obsolete)</em></p>
<pre><code>int ViewFrame.Graphic</code></pre>
<p>Gets/sets the sprite slot number that this view frame displays.</p>
<pre><code>ViewFrame *frame = Game.GetViewFrame(WALKING, 2, 4);
Display(&quot;This frame uses sprite %d&quot;, frame.Graphic);</code></pre>
<p><em>See Also:</em></p>
<h3 id="linkedaudio-property-view-frame">LinkedAudio property (view frame)</h3>
<p><em>(Formerly known as ViewFrame.Sound, which is now obsolete) ILBRK </em>(Formerly known as SetFrameSound, which is now obsolete) ILBRK <em>(Formerly part of GetGameParameter, which is now obsolete)</em>**</p>
<pre><code>AudioClip* ViewFrame.LinkedAudio</code></pre>
<p>Gets/sets the audio clip that plays when this frame comes around in animations.</p>
<p>If there is no linked sound, this should be <em>null.</em></p>
<pre><code>ViewFrame *frame = Game.GetViewFrame(WALKING, 2, 4);
if (frame.LinkedAudio == null)
{
  Display(&quot;This frame has no frame-linked audio.&quot;);
}
else
{
  frame.LinkedAudio.Play();
}</code></pre>
<p>checks view WALKING to see if frame 4 in loop 2 has a linked audio clip; if so, plays it.</p>
<p><em>Compatibility: Supported by <strong>AGS 3.2.0 and later versions.</strong></em></p>
<p><em>See Also:</em></p>
<h3 id="loop-property-view-frame">Loop property (view frame)</h3>
<p><em>(Formerly part of GetGameParameter, which is now obsolete)</em></p>
<pre><code>readonly int ViewFrame.Loop</code></pre>
<p>Returns the loop number represented by this ViewFrame.</p>
<pre><code>ViewFrame *frame = Game.GetViewFrame(WALKING, 2, 4);
Display(&quot;This ViewFrame is view %d, loop %d, frame %d&quot;,
  frame.View, frame.Loop, frame.Frame);</code></pre>
<p><em>See Also: , ,</em></p>
<h3 id="speed-property-view-frame">Speed property (view frame)</h3>
<p><em>(Formerly part of GetGameParameter, which is now obsolete)</em></p>
<pre><code>readonly int ViewFrame.Speed</code></pre>
<p>Gets the speed setting of the view frame. This is 0 by default but may have been changed in the AGS Editor.</p>
<pre><code>ViewFrame *frame = Game.GetViewFrame(WALKING, 2, 4);
Display(&quot;This frame has speed %d.&quot;, frame.Speed);</code></pre>
<p><em>See Also:</em></p>
<h3 id="view-property-view-frame">View property (view frame)</h3>
<p><em>(Formerly part of GetGameParameter, which is now obsolete)</em></p>
<pre><code>readonly int ViewFrame.View</code></pre>
<p>Returns the view number represented by this ViewFrame.</p>
<pre><code>ViewFrame *frame = Game.GetViewFrame(WALKING, 2, 4);
Display(&quot;This ViewFrame is view %d, loop %d, frame %d&quot;,
  frame.View, frame.Loop, frame.Frame);</code></pre>
<p><em>See Also: , ,</em></p>
<h2 id="scumm_verbcoin_gui-functions">SCUMM_VERBCOIN_GUI functions</h2>
<p>SCUMM_VERBCOIN_GUI is a script module that is included with the Verb Coin template. The functions in this section are only available if you have created your game using that template.</p>
<h3 id="SCUMM_VERBCOIN_GUI.Deselect">SCUMM_VERBCOIN_GUI Deselect</h3>
<pre><code>static SCUMM_VERBCOIN_GUI.Deselect()</code></pre>
<p>Deselect an item if it is active or quit the inventory. Used for keyboard support.</p>
<p><strong>NOTE: This function is part of the Verb Coin template and is only available if you used this template to create your game.</strong></p>
<p><em>See Also: ,</em></p>
<h3 id="SCUMM_VERBCOIN_GUI.DisableVerbCoinGUI">SCUMM_VERBCOIN_GUI DisableVerbCoinGUI</h3>
<pre><code>static SCUMM_VERBCOIN_GUI.DisableVerbCoinGUI(bool disabled)</code></pre>
<p>Activates/deactivates the SCUMM Verbcoin GUI system. This can be used to turn the SCUMM VerbCoin system on and off at runtime.</p>
<p><strong>NOTE: This function is part of the Verb Coin template and is only available if you used this template to create your game.</strong></p>
<pre><code>SCUMM_VERBCOIN_GUI.DisableVerbCoinGUI(true);</code></pre>
<p>will disable all verbcoin processing code.</p>
<h3 id="SCUMM_VERBCOIN_GUI.DoubleClickSpeed">SCUMM_VERBCOIN_GUI DoubleClickSpeed</h3>
<pre><code>static SCUMM_VERBCOIN_GUI.DoubleClickSpeed(int speed)</code></pre>
<p>Sets the time frame in which a double-click can be registered. Increase this value for slower double-clicks, decrease this value for quicker double-clicks.</p>
<p><strong>NOTE: This function is part of the Verb Coin template and is only available if you used this template to create your game.</strong></p>
<pre><code>SCUMM_VERBCOIN_GUI.DoubleClickSpeed(GetGameSpeed()/4);</code></pre>
<p>will set the double-click speed to 1/4 of a second. (This is a good default)</p>
<p><em>See Also:</em></p>
<h3 id="SCUMM_VERBCOIN_GUI.GoInventory">SCUMM_VERBCOIN_GUI GoInventory</h3>
<pre><code>static SCUMM_VERBCOIN_GUI.GoInventory()</code></pre>
<p>This function opens and closes your inventory.</p>
<p><strong>NOTE: This function is part of the Verb Coin template and is only available if you used this template to create your game.</strong></p>
<h3 id="SCUMM_VERBCOIN_GUI.Item_Count">SCUMM_VERBCOIN_GUI Item_Count</h3>
<pre><code>static SCUMM_VERBCOIN_GUI.Item_Count(int count)</code></pre>
<p>Sets the number of items that inventory scrolling will use to position to the next x amount of items.</p>
<p>This value should equal the amount of items that fit in your inventory window.</p>
<p><strong>NOTE: This function is part of the Verb Coin template and is only available if you used this template to create your game.</strong></p>
<pre><code>SCUMM_VERBCOIN_GUI.Item_Count(10);</code></pre>
<p>will make sure that on the next inventory scroll you will start with item 11, 21, 31, &#8230;</p>
<p><em>See Also: ,</em></p>
<h3 id="SCUMM_VERBCOIN_GUI.InvScroll_Left">SCUMM_VERBCOIN_GUI InvScroll_Left</h3>
<pre><code>static SCUMM_VERBCOIN_GUI.InvScroll_Left()</code></pre>
<p>Scrolls the inventory to the left, by the number of items set with Item_Count.</p>
<p><strong>NOTE: This function is part of the Verb Coin template and is only available if you used this template to create your game.</strong></p>
<p><em>See Also: ,</em></p>
<h3 id="SCUMM_VERBCOIN_GUI.InvScroll_Right">SCUMM_VERBCOIN_GUI InvScroll_Right</h3>
<pre><code>static SCUMM_VERBCOIN_GUI.InvScroll_Right()</code></pre>
<p>Scrolls the inventory to the right, by the number of items set with Item_Count.</p>
<p><strong>NOTE: This function is part of the Verb Coin template and is only available if you used this template to create your game.</strong></p>
<p><em>See Also: ,</em></p>
<h3 id="SCUMM_VERBCOIN_GUI.Inv_Border_active">SCUMM_VERBCOIN_GUI Inv_Border_active</h3>
<pre><code>static SCUMM_VERBCOIN_GUI.Inv_Border_active(bool x_borders, bool y_borders)</code></pre>
<p>Sets which inventory exit borders are active.</p>
<p>Inventory exit borders determine where the inventory will exit when moving over a line.</p>
<p><strong>NOTE: This function is part of the Verb Coin template and is only available if you used this template to create your game.</strong></p>
<pre><code>SCUMM_VERBCOIN_GUI.Inv_Border_active(false, true);</code></pre>
<p>will make the game exit the inventory when moving the mouse over either the top or the bottom of the screen.</p>
<p><em>See Also:</em></p>
<h3 id="SCUMM_VERBCOIN_GUI.Inv_Border_SetPos">SCUMM_VERBCOIN_GUI Inv_Border_SetPos</h3>
<pre><code>static SCUMM_VERBCOIN_GUI.Inv_Border_SetPos(int top, int bottom,
                                            int left, int right)</code></pre>
<p>Sets the inventory exit border positions.</p>
<p>Inventory exit borders determine where the inventory will exit when moving over a line.</p>
<p><strong>NOTE: This function is part of the Verb Coin template and is only available if you used this template to create your game.</strong></p>
<pre><code>SCUMM_VERBCOIN_GUI.Inv_Border_SetPos(20, 220, 20, 295);</code></pre>
<p>will set the top exit border to y-coordinate 20, the bottom border to y-coordinate 220, the left border to x-coordinate 20 and the right border to x-coordinate 295</p>
<p><em>See Also:</em></p>
<h3 id="SCUMM_VERBCOIN_GUI.Inventory_GUI">SCUMM_VERBCOIN_GUI Inventory_GUI</h3>
<pre><code>static SCUMM_VERBCOIN_GUI.Inventory_GUI(int gInventory_ID,int gInvUnderlay_ID)</code></pre>
<p>Sets the inventory gui ID&#8217;s, so the module will know which GUI is your inventory and which GUI is the inventory underlay.</p>
<p>This allows you to change your inventory GUI&#8217;s on the fly, which is particularly interesting if you have a game with multiple playable characters. You could have a different inventory for each character!</p>
<p>If the game is 32-bit with alpha-blended (transparent) GUI buttons on the inventory, you need to use an Underlay gui which contains the actual inventory background, and the regular gui which is empty except for the inventory window and the gui buttons.</p>
<p>If your game does not use alpha-blended GUI buttons, leave the underlay inventory empty. (use sprite 0 for its background)</p>
<p><strong>NOTE: This function is part of the Verb Coin template and is only available if you used this template to create your game.</strong></p>
<pre><code>SCUMM_VERBCOIN_GUI.Inventory_GUI(2, 3);</code></pre>
<p>will tell the module your inventory gui is GUI nr.2 and that the underlay gui is GUI nr.3</p>
<h3 id="SCUMM_VERBCOIN_GUI.RunInteraction">SCUMM_VERBCOIN_GUI RunInteraction</h3>
<pre><code>static SCUMM_VERBCOIN_GUI.RunInteraction(CursorMode)</code></pre>
<p>Runs the event of choice. Used for keyboard support.</p>
<p><strong>NOTE: This function is part of the Verb Coin template and is only available if you used this template to create your game.</strong></p>
<pre><code>SCUMM_VERBCOIN_GUI.RunInteraction(eModeTalkto);</code></pre>
<p><em>See Also: ,</em></p>
<h3 id="SCUMM_VERBCOIN_GUI.Select">SCUMM_VERBCOIN_GUI Select</h3>
<pre><code>static SCUMM_VERBCOIN_GUI.Select()</code></pre>
<p>Selects an item, or if an item is active tries to use it. Used for keyboard support.</p>
<p><strong>NOTE: This function is part of the Verb Coin template and is only available if you used this template to create your game.</strong></p>
<p><em>See Also: ,</em></p>
<h3 id="SCUMM_VERBCOIN_GUI.Verbcoin_GUI">SCUMM_VERBCOIN_GUI Verbcoin_GUI</h3>
<pre><code>static SCUMM_VERBCOIN_GUI.Verbcoin_GUI(int gVerbcoin_ID)</code></pre>
<p>Sets the verbcoin gui ID, so the module will know which GUI is your verbcoin GUI.</p>
<p>This is particularly useful if you have a game with multiple playable characters, where you could have a different verbcoin for each character.</p>
<p><strong>NOTE: This function is part of the Verb Coin template and is only available if you used this template to create your game.</strong></p>
<pre><code>SCUMM_VERBCOIN_GUI.Verbcoin_GUI(1);</code></pre>
<p>will tell the module your verbcoin gui is GUI nr.1</p>
<h3 id="SCUMM_VERBCOIN_GUI.verbgraphic">SCUMM_VERBCOIN_GUI verbgraphic</h3>
<pre><code>static SCUMM_VERBCOIN_GUI.verbgraphic(ButtonChoice, int sprite_number)</code></pre>
<p>Attaches a verbcoin sprite to a button. This sprite will be displayed when moving over the button.</p>
<p>The only exception is the &#8216;bIdle&#8217; button, which is not a button but the default verbcoin graphic with no buttons active.</p>
<p><strong>NOTE: This function is part of the Verb Coin template and is only available if you used this template to create your game.</strong></p>
<pre><code>SCUMM_VERBCOIN_GUI.verbgraphic(bTalk, 2);</code></pre>
<p>will set the sprite for moving over the talk button to sprite 2</p>
<h3 id="SCUMM_VERBCOIN_GUI.doubleclick">SCUMM_VERBCOIN_GUI doubleclick variable</h3>
<pre><code>global bool doubleclick</code></pre>
<p>Used to determine when a double-click has occured.</p>
<p><strong>NOTE: This variable is part of the Verb Coin template and is only available if you used this template to create your game.</strong></p>
<pre><code>  if (doubleclick == false){
    Display(&quot;You made a single-click&quot;);
  }
  else{
    Display(&quot;You just made a double-click!&quot;);
  }</code></pre>
<p>will display &#8220;You made a single-click&#8221; when you made a single-click on the object/hotspot/character/&#8230;</p>
<p><em>See Also:</em></p>
<h1 id="reference">Reference</h1>
<p>This section contains a reference for various parts of the system except the scripting language, which has its own separate Scripting section.</p>
<h2 id="event-types">Event Types</h2>
<p>The following events are available in the &#8220;Events&#8221; section of the Properties Window (when clicking the lightning bolt icon).</p>
<h3 id="hotspot-events">Hotspot events</h3>
<dl>
<dt>Player stands on hotspot</dt>
<dd><p>occurs repeatedly while the player character is standing on the hotspot.</p>
</dd>
<dt>Look at hotspot</dt>
<dd><p>occurs when the player clicks on the hotspot while in the &#8220;Look&#8221; mode (cursor mode 1).</p>
</dd>
<dt>Interact with hotspot</dt>
<dd><p>occurs when the player clicks on the hotspot while in the &#8220;Interact&#8221; mode (cursor mode 2).</p>
</dd>
<dt>Use inventory on hotspot</dt>
<dd><p>occurs when the player clicks on the hotspot while in the &#8220;Use inventory&#8221; mode (cursor mode 4). You can use the property to distinguish which item they used. ILBRK</p>
</dd>
<dt>Speak to hotspot</dt>
<dd><p>occurs when the player clicks on the hotspot while in the &#8220;Talk&#8221; mode (cursor mode 3).</p>
</dd>
<dt>Any click on hotspot</dt>
<dd><p>occurs when the player clicks on the hotspot in any cursor mode (except Walk). This allows you to add extra modes like smell, taste, push, pull, and so on. This event also occurs as well as the other event for the Look, Interact and Talk modes.</p>
</dd>
<dt>Mouse moves over hotspot</dt>
<dd><p>occurs repeatedly while the mouse cursor is over the hotspot. You can use this to highlight the cursor, and for other various effects.</p>
</dd>
</dl>
<h3 id="object-events">Object events</h3>
<dl>
<dt>Look at object</dt>
<dd><p>occurs when the player clicks on the object while in the &#8220;Look&#8221; mode (cursor mode 1).</p>
</dd>
<dt>Interact with object</dt>
<dd><p>occurs when the player clicks on the object in the &#8220;Interact&#8221; mode (cursor mode 2).</p>
</dd>
<dt>Speak to object</dt>
<dd><p>occurs when the player clicks on the object in the &#8220;Talk&#8221; mode (cursor mode 3).</p>
</dd>
<dt>Use inventory on object</dt>
<dd><p>works like &#8220;Use inventory on hotspot&#8221; - see that description (above) for more information.</p>
</dd>
</dl>
<h3 id="room-events">Room events</h3>
<dl>
<dt>Walk off left</dt>
<dd><p>occurs when the player character walks off the left edge of the screen.</p>
</dd>
<dt>Walk off right</dt>
<dd><p>occurs when the player walks off the right edge of the screen.</p>
</dd>
<dt>Walk off bottom</dt>
<dd><p>occurs when the player character walks off the bottom edge of the screen.</p>
</dd>
<dt>Walk off top</dt>
<dd><p>occurs when the player character walks off the top edge of the screen.</p>
</dd>
<dt>First time enters room</dt>
<dd><p>occurs the first time the player enters the room. This event occurs AFTER the screen has faded in, so it allows you to display a message describing the scene.</p>
</dd>
<dt>Player enters room (before fadein)</dt>
<dd><p>occurs just after the room is loaded into memory. This event occurs every time the player enters the screen, and it happens BEFORE the screen has faded in, which allows you to change object graphics and do other things to the screen which the player won&#8217;t notice.</p>
<p><em>NOTE: This event is ONLY meant for adjusting things such as object and character placement. Do NOT use this event for any sort of automated intro to the room - use the &#8220;Enters Room After Fade In&#8221; event for that instead.</em></p>
</dd>
<dt>Repeatedly execute</dt>
<dd><p>occurs repeatedly on every interpreter cycle. The normal game speed is 40 cycles per second, so this event occurs about every 25 milliseconds.</p>
</dd>
<dt>Player enters room (after fadein)</dt>
<dd><p>occurs every time the player enters the room, AFTER the screen has faded-in. Suitable for displaying text descriptions and so on, that you want the player to see.</p>
</dd>
<dt>Player leaves room</dt>
<dd><p>occurs when the player leaves the screen, just before the screen fades out.</p>
</dd>
</dl>
<h3 id="inventory-item-events">Inventory item events</h3>
<dl>
<dt>Look at inventory</dt>
<dd><p>occurs when the player clicks on the inventory item while in the &#8220;look&#8221; mode.</p>
</dd>
<dt>Interact with inventory</dt>
<dd><p>currently, because the Interact mode selects the inventory item, this event can only be triggered by manually calling the InventoryItem.RunInteraction script function (ie. you have to use the Handle Inv Clicks in Script option).</p>
</dd>
<dt>Speak to inventory</dt>
<dd><p>only applies to the Lucasarts-style inventory, occurs when the player clicks the Talk icon on the inventory item.</p>
</dd>
<dt>Use inventory on inv</dt>
<dd><p>occurs when the player uses another inventory object on this one. You can use the property to distinguish which item they used. ILBRK This event allows the player to combine items, and so on. For example, if they had picked up a laptop computer and a battery separately, then you could use this to allow them to insert the battery into the computer.</p>
</dd>
<dt>Other click on inventory</dt>
<dd><p>only applies to the Lucasarts-style inventory, occurs when the player clicks any other cursor mode (apart from look, talk and use_inv) on the item.</p>
</dd>
</dl>
<h3 id="character-events">Character events</h3>
<dl>
<dt>Look at character</dt>
<dd><p>occurs when the player clicks on a character while in the &#8220;look&#8221; mode.</p>
</dd>
<dt>Interact with character</dt>
<dd><p>occurs when the player clicks on a character while in the &#8220;interact&#8221; mode.</p>
</dd>
<dt>Speak to character</dt>
<dd><p>occurs when the player clicks on a character while in the &#8220;talk&#8221; mode.</p>
</dd>
<dt>Use inventory on character</dt>
<dd><p>occurs when the player uses an inventory object on a character. This event could be used to allow the player to give items to characters.</p>
</dd>
<dt>Any click on character</dt>
<dd><p>occurs when the player clicks any other cursor mode (apart from look, talk and use_inv) on the character.</p>
</dd>
</dl>
<h3 id="region-events">Region events</h3>
<dl>
<dt>While player stands on region</dt>
<dd><p>occurs repeatedly while the player character stands on this region</p>
</dd>
<dt>Player walks onto region</dt>
<dd><p>occurs when the player moves from another region onto this one. Will also activate on whichever region they start on when they enter the screen.</p>
</dd>
<dt>Player walks off region</dt>
<dd><p>occurs when the player leaves the current region. Does not occur if they go to a different room.</p>
</dd>
</dl>
<h2 id="system-limits">System limits</h2>
<p>This section tells you the maximums for various parts of the system. If you have been wondering &#8220;How many rooms can I have?&#8221; or something similar, chances are this section will answer it.</p>
<p>There are maximum&#8230;</p>
<pre><code>      40  objects per room
     299  state-saving rooms per game
     300  inventory items
   30000  imported sprites
     500  dialog topics
      30  options per dialog topic
      20  screen overlays at a time
       5  background frames per room
      20  mouse cursors
       8  audio channels
     100  local messages per room (excluding script)
      30  fonts
unlimited words in the text parser dictionary
unlimited characters
unlimited views
unlimited GUIs
unlimited controls on each GUI
unlimited loops per view
unlimited frames per loop
unlimited custom properties</code></pre>
<p>We are working on removing existing limitations in the AGS, so some of the remaining restrictions might be loosened or eliminated in the following updates.</p>
<h2 id="keyboard-shortcuts">Keyboard Shortcuts</h2>
<p>The AGS Editor provides various keyboard shortcuts to help you get your work done quickly. These are summarized below:</p>
<pre><code>F1       Help
F2       Game Statistics
F3       Find Next
Ctrl+F4  Close tab
F5       Run with Debugger
Ctrl+F5  Run without Debugger
F7       Build EXE
F9       Toggle Breakpoint
F11      Step Into

Ctrl+A   Select All
Ctrl+B   Match Brace
Ctrl+C   Copy
Ctrl+D   Duplicate line to next
Ctrl+E   Replace
Ctrl+F   Find
Ctrl+G   Open GlobalScript.asc
Ctrl+H   Open GlobalScript.ash
Ctrl+L   Open Game
Ctrl+Q   Quit
Ctrl+R   Save Room
Ctrl+S   Save Game
Ctrl+V   Paste
Ctrl+W   Close Tab
Ctrl+X   Cut
Ctrl+Y   Redo
Ctrl+Z   Undo

Ctrl+Space      Show Autocomplete
Ctrl+Tab        Next tab
Ctrl+Shift+Tab  Previous tab

Tab         Indent selected lines
Shift+Tab   Un-indent selected lines</code></pre>
<h2 id="ascii-code-table">ASCII code table</h2>
<p>This section lists the key codes which can be passed to on_key_press and which keys they represent:</p>
<pre><code>AGS KeyCode       Key         ASCII code
eKeyNone          none          0
eKeyCtrlA         Ctrl+A        1
eKeyCtrlB         Ctrl+B        2
eKeyCtrlC         Ctrl+C        3
eKeyCtrlD         Ctrl+D        4
eKeyCtrlE         Ctrl+E        5
eKeyCtrlF         Ctrl+F        6
eKeyCtrlG         Ctrl+G        7
eKeyCtrlH         Ctrl+H        8
eKeyCtrlI         Ctrl+I        9
eKeyCtrlJ         Ctrl+J       10
eKeyCtrlK         Ctrl+K       11
eKeyCtrlL         Ctrl+L       12
eKeyCtrlM         Ctrl+M       13
eKeyCtrlN         Ctrl+N       14
eKeyCtrlO         Ctrl+O       15
eKeyCtrlP         Ctrl+P       16
eKeyCtrlQ         Ctrl+Q       17
eKeyCtrlR         Ctrl+R       18
eKeyCtrlS         Ctrl+S       19
eKeyCtrlT         Ctrl+T       20
eKeyCtrlU         Ctrl+U       21
eKeyCtrlV         Ctrl+V       22
eKeyCtrlW         Ctrl+W       23
eKeyCtrlX         Ctrl+X       24
eKeyCtrlY         Ctrl+Y       25
eKeyCtrlZ         Ctrl+Z       26
eKey0             0            48
eKey1             1            49
eKey2             2            50
eKey3             3            51
eKey4             4            52
eKey5             5            53
eKey6             6            54
eKey7             7            55
eKey8             8            56
eKey9             9            57
eKeyA             A            65
eKeyB             B            66
eKeyC             C            67
eKeyD             D            68
eKeyE             E            69
eKeyF             F            70
eKeyG             G            71
eKeyH             H            72
eKeyI             I            73
eKeyJ             J            74
eKeyK             K            75
eKeyL             L            76
eKeyM             M            77
eKeyN             N            78
eKeyO             O            79
eKeyP             P            80
eKeyQ             Q            81
eKeyR             R            82
eKeyS             S            83
eKeyT             T            84
eKeyU             U            85
eKeyV             V            86
eKeyW             W            87
eKeyX             X            88
eKeyY             Y            89
eKeyZ             Z            90
eKeyAmpersand         &amp;            38
eKeyAsterisk          *            42
eKeyAt                @            64
eKeyBackSlash         \            92
eKeyBackspace         Backspace     8
eKeyCloseBracket      ]            93
eKeyCloseParenthesis  )            41
eKeyColon             :            58
eKeyComma             ,            44
eKeyDelete            Delete      383
eKeyDollar            $            36
eKeyDoubleQuote       &quot;            34
eKeyEquals            =            61
eKeyEscape            ESC          27
eKeyExclamationMark   !            33
eKeyForwardSlash      /            47
eKeyGreaterThan       &gt;            62
eKeyHash              #            35
eKeyHyphen            -            45
eKeyInsert            Insert      382
eKeyLessThan          &lt;            60
eKeyOpenBracket       [            91
eKeyOpenParenthesis   (            40
eKeyPercent           %            37
eKeyPeriod            .            46
eKeyPlus              +            43
eKeyQuestionMark      ?            63
eKeyReturn            RETURN       13
eKeySemiColon         ;            59
eKeySingleQuote       &#39;            39
eKeySpace             SPACE        32
eKeyTab               TAB           9
eKeyUnderscore        _            95
eKeyF1                F1          359
eKeyF2                F2          360
eKeyF3                F3          361
eKeyF4                F4          362
eKeyF5                F5          363
eKeyF6                F6          364
eKeyF7                F7          365
eKeyF8                F8          366
eKeyF9                F9          367
eKeyF10               F10         368
eKeyF11               F11         433
eKeyF12               F12         434
eKeyHome              Home        371
eKeyUpArrow           UpArrow     372
eKeyPageUp            PageUp      373
eKeyLeftArrow         LeftArrow   375
eKeyNumPad5           NumPad 5    376
eKeyRightArrow        RightArrow  377
eKeyEnd               End         379
eKeyDownArrow         DownArrow   380
eKeyPageDown          PageDown    381</code></pre>
<p>Use these key codes in your on_key_press function to process player input. For example:</p>
<pre><code>if (keycode == eKeyA) Display(&quot;You pressed A&quot;);
if (keycode == eKeyPlus) Display(&quot;You pressed the Plus key&quot;);</code></pre>
<p>The following extra codes can only be used with IsKeyPressed (ie. on_key_press is never called with these codes):</p>
<pre><code> 403       Left shift
 404       Right shift
 405       Left ctrl
 406       Right ctrl
 407       Alt</code></pre>
<h1 id="frequently-asked-questions">Frequently Asked Questions</h1>
<p>This section of the manual is very rarely updated. Please consult the AGS Forums on the website &#8211; in particular, the Beginners Technical Forum has an excellent Beginners FAQ (the &#8220;BFAQ&#8221;) which is much more extensive and is updated regularly with all sorts of Q&amp;A&#8217;s.</p>
<p><strong>Q. What&#8217;s the deal with the license? What does it mean in plain English?</strong></p>
<p>A. Adventure Game Studio is pretty much freeware. That means you may use it freely for non-commerical games, and you don&#8217;t have to send me anything in return. There is one requirement - if you want to SELL a game you make, for profit, then you must contact me beforehand as there are some licensing issues which you may need to be aware of. When you finish your game, please do post it on the Announcements Forum and the Games Database so that everyone can give it a go.</p>
<p><strong>Q. Why the swapware license? Why aren&#8217;t you charging for it?</strong></p>
<p>A. Because I don&#8217;t want to. There&#8217;s no need to be suspicious, the fact that it&#8217;s free doesn&#8217;t necessarily mean that it&#8217;s rubbish.</p>
<p><strong>Q. On my screen, I can&#8217;t move the main character. Wherever I click to move him, he just stands there.</strong></p>
<p>A. If the main character isn&#8217;t on a walkable area, he will not be able to move. Load the room in the editor, and check that the location where the character starts is on a walkable area.</p>
<p><strong>Q. When I enter a certain room, I just get a black screen.</strong></p>
<p>A. Make sure that you haven&#8217;t used a Display Message command in the &#8220;Enters room before fade-in&#8221; event for that room. Remember that this event happens BEFORE the screen fades in.</p>
<p>To make sure, when you get the black screen, try pressing enter, or clicking the left mouse button. If nothing happens then something more serious may have happened. If this is the case, press Alt+X, which should exit the program and allow you to trace which line of script it has stopped on.</p>
<p><strong>Q. The character isn&#8217;t drawn behind my walk-behind areas!</strong></p>
<p>A. You need to define the base line for the area, or he will always be drawn in front. See the tutorial for more information.</p>
<p><strong>Q. My game EXE file seems to have disappeared.</strong></p>
<p>A. Because this file is your entire game, including the room files, when you save a room in the Room Editor it will delete the exe file (because the room contained in the exe is out of date). To get it back, simply build the game again by using the &#8220;Build EXE&#8221; command on the Build menu.</p>
<h1 id="upgrading-to-ags-2.7">Upgrading to AGS 2.7</h1>
<p>The script language in AGS 2.7 has changed quite significantly from previous versions. Many of the script commands have become <em>object-based, which has several advantages over the previous approach. This page will attempt to introduce you to the new method and explain its benefits.</em></p>
<p>Firstly, so that you can get an idea of the changes, here&#8217;s an example of some old-style script commands and their new equivalents:</p>
<pre><code>AnimateObjectEx(0,2,0,0,0,1);
ListBoxAdd(3, 5, &quot;New item&quot;);</code></pre>
<p>becomes:</p>
<pre><code>oWaterfall.Animate(2, 0, eOnce, eForwards, eBlock);
lstTest.AddItem(&quot;New item&quot;);</code></pre>
<p>Just from looking at that example the advantages should be obvious; the script is more intuitive for people to learn, much easier to read (no guessing what all the numbers mean in the AnimateObjectEx call), and therefore you&#8217;re less likely to make mistakes when using it. GUI controls having names brings it much more into line with Visual Basic-style GUI development, so you don&#8217;t have to remember what control number all your buttons are.</p>
<p>The script editor&#8217;s autocomplete functionality has been significantly enhanced to aid in all this as well. You&#8217;ll see as you start to experiment that autocomplete pops up more often and lists only the relevant commands thanks to object-based scripting.</p>
<p><strong>So does this mean I have to throw out all my scripts?</strong></p>
<p>No, certainly not! The new version is fully backwards compatible, so all your existing scripts will continue to work just fine. However, for any new scripts that you write, it&#8217;s strongly recommended that you use the new object-based commands.</p>
<p><strong>Ok, so uh&#8230; what&#8217;s changed exactly?</strong></p>
<p>The script language syntax hasn&#8217;t changed at all (that&#8217;s the way you use semicolons, brackets, and so on). It&#8217;s still just like it was before, but with some new additions. Most significantly, most commands are now called <strong>on something. For example, the old command:</strong></p>
<p><code>StopMoving(EGO);</code></p>
<p>Just from looking at that, it&#8217;s not at all obvious what StopMoving does. Does it stop a character moving, an object moving, or does it stop the screen moving? It&#8217;s not intuitive. So now, rather than supplying the character as a parameter to the function, you actually call the function <strong>on the character. So:</strong></p>
<p><code>character[EGO].StopMoving();</code></p>
<p>Now it&#8217;s perfectly clear that it&#8217;s the character EGO that we want to stop moving.</p>
<p>Suppose you&#8217;re wondering what commands you can call on a character. Previously it was hard to tell, but now if you type <code>character[EGO].</code> in the script editor, auto-complete will pop up and list all the valid functions and properties that you can access on the character.</p>
<p><strong>So I have to keep typing character[EGO] all the time? What a pain!</strong></p>
<p>Not so fast! Most of the new object-based commands can be called in two ways &#8211; either through the main array as we just saw, but also through what&#8217;s called the character&#8217;s <strong>Script O-Name. This is a shorthand that allows you to directly access things, and for characters it is the script name in sentence case, with a &#8220;c&#8221; added to the beginning. So, in this example it would be:</strong></p>
<p><code>cEgo.StopMoving();</code></p>
<p>This line has an identical effect to the one with character[EGO] that we used above.</p>
<p>Furthermore, the <em>player variable is now kept up to date with the current player character, so it is actually useful. In a multi-character game, what you previously had to write like this:</em></p>
<p><code>StopMoving(GetPlayerCharacter());</code></p>
<p>can now be done like this:</p>
<p><code>player.StopMoving();</code></p>
<p><strong>Hmm, I see&#8230; so what exactly has been object-ised?</strong></p>
<p>Currently, the following object-based things are available:</p>
<p>|l|l|</p>
<p>GUI controls are handled slightly differently. They all have a script name, and are directly accessed via that. For example, if you set the script name of a list box to &#8220;lstSaves&#8221;, then you would use &#8220;lstSaves.&#8221; to access it. There is no global array of GUI controls.</p>
<p><strong>How do I find out the new equivalents of old functions?</strong></p>
<p>The help file&#8217;s index has been set up to automatically redirect you to the new commands. Just open the help file, go to the index and type in the name of an old command, and it will bring you to the new object-based equivalent (if there is one).</p>
<p><strong>Which commands haven&#8217;t been changed?</strong></p>
<p>Commands which don&#8217;t operate on anything in particular (and therefore wouldn&#8217;t really benefit from being object-based) have been left alone. For example, SaveGameSlot, QuitGame and so on have all remained identical to how they were in previous versions.</p>
<p><strong>What&#8217;s the deal with these &#8220;eBlock&#8221; type things?</strong></p>
<p>AGS now supports <strong>enumerated types. Basically, in situations where you have to choose one from a list of possible options, an enumerated type (or <em>enum) now steps in. In the past, you had commands with descriptions like this:</em></strong></p>
<p>&#8220;Pass 1 if you want the function to block, or 0 if you don&#8217;t&#8221;.</p>
<p>This lead to lots of 1&#8217;s and 0&#8217;s in function calls, which are hard to read. Now, instead of this each number is represented by an easy-to-remember word (such as <em>eBlock and </em>eNoBlock). Even better, when you call a function that uses an enum parameter, auto-complete automatically pops up the list of options for you to choose from.**</p>
<p>See the description for information on how to create your own.</p>
<p><strong>So do I have to pass all these things like eBlock every time I call the function?</strong></p>
<p>Nope! Many functions now support <strong>optional parameters, where the most common options are selected automatically. If you look at the help for a function such as the , you&#8217;ll see some of the parameters are defined as &#8220;optional&#8221;. This means that you don&#8217;t have to supply them; if you don&#8217;t, the default option that will be chosen is described in the help for that command.</strong></p>
<p><strong>So what else is new?</strong></p>
<p>Well, 2.7 introduces the <em>float data type, so AGS now finally supports floating-point arithmetic in your scripts. Also, for more advanced scripters, you can create your own member functions (including protected and static ones) to write cleaner script than just having a bunch of global functions.</em></p>
<p>Also, the script editor is now much better at checking your script for errors. You may well find that a script which compiled fine before no longer works on 2.7. Hopefully the error message should direct you towards fixing any problems.</p>
<p><strong>Is there anything else I should watch out for?</strong></p>
<p>Because of the new additions, the script language has more reserved words than before. For example, words like &#8220;gui&#8221;, &#8220;object&#8221; and &#8220;hotspot&#8221; are now reserved (since they are used to access the global arrays). If your script uses any variables with these names, it will no longer work. You&#8217;ll need to change the variable name in order to compile.</p>
<p>Also, the script language now supports <em>pointers. Because they are a fairly complex topic, there&#8217;s a devoted to explaining what they are.</em></p>
<p><strong>Blimey, that&#8217;s a lot to take in. Where do I start?</strong></p>
<p>I&#8217;d recommend attempting to write your next section of script in the new way. Each time you&#8217;re about to use an old-style command, simply look it up in the manual to find out what it&#8217;s replacement is.</p>
<p>Once you get used to the new system, I&#8217;m sure you&#8217;ll agree that it is a significant improvement over the old scripting system and you&#8217;ll start to enjoy the benefits of faster and more intuitive coding.</p>
<p>As always, if there&#8217;s something you really can&#8217;t get your head round, post on the AGS Forums and we&#8217;ll help you out as best we can!</p>
<p>Have fun, ILBRK CJ</p>
<h1 id="upgrading-to-ags-2.71">Upgrading to AGS 2.71</h1>
<p>AGS 2.71 adds new simple string support to the scripting language. Strings have long been a pain to use in AGS, but this is finally addressed by v2.71.</p>
<p>There&#8217;s a new String type (that&#8217;s a capital &#8216;S&#8217;). These new strings behave like Java/<code>C#</code> strings in that you can easily assign to and manipulate them.</p>
<p>For example, in 2.7 and previous versions, you had to do this: ILBRK</p>
<pre><code>string text;
StrCopy(text, &quot;This is my text&quot;);</code></pre>
<p>in 2.71, you can now do:</p>
<pre><code>String text = &quot;This is my text&quot;;</code></pre>
<p>Furthermore, the == and != operators can be used to compare strings for equality (equivalent to using StrComp but much more intuitive). An additional benefit is that there is no longer a need for GetText() and SetText() methods &#8211; instead, we can now just have Text properties.</p>
<p>All the old-style functions that took a &#8220;string buffer&#8221; parameter have now been replaced with new ones that return a string instead. Where properties have been created, you should be able to use them like any other property, so:</p>
<pre><code>lblLabel.Text = &quot;Hello&quot;;
String buttonValue = btnOK.Text;</code></pre>
<p>and so on.</p>
<p><strong>NOTE: Some of the new functions are provided on the Game object &#8211; for example, the new GetSaveSlotDescription function needs to be called like this:ILBRK <code>String description = Game.GetSaveSlotDescription(10);</code> ILBRK This is part of a move towards all built-in functions being object-based, but watch out for it as it could well cause some confusion. The manual will show you which functions require this.</strong></p>
<p>Rather than using old functions like StrCat and StrContains, you now call the functions directly on the strings:</p>
<pre><code>String text = &quot;Hello&quot;;
text = text.Append(&quot;World&quot;);</code></pre>
<p>will mean that <em>text now contains &#8220;HelloWorld&#8221;. ILBRK Note the <strong>text = in that expression. Functions like Append will return a modified version of the string, they won&#8217;t actually change the original. Therefore, to update the <em>text variable you need to assign the result to it.</em></strong></em></p>
<p><strong>Backwards compatibility</strong></p>
<p>In order to maintain backwards compatibility, a new &#8220;const&#8221; keyword has been added. This applies only to old-style strings, and allows them to interoperate with the new ones. A new-style String can be passed to a function that expects a &#8220;const string&#8221; (which means that it will not be allowed to change the string&#8217;s contents), but cannot be passed to a function that expects a &#8220;string&#8221; (since it could overwrite the string data and mess things up).</p>
<p>So, you may find that any custom functions you have that take a string parameter stop working. If this is the case, change the parameter from &#8220;string&#8221; to &#8220;const string&#8221; and that should fix it.</p>
<p>Apologies for the inconvenience, but this is the only way to allow new Strings to interoperate safely with old-style strings.</p>
<h1 id="upgrading-to-ags-3.0">Upgrading to AGS 3.0</h1>
<p>If you&#8217;ve used AGS before, you&#8217;ll probably be a bit confused and perhaps even taken aback by this new editor. But don&#8217;t worry, once you&#8217;ve got used to it I&#8217;m sure you&#8217;ll agree that it&#8217;s a massive improvement over the old one.</p>
<p>The best place to start is probably to flick through , which has been updated for AGS 3 and by following it through you should get a good feeling for how the editor works.</p>
<p>The main changes are explained below:</p>
<p><strong>Interaction Editor</strong></p>
<p>The Interaction Editor has been removed from AGS 3.0. When you import your game, AGS will attempt to convert all your interactions into scripts. These should mostly just work, however there are a couple of things you should be aware of:</p>
<p>1. Concurrency issues &#8211; that is, while a blocking script was running in 2.72 it was still possible for interactions to run at the same time if they didn&#8217;t include any scripting. Now, that is no longer the case. ILBRK 2. Blocking interactions &#8211; in 2.72, a &#8220;Run Dialog&#8221; interaction, for example, waits until the dialog has finished before moving onto the next action. If you had a Run Dialog followed by a Change Room, then the dialog would finish before the room change happened. ILBRK With scripting, you need to be careful because the dialog[x].Start() command does not block; instead, it waits until the event script has finished running before the dialog runs. This would mean that the room change would not necessarily happen after the dialog. ILBRK To mitigate these types of problems, you can use an alternate solution such as a <em>run-script command at the end of the dialog to run the room change.</em></p>
<p><strong>Global Messages</strong></p>
<p>Global Messages are no longer supported and should be considered obsolete &#8211; there&#8217;s really no need for them now that the interaction editor has gone. Any global messages that you had will be retained and will still work, however the AGS 3 editor provides no way to edit them. If you need to change one, just replace the <code>DisplayMessage</code> command with a normal <code>Display()</code> command.</p>
<p>As of 3.0.2, there is now a Global Variables editor in which you can create global string variables, which provide all the functionality of Global Messages and more.</p>
<p><strong>Saving and testing your game</strong></p>
<p>AGS 3.0 works slightly differently to previous versions in the way that saving and testing games works. The Save option (Ctrl+S) is the equivalent of the old &#8220;Quick Save&#8221; option &#8211; it will save your changes, but not compile the EXE file.</p>
<p>The &#8220;Test game&#8221; option has become &#8220;Run&#8221; on the Build menu. This runs your game with the new , which allows you to pause and step through the script in order to track down problems.</p>
<p>The debugger always runs your game in a window, so if you want to test it out full-screen there&#8217;s the &#8220;Run without debugger&#8221; option (Ctrl+F5) to do so.</p>
<p>Use the &#8220;Build EXE&#8221; command (F7) when you want to create all the compiled files to distribute your game.</p>
<p><strong>NOTE: When you use the Run command, your game EXE file does </strong>NOT get built. AGS 3&#8217;s Run command is much faster than the old Test Game command because it directly loads the files from the game folder instead. If you want to build your game EXE, you need to use the &#8220;Build EXE&#8221; command to do so.****</p>
<p><strong>RawDraw scripting changes</strong></p>
<p>The RawDraw family of functions have finally been object-ised, and the old versions are now obsolete. Support has been added to allow you to RawDraw onto dynamic sprites as well as room backgrounds. As a result, at first the new commands will seem more complicated than the old ones, since you can no longer just do &#8220;RawDrawImage&#8221; to draw something onto the room background.</p>
<p>Instead, there is a new object which you do the drawing onto. You get one of these by calling or , depending on what you want to draw onto; and you can then use the various drawing surface methods to do your drawing.</p>
<p>You must call on the surface once you have finished drawing onto it, which tells AGS to update the data in memory.</p>
<p>For examples, see the function help pages.</p>
<p><strong>Other script changes</strong></p>
<p>Scripting hasn&#8217;t really changed in AGS 3. Two new features (extender functions and dynamic arrays) have been added, but you shouldn&#8217;t need to change any existing code.</p>
<p>The only breaking changes are as follows: ILBRK 1. <code>new</code> is now a reserved word. This means that if you had any variables called &#8220;new&#8221; then your script will fail to compile. Just rename the variable to something else. ILBRK 2. Because of the removal of some system limits, some of the AGS_MAX_ constants have been removed (since there is no sensible value for them now that the limits have gone). This will probably only affect module authors and is unlikely to affect your game. Specifically, the following have been removed: AGS_MAX_GUIS, AGS_MAX_CHARACTERS, AGS_MAX_VIEWS, AGS_MAX_LOOPS_PER_VIEW, AGS_MAX_FRAMES_PER_LOOP.</p>
<h1 id="upgrading-to-ags-3.1">Upgrading to AGS 3.1</h1>
<p>AGS 3.1 contains some major changes over previous versions. The main change is support for native hi-res co-ordinates.</p>
<p><strong>What are native hi-res co-ordinates?</strong></p>
<p>In previous versions of AGS, everything in the game was addressed in co-ordinates ranging from 0-319 for X values, and 0-199 (or 239) for Y values.</p>
<p>This made sense if your game was 320x200 or 320x240, but if your game was running at 640x480 or 800x600 this was a pain because you couldn&#8217;t think in the co-ordinate system that your game was written for.</p>
<p><strong>Why was it like this?</strong></p>
<p>When AGS was originally written it only supported 320x200, and extra resolutions were then &#8220;bolted-on&#8221; on top later. But the fundamental co-ordinate system underneath was never changed. This had the advantage that Setup could provide the option to run a 320x200 game at 640x400 or vice versa, since it didn&#8217;t make any difference to the way the game would run internally.</p>
<p><strong>Why change it?</strong></p>
<p>One of the main problems with the 320x200 co-ordinate system was that if you were making a 640x480 game, you could only ever place objects and characters on even co-ordinates. Aligning the objects with the background properly could be a pain and involved adding an extra column of transparent pixels to the sprite to get it to line up properly.</p>
<p>Originally this was judged to be a minor annoyance, but over time as more and more people have started making hi-res games it has become a major limitation of AGS.</p>
<p><strong>What has changed?</strong></p>
<p>If your game is 320x200 or 320x240, you will not notice any difference. Everything should continue working the same way as before.</p>
<p>However, if your game is 640x400 or higher then the first thing you will notice when importing your game into AGS 3.1 is that all the co-ordinates in the editor will double. From now on, the editor will <strong>always display native hi-res co-ordinates.</strong></p>
<p>In your scripts though, you&#8217;ve probably got loads of commands like <em>player.Walk where you pass in specific low-res co-ordinates. By default, AGS will import your game in backwards-compatible mode, where your scripts continue to work as before. This means that all script commands and properties will continue to accept and return low-res co-ordinates. It also means that the limitations of placing objects on even pixels remains.</em></p>
<p>If you want to enable the new native hi-res co-ordinate support, there is an option in the Scripting section of the General Settings pane called &#8220;Use low-res co-ordinates in script&#8221;. If you turn this off, AGS will expect native resolution co-ordinates to be used in your script.</p>
<p>Obviously converting all your scripts to use hi-res co-ordinates would be a mammoth task, so you may well decide to continue using low-res co-ordinates for your current game, and then start your next game with native hi-res co-ordinates. It&#8217;s up to you.</p>
<p><strong>Setup has changed, I can&#8217;t select the resolution any more!</strong></p>
<p>Yes, as part of the support for native co-ordinates, you are no longer able to run a 320x200 game at 640x400, or vice versa.</p>
<p>If you are developing a 320x200 game and were using the 640x400 setting to enlarge the window, you can enable the 2x or 3x graphics filter in Setup instead, which provides a similar result.</p>
<h1 id="upgrading-to-ags-3.2">Upgrading to AGS 3.2</h1>
<p>AGS 3.2 contains some major changes, the main one being a completely new way of scripting the game audio.</p>
<p><strong>Why a new audio system?</strong></p>
<p>In previous versions of AGS, sound and music was a pain to use. Although it was very simple to script using commands like PlayMusic(5) and PlaySound(10), the fact that it was so basic became a limitation.</p>
<p>What is music 5? Which sound effect is Sound 10? How are you supposed to remember? It was all a bit chaotic and old-fashioned. Furthermore, controlling the volume involved several different commands, making it something of a black art.</p>
<p><strong>So what&#8217;s changed?</strong></p>
<p>The old commands like PlayMusic and PlaySound have been obsoleted now, and replaced with a new object-based audio system. This means that audio files are now represented by script instances in the game.</p>
<p>For example, in AGS 3.1.2, you might have done this:</p>
<p><code>PlaySound(10); // this is an explosion</code></p>
<p>Now, with AGS 3.2 you would do it like this instead:</p>
<p><code>aExplosion.Play();</code></p>
<p><strong>So how do I name my audio files?</strong></p>
<p>There is a new &#8220;Audio&#8221; item in the project tree, which you now use to manage your audio. By default, when you import your game from a previous version of AGS, it will create audio clips with names like &#8220;aMusic5&#8221; and &#8220;aSound30&#8221;, corresponding to their old names.</p>
<p>If you want the old-style commands like PlayMusic and PlaySound to continue working, then <strong>you must not rename these audio clips. AGS maintains a backwards compatibility layer by mapping the PlayMusic(X) command to play an audio clip called &#8220;aMusicX&#8221;, and the PlaySound(X) command to play a clip called &#8220;aSoundX&#8221;.</strong></p>
<p>Otherwise, if you want to convert your scripts to the new audio system, you can simply right-click and rename these audio clips as you see fit.</p>
<p><strong>There is now an AudioCache folder, do I still need the Sound and Music folders?</strong></p>
<p>When you import an audio file into AGS, it makes a copy of it in the AudioCache folder, but it also remembers where the file came from originally. If the original file changes, AGS will automatically copy the updated file into the AudioCache folder.</p>
<p>When you upgrade an old game, the original file location for where AGS thinks your audio files came from is set to the &#8220;Sound&#8221; and &#8220;Music&#8221; folders. Therefore, keeping these folders is advisable initially as it allows you to continue to update the existing files in the same way you always have done, and AGS will automatically pick up the changes.</p>
<p>But going forward, as you import new audio files, there&#8217;s no need to have them in the Sound or Music folders; import them from wherever you like.</p>
<p><strong>What about controlling the volume?</strong></p>
<p>Glad you asked! Instead of all those old commands like SetMusicVolume, SetDigitalMasterVolume, etc, there is now simply one overall system volume (), and then each sound that is playing has its own volume control as well. This is controlled by the on the audio channel (see the for details on this).</p>
<p>Finally, you can update the volume of one particular type of audio (eg. sound, music) by using the command.</p>
<p><strong>Wait, what&#8217;s an audio channel?</strong></p>
<p>AGS uses two new concepts &#8211; Audio Clips (which represent a particular sound file), and Audio Channels (which represent a currently playing piece of audio). The reason for this distinction is that you might have the same sound effect playing two or more times simultaneously, and having Audio Channels allows you to control each one individually. The describes this further.</p>
<p><strong>PlayAmbientSound is obsolete! How do I do ambient sounds?</strong></p>
<p>Ambient Sounds were a bit of an oddity in AGS, caused by the fact that you couldn&#8217;t tell a PlaySound command to loop the sound. With the new audio system, the has an optional Repeat parameter, allowing you to specify whether it loops or not.</p>
<p>The X/Y directional aspect of PlayAmbientSound is supported by the command on the audio channel.</p>
<p><strong>Is there any new cool stuff that I can do?</strong></p>
<p>You can now adjust the left-right panning of audio, using the property. You also have finer control over syncing up different pieces of audio, through the ability to get and seek offsets more accurately.</p>
<p><strong>Has voice speech changed?</strong></p>
<p>No, speech is still handled the same way as in previous versions of AGS. You still need the Speech folder within your game folder, and name the files within it using the same naming convention as you always have done.</p>
<p><strong>Where should I look for more info?</strong></p>
<p>See the for more information.</p>
<h1 id="upgrading-to-ags-3.3">Upgrading to AGS 3.3</h1>
<p>AGS 3.3 editor contains a major change to user interface that now lets you to &#8220;unpin&#8221; visual panels, drag them to any place you want and dock them or optionally leave them in &#8220;floating&#8221; mode. You may also have more than one editing panel on screen at once, for example room editor and script editor. This allows everyone to customize the panes layout in AGS to their own taste.</p>
<p>You may now create folders for characters, dialogs, inventory items, guis, rooms, scripts and views, move them up/down by context menu, and drag &amp; drop items to change their order. The &#8220;Sort room by number&#8221; command now sorts within folders.</p>
<p>Script and header files are now combined into one group item, similar to room settings and script.</p>
<p><strong>Proper alpha blending</strong></p>
<p>AGS now features proper alpha blending when drawing GUI Controls and using Drawing Surfaces. This feature is enabled by two separate options in the &#8220;Visual&#8221; section of the General Settings: &#8220;GUI alpha rendering style&#8221; and &#8220;Sprite alpha rendering style&#8221;. This is done for compatibility with projects created in previous versions of AGS. When importing a project in AGS 3.3 these options will retain their original values. You may consider setting them to &#8220;Proper alpha blending&#8221;, but that may alter the appearance of your game. New projects will have &#8220;proper blending&#8221; mode set by default.</p>
<p>To support alpha blending a new property has been added to DialogOptionsRenderingInfo class. This property must be set it in function, the one where you normally define size and position of the drawing surface.</p>
<p><strong>System limits update</strong></p>
<p>The maximal number of Fonts has been increased from 15 to 30.</p>
<p><strong>New Speech class</strong></p>
<p>There&#8217;s now a new Speech script class that contains several speech-related properties. This renders a number of obsolete, as well as some of the . If you are using any of them in your script you will likely get compilation errors. Simply replace them by the corresponding Speech properties, as shown in the table below:</p>
<p>|l|l|</p>
<p><strong>Game-wide speech animation delay</strong></p>
<p>The &#8220;Old-style game-wide speech animation speed&#8221; general setting previously found in &#8220;Backwards compatibility&#8221; section was replaced with two settings in &#8220;Dialog&#8221; section: &#8220;Use game-wide speech animation delay&#8221; and &#8220;Game-wide speech animation delay&#8221;. The first enables the use of the game-wide delay and the second specifies exact delay value. These settings are accompanied by two respective properties in the Speech class.</p>
<p><strong>Translated ListBox</strong></p>
<p>In the previous versions of AGS the ListBox items were never translated. A new &#8220;Translated&#8221; property has been added to ListBox class, which forces engine to translate ListBox items. Default value is True but it is recommended to set it to False if you are using ListBox for listing savedgames. <strong>NOTE: when older projects are imported, it is set to False automatically.</strong></p>
<h1 id="upgrading-to-ags-3.3.5">Upgrading to AGS 3.3.5</h1>
<p>Since 3.3.5 AGS does not allow to <strong>write any files into other path rather than &#8220;<code>$SAVEGAMEDIR$</code>&#8221; (personal user saves directory) or &#8220;<code>$APPDATADIR$</code>&#8221; (all-users game data directory). If you attempt to open file for </strong>writing using relative path without location tag, the filepath will be automatically remapped to <code>$APPDATADIR$</code> location.****</p>
<p>Because of that, for backwards compatibility reasons, when you try to open file for reading using relative path without location tag, AGS will first look for that file in <code>$APPDATADIR$</code>, and only if no matching file is found there, then the game installation directory will be checked.</p>
<p>To force opening file in the game installation directory (for reading) a new location tag was introduced: &#8220;<code>$INSTALLDIR$</code>&#8221;. When using this tag you will explicitly tell AGS to look in and only in the game&#8217;s installation directory. However, if you try opening file for writing at such location, that will result in failure.</p>
<p>Players are now allowed to set up their own custom path in game setup, where the game saves &amp; data will be written. This is done in the game setup program. This works as if <code>$SAVEGAMEDIR$</code> and <code>$APPDATADIR$</code> were redirected to custom location. Redirection is done internally by the engine, you do not need to add anything to your game scripts to make it work.</p>
<p>Conceptually, AGS is gradually leaning towards using only &#8220;symbols of file locations&#8221; rather than actual, explicit locations on the filesystem.</p>
<p>Furthermore, game setup will now write config file into game saves location, rather than game&#8217;s installation directory. If config file is present in the game installation folder, then it is used as &#8220;default&#8221; read-only config file. The config in saves folder overrides default one. This way it should be totally safe to install AGS games into C:/Program Files, without having administrative rights.</p>
<h1 id="upgrading-to-ags-3.4">Upgrading to AGS 3.4</h1>
<p>AGS 3.4 introduces a number of significant enhancements to game creation process.</p>
<p><strong>Building game for multiple platforms</strong></p>
<p>AGS can now compile and deploy your game for more than one target platform. Currently Windows and Linux are officially supported, but other may be added in following updates. Check the &#8220;Built target platforms&#8221; option in the &#8220;Compiler&#8221; section of the General Settings.</p>
<p><strong>NOTE: for deploying your game for Linux you need to have a Linux-related utilities to be placed in the &#8220;Linux&#8221; folder at your AGS Editor installation. Those files are distributed along with the official AGS release.</strong></p>
<p><strong>Custom game resolution</strong></p>
<p>Your native game resolution can now be anything, not limited to predefined variants anymore.</p>
<p>Similarily, the engine is now capable of running any game in any display mode your system supports. To achieve this it uses scaling filter of player&#8217;s choice, and additional simple image stretching when required. The setup program has been altered to reflect this feature.</p>
<p><strong>Script API selector</strong></p>
<p>You can now choose the variant of Script API (built-in functions and properties available for use) with two switches in the &#8220;Backwards Compatibility&#8221; section of the General Settings.</p>
<p>One switch is called &#8220;Script API version&#8221; and defines the topmost level of built-in script content that you want to enable for your project. It is suggested to set this to the highest possible value. However, there may be cases when you load an lder project in the newer version of AGS, and new built-in function names conflict with names in some of the scripts you used in your project. In such cases you may decide between fixing your script or lowering AGS API version. The latter will let you compile game scripts without any changes, at the price of not being able to use newer built-in functions.</p>
<p>Second switch is called &#8220;Script Compatibility Level&#8221; and defines the lowest level of built-in content. It is useful if you wish to keep using some of the old functions that were declared obsolete by newer version of AGS. You do so by setting this switch to version that still had those functions.</p>
<p><strong>NOTE: You may change those two settings anytime if you&#8217;d like to experiment, or your plans has changed. It is recommended to do full game rebuild after you do so though.</strong></p>
<p><strong>Mutable custom properties</strong></p>
<p>Since introduction Custom Properties could not be changed at runtime, they had to keep their default values set in the Editor throughout the course of the game. Now this restriction was eliminated and you can change any existing custom property in game script, using appropriate SetProperty and SetTextProperty functions:</p>
<p>, , , , , , , , ,</p>
<p>Besides, the number of properties is no longer limited by 30, you may make as much of them as you need for your game.</p>
<p><strong>Extended WFN fonts</strong></p>
<p>WFN (bitmap fonts) can now have up to 256 characters (as opposed to previously supported 128). You may need a specialized editor to create such fonts (for example, there is a good Editor plugin around meant for this task), and AGS will properly draw any of the 256 characters.</p>
<p><strong>New script features</strong></p>
<p>First of all, you can now create your own managed structs and objects of their type in script. The difference from common structs is that you use pointers to work with these objects, and can pass them around as function parameters and function return values as well. <strong>IMPORTANT: there is a big limitation for user-defined managed structs now, it is that they themselves cannot have members of pointer types (or dynamic arrays). We suppose that this restriction is only temporary and hope to remove it in future updates.</strong></p>
<p>You can now have some new forms of loop in your script, in addition to previously existing <code>while</code>. First is <code>do..while</code> kind of loop that always performs its commands at least once before checking end condition, second is <code>for</code> loop that lets you initialize internal variable, define end condition and write iteration - all in its header. Another introduced command is <code>switch</code>. One <code>switch</code> can replace a long list of <code>if</code> and <code>else if</code> blocks.</p>
<p>See: , , , , , ,</p>
<p><strong>Custom Dialog Options rendering extended</strong></p>
<p>In the past the custom dialog rendering was strictly tied to mouse movement and clicks. Now it is extended to give you more freedom in setting it up.</p>
<p>Two more related callbacks are added: <code>dialog_options_repexec</code> - that is an analogue of <code>repeatedly_execute</code> function, but is called only while dialog options are displayed, and <code>dialog_options_key_press</code> function, which is called whenever player presses a key when dialog options are on screen.</p>
<p>The <code>dialog_options_mouse_click</code> will now be called always, even if user clicks on the option, but on other hand option won&#8217;t be run without explicit command: .</p>
<p>Along with RunActiveOption, struct received another member function: . It forces options GUI to redraw itself, hence may be used to implement custom animation, or similar behavior.</p>
<p><strong>IMPORTANT: The <code>dialog_options_get_active</code> callback was deprecated and won&#8217;t be called, at all. You will need to slightly change the logic of your script. In most cases it may be enough to simply rename <code>dialog_options_get_active</code> to <code>dialog_options_repexec</code>.</strong></p>
<p><strong>NOTE: For backwards compatibility you may use an option in General Settings called &#8220;Use old-style custom dialog options API&#8221;. This will disable all the new stuff, but return <code>dialog_options_get_active</code> and make <code>dialog_options_mouse_click</code> behave as it did before.</strong></p>
<p>For detailed information see: .</p>
<p><strong>Some functions object-ised</strong></p>
<p>|l|l|</p>
<p><strong>REMINDER: you can also use &#8220;Script Compatibility Level&#8221; switch to enable old functions.</strong></p>
<p><strong>System limits update</strong></p>
<p>The maximal number of GUI Controls per GUI is no longer limited. The maximal number of script modules is no longer limited.</p>
<h1 id="anonymous-usage-information">Anonymous usage information</h1>
<p>AGS contains an option to send anonymous usage information to the AGS website. But what is it all about and why would you want to do so?</p>
<p><strong>What information does it send?</strong></p>
<p>The following is the information that AGS currently sends to the server.</p>
<ul>
<li><p>AGS version</p></li>
<li><p>Windows version (eg. XP, Vista)</p></li>
<li><p>.NET Framework version</p></li>
<li><p>Screen resolution</p></li>
</ul>
<p>That&#8217;s it. Nothing else is sent, no personal details or scripts from your games or anything like that.</p>
<p><strong>Why should I enable this?</strong></p>
<p>By having a clearer picture of what types of system people are running, it allows us to make better decisions about future versions of AGS. Here are some examples of where it will be useful:</p>
<ul>
<li><p>A serious bug is found that affects an older version of AGS. By knowing how many people are still using that version, we can decide whether to fix it or not.</p></li>
<li><p>We want to add a feature to the AGS Editor that would only work on newer versions of Windows. By knowing how many people are running these, it gives us a clear idea of how many people would stand to benefit and therefore whether it&#8217;s worth doing.</p></li>
<li><p>The AGS Editor GUIs can be designed to work with the screen resolutions that most people are using. By knowing what the minimum resolution is that people still use, that guides how the editor is designed.</p></li>
</ul>
<p>If you object to this very basic information being submitted to AGS, you can turn it off in the Preferences window. However, by doing so you may lose out in the long run if AGS features are developed that will not work on your system.</p>
<p><strong>When does it send this information?</strong></p>
<p>The editor contacts the AGS website once a month and sends it these details.</p>
<p><strong>Will games that I make contact the AGS website?</strong></p>
<p>No, only the editor does this.</p>
<h1 id="contacting-the-developers">Contacting the developers</h1>
<p>If you have any comments or suggestions, the first place to go is the AGS Forums. Linked off the main AGS website, it&#8217;s where the AGS community meets and you will find answers to many questions there.</p>
<p>If you think you&#8217;ve found a bug, if you need help or can&#8217;t get it to work, please check the following:</p>
<ul>
<li><p>That your question is not already answered in this manual. AGS has been painstakingly documented, so PLEASE read this manual through before asking a question.</p></li>
<li><p>If it is not covered in the manual, check the CHANGES.TXT file. If a new feature has been added then it will be described there, if it has not yet been added to this manual.</p></li>
<li><p>That you are using the most recent version of AGS. Use the &#8220;Check For Updates&#8221; option on the Help menu to make sure you&#8217;re up to date.</p></li>
<li><p>If you are receiving an error message, please write down the EXACT message and any other information which you think is appropriate. PLEASE WRITE THE EXACT ERROR MESSAGE TEXT, don&#8217;t just say &#8220;I get a message about it not being able to find a file&#8221;.</p></li>
<li><p>If you are getting lock-ups or techno-garbage printouts, please try to give a situation which causes the problem. For instance, if you notice that it only happens on certain screens, or only if there is an object, etc then please state that - it makes replying a lot easier and faster.</p></li>
</ul>
<p>Whatever the problem, if you can&#8217;t solve it then post to the Technical Forums for help and include all the details of the problem &#8211; there are lots of people there who will try to help you out.</p>
<p>Please don&#8217;t send us e-mails or private messages about problems using AGS. Post them to the forums, where others can help you and your question will then be searchable so that people in future can find out the answer without having to ask again!</p>
<p><em>NOTE: If you want to provide your game as an attachment to demonstrate a problem you are having, PLEASE COMPRESS IT using WinZip, PKZIP, etc and send it as a zip file.</em></p>
<p><strong>REMEMBER: When you post a question to the forums, give it at least 24 hours before posting again asking &#8220;WHY IS NOBODY HELPING ME?!?!?&#8221;. We don&#8217;t all read the forums 24/7, good things come to those who wait.</strong></p>
<p>The AGS website: http://www.adventuregamestudio.co.uk</p>
<p>The AGS forum: http://www.adventuregamestudio.co.uk/forums/</p>
<h1 id="credits">Credits</h1>
<ul>
<li><p>Adventure Game Studio was originally developed by Chris Jones.</p></li>
<li><p>The latter versions and engine ports to various platforms are product of collaborative work of the following people (in alphabetic order):</p>
<pre><code>  Benjamin Penney
  Benoit Pierre
  Bernhard Rosenkraenzer
  Cristian Morales Vega
  Edward Rudd
  Ferdinand Thiessen
  Francesco Ariis
  Gilad Shaham
  Ivan Mogilko
  Janet Gilbert
  Jochen Schleu
  Joe Lee
  Michael Rittenhouse
  Morgan Willcock
  Nick Sonneveld
  Ori Avtalion
  Paul Wilkinson
  Per Olav Flaten
  Piotr Wieczorek
  rofl0r
  Scott Baker
  Shane Stevens
  Shawn R. Walker
  Stefano Collavini
  Steve McCrea
  Steven Poulton
  Sunit Das
  Tobias Hansen
  Tom Vandepoele
  Tzach Shabtay</code></pre></li>
<li><p>Demo Quest III updated by RickJ.</p></li>
<li><p>The default icon bar graphics were done by Teemu Eramaa (teemue@nic.fi)</p></li>
<li><p>Windows editor original splash design by abstauber.</p></li>
<li><p>Windows editor icons by Klaus.</p></li>
<li><p>Blank Game template created by AGA.</p></li>
<li><p>Default Game template enhanced by Rui &#8220;Trovatore&#8221; Pires.</p></li>
<li><p>LEC 9-verb template by abstauber.</p></li>
<li><p>Verb Coin template by Electroshokker, graphics by Misj.</p></li>
<li><p>Lightweight BASS template by Bjorn Ludwig.</p></li>
<li><p>Hq2x and Hq3x scalers by Maxim Stepin.</p></li>
<li><p>Hi-colour fade out/in routines by Matthew Leverton.</p></li>
<li><p>Sprite anti-aliasing code by Michael Bukin.</p></li>
<li><p>Editor uses irrKlang .NET audio player (http://www.ambiera.com/irrklang)</p></li>
<li><p>Graphics and sound are courtesy of the Allegro graphics library by Shawn Hargreaves and many others. You can get it at http://alleg.sourceforge.net/</p></li>
<li><p>Script editor component is scintilla by Neil Hodgson. You can get it from http://www.scintilla.org</p></li>
<li><p>Animated GIF loader by Kevin Weiner.</p></li>
<li><p>TrueType font display uses ALFont by Javier Gonzalez and the Freetype project.</p></li>
<li><p>Windows engine uses libcda CD player by Peter Wang.</p></li>
<li><p>MP3 player is almp3 by Javier Gonzalez and the FreeAmp team. It uses the mpg123 MP3 decoder.</p></li>
<li><p>OGG player is alogg by Javier Gonzalez, using the Ogg Vorbis decoder, which is available from http://www.xiph.org/</p></li>
<li><p>OGG Theora player is APEG by Chris Robinson, using the Ogg Theora decoder, which is available from http://www.xiph.org/</p></li>
<li><p>Windows MOD/XM/S3M/IT player is DUMB, (C) 2001-2003 Ben Davis, Robert J Ohannessian and Julien Cugniere. You can get it from http://dumb.sf.net/</p></li>
<li><p>DOS/Linux engine use JGMOD mod player by Guan Foo Wah. You can find it at http://surf.to/jgmod</p></li>
<li><p>Executables compressed with UPX v1.22w (c) 1996-2002 by Laszlo Molnar &amp; Markus F.X.J. Oberhumer</p></li>
</ul>
<p><strong>AGS Demo Game II Credits:</strong></p>
<ul>
<li><p>Written by Relight, cornjob, Chrille, Spyros and Dark Stalkey.</p></li>
<li><p>Additional material by Kairus.</p></li>
<li><p>Intro music by Mods.</p></li>
<li><p>Original backgrounds and main character were drawn by D281@aol.com.</p></li>
</ul>
<p>Thanks to all the AGS beta testers for all their suggestions and bug reports - Cornjob, AGC2, AGA, Relight, c_leksutin, Spyros and the rest of the team.</p>
